"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ref(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?ddrWatcher(t,e):new Proxy(_.isPlainObject(t)?t:{value:t},{get:function(t,e,n){return e in t?_.isNumber(t[e])?Number(t[e]):Reflect.get(t,e,n):null}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ddrBrowserTab=ddrBrowserTab,exports.ddrCssVar=ddrCssVar,exports.ddrWatcher=ddrWatcher,exports.getDataByDot=getDataByDot,exports.getUrlArgs=getUrlArgs,exports.getUrlSegment=getUrlSegment,exports.metaKeys=metaKeys,exports.mouseClick=mouseClick,exports.ref=ref,exports.tapEventInfo=tapEventInfo;var getHandlers=Symbol("handlers"),setHandlers=Symbol("handlers");function ddrWatcher(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(t=_.isPlainObject(t)?t:{proxedObj:t})[getHandlers]=[],t[setHandlers]=[],t.observe=function(t){var e,n,r;_.isFunction(t)?r=t:_.isPlainObject(t)&&(_.isString(null==t?void 0:t.get)?window[null==t?void 0:t.get]=function(t){return e=t}:e=null==t?void 0:t.get,_.isString(null==t?void 0:t.set)?window[null==t?void 0:t.set]=function(t){return n=t}:n=null==t?void 0:t.set),r&&(this[getHandlers].push(r),this[setHandlers].push(r)),e&&this[getHandlers].push(e),n&&this[setHandlers].push(n)},_.isString(e)?window[e]=function(e){return t.observe(e)}:t.observe(e),new Proxy(t,{get:function(t,e,n){return t[getHandlers]&&t[getHandlers].forEach((function(n){return n({type:"get",target:t,prop:e,value:t[e]})})),Reflect.get.apply(Reflect,arguments)},set:function(t,e,n,r){var o=Reflect.set.apply(Reflect,arguments);return o&&t[setHandlers]&&t[setHandlers].forEach((function(r){return r({type:"set",target:t,prop:e,value:n})})),o}})}function getDataByDot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t||!e)return!1;var n=pregSplit(e,"."),r=createCounter();return function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return o==n.length?e:!!e[n[o]]&&t(e[n[o]],n,r())}(t,n)}function metaKeys(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_.isNull(t))throw new Error("metaKeys ошибка! Не передан event!");var e=t.shiftKey,n=t.ctrlKey,r=t.altKey,o=t.metaKey;return{isShiftKey:e,isCtrlKey:n||o,isCommandKey:n||o,isAltKey:r,isOptionKey:r,noKeys:!e&&!r&&!(n||o),isActiveKey:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!_.isNull(t)&&(_.isArray(l)?!(!["ctrl","command"].some((function(t){return-1!==l.indexOf(t)}))||!n&&!o)||(!(!["shift"].some((function(t){return-1!==l.indexOf(t)}))||!e)||!(!["alt","option"].some((function(t){return-1!==l.indexOf(t)}))||!r)):!(-1===["ctrl","command"].indexOf(l)||!n&&!o)||(!("shift"!=l||!e)||!(-1===["alt","option"].indexOf(l)||!r)))}}}function mouseClick(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_.isNull(t))throw new Error("mouseClick ошибка! Не передан event!");var e=t.which;return{isLeftClick:1==e,isRightClick:3==e,isCenterClick:2==e}}function ddrCssVar(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_.isNull(t))return!1;var n=t.replace("--","");return _.isNull(e)?getComputedStyle(document.documentElement).getPropertyValue("--"+n):document.documentElement.style.setProperty("--"+n,e)}function ddrBrowserTab(t,e){$(window).load((function(){window.focus()})),$(window).bind("focus",(function(){t&&"function"==typeof t&&t()})),$(window).bind("blur",(function(){e&&"function"==typeof e&&e()}))}function tapEventInfo(t,e){var n,r,o,l="";if("mobile"!=thisDevice||isIos?(r=t.target.attributes||!1,o=t.target.className||!1):(r=null!=t.changedTouches&&t.changedTouches[0].target.attributes,o=null!=t.changedTouches&&t.changedTouches[0].target.className),r.length&&$.each(r,(function(t,e){l+=" "+e.name})),n={classes:!(!o||"string"!=typeof o)&&o.split(" "),attributes:!(!l||"string"!=typeof l)&&l.trim().split(" ")},null!=e&&e.class){if(n.classes){var i=!1;return"object"==_typeof(e.class)?($.each(e.class,(function(t,e){-1!=n.classes.indexOf(e)&&(i=!0)})),i):-1!=n.classes.indexOf(e.class)}return!1}if(null!=e&&e.attribute){if(n.attributes){i=!1;return"object"==_typeof(e.attribute)?($.each(e.attribute,(function(t,e){-1!=n.attributes.indexOf(e)&&(i=!0)})),i):-1!=n.attributes.indexOf(e.attribute)}return!1}return!(!n.classes&&!n.attributes)&&n}function getUrlArgs(t){var e,n=location.search.substr(1,location.search.length).split("&"),r={};return $.each(n,(function(t,n){if(""==n)return!0;e=n.split("="),r[e[0]]=e[1]})),null!=t&&null!=r[t]?r[t]:(null==t||null!=r[t])&&(Object.keys(r).length>0?r:null)}function getUrlSegment(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(e?{pathname:e}:window.location).pathname.split("/").filter(Boolean)[t-1]||!1}