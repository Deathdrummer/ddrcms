window.changeMod=async(t=null,n=!1)=>{if(!t||n)return!1;const o=new URLSearchParams;o.append("controller","site"),o.append("mod",t),fetch("/admin/modifications/set_modification",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},body:o.toString()}).then((t=>t.json())).then((t=>{t&&pageReload()})).catch((t=>console.error("Ошибка:",t)))},window.ddrFormSubmit=async(t,n)=>{event.preventDefault();const o=event.target;await import("/public/js/plugins/lodash.js");const i=await loadScript("plugins/ddrQuery.js",!0),e=await callFunc(window[t],o);if(void 0!==typeof e&&!1===e)return;const a=(await loadScript("plugins/ddrForm.js",!0))(o),{data:r,error:c,status:d,headers:s}=await i.post("admin/common/send_email",a);callFunc(window[n],!!r,c||null)},window.pageReload=function(){location.reload()},window.callFunc=function(t,...n){if(_.isFunction(t))return _.isFunction(t)?t(...n):void 0},window.loadScript=async function(t=null,n=!1){if(!t)return!1;t.endsWith(".js")&&(t=t.replace(".js",""));try{return n?(await import(`/public/js/${t}.js`)).default:await import(`/public/js/${t}.js`)}catch(t){throw console.log(t),t}};