setBaseScripts=function(t){null==t&&(t="body"),$(t).find("[editor]:not(.activated)").length>0&&initEditors(),ddrSelect(t),ddrPhonecodes(),ddrInitTabs(),$(t).find("[phonemask]:not([multicode])").each((function(){var t=$(this).attr("phonemask")||"(^^^) ^^^-^^-^^",e=$(this).attr("code")||"+7",i=$(this).attr("placeholder")||(e+" "+t).replace(/[\^&]/g,"_");$(this).mask(e+" "+t,{autoclear:!1}).attr({placeholder:i,type:"tel"})})),$(t).find("[mask]").each((function(){var t,e=$(this).attr("mask");if(!e)return!0;t=$(this).attr("placeholder")||e.replace(/[\^&]/g,"_"),$(this).mask(e,{autoclear:!1}).attr({placeholder:t})})),$(t).find("[numberformat]").each((function(){if(""!=(t=$(this).attr("numberformat"))){var t,e=null!=(t=t.split("|"))[0]?t[0]:2,i=null!=t[1]?t[1]:".",a=null!=t[2]?t[2]:" ";$(this).number(!0,e,i,a)}else $(this).number(!0,2,"."," ")})),$(t).find(".phone ,[phone]").each((function(){$(this).attr("code");$(this).attr("href","tel:"+$(this).text().trim().replace(/-|\(|\)|\s/g,"").replace(/^8/,"+7"))})),$(t).find(".whatsapp, [whatsapp]").each((function(){var t=$(this).data("message"),e=$(this).text().trim().replace(/-|\(|\)|\s/g,"").replace(/^8/,"+7");$(this).attr("code");$(this).attr("href","whatsapp://send?phone="+e+"&abid="+e+"&text="+t)})),$(t).find(".email, [email]").each((function(){$(this).attr("href","mailto:"+$(this).text().trim())})),$(t).find("table.fieldset").length>0&&$(t).find("table.fieldset").changeInputs((function(t,e){"contenteditable"==e.st&&$(t).closest(".textarea").addClass("changed"),$(t).parent().addClass("changed")})),/#ddrpopup/.test(t)&&$(t).changeInputs((function(t,e){"contenteditable"==e.st&&$(t).closest(".textarea").addClass("changed"),$(t).parent().addClass("changed")}))},jQuery(document).ready((function(e){setBaseScripts(),e(document).on("focus gesturestart",(function(t){t.preventDefault()})),e("body").on("focus","input, textarea, select",(function(){e(this).parent("div").addClass("focused")})),e("body").on("focus",".file",(function(){e(this).addClass("focused")})),e("body").on("blur","input, textarea, select",(function(){e(this).parent("div").removeClass("focused")})),e("body").on("blur",".file",(function(){e(this).addClass("focused")})),e("body").on("focus","input.error, textarea.error, select.error, .field.error, .textarea.error, .select.error, .file.error",(function(){var t=this;e(t).removeClass("error"),setTimeout((function(){e(t).find("span.error").remove(),e(t).siblings("span.error").remove()}),160)})),e("body").on(tapEvent,".file.error",(function(){var t=this;e(t).removeClass("error"),setTimeout((function(){e(t).find("span.error").remove()}),160)})),e("body").on("submit","form:not([action])",(function(t){return t.preventDefault(),!1})),e("body").on("focus",'input[type="text"]:not([noedit]), input[type="password"]:not([noedit]), input[type="email"]:not([noedit]), input[type="tel"]:not([noedit])',(function(){e(this).removeAttrib("readonly")})),0==/iPhone|iPad|iPod/i.test(navigator.userAgent)&&e("body").on("blur",'input[type="text"]:not([noedit]), input[type="password"]:not([noedit]), input[type="email"]:not([noedit]), input[type="tel"]:not([noedit])',(function(){e(this).setAttrib("readonly")})),e("body").on("change",'input[type="checkbox"]',(function(){e(this)[0].hasAttribute("checked")?(e(this).prop("checked",!1),e(this)[0].removeAttribute("checked")):(e(this).prop("checked",!0),e(this)[0].setAttribute("checked",""))})),e(window).scrollTop()>2*e(window).height()?e("[scrolltop]").addClass("visible"):e("[scrolltop]").removeClass("visible"),e(window).on("scroll",(function(){e(this).scrollTop()>2*e(window).height()?e("[scrolltop]").addClass("visible"):e("[scrolltop]").removeClass("visible hover")})),e("[scrolltop]").on("click",(function(t){t.preventDefault(),e("html, body").animate({scrollTop:0},800,"easeInOutQuint")})),e("[scrolltop]").on("tap click mouseenter",(function(){e(this).addClass("hover")})),e("[scrolltop]").on("mouseleave",(function(){e(this).removeClass("hover")})),e("body").find("[parallax]").each((function(){var t=e(this).attr("parallax").split("|");e(this).parallax({imageSrc:t[0],speed:parseFloat(t[1])})})),e("body").on(tapEvent,".tabstitles li:not(.active)",(function(){if(e(this).find("[ignore]:hover").length>0)return!1;var t=this,i=location.hash.substr(1,location.hash.length).split("."),a=e(t).attr("id"),s=i[0],n=e(t).closest(".tabstitles"),o=e(n).siblings(".tabscontent");e(t).removeClass("error"),null==i[2]&&e("#"+s).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").each((function(){e(this).children("li").removeClass("active"),e(this).children("li:first").addClass("active"),e(this).siblings(".tabscontent").find("[tabid]").removeClass("visible"),e(this).siblings(".tabscontent").find("[tabid]:first").addClass("visible")})),e(n).children("li").removeClass("active"),e(t).addClass("active"),0==e(n).hasClass("sub")?location.hash=s+"."+a:(i[1]||(i[1]=e(t).closest("#"+s).find(".tabstitles:not(.sub)").children(":first").attr("id")),location.hash=s+"."+i[1]+"."+a),0==e(o).children('[tabid="'+a+'"]').hasClass("visible")&&(e(o).children("[tabid]").removeClass("visible"),e(o).children('[tabid="'+a+'"]').addClass("visible"),e(document).trigger("tabsChange",a)),initEditors()})),e("body").on(tapEvent,"[showpassword]",(function(){e(this).parent().find('input[type="password"]').length>0?(e(this).parent().find('input[type="password"]').prop("type","text"),e(this).removeClass("fa-eye").addClass("fa-eye-slash").prop("title","Скрыть пароль")):e(this).parent().find('input[type="text"]').length>0&&(e(this).parent().find('input[type="text"]').prop("type","password"),e(this).removeClass("fa-eye-slash").addClass("fa-eye").prop("title","Показать пароль"))})),e("#adminSetModifications").on("change",(function(){var t=e(this).val();e.post("/admin/modifications/set_modification",{controller:"admin",mod:t},(function(t){t&&pageReload()}),"json")})),e("body").on(tapEvent,"[modification]",(function(){var t=e(this).attr("modification");e.post("/admin/modifications/set_modification",{controller:"site",mod:t},(function(t){t&&pageReload()}),"json")})),e("body").on(tapEvent,"[ddrsort]",(function(){ddrSort(this)})),e("body").on("focus","[ddrtextarealist]",(function(){var i,a=this,s=e(a).attr("ddrtextarealist"),n=(e(a).attr("load"),e(a).attr("join")||";");if(e("body").find("[ddraladd]").off(tapEvent),e("body").find(".textarea__addblock").find("input, select").off("keyup"),s){var o="",r="",p=s.split("|");e.each(p,(function(i,a){if(!a)return!0;let s=a.split(";");if(t=s[0]||null,l=s[1]||null,d=s[2]||null,c=s[3]||null,!t)return!0;if(r+='<div class="dcol'+(c?"-auto "+c:"")+'">',r+='<label class="textareafields__label" for="ddrtextarealistfield'+i+'">'+l+"</label>","select"==t){let t=d.split(",");r+='<select id="ddrtextarealistfield'+i+'" tabid="'+i+'">',e.each(t,(function(t,e){if(!e)return!0;var i=e.split(":"),a=i[0],s=null!=i[1]?i[1]:i[0];r+='<option value="'+a+'">'+s+"</option>"})),r+="</select>"}else if("checkbox"==t){let t=1==d?" checked":"";r+='<div class="checkbox">',r+='<div class="checkbox__item checkbox__item_ver2 checkbox__item_small h-24px">',r+="<div>",r+='<input id="ddrtextarealistfield'+i+'" type="checkbox"'+t+' tabid="'+i+'" />',r+='<label for="ddrtextarealistfield'+i+'"></label>',r+="</div>",r+="</div>",r+="</div>"}else if("number"==t){var n=null!=d?' value="'+d+'"':"";r+='<input id="ddrtextarealistfield'+i+'" type="number"'+n+' showrows tabid="'+i+'" />'}else if("text"==t){n=null!=d?' value="'+d+'"':"";r+='<input id="ddrtextarealistfield'+i+'" type="text"'+n+' tabid="'+i+'" />'}r+="</div>"}))}function h(){var t=[],i=e(a).parent(".textarea");e(a).siblings(".textarea__addblock").find("input, select").each((function(i,a){"checkbox"==a.type?t.push(e(a).is(":checked")?1:0):t.push(e(a).val())})),""!=e(a).val()?e(a).val(e(a).val()+"\n"+t.join(n)):e(a).val(t.join(n)),i.length&&e(i).addClass("changed"),e(a).siblings(".textarea__addblock").find("input").val(""),e(a).siblings(".textarea__addblock").find("select").children("option").removeAttrib("selected"),e(a).siblings(".textarea__addblock").find("select").children("option:first").prop("selected",!0),e(a).scrollTop(999999999),e(a).siblings(".textarea__addblock").find('[class ^= "dcol"]:first').find("inpus, select").focus()}e(a).setAttrib("touch","textarea_opened"),o+='<div class="textarea__addblock">',o+='<div class="textareafields"><div class="drow dgutter-4">'+r+"</div></div>",o+='<div class="textareabutton"><button ddraladd title="Добавить строку"><i class="fa fa-plus"></i></button></div>',o+="</div>",0==e(a).siblings(".textarea__addblock").length&&e(a).after(o),i=e(a).siblings(".textarea__addblock").height(),e(a).siblings(".textarea__addblock").css("bottom",-i+"px"),e(a).siblings(".textarea__addblock").find("input, select").on("keyup",(function(t){13==t.keyCode&&h()})),e(a).siblings(".textarea__addblock").find("[ddraladd]").on(tapEvent,(function(){h()}))}))}));