/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
var a,b,factory,t,d,r,m,g,n,e;function jBox(type,options){this.options={id:null,width:"auto",height:"auto",minWidth:null,maxHeight:null,minWidth:null,maxHeight:null,attach:null,trigger:"click",preventDefault:!1,title:null,content:null,getTitle:null,getContent:null,ajax:{url:null,data:"",reload:!1,getData:"data-ajax",setContent:!0,spinner:!0},target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},adjustPosition:!1,adjustTracker:!1,adjustDistance:5,fixed:!1,reposition:!1,repositionOnOpen:!0,repositionOnContent:!0,pointer:!1,pointTo:"target",fade:180,animation:null,theme:"Default",addClass:"",overlay:!1,zIndex:1e4,delayOpen:0,delayClose:0,closeOnEsc:!1,closeOnClick:!1,closeOnMouseleave:!1,closeButton:!1,constructOnInit:!1,blockScroll:!1,appendTo:jQuery("body"),draggable:null,dragOver:!0,onInit:function(){},onCreated:function(){},onOpen:function(){},onClose:function(){},onCloseComplete:function(){},confirmButton:"Submit",cancelButton:"Cancel",confirm:null,cancel:null,autoClose:7e3,color:null,stack:!0,audio:!1,volume:100,src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:600,imageSize:"contain"},this.defaultOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:!0,adjustPosition:!0,reposition:!0},Mouse:{target:"mouse",position:{x:"right",y:"bottom"},offset:15,trigger:"mouseenter",adjustPosition:"flip"},Modal:{target:jQuery(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:!0,overlay:!0,animation:"zoomOut"},Confirm:{target:jQuery(window),fixed:!0,attach:jQuery("[data-confirm]"),getContent:"data-confirm",content:"Do you really want to do this?",minWidth:320,maxWidth:460,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:!0,overlay:!0,animation:"zoomOut",preventDefault:!0,_onAttach:function(t){if(!this.options.confirm){var i=t.attr("onclick")?t.attr("onclick"):t.attr("href")?t.attr("target")?'window.open("'+t.attr("href")+'", "'+t.attr("target")+'");':'window.location.href = "'+t.attr("href")+'";':"";t.prop("onclick",null).data("jBox-Confirm-submit",i)}},_onCreated:function(){this.footer=jQuery('<div class="jBox-Confirm-footer"/>'),jQuery('<div class="jBox-Confirm-button jBox-Confirm-button-cancel"/>').html(this.options.cancelButton).click(function(){this.options.cancel&&this.options.cancel(),this.close()}.bind(this)).appendTo(this.footer),this.submitButton=jQuery('<div class="jBox-Confirm-button jBox-Confirm-button-submit"/>').html(this.options.confirmButton).appendTo(this.footer),this.footer.appendTo(this.container)},_onOpen:function(){this.submitButton.off("click.jBox-Confirm"+this.id).on("click.jBox-Confirm"+this.id,function(){this.options.confirm?this.options.confirm():eval(this.source.data("jBox-Confirm-submit")),this.close()}.bind(this))}},Notice:{target:jQuery(window),fixed:!0,position:{x:20,y:20},attributes:{x:"right",y:"top"},animation:"zoomIn",closeOnClick:"box",_onInit:function(){this.open(),this.options.delayClose=this.options.autoClose,this.options.delayClose&&this.close()},_onCreated:function(){this.options.color&&this.wrapper.addClass("jBox-Notice-color jBox-Notice-"+this.options.color),this.wrapper.data("jBox-Notice-position",this.options.attributes.x+"-"+this.options.attributes.y)},_onOpen:function(){jQuery.each(jQuery(".jBox-Notice"),function(t,i){return(i=jQuery(i)).attr("id")!=this.id&&i.data("jBox-Notice-position")==this.options.attributes.x+"-"+this.options.attributes.y?this.options.stack?void i.css("margin-"+this.options.attributes.y,parseInt(i.css("margin-"+this.options.attributes.y))+this.wrapper.outerHeight()+10):void i.data("jBox").close({ignoreDelay:!0}):void 0}.bind(this)),this.options.audio&&this.audio({url:this.options.audio,valume:this.options.volume})},_onCloseComplete:function(){this.destroy()}},Image:{target:jQuery(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:!0,overlay:!0,animation:"zoomOut",width:800,height:533,attach:jQuery("[data-jbox-image]"),preventDefault:!0,_onInit:function(){this.images=this.currentImage={},this.imageZIndex=1,this.attachedElements&&jQuery.each(this.attachedElements,function(t,i){if(!(i=jQuery(i)).data("jBox-image-gallery")){var s=i.attr(this.options.gallery)||"default";!this.images[s]&&(this.images[s]=[]),this.images[s].push({src:i.attr(this.options.src),label:i.attr(this.options.imageLabel)||""}),"title"==this.options.imageLabel&&i.removeAttr("title"),i.data("jBox-image-gallery",s),i.data("jBox-image-id",this.images[s].length-1)}}.bind(this));var t=function(t,i,s,o){if(!jQuery("#jBox-image-"+t+"-"+i).length){var e=jQuery("<div/>",{id:"jBox-image-"+t+"-"+i,class:"jBox-image-container"}).css({backgroundImage:"url("+this.images[t][i].src+")",backgroundSize:this.options.imageSize,opacity:o?1:0,zIndex:s?0:this.imageZIndex++}).appendTo(this.content);jQuery("<div/>",{id:"jBox-image-label-"+t+"-"+i,class:"jBox-image-label"+(o?" active":"")}).html(this.images[t][i].label).appendTo(this.imageLabel),!o&&!s&&e.animate({opacity:1},this.options.imageFade)}}.bind(this),i=function(t,i){jQuery(".jBox-image-label.active").removeClass("active"),jQuery("#jBox-image-label-"+t+"-"+i).addClass("active")};this.showImage=function(s){if("open"!=s){var o=this.currentImage.gallery;e=(e=this.currentImage.id+(1*("prev"==s)?-1:1))>this.images[o].length-1?0:0>e?this.images[o].length-1:e}else{o=this.source.data("jBox-image-gallery");var e=this.source.data("jBox-image-id");jQuery(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:this.images[o].length>1?"block":"none"})}this.currentImage={gallery:o,id:e},jQuery("#jBox-image-"+o+"-"+e).length?(jQuery("#jBox-image-"+o+"-"+e).css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},"open"==s?0:this.options.imageFade),i(o,e)):(this.wrapper.addClass("jBox-loading"),jQuery('<img src="'+this.images[o][e].src+'">').load(function(){t(o,e,!1),i(o,e),this.wrapper.removeClass("jBox-loading")}.bind(this)));var n=e+1;n=n>this.images[o].length-1?0:0>n?this.images[o].length-1:n,!jQuery("#jBox-image-"+o+"-"+n).length&&jQuery('<img src="'+this.images[o][n].src+'">').load((function(){t(o,n,!0)}))}},_onCreated:function(){this.imageLabel=jQuery("<div/>",{id:"jBox-image-label"}).appendTo(this.wrapper),this.wrapper.append(jQuery("<div/>",{class:"jBox-image-pointer-prev",click:function(){this.showImage("prev")}.bind(this)})).append(jQuery("<div/>",{class:"jBox-image-pointer-next",click:function(){this.showImage("next")}.bind(this)}))},_onOpen:function(){jQuery("body").addClass("jBox-image-open"),jQuery(document).on("keyup.jBox-"+this.id,function(t){37==t.keyCode&&this.showImage("prev"),39==t.keyCode&&this.showImage("next")}.bind(this)),this.showImage("open")},_onClose:function(){jQuery("body").removeClass("jBox-image-open"),jQuery(document).off("keyup.jBox-"+this.id)},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0)}}},"string"==jQuery.type(type)&&(this.type=type,type=this.defaultOptions[type]),this.options=jQuery.extend(!0,this.options,type,options),null===this.options.id&&(this.options.id="jBoxID"+jBox._getUniqueID()),this.id=this.options.id,("center"==this.options.position.x&&"x"==this.options.outside||"center"==this.options.position.y&&"y"==this.options.outside)&&(this.options.outside=!1),(!this.options.outside||"xy"==this.options.outside)&&(this.options.pointer=!1),"object"!=jQuery.type(this.options.offset)&&(this.options.offset={x:this.options.offset,y:this.options.offset}),this.options.offset.x||(this.options.offset.x=0),this.options.offset.y||(this.options.offset.y=0),this.options.adjustDistance="object"!=jQuery.type(this.options.adjustDistance)?{top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}:jQuery.extend({top:5,left:5,right:5,bottom:5},this.options.adjustDistance),this.align=this.options.outside&&"xy"!=this.options.outside?this.options.position[this.options.outside]:"center"!=this.options.position.y&&"number"!=jQuery.type(this.options.position.y)?this.options.position.x:"center"!=this.options.position.x&&"number"!=jQuery.type(this.options.position.x)?this.options.position.y:this.options.attributes.x,this.options.outside&&"xy"!=this.options.outside&&(this.outside=this.options.position[this.options.outside]);var userAgent=navigator.userAgent.toLowerCase();return this.IE8=-1!=userAgent.indexOf("msie")&&8==parseInt(userAgent.split("msie")[1]),this.prefix=-1!=userAgent.indexOf("webkit")?"-webkit-":"",this._getOpp=function(t){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[t]},this._getXY=function(t){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[t]},this._getTL=function(t){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[t]},this._supportsSVG=function(){return document.createElement("svg").getAttributeNS},this._createSVG=function(t,i){var s=document.createElementNS("http://www.w3.org/2000/svg",t);return jQuery.each(i,(function(t,i){s.setAttribute(i[0],i[1]||"")})),s},this._appendSVG=function(t,i){return i.appendChild(t)},this._create=function(){if(!this.wrapper){if(this.wrapper=jQuery("<div/>",{id:this.id,class:"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")+(this.IE8?" jBox-IE8":"")}).css({position:this.options.fixed?"fixed":"absolute",display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this),this.options.closeOnMouseleave&&this.wrapper.mouseleave(function(t){!this.source||t.relatedTarget!=this.source[0]&&-1===jQuery.inArray(this.source[0],jQuery(t.relatedTarget).parents("*"))&&this.close()}.bind(this)),"box"==this.options.closeOnClick&&this.wrapper.on("touchend click",function(){this.close({ignoreDelay:!0})}.bind(this)),this.container=jQuery("<div/>",{class:"jBox-container"}).appendTo(this.wrapper),this.content=jQuery("<div/>",{class:"jBox-content"}).css({width:this.options.width,height:this.options.height,minWidth:this.options.minWidth,minHeight:this.options.minHeight,maxWidth:this.options.maxWidth,maxHeight:this.options.maxHeight}).appendTo(this.container),this.options.closeButton){if(this.closeButton=jQuery("<div/>",{class:"jBox-closeButton jBox-noDrag"}).on("touchend click",function(){this.isOpen&&this.close({ignoreDelay:!0})}.bind(this)),this._supportsSVG()){var t=this._createSVG("svg",[["viewBox","0 0 24 24"]]);this._appendSVG(this._createSVG("path",[["d","M22.2,4c0,0,0.5,0.6,0,1.1l-6.8,6.8l6.9,6.9c0.5,0.5,0,1.1,0,1.1L20,22.3c0,0-0.6,0.5-1.1,0L12,15.4l-6.9,6.9c-0.5,0.5-1.1,0-1.1,0L1.7,20c0,0-0.5-0.6,0-1.1L8.6,12L1.7,5.1C1.2,4.6,1.7,4,1.7,4L4,1.7c0,0,0.6-0.5,1.1,0L12,8.5l6.8-6.8c0.5-0.5,1.1,0,1.1,0L22.2,4z"]]),t),this.closeButton.append(t)}else this.wrapper.addClass("jBox-nosvg");("box"==this.options.closeButton||!0===this.options.closeButton&&!this.options.overlay&&!this.options.title)&&(this.wrapper.addClass("jBox-closeButton-box"),this.closeButton.appendTo(this.container))}if(this.wrapper.appendTo(this.options.appendTo),this.options.pointer){if(this.pointer={position:"target"!=this.options.pointTo?this.options.pointTo:this._getOpp(this.outside),xy:this._getXY("target"!=this.options.pointTo?this.options.pointTo:this.outside),align:"center",offset:0},this.pointer.element=jQuery("<div/>",{class:"jBox-pointer jBox-pointer-"+this.pointer.position}).appendTo(this.wrapper),this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()},"string"==jQuery.type(this.options.pointer)){var i=this.options.pointer.split(":");i[0]&&(this.pointer.align=i[0]),i[1]&&(this.pointer.offset=parseInt(i[1]))}this.pointer.alignAttribute="x"==this.pointer.xy?"bottom"==this.pointer.align?"bottom":"top":"right"==this.pointer.align?"right":"left",this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]),this.pointer.element.css(this.pointer.alignAttribute,"center"==this.pointer.align?"50%":0).css("margin-"+this.pointer.alignAttribute,this.pointer.offset),this.pointer.margin={},this.pointer.margin["margin-"+this.pointer.alignAttribute]=this.pointer.offset,"center"==this.pointer.align&&this.pointer.element.css(this.prefix+"transform","translate("+("y"==this.pointer.xy?-.5*this.pointer.dimensions.x+"px":0)+", "+("x"==this.pointer.xy?-.5*this.pointer.dimensions.y+"px":0)+")"),this.pointer.element.css("x"==this.pointer.xy?"width":"height",parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width"))),this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position)}if(this.setContent(this.options.content,!0),this.setTitle(this.options.title,!0),this.options.draggable)("title"==this.options.draggable?this.titleContainer:this.options.draggable.length>0?this.options.draggable:this.options.draggable.selector?jQuery(this.options.draggable.selector):this.wrapper).addClass("jBox-draggable").on("mousedown",function(t){if(2!=t.button&&!jQuery(t.target).hasClass("jBox-noDrag")&&!jQuery(t.target).parents(".jBox-noDrag").length){this.options.dragOver&&this.wrapper.css("zIndex")<=jBox.zIndexMax&&(jBox.zIndexMax+=1,this.wrapper.css("zIndex",jBox.zIndexMax));var i=this.wrapper.outerHeight(),s=this.wrapper.outerWidth(),o=this.wrapper.offset().top+i-t.pageY,e=this.wrapper.offset().left+s-t.pageX;jQuery(document).on("mousemove.jBox-draggable-"+this.id,function(t){this.wrapper.offset({top:t.pageY+o-i,left:t.pageX+e-s})}.bind(this)),t.preventDefault()}}.bind(this)).on("mouseup",function(){jQuery(document).off("mousemove.jBox-draggable-"+this.id)}.bind(this)),jBox.zIndexMax=jBox.zIndexMax?Math.max(jBox.zIndexMax,this.options.zIndex):this.options.zIndex;this.options.onCreated.bind(this)(),this.options._onCreated&&this.options._onCreated.bind(this)()}},this.options.constructOnInit&&this._create(),this.options.attach&&this.attach(),this._positionMouse=function(t){this.pos={left:t.pageX,top:t.pageY};var i=function(t,i){return"center"==this.options.position[i]?void(this.pos[t]-=Math.ceil(this.dimensions[i]/2)):(this.pos[t]+=t==this.options.position[i]?-1*this.dimensions[i]-this.options.offset[i]:this.options.offset[i],this.pos[t])}.bind(this);this.wrapper.css({left:i("left","x"),top:i("top","y")}),this.targetDimensions={x:0,y:0,left:t.pageX,top:t.pageY},this._adjustPosition()},this._attachEvents=function(){if(this.options.closeOnEsc&&jQuery(document).on("keyup.jBox-"+this.id,function(t){27==t.keyCode&&this.close({ignoreDelay:!0})}.bind(this)),(!0===this.options.closeOnClick||"body"==this.options.closeOnClick)&&jQuery(document).on("touchend.jBox-"+this.id+" click.jBox-"+this.id,function(t){this.blockBodyClick||"body"==this.options.closeOnClick&&(t.target==this.wrapper[0]||this.wrapper.has(t.target).length)||this.close({ignoreDelay:!0})}.bind(this)),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&!this.fixed&&this.outside){var t,i=0,o=function(){var o=(new Date).getTime();t||(o-i>150&&(this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition(),i=o),t=setTimeout(function(){t=null,i=(new Date).getTime(),this.options.reposition&&this.position(),this.options.adjustTracker&&this._adjustPosition()}.bind(this),150))}.bind(this);this.options.adjustTracker&&"resize"!=this.options.adjustTracker&&jQuery(window).on("scroll.jBox-"+this.id,function(){o()}.bind(this)),(this.options.adjustTracker&&"scroll"!=this.options.adjustTracker||this.options.reposition)&&jQuery(window).on("resize.jBox-"+this.id,function(){o()}.bind(this))}"mouse"==this.options.target&&jQuery("body").on("mousemove.jBox-"+this.id,function(t){this._positionMouse(t)}.bind(this))},this._detachEvents=function(){this.options.closeOnEsc&&jQuery(document).off("keyup.jBox-"+this.id),(!0===this.options.closeOnClick||"body"==this.options.closeOnClick)&&jQuery(document).off("touchend.jBox-"+this.id+" click.jBox-"+this.id),(this.options.adjustPosition&&this.options.adjustTracker||this.options.reposition)&&(jQuery(window).off("scroll.jBox-"+this.id),jQuery(window).off("resize.jBox-"+this.id)),"mouse"==this.options.target&&jQuery("body").off("mousemove.jBox-"+this.id)},this._addOverlay=function(){this.overlay||(this.overlay=jQuery("#jBox-overlay").length?jQuery("#jBox-overlay").css({zIndex:Math.min(jQuery("#jBox-overlay").css("z-index"),this.options.zIndex-1)}):jQuery("<div/>",{id:"jBox-overlay"}).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(jQuery("body")),("overlay"==this.options.closeButton||!0===this.options.closeButton)&&(jQuery("#jBox-overlay .jBox-closeButton").length>0?jQuery("#jBox-overlay .jBox-closeButton").on("touchend click",function(){this.isOpen&&this.close({ignoreDelay:!0})}.bind(this)):this.overlay.append(this.closeButton)),"overlay"==this.options.closeOnClick&&this.overlay.on("touchend click",function(){this.isOpen&&this.close({ignoreDelay:!0})}.bind(this)));var t=this.overlay.data("jBox")||{};t["jBox-"+this.id]=!0,this.overlay.data("jBox",t),"block"!=this.overlay.css("display")&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.overlay.css({display:"block"})}.bind(this)}):this.overlay.css({display:"block",opacity:1}))},this._removeOverlay=function(){if(this.overlay){var t=this.overlay.data("jBox");delete t["jBox-"+this.id],this.overlay.data("jBox",t),jQuery.isEmptyObject(t)&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:!1,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"})}.bind(this)}):this.overlay.css({display:"none",opacity:0}))}},this._generateCSS=function(){if(!this.IE8){"object"!=jQuery.type(this.options.animation)&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]),this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":")),this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":")),this.options.animation.openDirection=this.options.animation.open?this.options.animation.open[1]:null,this.options.animation.closeDirection=this.options.animation.close?this.options.animation.close[1]:null,this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]),this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]),this.options.animation.open&&(this.options.animation.open+="Open"),this.options.animation.close&&(this.options.animation.close+="Close");var t={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:this.options.fade||180,css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:this.options.fade||180,css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:this.options.fade||180,positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:this.options.fade||180,timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:this.options.fade||300,css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};jQuery.each(["pulse","tada"],(function(i,s){t[s+"Open"]=t[s+"Close"]=t[s]}));var i=function(i,s){return keyframe_css="@"+this.prefix+"keyframes jBox-animation-"+this.options.animation[i]+"-"+i+(s?"-"+s:"")+" {",jQuery.each(t[this.options.animation[i]].css,function(o,e){var n=s?e[1].replace("%XY",this._getXY(s).toUpperCase()):e[1];t[this.options.animation[i]].positions&&(n=n.replace("%V",t[this.options.animation[i]].positions[s][e[0]])),keyframe_css+=e[0]+" {"+this.prefix+"transform:"+n+";}"}.bind(this)),keyframe_css+="}",keyframe_css+=".jBox-animation-"+this.options.animation[i]+"-"+i+(s?"-"+s:"")+" {",keyframe_css+=this.prefix+"animation-duration: "+t[this.options.animation[i]].duration+"ms;",keyframe_css+=this.prefix+"animation-name: jBox-animation-"+this.options.animation[i]+"-"+i+(s?"-"+s:"")+";",keyframe_css+=t[this.options.animation[i]].timing?this.prefix+"animation-timing-function: "+t[this.options.animation[i]].timing+";":"",keyframe_css+="}"}.bind(this),s="";jQuery.each(["open","close"],function(o,e){return this.options.animation[e]&&t[this.options.animation[e]]&&("close"!=e||this.options.fade)?void(t[this.options.animation[e]].positions?jQuery.each(["top","right","bottom","left"],(function(t,o){s+=i(e,o)})):s+=i(e)):""}.bind(this)),jQuery("<style/>").append(s).appendTo(jQuery("head"))}},this._blockBodyClick=function(){this.blockBodyClick=!0,setTimeout(function(){this.blockBodyClick=!1}.bind(this),10)},this.options.animation&&this._generateCSS(),this._animate=function(t){if(!this.IE8){if(t||(t=this.isOpen?"open":"close"),!this.options.fade&&"close"==t)return null;var i=this.options.animation[t+"Direction"]||("center"!=this.align?this.align:this.options.attributes.x);this.flipped&&this._getXY(i)==this._getXY(this.align)&&(i=this._getOpp(i));var s="jBox-animation-"+this.options.animation[t]+"-"+t+" jBox-animation-"+this.options.animation[t]+"-"+t+"-"+i;this.wrapper.addClass(s);var o=1e3*parseFloat(this.wrapper.css(this.prefix+"animation-duration"));"close"==t&&(o=Math.min(o,this.options.fade)),setTimeout(function(){this.wrapper.removeClass(s)}.bind(this),o)}},this._abortAnimation=function(){if(!this.IE8){var i=this.wrapper.attr("class").split(" ").filter((function(i){return 0!==i.lastIndexOf("jBox-animation",0)}));this.wrapper.attr("class",i.join(" "))}},this._adjustPosition=function(){if(!this.options.adjustPosition)return null;this.positionAdjusted&&(this.wrapper.css(this.pos),this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin),this.positionAdjusted=!1,this.flipped=!1);var t=jQuery(window),i={x:t.width(),y:t.height(),top:this.options.fixed&&this.target.data("jBox-fixed")?0:t.scrollTop(),left:this.options.fixed&&this.target.data("jBox-fixed")?0:t.scrollLeft()};i.bottom=i.top+i.y,i.right=i.left+i.x;var s=i.top>this.pos.top-(this.options.adjustDistance.top||0),o=i.right<this.pos.left+this.dimensions.x+(this.options.adjustDistance.right||0),e=i.bottom<this.pos.top+this.dimensions.y+(this.options.adjustDistance.bottom||0),a=i.left>this.pos.left-(this.options.adjustDistance.left||0)?"left":o?"right":null,h=s?"top":e?"bottom":null;if(a||h){"move"==this.options.adjustPosition||a!=this.outside&&h!=this.outside||("mouse"==this.target&&(this.outside="right"),("top"==this.outside||"left"==this.outside?i[this._getXY(this.outside)]-(this.targetDimensions[this._getTL(this.outside)]-i[this._getTL(this.outside)])-this.targetDimensions[this._getXY(this.outside)]+this.options.offset[this._getXY(this.outside)]:this.targetDimensions[this._getTL(this.outside)]-i[this._getTL(this.outside)]-this.options.offset[this._getXY(this.outside)])>this.dimensions[this._getXY(this.outside)]+parseInt(this.options.adjustDistance[this._getOpp(this.outside)])&&(this.wrapper.css(this._getTL(this.outside),this.pos[this._getTL(this.outside)]+(this.dimensions[this._getXY(this.outside)]+this.options.offset[this._getXY(this.outside)]*("top"==this.outside||"left"==this.outside?-2:2)+this.targetDimensions[this._getXY(this.outside)])*("top"==this.outside||"left"==this.outside?1:-1)),this.pointer&&this.wrapper.removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).css("padding",0).css("padding-"+this.outside,this.pointer.dimensions[this._getXY(this.outside)]),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this.outside),this.positionAdjusted=!0,this.flipped=!0));var r="x"==this._getXY(this.outside)?h:a;if(this.pointer&&"flip"!=this.options.adjustPosition&&this._getXY(r)==this._getOpp(this._getXY(this.outside))){if("center"==this.pointer.align)var l=this.dimensions[this._getXY(r)]/2-this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(r!=this._getTL(r)?-1:1);else l=r==this.pointer.alignAttribute?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):this.dimensions[this._getXY(r)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(r)];spaceDiff=r==this._getTL(r)?i[this._getTL(r)]-this.pos[this._getTL(r)]+this.options.adjustDistance[r]:-1*(i[this._getOpp(this._getTL(r))]-this.pos[this._getTL(r)]-this.options.adjustDistance[r]-this.dimensions[this._getXY(r)]),r==this._getOpp(this._getTL(r))&&this.pos[this._getTL(r)]-spaceDiff<i[this._getTL(r)]+this.options.adjustDistance[this._getTL(r)]&&(spaceDiff-=i[this._getTL(r)]+this.options.adjustDistance[this._getTL(r)]-(this.pos[this._getTL(r)]-spaceDiff)),spaceDiff=Math.min(spaceDiff,l),l>=spaceDiff&&spaceDiff>0&&(this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-spaceDiff*(r!=this.pointer.alignAttribute?-1:1)),this.wrapper.css(this._getTL(r),this.pos[this._getTL(r)]+spaceDiff*(r!=this._getTL(r)?-1:1)),this.positionAdjusted=!0)}}},this.options.onInit.bind(this)(),this.options._onInit&&this.options._onInit.bind(this)(),this}function DdrPopUp(settings,callback){var popupCloseTOut,o=$.extend({title:!1,width:!1,html:"",buttons:!1,buttonsAlign:"right",disabledButtons:!1,closePos:"right",closeByButton:!1,close:!1,winClass:!1,contentToCenter:!1,topClose:!0,lang:"ru"},settings),buttonsHtml="",topCloseHtml="",titleHtml="",popupHtml="",ddrPopupId="ddrpopup"+generateCode("LlnlL"),ddrPopupSelector="#"+ddrPopupId,language={ru:{closeWin:"Закрыть окно",noData:"Нет данных",systemError:"Системная ошибка!"},en:{closeWin:"Close window",noData:"No data",systemError:"System error!"}},openingDdrPopup=$("body").find(".ddrpopup.ddrpopup_opening");if($(openingDdrPopup).length&&$(openingDdrPopup).remove(),"left"==o.closePos&&o.close&&(buttonsHtml+='<button class="ddrpopup__buttons_close" ddrpopupclose>'+o.close+"</button>"),o.buttons&&$.each(o.buttons,(function(k,b){buttonsHtml+="<button"+(b.disabled||o.disabledButtons?" disabled":"")+(b.close?" ddrpopupclose":"")+'  id="'+b.id+'"'+(b.metrikaId?' onclick="yaCounter'+b.metrikaId+".reachGoal('"+b.metrikaTargetId+"'); return true;\"":"")+' class="ddrpopup__buttons_'+(b.type?b.type:"main")+(b.class?" "+b.class:"")+'">'+b.title+"</button>"})),"right"==o.closePos&&o.close&&(buttonsHtml+='<button class="ddrpopup__buttons_close" ddrpopupclose>'+o.close+"</button>"),o.title){var tData=o.title.split("|"),title=tData[0],titleSize=tData[1]||"1";titleHtml='<h5 ddrpopuptitle class="ddrpopup__title'+(1==tData[2]?" ddrpopup__title_overflow":"")+" ddrpopup__title_"+titleSize+'">'+title+"</h5>"}function _popupWait(stat){0!=stat?(_setWaitPos(),$(ddrPopupSelector).scroll((function(){_setWaitPos()})),$(window).resize((function(){_setWaitPos()})),$(ddrPopupSelector).find("[ddrpopupwait]").text(stat||""),$(ddrPopupSelector).find(".ddrpopup__wait").addClass("ddrpopup__wait_visible")):0==stat&&($(ddrPopupSelector).find(".ddrpopup__wait.ddrpopup__wait_visible").removeClass("ddrpopup__wait_visible"),$(ddrPopupSelector).off("scroll"))}function _setWaitPos(){var winTop=$(ddrPopupSelector).scrollTop(),winH=$(window).height(),ppWinH=$("[ddrpopupwin]").height(),trY=0;ppWinH>winH&&(trY=winTop-(ppWinH/2-winH/2),$("[ddrpopupwaitblock]").css("top",+trY+"px"))}function _popupClose(){clearTimeout(popupCloseTOut),$(document).trigger("ddrpopup:close"),$(ddrPopupSelector).addClass("ddrpopup_closing"),$(ddrPopupSelector).find(".ddrpopup__win").addClass("ddrpopup__win_closing"),popupCloseTOut=setTimeout((function(){$(ddrPopupSelector).remove(),enableScroll()}),200)}function _getWinPosition(){return $(ddrPopupSelector).scrollTop()}o.topClose&&(topCloseHtml='<div ddrpopupclose class="ddrpopup__close" title="'+language[o.lang].closeWin+'"></div>'),popupHtml+="",popupHtml+='<div class="ddrpopup" id="'+ddrPopupId+'">',popupHtml+='<div class="ddrpopup__wrap">',popupHtml+='<div class="ddrpopup__container">',popupHtml+='<div class="ddrpopup__win'+(o.winClass?" "+o.winClass:"")+' noselect" ddrpopupwin>',popupHtml+='<div class="ddrpopup__wait">',popupHtml+='<div class="ddrpopupwait" ddrpopupwaitblock>',popupHtml+='<i class="fa fa-spinner fa-pulse fa-fw"></i>',popupHtml+="<p ddrpopupwait></p>",popupHtml+="</div>",popupHtml+="</div>",(titleHtml||topCloseHtml)&&(popupHtml+='<div class="ddrpopup__header">',popupHtml+=titleHtml,popupHtml+=topCloseHtml,popupHtml+="</div>"),o.contentToCenter?popupHtml+='<div class="ddrpopup__content d-flex align-items-center justify-content-center"><div ddrpopupcontent>'+o.html+"</div></div>":popupHtml+='<div class="ddrpopup__content" ddrpopupcontent>'+o.html+"</div>",popupHtml+='<div class="ddrpopup__footer">',popupHtml+='<div class="ddrpopup__buttons'+(o.buttonsAlign?" ddrpopup__buttons_"+o.buttonsAlign:"")+'" ddrpopupbuttons>'+buttonsHtml+"</div>",popupHtml+="</div>",popupHtml+="</div>",popupHtml+="</div>",popupHtml+="</div>",popupHtml+="</div>",$("body").append(popupHtml),o.width&&$(ddrPopupSelector).find("[ddrpopupwin]").width(o.width),$(ddrPopupSelector).ready((function(){!function _popupOpen(){disableScroll(),$(ddrPopupSelector).addClass("ddrpopup_opening"),$(ddrPopupSelector).find(".ddrpopup__win").addClass("ddrpopup__win_opening")}()})),$(ddrPopupSelector).on(tapEvent,(function(e){if(tapEventInfo(e,{attribute:"ddrpopupclose"}))_popupClose();else if(0==o.closeByButton){tapEventInfo(e,{class:"ddrpopup__wrap"})&&("desktop"==thisDevice&&0==$(".ddrpopup__win").find("input:focus").length&&0==$(".ddrpopup__win").find("textarea:focus").length&&0==$(".ddrpopup__win").find("select:focus").length&&0==$(".ddrpopup__win").find("[contenteditable]:focus").length&&0==$(".ddrpopup__win").find('input[type="checkbox"]:hover').length||"mobile"==thisDevice)&&_popupClose()}}));var obj={wait:function(stat){_popupWait(stat)},close:function(){_popupClose()},getSelector:function(){return ddrPopupSelector},setData:function(){let a=arguments,url="string"==typeof a[0]&&("/"!=a[0].substr(0,1)&&"http://"!=a[0].substr(0,7)?"/"+a[0]:a[0]);if(!url)throw new Error("ddrPopUp setData -> Ошибка! не передан URL");let string="string"==typeof a[0]&&!1===a[1]&&a[0],params="object"==typeof a[1]&&a[1],callback=params||"function"!=typeof a[1]?void 0!==a[2]&&"function"==typeof a[2]&&a[2]:a[1],width="function"!=typeof a[1]&&"object"!=typeof a[1]&&/\d+(px|vh|\%)?/.test(a[1])?a[1]:"function"!=typeof a[2]&&"object"!=typeof a[2]&&/\d+(px|vh|\%)?/.test(a[2])?a[2]:!("function"==typeof a[3]||"object"==typeof a[3]||!/\d+(px|vh|\%)?/.test(a[3]))&&a[3];string?(width&&$(ddrPopupSelector).find("[ddrpopupwin]").width(width),$(ddrPopupSelector).find("[ddrpopupcontent]").html(string),o.disabledButtons&&$(ddrPopupSelector).find(".ddrpopup__buttons_main").removeAttrib("disabled"),$("[ddrpopupcontent]").ready((function(){callback&&"function"==typeof callback&&callback(obj),$(document).trigger("popup:load")}))):url&&(_popupWait(),$.post(url,params,(function(html){html=html.trim(),width&&$(ddrPopupSelector).find("[ddrpopupwin]").width(width),$(ddrPopupSelector).find("[ddrpopupcontent]").html(html),_popupWait(!1),function _setScripts(){setBaseScripts(ddrPopupSelector)}(),$("[ddrpopupcontent]").ready((function(){var stat=!!html;stat&&callback&&"function"==typeof callback?callback(html,stat):callback&&"function"==typeof callback&&callback('<p class="empty center">'+language[o.lang].noData+"</p>",stat),$(document).trigger("popup:load")}))}),"html").fail((function(e){notify(language[o.lang].systemError,"error"),showError(e)})))},setTitle:function(title){var stData=title.split("|"),titleSize=(title=stData[0],stData[1]||"1"),titleOverflow=1==stData[2]?" ddrpopup__title_overflow":"";$(ddrPopupSelector).find("[ddrpopuptitle]").replaceWith('<h5 ddrpopuptitle class="ddrpopup__title'+titleOverflow+" ddrpopup__title_"+titleSize+'">'+title+"</h5>")},onScroll:function(callback){$(ddrPopupSelector).scroll((function(){callback&&"function"==typeof callback&&callback(),$(document).trigger("popup:scroll")}))},deleteTitle:function(){$(ddrPopupSelector).find("[ddrpopuptitle]").empty()},setButtons:function(buttons,close){var buttonsHtml="";"left"==o.closePos&&close&&(buttonsHtml+='<button class="ddrpopup__buttons_close" ddrpopupclose>'+close+"</button>"),buttons&&$.each(buttons,(function(k,b){buttonsHtml+="<button"+(b.disabled?" disabled":"")+(b.close?" ddrpopupclose":"")+'  id="'+b.id+'"'+(b.metrikaId?' onclick="yaCounter'+b.metrikaId+".reachGoal('"+b.metrikaTargetId+"'); return true;\"":"")+' class="ddrpopup__buttons_'+(b.type?b.type:"main")+(b.class?" "+b.class+'"':'"')+">"+b.title+"</button>"})),"right"==o.closePos&&close&&(buttonsHtml+='<button class="ddrpopup__buttons_close" ddrpopupclose>'+close+"</button>"),0==$(ddrPopupSelector).find("[ddrpopupbuttons]").length?$(ddrPopupSelector).find("[ddrpopupcontent]").after("<div ddrpopupbuttons>"+buttonsHtml+"</div>"):$(ddrPopupSelector).find("[ddrpopupbuttons]").html(buttonsHtml)},removeButtons:function(){$(ddrPopupSelector).find("[ddrpopupbuttons]").empty()},disabledButtons:function(){$(ddrPopupSelector).find(".ddrpopup__buttons_main").setAttrib("disabled")},enabledButtons:function(){$(ddrPopupSelector).find("[ddrpopupbuttons]").children("[disabled]").removeAttrib("disabled")},setWidth:function(width){$(ddrPopupSelector).find("[ddrpopupwin]").addClass("ddrpopup__win_animated"),$(ddrPopupSelector).find("[ddrpopupwin]").width(width),setTimeout((function(){$(ddrPopupSelector).find("[ddrpopupwin].ddrpopup__win_animated").removeClass("ddrpopup__win_animated")}),200)},dialog:function(dialog,yBtn,nBtn,yFunc){if(0==dialog)$(ddrPopupSelector).find("[ddrpopupdialog]").remove();else{var id=generateCode("LlnlL"),dhtml='<div class="ddrpopup__dialog" ddrpopupdialog>';dhtml+='<div class="popupdialog">',dhtml+='<div class="popupdialog__message">'+dialog+"</div>",dhtml+='<div class="popupdialog__buttons">',dhtml+='<button class="cancel" id="popupDialogN'+id+'">'+nBtn+"</button>",dhtml+='<button id="popupDialogY'+id+'">'+yBtn+"</button>",dhtml+="</div>",dhtml+="</div>",dhtml+="</div>",$(ddrPopupSelector).find("[ddrpopupwin]").prepend(dhtml);var winH=$(window).height(),popupH=function _getWinHeight(){return $(ddrPopupSelector).find(".ddrpopup__win").outerHeight()}(),winPos=_getWinPosition(),dialogH=$(ddrPopupSelector).find(".popupdialog").outerHeight();popupH>winH?$(ddrPopupSelector).find(".popupdialog").css("top","calc(50vh - "+dialogH/2+"px + "+winPos+"px)"):$(ddrPopupSelector).find("[ddrpopupdialog]").css("align-items","center"),$(ddrPopupSelector).scroll((function(){winPos=_getWinPosition(),$(ddrPopupSelector).find(".popupdialog").css("top","calc(50vh - "+dialogH/2+"px + "+winPos+"px)")})),$(ddrPopupSelector).find("[ddrpopupdialog]").addClass("ddrpopup__dialog_visible"),$("#popupDialogN"+id).on(tapEvent,(function(){$(ddrPopupSelector).find("[ddrpopupdialog]").remove()})),$("#popupDialogY"+id).on(tapEvent,(function(){"function"==typeof yFunc&&yFunc()}))}},onClose(callback){$(document).on("ddrpopup:close",(()=>{callback&&"function"==typeof callback&&callback()}))}};if($(document).trigger("ddrpopup:open"),!callback||"function"!=typeof callback)return obj;callback(obj)}function ddrScrEnd(selector,callback,timeout){var scrollTOut,winH,docH,scrTop;function scrollAction(){clearTimeout(scrollTOut),scrollTOut=setTimeout((function(){winH=1==selector?$(window).height():$(selector).height(),docH=1==selector?$(document).height():$(selector).children().height(),scrTop=1==selector?$(document).scrollTop():$(selector).scrollTop(),winH+scrTop>=docH-100&&null!=callback&&"function"==typeof callback&&callback()}),timeout||200)}"ontouchstart"in window?1==selector?$(window).scroll((function(){scrollAction()})):$(selector).scroll((function(){scrollAction()})):1==selector?($(window).mousewheel((function(e){-1==e.deltaY&&scrollAction()})),$(window).on("keyup",(function(e){-1!=[40,34].indexOf(e.keyCode)&&scrollAction()}))):($(selector).mousewheel((function(e){-1==e.deltaY&&scrollAction()})),$(selector).on("keyup",(function(e){-1!=[40,34].indexOf(e.keyCode)&&scrollAction()})))}a="undefined"!=typeof window?window:this,b=function(a,b){var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){var c=(b=b||d).createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,(function(b,c){return a.call(b,c,b)})))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],g!==(d=a[b])&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a)||(b=e(a))&&(c=l.call(b,"constructor")&&b.constructor,"function"!=typeof c||m.call(c)!==n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a))for(c=a.length;d<c&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(!1===b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var e=[],f=0,g=a.length,h=!c;f<g;f++)!b(a[f],f)!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)null!=(e=b(a[f],f,c))&&h.push(e);else for(f in a)null!=(e=b(a[f],f,c))&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(a,b){j["[object "+b+"]"]=b.toLowerCase()}));var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!=d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta((function(a){return!0===a.disabled&&("form"in a||"label"in a)}),{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){for((k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),h=(o=g(a)).length;h--;)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];return function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){for(var c=a.split("|"),e=c.length;e--;)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia((function(b){return b=+b,ia((function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}))}))}function qa(a){return a&&void 0!==a.getElementsByTagName&&a}for(b in c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(o=(n=g).documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja((function(a){return a.className="i",!a.getAttribute("className")})),c.getElementsByTagName=ja((function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length})),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja((function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length})),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if((c=f.getAttributeNode("id"))&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if((c=f.getAttributeNode("id"))&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja((function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")})),ja((function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")}))),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja((function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)})),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d||(1&(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);for(c=a;c=c.parentNode;)g.unshift(c);for(c=b;c=c.parentNode;)h.unshift(c);for(;g[d]===h[d];)d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,(function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(t=(n=(j=(k=(l=(m=q)[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]||[])[0]===w&&j[1])&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(t=n=(j=(k=(l=(m=b)[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]||[])[0]===w&&j[1]),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&((k=(l=m[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]=[w,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia((function(a,c){for(var d,f=e(a,b),g=f.length;g--;)a[d=I(a,f[g])]=!(c[d]=f[g])})):function(a){return e(a,0,c)}):e}},pseudos:{not:ia((function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia((function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))})):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}})),has:ia((function(a){return function(b){return ga(a,b).length>0}})),contains:ia((function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}})),lang:ia((function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}})),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa((function(){return[0]})),last:pa((function(a,b){return[b-1]})),eq:pa((function(a,b,c){return[c<0?c+b:c]})),even:pa((function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a})),odd:pa((function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a})),lt:pa((function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a})),gt:pa((function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a}))}},d.pseudos.nth=d.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(k=(l=b[u]||(b[u]={}))[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia((function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=wa(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)}))}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta((function(a){return a===b}),h,!0),l=ta((function(a){return I(b,a)>-1}),h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if((c=d.filter[a[i].type].apply(null,a[i].matches))[u]){for(e=++i;e<f&&!d.relative[a[e].type];e++);return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){for(o=0,g||l.ownerDocument===n||(m(l),h=!p);q=a[o++];)if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){for(o=0;q=b[o++];)q(t,u,g,h);if(f){if(r>0)for(;s--;)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){for(g in c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length)),d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)},h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)(f=ya(b[c]))[u]?d.push(f):e.push(f);(f=A(a,za(e,d))).selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if((i=n[0]=n[0].slice(0)).length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(!(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0]))return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}for(f=V.needsContext.test(a)?0:i.length;f--&&(j=i[f],!d.relative[k=j.type]);)if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),!(a=e.length&&sa(i)))return G.apply(c,e),c;break}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja((function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))})),ja((function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")}))||ka("type|href|height|width",(function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)})),c.attributes&&ja((function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}))||ka("value",(function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue})),ja((function(a){return null==a.getAttribute("disabled")}))||ka(J,(function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null})),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,(function(a,d){return!!b.call(a,d,a)!==c})):b.nodeType?r.grep(a,(function(a){return a===b!==c})):"string"!=typeof b?r.grep(a,(function(a){return i.call(b,a)>-1!==c})):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,(function(a){return i.call(b,a)>-1!==c&&1===a.nodeType})))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,(function(a){return 1===a.nodeType})))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter((function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0})));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(!(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a))||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return(f=d.getElementById(e[2]))&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};function K(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter((function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0}))},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},(function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}}));var L=/[^\x20\t\r\n\f]+/g;function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.Callbacks=function(a){a="string"==typeof a?function M(a){var b={};return r.each(a.match(L)||[],(function(a,c){b[c]=!0})),b}(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1)for(c=g.shift();++h<f.length;)!1===f[h].apply(c[0],c[1])&&a.stopOnFalse&&(h=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,(function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)}))}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,(function(a,b){for(var c;(c=r.inArray(b,f,c))>-1;)f.splice(c,1),c<=h&&h--})),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=[a,(c=c||[]).slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred((function(b){r.each(c,(function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]]((function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)}))})),a=null})).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if((a=d.apply(h,i))===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred((function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))})).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,(function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add((function(){d=h}),c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith})),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();for(;c--;)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout((function(){throw b}))};var R=r.Deferred();function S(){d.removeEventListener("DOMContentLoaded",S),a.removeEventListener("load",S),r.ready()}r.fn.ready=function(a){return R.then(a).catch((function(a){r.readyException(a)})),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--r.readyWait:r.isReady)||(r.isReady=!0,!0!==a&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then,"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c))for(h in e=!0,c)T(a,b,h,c[h],!0,f,g);else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){c=(b=Array.isArray(b)?b.map(r.camelCase):(b=r.camelCase(b))in d?[b]:b.match(L)||[]).length;for(;c--;)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c=function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&0===(d=g[c].name).indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d]));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each((function(){X.set(this,a)})):T(this,(function(b){var c;if(f&&void 0===b){if(void 0!==(c=X.get(f,a)))return c;if(void 0!==(c=_(f,a)))return c}else this.each((function(){X.set(this,a,b)}))}),null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each((function(){X.remove(this,a)}))}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b);"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,(function(){r.dequeue(a,b)}),f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add((function(){W.remove(a,[b+"queue",c])}))})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each((function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)}))},dequeue:function(a){return this.each((function(){r.dequeue(this,a)}))},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=W.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return"none"===(a=b||a).style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];for(f in e=c.apply(a,d||[]),b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{k/=f=f||".5",r.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e||(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)(d=a[f]).style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each((function(){da(this)?r(this).show():r(this).hide()}))}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function na(a,b){var c;return c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if((f=a[n])||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;r.merge(m,g.childNodes),(g=l.firstChild).textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c)for(k=0;f=g[k++];)la.test(f.type||"")&&c.push(f);return l}!function(){var b=d.createDocumentFragment().appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){for(h in"string"!=typeof c&&(d=d||c,c=void 0),b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each((function(){r.event.add(this,b,e,d,c)}))}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q)for(c.handler&&(c=(f=c).handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),j=(b=(b||"").match(L)||[""]).length;j--;)n=p=(h=ua.exec(b[j])||[])[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||((m=i[n]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){for(j=(b=(b||"").match(L)||[""]).length;j--;)if(n=p=(h=ua.exec(b[j])||[])[1],o=(h[2]||"").split(".").sort(),n){for(l=r.event.special[n]||{},m=i[n=(d?l.delegateType:l.bindType)||n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var c,d,e,f,g,h,b=r.event.fix(a),i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,b)){for(h=r.event.handlers.call(this,b,j),c=0;(f=h[c++])&&!b.isPropagationStopped();)for(b.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!b.isImmediatePropagationStopped();)b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,void 0!==(e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i))&&!1===(b.result=e)&&(b.preventDefault(),b.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||!0!==j.disabled)){for(f=[],g={},c=0;c<i;c++)void 0===g[e=(d=b[c]).selector+" "]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,f=a.handleObj;return e&&(e===this||r.contains(this,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}})),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=wa),this.each((function(){r.event.remove(this,a,c,b)}))}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")&&r(">tbody",a)[0]||a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events))for(e in delete g.handle,g.events={},j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c]);X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each((function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)}));if(m&&(f=(e=qa(b,a[0].ownerDocument,!1,a,d)).firstChild,1===e.childNodes.length&&(e=f),f||d)){for(i=(h=r.map(na(e,"script"),Fa)).length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),d=0,e=(f=na(a)).length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return(g=na(h,"script")).length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,(function(a){return void 0===a?r.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)}))}),null,a,arguments.length)},append:function(){return Ja(this,arguments,(function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ea(this,a).appendChild(a)}))},prepend:function(){return Ja(this,arguments,(function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}}))},before:function(){return Ja(this,arguments,(function(a){this.parentNode&&this.parentNode.insertBefore(a,this)}))},after:function(){return Ja(this,arguments,(function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)}))},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map((function(){return r.clone(this,a,b)}))},html:function(a){return T(this,(function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)1===(b=this[c]||{}).nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)}),null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,(function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))}),a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}}));var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};function Oa(a,b,c){var d,e,f,g,h=a.style;return(c=c||Na(a))&&(""!==(g=c.getPropertyValue(b)||c[b])||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=function Wa(a){if(a in Va)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;c--;)if((a=Ua[c]+b)in Va)return a}(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),(f=parseFloat(f)||0)+Za(a,b,c||(g?"border":"content"),d,e)+"px")}function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:("string"==(f=typeof c)&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),void(null!=c&&c==c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return Ra.test(b)||(b=Xa(h)),(g=r.cssHooks[b]||r.cssHooks[h])&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),r.each(["height","width"],(function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,(function(){return $a(a,b,d)}))},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(0,c,g)}}})),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,(function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},(function(){return a.getBoundingClientRect().left})))+"px"})),r.each({margin:"",padding:"",border:"Width"},(function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)})),r.fn.extend({css:function(a,b){return T(this,(function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)}),a,b,arguments.length>1)}}),r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""))&&"auto"!==b?b:0},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(!1===d.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout((function(){ab=void 0})),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)e["margin"+(c=ca[d])]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always((function(){delete i.elem})),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),f=1-(c/j.duration||0),g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(function jb(a,b){var c,d,e,f,g;for(c in a)if(e=b[d=r.camelCase(c)],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=r.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");for(d in c.queue||(null==(g=r._queueHooks(a,"fx")).unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always((function(){m.always((function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()}))}))),b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if((i=!r.isEmptyObject(b))||!r.isEmptyObject(n))for(d in l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],null==(j=q&&q.display)&&(j=W.get(a,"display")),"none"===(k=r.css(a,"display"))&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done((function(){o.display=j})),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always((function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}))),i=!1,n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done((function(){for(d in p||ia([a]),W.remove(a,"fxshow"),n)r.style(a,d,n[d])}))),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each((function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)}))},finish:function(a){return!1!==a&&(a=a||"fx"),this.each((function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish}))}}),r.each(["toggle","show","hide"],(function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}})),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}})),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx&&r.fx.speeds[b]||b,c=c||"fx",this.queue(c,(function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}}))},function(){var a=d.createElement("input"),c=d.createElement("select").appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,(a=d.createElement("input")).value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each((function(){r.removeAttr(this,a)}))}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:null==(d=r.find.attr(a,b))?void 0:d)},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),lb={set:function(a,b,c){return!1===b?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),(function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}}));var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;function pb(a){return(a.match(L)||[]).join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each((function(){delete this[r.propFix[a]||a]}))}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){r.propFix[this.toLowerCase()]=this})),r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each((function(b){r(this).addClass(a.call(this,b,qb(this)))}));if("string"==typeof a&&a)for(b=a.match(L)||[];c=this[i++];)if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");e!==(h=pb(d))&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each((function(b){r(this).removeClass(a.call(this,b,qb(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(L)||[];c=this[i++];)if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");e!==(h=pb(d))&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each((function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)})):this.each((function(){var b,d,e,f;if("string"===c)for(d=0,e=r(this),f=a.match(L)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||((b=qb(this))&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":W.get(this,"__className__")||""))}))},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=r.isFunction(a),this.each((function(c){var e;1===this.nodeType&&(null==(e=d?a.call(this,c,r(this).val()):a)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,(function(a){return null==a?"":a+""}))),(b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))}))):e?(b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:"string"==typeof(c=e.value)?c.replace(rb,""):null==c?"":c:void 0}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(((c=e[d]).selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){for(var c,d,e=a.options,f=r.makeArray(b),g=e.length;g--;)((d=e[g]).selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],(function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}));var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,(b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b)).isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||!1!==n.trigger.apply(e,c))){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}for(g=0;(h=o[g++])&&!b.isPropagationStopped();)b.type=g>1?j:n.bindType||p,(m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"))&&m.apply(h,c),(m=k&&h[k])&&m.apply&&U(h)&&(b.result=m.apply(h,c),!1===b.result&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&!1!==n._default.apply(o.pop(),c)||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&((i=e[k])&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each((function(){r.event.trigger(a,b,this)}))},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}})),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},(function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}}));var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,(function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)}));else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,(function(){e(this.name,this.value)}));else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this})).filter((function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))})).map((function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,(function(a){return{name:b.name,value:a.replace(xb,"\r\n")}})):{name:b.name,value:c.replace(xb,"\r\n")}})).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],(function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)})),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}Lb.href=tb.href,r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Eb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;for(m in(l=r.event&&o.global)&&0==r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub+++n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]),o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,y,o)||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout((function(){y.abort("timeout")}),o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=function Pb(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}(o,y,d)),v=function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if((h=e.split(" "))[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}(o,v,y,j),j?(o.ifModified&&((w=y.getResponseHeader("Last-Modified"))&&(r.lastModified[f]=w),(w=y.getResponseHeader("etag"))&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,j=!(n=v.error))):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],(function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}})),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map((function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a})).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each((function(b){r(this).wrapInner(a.call(this,b))})):this.each((function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)}))},wrap:function(a){var b=r.isFunction(a);return this.each((function(c){r(this).wrapAll(b?a.call(this,c):a)}))},unwrap:function(a){return this.parent(a).not("body").each((function(){r(this).replaceWith(this.childNodes)})),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport((function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];for(g in b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout((function(){c&&d()}))},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}})),r.ajaxPrefilter((function(a){a.crossDomain&&(a.contents.script=!1)})),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",(function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")})),r.ajaxTransport("script",(function(a){var b,c;if(a.crossDomain)return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}));var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",(function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):!1!==b.jsonp&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always((function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0})),"script"})),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){return"string"!=typeof a?[]:("boolean"==typeof b&&(c=b,b=!1),b||(o.createHTMLDocument?((e=(b=d.implementation.createHTMLDocument("")).createElement("base")).href=d.location.href,b.head.appendChild(e)):b=d),g=!c&&[],(f=C.exec(a))?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes)));var e,f,g},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done((function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)})).always(c&&function(a,b){g.each((function(){c.apply(this,f||[a.responseText,b,a])}))}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(a,b){r.fn[b]=function(a){return this.on(b,a)}})),r.expr.pseudos.animated=function(a){return r.grep(r.timers,(function(b){return a===b.elem})).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1?(g=(d=l.position()).top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each((function(b){r.offset.setOffset(this,a,b)}));var b,c,d,e,f=this[0];return f?f.getClientRects().length?(d=f.getBoundingClientRect(),c=(b=f.ownerDocument).documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var a=this.offsetParent;a&&"static"===r.css(a,"position");)a=a.offsetParent;return a||ra}))}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,(function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)}),a,d,arguments.length)}})),r.each(["top","left"],(function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,(function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c}))})),r.each({Height:"height",Width:"width"},(function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},(function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return T(this,(function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)}),b,g?e:void 0,g)}}))})),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return r}));var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r},"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a),
/*! jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license */
void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b){function c(c){var d=b.console;e[c]||(e[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function d(a,b,d,e){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return c(e),d}})}a.migrateVersion="3.0.0",function(){var c=b.console&&b.console.log&&function(){b.console.log.apply(b.console,arguments)};c&&(a&&!/^[12]\./.test(a.fn.jquery)||c("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),a.migrateWarnings&&c("JQMIGRATE: Migrate plugin loaded multiple times"))}();var e={};a.migrateWarnings=[],void 0===a.migrateTrace&&(a.migrateTrace=!0),a.migrateReset=function(){e={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&c("jQuery is not compatible with Quirks Mode");var k,f=a.fn.init,g=a.isNumeric,h=a.find,i=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,j=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;for(k in a.fn.init=function(a){var b=Array.prototype.slice.call(arguments);return"string"==typeof a&&"#"===a&&(c("jQuery( '#' ) is not a valid selector"),b[0]=[]),f.apply(this,b)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&i.test(a))try{document.querySelector(a)}catch(d){a=a.replace(j,(function(a,b,c,d){return"["+b+c+'"'+d+'"]'}));try{document.querySelector(a),c("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){c("Attribute selector with '#' was not fixed: "+b[0])}}return h.apply(this,b)},h)Object.prototype.hasOwnProperty.call(h,k)&&(a.find[k]=h[k]);a.fn.size=function(){return c("jQuery.fn.size() is deprecated; use the .length property"),this.length},a.parseJSON=function(){return c("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},a.isNumeric=function(b){var e=g(b),f=function d(b){var c=b&&b.toString();return!a.isArray(b)&&c-parseFloat(c)+1>=0}(b);return e!==f&&c("jQuery.isNumeric() should not be called on constructed objects"),f},d(a,"unique",a.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort"),d(a.expr,"filters",a.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos"),d(a.expr,":",a.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var l=a.ajax;a.ajax=function(){var a=l.apply(this,arguments);return a.promise&&(d(a,"success",a.done,"jQXHR.success is deprecated and removed"),d(a,"error",a.fail,"jQXHR.error is deprecated and removed"),d(a,"complete",a.always,"jQXHR.complete is deprecated and removed")),a};var m=a.fn.removeAttr,n=a.fn.toggleClass,o=/\S+/g;a.fn.removeAttr=function(b){var d=this;return a.each(b.match(o),(function(b,e){a.expr.match.bool.test(e)&&(c("jQuery.fn.removeAttr no longer sets boolean properties: "+e),d.prop(e,!1))})),m.apply(this,arguments)},a.fn.toggleClass=function(b){return void 0!==b&&"boolean"!=typeof b?n.apply(this,arguments):(c("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var c=this.getAttribute&&this.getAttribute("class")||"";c&&a.data(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":a.data(this,"__className__")||"")})))};var p=!1;a.swap&&a.each(["height","width","reliableMarginRight"],(function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return p=!0,a=d.apply(this,arguments),p=!1,a})})),a.swap=function(a,b,d,e){var f,g,h={};for(g in p||c("jQuery.swap() is undocumented and deprecated"),b)h[g]=a.style[g],a.style[g]=b[g];for(g in f=d.apply(a,e||[]),b)a.style[g]=h[g];return f};var q=a.data;a.data=function(b,d,e){var f;return d&&d!==a.camelCase(d)&&((f=a.hasData(b)&&q.call(this,b))&&d in f)?(c("jQuery.data() always sets/gets camelCased names: "+d),arguments.length>2&&(f[d]=e),f[d]):q.apply(this,arguments)};var r=a.Tween.prototype.run;a.Tween.prototype.run=function(b){a.easing[this.easing].length>1&&(c('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),a.easing[this.easing]=a.easing[this.easing].bind(a.easing,b,this.options.duration*b,0,1,this.options.duration)),r.apply(this,arguments)};var s=a.fn.load,t=a.event.fix;a.event.props=[],a.event.fixHooks={},a.event.fix=function(b){var d,e=b.type,f=this.fixHooks[e],g=a.event.props;if(g.length)for(c("jQuery.event.props are deprecated and removed: "+g.join());g.length;)a.event.addProp(g.pop());if(f&&!f._migrated_&&(f._migrated_=!0,c("jQuery.event.fixHooks are deprecated and removed: "+e),(g=f.props)&&g.length))for(;g.length;)a.event.addProp(g.pop());return d=t.call(this,b),f&&f.filter?f.filter(d,b):d},a.each(["load","unload","error"],(function(b,d){a.fn[d]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===d&&"string"==typeof a[0]?s.apply(this,a):(c("jQuery.fn."+d+"() is deprecated"),a.splice(0,0,d),arguments.length?this.on.apply(this,a):(this.triggerHandler.apply(this,a),this))}})),a((function(){a(document).triggerHandler("ready")})),a.event.special.ready={setup:function(){this===document&&c("'ready' event is deprecated")}},a.fn.extend({bind:function(a,b,d){return c("jQuery.fn.bind() is deprecated"),this.on(a,null,b,d)},unbind:function(a,b){return c("jQuery.fn.unbind() is deprecated"),this.off(a,null,b)},delegate:function(a,b,d,e){return c("jQuery.fn.delegate() is deprecated"),this.on(b,a,d,e)},undelegate:function(a,b,d){return c("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(a,"**"):this.off(b,a||"**",d)}});var u=a.fn.offset;a.fn.offset=function(){var b,d=this[0],e={top:0,left:0};return d&&d.nodeType?(b=(d.ownerDocument||document).documentElement,a.contains(b,d)?u.apply(this,arguments):(c("jQuery.fn.offset() requires an element connected to a document"),e)):(c("jQuery.fn.offset() requires a valid DOM element"),e)};var v=a.param;a.param=function(b,d){var e=a.ajaxSettings&&a.ajaxSettings.traditional;return void 0===d&&e&&(c("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),d=e),v.call(this,b,d)};var w=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return c("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)};var x=a.Deferred,y=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var d=x(),e=d.promise();return d.pipe=e.pipe=function(){var b=arguments;return c("deferred.pipe() is deprecated"),a.Deferred((function(c){a.each(y,(function(f,g){var h=a.isFunction(b[f])&&b[f];d[g[1]]((function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g[0]+"With"](this===e?c.promise():this,h?[b]:arguments)}))})),b=null})).promise()},b&&b.call(d,d),d}}(jQuery,window),
/*! jQuery UI - v1.12.1 - 2019-05-19
* http://jqueryui.com
* Includes: widget.js, data.js, keycode.js, scroll-parent.js, widgets/selectable.js, widgets/sortable.js, widgets/datepicker.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
factory=function($){$.ui=$.ui||{},$.ui.version="1.12.1";var orig,widgetUuid=0,widgetSlice=Array.prototype.slice;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */$.cleanData=(orig=$.cleanData,function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{(events=$._data(elem,"events"))&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}),$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0],fullName=namespace+"-"+(name=name.split(".")[1]);return prototype||(prototype=base,base=$.Widget),$.isArray(prototype)&&(prototype=$.extend.apply(null,[{}].concat(prototype))),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),(basePrototype=new base).options=$.widget.extend({},basePrototype.options),$.each(prototype,(function(prop,value){$.isFunction(value)?proxiedPrototype[prop]=function(){function _super(){return base.prototype[prop].apply(this,arguments)}function _superApply(args){return base.prototype[prop].apply(this,args)}return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}():proxiedPrototype[prop]=value})),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor&&basePrototype.widgetEventPrefix||name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,(function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)})),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widgetSlice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widgetSlice.call(arguments,1),returnValue=this;return isMethodCall?this.length||"instance"!==options?this.each((function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args))!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0:$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")})):returnValue=void 0:(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each((function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))}))),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widgetUuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),this.classesElementLookup={},element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy(),$.each(this.classesElementLookup,(function(key,value){that._removeClass(value,key)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return"classes"===key&&this._setOptionClasses(value),this.options[key]=value,"disabled"===key&&this._setOptionDisabled(value),this},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value)currentElements=this.classesElementLookup[classKey],value[classKey]!==this.options.classes[classKey]&&currentElements&&currentElements.length&&(elements=$(currentElements.get()),this._removeClass(currentElements,classKey),elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:!0})))},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value),value&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(options){var full=[],that=this;function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++)current=that.classesElementLookup[classes[i]]||$(),current=options.add?$($.unique(current.get().concat(options.element.get()))):$(current.not(options.element).get()),that.classesElementLookup[classes[i]]=current,full.push(classes[i]),checkOption&&options.classes[classes[i]]&&full.push(options.classes[classes[i]])}return options=$.extend({element:this.element,classes:this.options.classes||{}},options),this._on(options.element,{remove:"_untrackClassesElement"}),options.keys&&processClassString(options.keys.match(/\S+/g)||[],!0),options.extra&&processClassString(options.extra.match(/\S+/g)||[]),full.join(" ")},_untrackClassesElement:function(event){var that=this;$.each(that.classesElementLookup,(function(key,value){-1!==$.inArray(event.target,value)&&(that.classesElementLookup[key]=$(value.not(event.target).get()))}))},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,!1)},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,!0)},_toggleClass:function(element,keys,extra,add){add="boolean"==typeof add?add:extra;var shift="string"==typeof element||null===element,options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};return options.element.toggleClass(this._classes(options),add),this},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,(function(event,handler){function handlerProxy(){if(suppressDisabledCheck||!0!==instance.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.on(eventName,selector,handlerProxy):element.on(eventName,handlerProxy)}))},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.off(eventName).off(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){var instance=this;return setTimeout((function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}),delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover")},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus")},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},(event=$.Event(event)).type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&!1===callback.apply(this.element[0],[event].concat(data))||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},(function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){var hasOptions;"string"==typeof options&&(options={effect:options});var effectName=options?!0===options||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;"number"==typeof(options=options||{})&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue((function(next){$(this)[method](),callback&&callback.call(element[0]),next()}))}})),$.widget,$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo((function(dataName){return function(elem){return!!$.data(elem,dataName)}})):function(elem,i,match){return!!$.data(elem,match[3])}}),$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter((function(){var parent=$(this);return(!excludeStaticParent||"static"!==parent.css("position"))&&overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))})).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var datepicker_instActive,mouseHandled=!1;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */function Datepicker(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.regional.en=$.extend(!0,{},this.regional[""]),this.regional["en-US"]=$.extend(!0,{},this.regional.en),this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.on("mouseout",selector,(function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",selector,datepicker_handleMouseover)}function datepicker_handleMouseover(){$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}function datepicker_extendRemove(target,props){for(var name in $.extend(target,props),props)null==props[name]&&(target[name]=props[name]);return target}$(document).on("mouseup",(function(){mouseHandled=!1})),$.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,(function(event){return that._mouseDown(event)})).on("click."+this.widgetName,(function(event){if(!0===$.data(event.target,that.widgetName+".preventClickEvent"))return $.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel=!("string"!=typeof this.options.cancel||!event.target.nodeName)&&$(event.target).closest(this.options.cancel).length;return!(btnIsLeft&&!elIsCancel&&this._mouseCapture(event)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){that.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=!1!==this._mouseStart(event),!this._mouseStarted)?(event.preventDefault(),0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,0)))}},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(!event.which)if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(event)}return(event.which||event.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,event),this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,mouseHandled=!1,event.preventDefault()},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),$.widget("ui.selectable",$.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var that=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){that.elementPos=$(that.element[0]).offset(),that.selectees=$(that.options.filter,that.element[0]),that._addClass(that.selectees,"ui-selectee"),that.selectees.each((function(){var $this=$(this),selecteeOffset=$this.offset(),pos={left:selecteeOffset.left-that.elementPos.left,top:selecteeOffset.top-that.elementPos.top};$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=$("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.elementPos=$(this.element[0]).offset(),this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1,that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))})),$(event.target).parents().addBack().each((function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee)return doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),that._removeClass(selectee.$element,doSelect?"ui-unselecting":"ui-selected")._addClass(selectee.$element,doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1})))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each((function(){var selectee=$.data(this,"selectable-item"),hit=!1,offset={};selectee&&selectee.element!==that.element[0]&&(offset.left=selectee.left+that.elementPos.left,offset.right=selectee.right+that.elementPos.left,offset.top=selectee.top+that.elementPos.top,offset.bottom=selectee.bottom+that.elementPos.top,"touch"===options.tolerance?hit=!(offset.left>x2||offset.right<x1||offset.top>y2||offset.bottom<y1):"fit"===options.tolerance&&(hit=offset.left>x1&&offset.right<x2&&offset.top>y1&&offset.bottom<y2),hit?(selectee.selected&&(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1),selectee.unselecting&&(that._removeClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(that._addClass(selectee.$element,"ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(that._removeClass(selectee.$element,"ui-selecting"),selectee.selecting=!1,that._addClass(selectee.$element,"ui-selected"),selectee.selected=!0):(that._removeClass(selectee.$element,"ui-selecting"),selectee.selecting=!1,selectee.startselected&&(that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(that._removeClass(selectee.$element,"ui-selected"),selectee.selected=!1,that._addClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))})),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each((function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})})),$(".ui-selecting",this.element[0]).each((function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-selecting")._addClass(selectee.$element,"ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})})),this._trigger("stop",event),this.helper.remove(),!1}}),$.widget("ui.sortable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&x<reference+size},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(key,value){this._super(key,value),"handle"===key&&this._setHandleClassName()},_setHandleClassName:function(){var that=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),$.each(this.items,(function(){that._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(event),$(event.target).parents().each((function(){if($.data(this,that.widgetName+"-item")===that)return currentItem=$(this),!1})),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),!currentItem||this.options.handle&&!overrideHandle&&($(this.options.handle,currentItem).find("*").addBack().each((function(){this===event.target&&(validHandle=!0)})),!validHandle)||(this.currentItem=currentItem,this._removeCurrentsFromItems(),0)))},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-this.document.scrollTop()<o.scrollSensitivity?scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity&&(scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),event.pageX-this.document.scrollLeft()<o.scrollSensitivity?scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==scrolled&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(itemElement=(item=this.items[i]).item[0],(intersection=this._intersectsWithPointer(item))&&item.instance===this.currentContainer&&!(itemElement===this.currentItem[0]||this.placeholder[1===intersection?"next":"prev"]()[0]===itemElement||$.contains(this.placeholder[0],itemElement)||"semi-dynamic"===this.options.type&&$.contains(this.element[0],itemElement))){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,(function(){that._clear(event)}))}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new $.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each((function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))})),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each((function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")})),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&y1+dyClick<b,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&x1+dxClick<r,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var verticalDirection,horizontalDirection,isOverElementHeight="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width);return!(!isOverElementHeight||!isOverElementWidth)&&(verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection(),this.floating?"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1))},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(j=(cur=$(connectWith[i],this.document[0])).length-1;j>=0;j--)(inst=$.data(cur[j],this.widgetFullName))&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);function addItems(){items.push(this)}for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,(function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0}))},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(j=(cur=$(connectWith[i],this.document[0])).length-1;j>=0;j--)(inst=$.data(cur[j],this.widgetFullName))&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],j=0,queriesLength=(_queries=queries[i][0]).length;j<queriesLength;j++)(item=$(_queries[j])).data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){var i,item,t,p;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(item=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){var className,o=(that=that||this).options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]);return that._addClass(element,"ui-sortable-placeholder",className||that.currentItem[0].className)._removeClass(element,"ui-sortable-helper"),"tbody"===nodeName?that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element)):"tr"===nodeName?that._createTrPlaceholder(that.currentItem,element):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){className&&!o.forcePlaceholderSize||(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each((function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr)}))},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,posProperty=(floating=innermostContainer.floating||this._isFloating(this.currentItem))?"left":"top",sizeProperty=floating?"width":"height",axis=floating?"pageX":"pageY",j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,event[axis]-cur>this.items[j][sizeProperty]/2&&(nearBottom=!0),Math.abs(event[axis]-cur)<dist&&(dist=Math.abs(event[axis]-cur),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return void(this.currentContainer.containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash()),this.currentContainer.containerCache.over=1));itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),helper[0].style.width&&!o.forceHelperSize||helper.width(this.currentItem.width()),helper[0].style.height&&!o.forceHelperSize||helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay((function(){counter===this.counter&&this.refreshPositions(!hardRefresh)}))},_clear:function(event,noPropagation){this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}for(this.fromOutside&&!noPropagation&&delayedTriggers.push((function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push((function(event){this._trigger("update",event,this._uiHash())})),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push((function(event){this._trigger("remove",event,this._uiHash())})),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(delayEvent("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(delayEvent("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===$.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}}),
/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.extend($.ui,{datepicker:{version:"1.12.1"}}),$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return datepicker_extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;inline="div"===(nodeName=target.nodeName.toLowerCase())||"span"===nodeName,target.id||(this.uuid+=1,target.id="dp"+this.uuid),(inst=this._newInst($(target),inline)).settings=$.extend({},settings||{}),"input"===nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){return{id:target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(inst),$.data(target,"datepicker",inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.off("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove(),"focus"!==(showOn=this._get(inst,"showOn"))&&"both"!==showOn||input.on("focus",this._showDatepicker),"button"!==showOn&&"both"!==showOn||(buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage"),inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage?$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText)),input[isRTL?"before":"after"](inst.trigger),inst.trigger.on("click",(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1})))},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");dateFormat.match(/[DM]/)&&(findMax=function(names){for(max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI},date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())),inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv),$.data(target,"datepicker",inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;return inst||(this.uuid+=1,id="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),$("body").append(this._dialogInput),(inst=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],"datepicker",inst)),datepicker_extendRemove(inst.settings,settings||{}),date=date&&date.constructor===Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,this._pos||(browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],"datepicker",inst),this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),$.removeData(target,"datepicker"),"input"===nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==nodeName&&"span"!==nodeName||$target.removeClass(this.markerClassName).empty(),datepicker_instActive===inst&&(datepicker_instActive=null))},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&("input"===(nodeName=target.nodeName.toLowerCase())?(target.disabled=!1,inst.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==nodeName&&"span"!==nodeName||((inline=$target.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,(function(value){return value===target?null:value})))},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&("input"===(nodeName=target.nodeName.toLowerCase())?(target.disabled=!0,inst.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==nodeName&&"span"!==nodeName||((inline=$target.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,(function(value){return value===target?null:value})),this._disabledInputs[this._disabledInputs.length]=target)},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return!0;return!1},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(2===arguments.length&&"string"==typeof name)return"defaults"===name?$.extend({},$.datepicker._defaults):inst?"all"===name?$.extend({},inst.settings):this._get(inst,name):null;settings=name||{},"string"==typeof name&&((settings={})[name]=value),inst&&(this._curInst===inst&&this._hideDatepicker(),date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),datepicker_extendRemove(inst.settings,settings),null!==minDate&&void 0!==settings.dateFormat&&void 0===settings.minDate&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&void 0!==settings.dateFormat&&void 0===settings.maxDate&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),"disabled"in settings&&(settings.disabled?this._disableDatepicker(target):this._enableDatepicker(target)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst))},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:return(sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv))[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]),(onSelect=$.datepicker._get(inst,"onSelect"))?(dateStr=$.datepicker._formatDate(inst),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36===event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput"))return chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(null==event.charCode?event.keyCode:event.charCode),event.ctrlKey||event.metaKey||chr<" "||!chars||chars.indexOf(chr)>-1},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst))&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){}return!0},_showDatepicker:function(input){var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;"input"!==(input=input.target||input).nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),$.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input||(inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),!1!==(beforeShowSettings=(beforeShow=$.datepicker._get(inst,"beforeShow"))?beforeShow.apply(input,[input,inst]):{})&&(datepicker_extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().each((function(){return!(isFixed|="fixed"===$(this).css("position"))})),offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.css("z-index",function datepicker_getZindex(elem){for(var position,value;elem.length&&elem[0]!==document;){if(("absolute"===(position=elem.css("position"))||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}($(input))+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),$.datepicker._shouldFocusInput(inst)&&inst.input.trigger("focus"),$.datepicker._curInst=inst)))},_updateDatepicker:function(inst){this.maxRows=4,datepicker_instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");activeCell.length>0&&datepicker_handleMouseover.apply(activeCell.get(0)),inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",17*cols+"em"),inst.dpDiv[(1!==numMonths[0]||1!==numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)&&inst.input.trigger("focus"),inst.yearshtml&&(origyearshtml=inst.yearshtml,setTimeout((function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null}),0))},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){for(var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"===obj.type||1!==obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];return[(position=$(obj).offset()).left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;!inst||input&&inst!==$.data(input,"datepicker")||this._datepickerShowing&&(showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)},$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"===showAnim?"slideUp":"fadeIn"===showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1,(onClose=this._get(inst,"onClose"))&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id===$.datepicker._mainDivId||0!==$target.parents("#"+$.datepicker._mainDivId).length||$target.hasClass($.datepicker.markerClassName)||$target.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!$target.hasClass($.datepicker.markerClassName)||$.datepicker._curInst===inst)||$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"===period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);this._get(inst,"gotoCurrent")&&inst.currentDay?(inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear):(date=new Date,inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()),this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"===period?"Month":"Year")]=inst["draw"+("M"===period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||((inst=this._getInst(target[0])).selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),(onSelect=this._get(inst,"onSelect"))?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");altField&&(altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst)),$(altField).val(dateStr))},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(""===(value="object"==typeof value?value.toString():value+""))return null;var iFormat,dim,extra,date,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff="string"!=typeof shortYearCutoffTemp?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"===match?14:"!"===match?20:"y"===match&&isDoubled?4:"o"===match?3:2,digits=new RegExp("^\\d{"+("y"===match?size:1)+","+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,(function(v,k){return[[k,v]]})).sort((function(a,b){return-(a[1].length-b[1].length)}));if($.each(names,(function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase())return index=pair[0],iValue+=name.length,!1})),-1!==index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":year=(date=new Date(getNumber("@"))).getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":year=(date=new Date((getNumber("!")-this._ticksTo1970)/1e4)).getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length&&(extra=value.substr(iValue),!/^\s+/.test(extra)))throw"Extra/unparsed characters found in date: "+extra;if(-1===year?year=(new Date).getFullYear():year<100&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100)),doy>-1)for(month=1,day=doy;!(day<=(dim=this._getDaysInMonth(year,month-1)));)month++,day-=dim;if((date=this._daylightSavingAdjust(new Date(year,month-1,day))).getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getFullYear()%100<10?"0":"")+date.getFullYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return void 0!==inst.settings[name]?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!==inst.lastVal){var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var newDate=null==date||""===date?defaultDate:"string"==typeof date?function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)}(date):"number"==typeof date?isNaN(date)?defaultDate:function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date}(date):new Date(date.getTime());return(newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate)&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth===inst.selectedMonth&&origYear===inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){return!inst.currentYear||inst.input&&""===inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay))},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map((function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){return $.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return $.datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return $.datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).on(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])}))},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)--drawMonth<0&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,prevText=this._get(inst,"prevText"),prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>",nextText=this._get(inst,"nextText"),nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls=inst.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&0===row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;dow<7;dow++)thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day=(dow+firstDay)%7]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",daysInMonth=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;dRow<numRows;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;dow<7;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],unselectable=(otherMonth=printDate.getMonth()!==drawMonth)&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate,tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2].replace(/'/g,"&#39;")+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}++drawMonth>11&&(drawMonth=0,drawYear++),group+=calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";else{for(inMinYear=minDate&&minDate.getFullYear()===drawYear,inMaxYear=maxDate&&maxDate.getFullYear()===drawYear,monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",month=0;month<12;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{for(years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||"")),year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";year<=endYear;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.selectedYear+("Y"===period?offset:0),month=inst.selectedMonth+("M"===period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"===period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),"M"!==period&&"Y"!==period||this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));return offset<0&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");return years&&(yearSplit=years.split(":"),currentYear=(new Date).getFullYear(),minYear=parseInt(yearSplit[0],10),maxYear=parseInt(yearSplit[1],10),yearSplit[0].match(/[+\-].*/)&&(minYear+=currentYear),yearSplit[1].match(/[+\-].*/)&&(maxYear+=currentYear)),(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return{shortYearCutoff:shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).on("mousedown",$.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!==options&&"getDate"!==options&&"widget"!==options?"option"===options&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each((function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.12.1",$.datepicker},"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery),
/**
 * Obscene words detector for russian language
 *
 * @name antimat
 * @version 0.0.1
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 * @see https://github.com/itlessons/js-antimat
 *
 * Copyright (c) 2014, www.itlessons.info
 */
t={},window.containsMat=function(text){return t.containsMat(text)},window.antimat=t,t.badPatterns=["^(о|а)н(о|а)нист.*","^лошар.*","^к(а|о)злина$","^к(о|а)зел$","^сволоч(ь|ъ|и|уга|ам|ами).*","^лох[уеыаоэяию].*",".*урод(ы|у|ам|ина|ины).*",".*бля(т|д).*",".*гандо.*","^м(а|о)нд(а|о).*",".*сперма.*",".*[уеыаоэяию]еб$","^сучк(а|у|и|е|ой|ай).*","^придур(ок|ки).*","^д(е|и)би(л|лы).*","^сос(ать|и|ешь|у)$","^залуп.*","^муд(е|ил|о|а|я|еб).*",".*шалав(а|ы|ам|е|ами).*",".*пр(а|о)ст(и|е)т(у|е)тк(а|и|ам|е|ами).*",".*шлюх(а|и|ам|е|ами).*",".*ху(й|и|я|е|л(и|е)).*",".*п(и|е|ы)зд.*","^бл(я|т|д).*","(с|сц)ук(а|о|и|у).*","^еб.*",".*(д(о|а)лб(о|а)|разъ|разь|за|вы|по)ебы*.*",".*пид(а|о|е)р.*",".*хер.*"],t.goodPatterns=[".*психу.*",".*к(о|а)манд.*",".*истр(е|и)блять.*",".*л(о|а)х(о|а)трон.*",".*(о|а)ск(о|а)рблять.*","хул(е|и)ган",".*м(а|о)нд(а|о)рин.*",".*р(а|о)ссл(а|о)блять.*",".*п(о|а)тр(е|и)блять.*",".*@.*\\.(ру|сом|нет)$"],t.goodWords=["дезмонда","застрахуйте","одномандатный","подстрахуй","психуй"],t.letters={a:"а",b:"в",c:"с",e:"е",f:"ф",g:"д",h:"н",i:"и",k:"к",l:"л",m:"м",n:"н",o:"о",p:"р",r:"р",s:"с",t:"т",u:"у",v:"в",x:"х",y:"у",w:"ш",z:"з","ё":"е",6:"б",9:"д"},t.containsMat=function(text){for(var words=(text=t.cleanBadSymbols(text.toLowerCase())).split(" "),i=0;i<words.length;i++){var word=t.convertEngToRus(words[i]);if((!t.isInGoodWords(word)||!t.isInGoodPatterns(word))&&t.isInBadPatterns(word))return!0}return!!t.containsMatInSpaceWords(words)},t.convertEngToRus=function(word){for(var j=0;j<word.length;j++)for(var key in t.letters)word.charAt(j)==key&&(word=word.substring(0,j)+t.letters[key]+word.substring(j+1,word.length));return word},t.cleanBadSymbols=function(text){return text.replace(/[^a-zA-Zа-яА-Яё0-9\s]/g,"")},t.isInGoodWords=function(word){for(var i=0;i<t.goodWords.length;i++)if(word==t.goodWords[i])return!0;return!1},t.isInGoodPatterns=function(word){for(var i=0;i<t.goodPatterns.length;i++)if(new RegExp(t.goodPatterns[i]).test(word))return!0;return!1},t.isInBadPatterns=function(word){for(var i=0;i<t.badPatterns.length;i++)if(new RegExp(t.badPatterns[i]).test(word))return!0;return!1},t.containsMatInSpaceWords=function(words){for(var spaceWords=t.findSpaceWords(words),i=0;i<spaceWords.length;i++){var word=t.convertEngToRus(spaceWords[i]);if(t.isInBadPatterns(word))return!0}return!1},t.findSpaceWords=function(words){for(var out=[],spaceWord="",i=0;i<words.length;i++){var word=words[i];word.length<=3?spaceWord+=word:spaceWord.length>=3&&(out.push(spaceWord),spaceWord="")}return out},t.addBadPattern=function(pattern){t.badPatterns.push(pattern)},t.addGoodPattern=function(pattern){t.goodPatterns.push(pattern)},t.addGoodWord=function(pattern){t.goodWords.push(pattern)},
/*!
  документация: https://github.com/fengyuanchen/compressorjs/blob/master/README.md
 * Compressor.js v1.0.6
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-11-23T04:43:12.442Z
 */
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).Compressor=factory()}(this,(function(){function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var canvasToBlob=function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}((function(module){"undefined"!=typeof window&&function(window){var CanvasPrototype=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,hasBlobConstructor=window.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),hasArrayBufferViewSupport=hasBlobConstructor&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,dataURIPattern=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,dataURLtoBlob=(hasBlobConstructor||BlobBuilder)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(dataURI){var matches,mediaType,isBase64,dataString,byteString,arrayBuffer,intArray,i,bb;if(!(matches=dataURI.match(dataURIPattern)))throw new Error("invalid data URI");for(mediaType=matches[2]?matches[1]:"text/plain"+(matches[3]||";charset=US-ASCII"),isBase64=!!matches[4],dataString=dataURI.slice(matches[0].length),byteString=isBase64?atob(dataString):decodeURIComponent(dataString),arrayBuffer=new ArrayBuffer(byteString.length),intArray=new Uint8Array(arrayBuffer),i=0;i<byteString.length;i+=1)intArray[i]=byteString.charCodeAt(i);return hasBlobConstructor?new Blob([hasArrayBufferViewSupport?intArray:arrayBuffer],{type:mediaType}):((bb=new BlobBuilder).append(arrayBuffer),bb.getBlob(mediaType))};window.HTMLCanvasElement&&!CanvasPrototype.toBlob&&(CanvasPrototype.mozGetAsFile?CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){quality&&CanvasPrototype.toDataURL&&dataURLtoBlob?callback(dataURLtoBlob(self.toDataURL(type,quality))):callback(self.mozGetAsFile("blob",type))}))}:CanvasPrototype.toDataURL&&dataURLtoBlob&&(CanvasPrototype.toBlob=function(callback,type,quality){var self=this;setTimeout((function(){callback(dataURLtoBlob(self.toDataURL(type,quality)))}))})),module.exports?module.exports=dataURLtoBlob:window.dataURLtoBlob=dataURLtoBlob}(window)})),DEFAULTS={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},WINDOW="undefined"!=typeof window&&void 0!==window.document?window:{},slice=Array.prototype.slice;var REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(value){return REGEXP_IMAGE_TYPE.test(value)}var fromCharCode=String.fromCharCode;var btoa=WINDOW.btoa;function resetAndGetOrientation(arrayBuffer){var orientation,dataView=new DataView(arrayBuffer);try{var littleEndian,app1Start,ifdStart;if(255===dataView.getUint8(0)&&216===dataView.getUint8(1))for(var length=dataView.byteLength,offset=2;offset+1<length;){if(255===dataView.getUint8(offset)&&225===dataView.getUint8(offset+1)){app1Start=offset;break}offset+=1}if(app1Start){var tiffOffset=app1Start+10;if("Exif"===function getStringFromCharCode(dataView,start,length){var i,str="";for(length+=start,i=start;i<length;i+=1)str+=fromCharCode(dataView.getUint8(i));return str}(dataView,app1Start+4,4)){var endianness=dataView.getUint16(tiffOffset);if(((littleEndian=18761===endianness)||19789===endianness)&&42===dataView.getUint16(tiffOffset+2,littleEndian)){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);firstIFDOffset>=8&&(ifdStart=tiffOffset+firstIFDOffset)}}}if(ifdStart){var _offset,i,_length=dataView.getUint16(ifdStart,littleEndian);for(i=0;i<_length;i+=1)if(_offset=ifdStart+12*i+2,274===dataView.getUint16(_offset,littleEndian)){_offset+=8,orientation=dataView.getUint16(_offset,littleEndian),dataView.setUint16(_offset,1,littleEndian);break}}}catch(e){orientation=1}return orientation}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(value){var times=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return REGEXP_DECIMALS.test(value)?Math.round(value*times)/times:value}var ArrayBuffer$1=WINDOW.ArrayBuffer,FileReader=WINDOW.FileReader,URL=WINDOW.URL||WINDOW.webkitURL,REGEXP_EXTENSION=/\.\w+$/,AnotherCompressor=WINDOW.Compressor;return function(){function Compressor(file,options){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Compressor),this.file=file,this.image=new Image,this.options=_objectSpread2({},DEFAULTS,{},options),this.aborted=!1,this.result=null,this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Compressor,[{key:"init",value:function init(){var _this=this,file=this.file,options=this.options;if(function isBlob(input){return"undefined"!=typeof Blob&&(input instanceof Blob||"[object Blob]"===Object.prototype.toString.call(input))}(file)){var mimeType=file.type;if(isImageType(mimeType))if(URL&&FileReader)if(ArrayBuffer$1||(options.checkOrientation=!1),URL&&!options.checkOrientation)this.load({url:URL.createObjectURL(file)});else{var reader=new FileReader,checkOrientation=options.checkOrientation&&"image/jpeg"===mimeType;this.reader=reader,reader.onload=function(_ref){var result=_ref.target.result,data={};if(checkOrientation){var orientation=resetAndGetOrientation(result);orientation>1||!URL?(data.url=function arrayBufferToDataURL(arrayBuffer,mimeType){for(var value,chunks=[],uint8=new Uint8Array(arrayBuffer);uint8.length>0;)chunks.push(fromCharCode.apply(null,(value=uint8.subarray(0,8192),Array.from?Array.from(value):slice.call(value)))),uint8=uint8.subarray(8192);return"data:".concat(mimeType,";base64,").concat(btoa(chunks.join("")))}(result,mimeType),orientation>1&&_extends(data,function parseOrientation(orientation){var rotate=0,scaleX=1,scaleY=1;switch(orientation){case 2:scaleX=-1;break;case 3:rotate=-180;break;case 4:scaleY=-1;break;case 5:rotate=90,scaleY=-1;break;case 6:rotate=90;break;case 7:rotate=90,scaleX=-1;break;case 8:rotate=-90}return{rotate:rotate,scaleX:scaleX,scaleY:scaleY}}(orientation))):data.url=URL.createObjectURL(file)}else data.url=result;_this.load(data)},reader.onabort=function(){_this.fail(new Error("Aborted to read the image with FileReader."))},reader.onerror=function(){_this.fail(new Error("Failed to read the image with FileReader."))},reader.onloadend=function(){_this.reader=null},checkOrientation?reader.readAsArrayBuffer(file):reader.readAsDataURL(file)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function load(data){var _this2=this,file=this.file,image=this.image;image.onload=function(){_this2.draw(_objectSpread2({},data,{naturalWidth:image.naturalWidth,naturalHeight:image.naturalHeight}))},image.onabort=function(){_this2.fail(new Error("Aborted to load the image."))},image.onerror=function(){_this2.fail(new Error("Failed to load the image."))},WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)&&(image.crossOrigin="anonymous"),image.alt=file.name,image.src=data.url}},{key:"draw",value:function draw(_ref2){var _this3=this,naturalWidth=_ref2.naturalWidth,naturalHeight=_ref2.naturalHeight,_ref2$rotate=_ref2.rotate,rotate=void 0===_ref2$rotate?0:_ref2$rotate,_ref2$scaleX=_ref2.scaleX,scaleX=void 0===_ref2$scaleX?1:_ref2$scaleX,_ref2$scaleY=_ref2.scaleY,scaleY=void 0===_ref2$scaleY?1:_ref2$scaleY,file=this.file,image=this.image,options=this.options,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),aspectRatio=naturalWidth/naturalHeight,is90DegreesRotated=Math.abs(rotate)%180==90,maxWidth=Math.max(options.maxWidth,0)||1/0,maxHeight=Math.max(options.maxHeight,0)||1/0,minWidth=Math.max(options.minWidth,0)||0,minHeight=Math.max(options.minHeight,0)||0,width=Math.max(options.width,0)||naturalWidth,height=Math.max(options.height,0)||naturalHeight;if(is90DegreesRotated){var _ref3=[maxHeight,maxWidth];maxWidth=_ref3[0],maxHeight=_ref3[1];var _ref4=[minHeight,minWidth];minWidth=_ref4[0],minHeight=_ref4[1];var _ref5=[height,width];width=_ref5[0],height=_ref5[1]}maxWidth<1/0&&maxHeight<1/0?maxHeight*aspectRatio>maxWidth?maxHeight=maxWidth/aspectRatio:maxWidth=maxHeight*aspectRatio:maxWidth<1/0?maxHeight=maxWidth/aspectRatio:maxHeight<1/0&&(maxWidth=maxHeight*aspectRatio),minWidth>0&&minHeight>0?minHeight*aspectRatio>minWidth?minHeight=minWidth/aspectRatio:minWidth=minHeight*aspectRatio:minWidth>0?minHeight=minWidth/aspectRatio:minHeight>0&&(minWidth=minHeight*aspectRatio),height*aspectRatio>width?height=width/aspectRatio:width=height*aspectRatio;var destX=-(width=Math.floor(normalizeDecimalNumber(Math.min(Math.max(width,minWidth),maxWidth))))/2,destY=-(height=Math.floor(normalizeDecimalNumber(Math.min(Math.max(height,minHeight),maxHeight))))/2,destWidth=width,destHeight=height;if(is90DegreesRotated){var _ref6=[height,width];width=_ref6[0],height=_ref6[1]}canvas.width=width,canvas.height=height,isImageType(options.mimeType)||(options.mimeType=file.type);var fillStyle="transparent";if(file.size>options.convertSize&&"image/png"===options.mimeType&&(fillStyle="#fff",options.mimeType="image/jpeg"),context.fillStyle=fillStyle,context.fillRect(0,0,width,height),options.beforeDraw&&options.beforeDraw.call(this,context,canvas),!this.aborted&&(context.save(),context.translate(width/2,height/2),context.rotate(rotate*Math.PI/180),context.scale(scaleX,scaleY),context.drawImage(image,destX,destY,destWidth,destHeight),context.restore(),options.drew&&options.drew.call(this,context,canvas),!this.aborted)){var done=function done(result){_this3.aborted||_this3.done({naturalWidth:naturalWidth,naturalHeight:naturalHeight,result:result})};canvas.toBlob?canvas.toBlob(done,options.mimeType,options.quality):done(canvasToBlob(canvas.toDataURL(options.mimeType,options.quality)))}}},{key:"done",value:function done(_ref7){var naturalWidth=_ref7.naturalWidth,naturalHeight=_ref7.naturalHeight,result=_ref7.result,file=this.file,image=this.image,options=this.options;if(URL&&!options.checkOrientation&&URL.revokeObjectURL(image.src),result)if(options.strict&&result.size>file.size&&options.mimeType===file.type&&!(options.width>naturalWidth||options.height>naturalHeight||options.minWidth>naturalWidth||options.minHeight>naturalHeight))result=file;else{var date=new Date;result.lastModified=date.getTime(),result.lastModifiedDate=date,result.name=file.name,result.name&&result.type!==file.type&&(result.name=result.name.replace(REGEXP_EXTENSION,function imageTypeToExtension(value){var extension=isImageType(value)?value.substr(6):"";return"jpeg"===extension&&(extension="jpg"),".".concat(extension)}(result.type)))}else result=file;this.result=result,options.success&&options.success.call(this,result)}},{key:"fail",value:function fail(err){var options=this.options;if(!options.error)throw err;options.error.call(this,err)}},{key:"abort",value:function abort(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function noConflict(){return window.Compressor=AnotherCompressor,Compressor}},{key:"setDefaults",value:function setDefaults(options){_extends(DEFAULTS,options)}}]),Compressor}()})),$(document).ready((function(){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){var NAME="dropdown",EVENT_KEY=".bs.dropdown",JQUERY_NO_CONFLICT=$.fn[NAME],Event={HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,CLICK:"tap"+EVENT_KEY,CLICK_DATA_API:"tap.bs.dropdown.data-api",FOCUSIN_DATA_API:"focusin.bs.dropdown.data-api",KEYDOWN_DATA_API:"keydown.bs.dropdown.data-api"},ClassName={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",SHOW:"active"},Selector={DATA_TOGGLE:"[touch]",FORM_CHILD:"[touch] ~ div, [touch] ~ ul, [touch] ~ nav",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},Dropdown=function(){function Dropdown(element){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Dropdown),this._element=element,this._addEventListeners()}return Dropdown.prototype.toggle=function toggle(){if(ClassName.SHOW=$(this).attr("touch"),this.disabled||$(this).hasClass(ClassName.DISABLED))return!1;var parent=Dropdown._getParentFromElement(this),isActive=$(parent).hasClass(ClassName.SHOW);if(Dropdown._clearMenus(),isActive)return!1;if("ontouchstart"in document.documentElement&&!$(parent).closest(Selector.NAVBAR_NAV).length){var dropdown=document.createElement("div");dropdown.className=ClassName.BACKDROP,$(dropdown).on("tap",Dropdown._clearMenus)}var relatedTarget={relatedTarget:this},showEvent=$.Event(Event.SHOW,relatedTarget);return $(parent).trigger(showEvent),showEvent.isDefaultPrevented()||(this.focus(),this.setAttribute("aria-expanded",!0),$(parent).toggleClass(ClassName.SHOW),$(parent).trigger($.Event(Event.SHOWN,relatedTarget))),!1},Dropdown.prototype.dispose=function dispose(){$.removeData(this._element,"bs.dropdown"),$(this._element).off(EVENT_KEY),this._element=null},Dropdown.prototype._addEventListeners=function _addEventListeners(){$(this._element).on(Event.CLICK,this.toggle)},Dropdown._jQueryInterface=function _jQueryInterface(config){return this.each((function(){var data=$(this).data("bs.dropdown");if(data||(data=new Dropdown(this),$(this).data("bs.dropdown",data)),"string"==typeof config){if(void 0===data[config])throw new Error('No method named "'+config+'"');data[config].call(this)}}))},Dropdown._clearMenus=function _clearMenus(event){if(!event||3!==event.which){var backdrop=$(Selector.BACKDROP)[0];backdrop&&backdrop.parentNode.removeChild(backdrop);for(var toggles=$.makeArray($(Selector.DATA_TOGGLE)),i=0;i<toggles.length;i++){var parent=Dropdown._getParentFromElement(toggles[i]),relatedTarget={relatedTarget:toggles[i]};if($(parent).hasClass(ClassName.SHOW)&&!(event&&("tap"===event.type&&/input|textarea/i.test(event.target.tagName)||"focusin"===event.type)&&$.contains(parent,event.target))){var hideEvent=$.Event(Event.HIDE,relatedTarget);$(parent).trigger(hideEvent),hideEvent.isDefaultPrevented()||(toggles[i].setAttribute("aria-expanded","false"),$(parent).removeClass(ClassName.SHOW).trigger($.Event(Event.HIDDEN,relatedTarget)))}}}},Dropdown._getParentFromElement=function _getParentFromElement(element){var parent=void 0,selector=Util.getSelectorFromElement(element);return selector&&(parent=$(selector)[0]),parent||element.parentNode},Dropdown._dataApiKeydownHandler=function _dataApiKeydownHandler(event){if(/(38|40|27|32)/.test(event.which)&&!/input|textarea/i.test(event.target.tagName)&&(event.preventDefault(),event.stopPropagation(),!this.disabled&&!$(this).hasClass(ClassName.DISABLED))){var parent=Dropdown._getParentFromElement(this),isActive=$(parent).hasClass(ClassName.SHOW);if(!isActive&&27!==event.which||isActive&&27===event.which){if(27===event.which){var toggle=$(parent).find(Selector.DATA_TOGGLE)[0];$(toggle).trigger("focus")}$(this).trigger("tap")}else{var items=$(parent).find(Selector.VISIBLE_ITEMS).get();if(items.length){var index=items.indexOf(event.target);38===event.which&&index>0&&index--,40===event.which&&index<items.length-1&&index++,index<0&&(index=0),items[index].focus()}}}},_createClass(Dropdown,null,[{key:"VERSION",get:function get(){return"4.0.0-alpha.6"}}]),Dropdown}();$(document).on(Event.KEYDOWN_DATA_API,Selector.DATA_TOGGLE,Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API,Selector.ROLE_MENU,Dropdown._dataApiKeydownHandler).on(Event.KEYDOWN_DATA_API,Selector.ROLE_LISTBOX,Dropdown._dataApiKeydownHandler).on(Event.CLICK_DATA_API+" "+Event.FOCUSIN_DATA_API,Dropdown._clearMenus).on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,Dropdown.prototype.toggle).on(Event.CLICK_DATA_API,Selector.FORM_CHILD,(function(e){e.stopPropagation()})),$.fn[NAME]=Dropdown._jQueryInterface,$.fn[NAME].Constructor=Dropdown,$.fn[NAME].noConflict=function(){return $.fn[NAME]=JQUERY_NO_CONFLICT,Dropdown._jQueryInterface}}(jQuery);var Util=function($){var transition=!1,TransitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};function toType(obj){return{}.toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function transitionEndEmulator(duration){var _this=this,called=!1;return $(this).one(Util.TRANSITION_END,(function(){called=!0})),setTimeout((function(){called||Util.triggerTransitionEnd(_this)}),duration),this}var Util={TRANSITION_END:"bsTransitionEnd",getUID:function getUID(prefix){do{prefix+=~~(1e6*Math.random())}while(document.getElementById(prefix));return prefix},getSelectorFromElement:function getSelectorFromElement(element){var selector=element.getAttribute("data-target");return selector||(selector=element.getAttribute("href")||"",selector=/^#[a-z]/i.test(selector)?selector:null),selector},reflow:function reflow(element){return element.offsetHeight},triggerTransitionEnd:function triggerTransitionEnd(element){$(element).trigger(transition.end)},supportsTransitionEnd:function supportsTransitionEnd(){return Boolean(transition)},typeCheckConfig:function typeCheckConfig(componentName,config,configTypes){for(var property in configTypes)if(configTypes.hasOwnProperty(property)){var expectedTypes=configTypes[property],value=config[property],valueType=value&&((obj=value)[0]||obj).nodeType?"element":toType(value);if(!new RegExp(expectedTypes).test(valueType))throw new Error(componentName.toUpperCase()+': Option "'+property+'" provided type "'+valueType+'" but expected type "'+expectedTypes+'".')}var obj}};return function setTransitionEndSupport(){transition=function transitionEndTest(){if(window.QUnit)return!1;var el=document.createElement("bootstrap");for(var name in TransitionEndEvent)if(void 0!==el.style[name])return{end:TransitionEndEvent[name]};return!1}(),$.fn.emulateTransitionEnd=transitionEndEmulator,Util.supportsTransitionEnd()&&($.event.special[Util.TRANSITION_END]=function getSpecialTransitionEndEvent(){return{bindType:transition.end,delegateType:transition.end,handle:function handle(event){if($(event.target).is(this))return event.handleObj.handler.apply(this,arguments)}}}())}(),Util}(jQuery)})),jBox.prototype.attach=function(t,i){return t||(t=jQuery(this.options.attach.selector||this.options.attach)),i||(i=this.options.trigger),t&&t.length&&jQuery.each(t,function(t,s){(s=jQuery(s)).data("jBox-attached-"+this.id)||("title"==this.options.getContent&&null!=s.attr("title")&&s.data("jBox-getContent",s.attr("title")).removeAttr("title"),this.attachedElements||(this.attachedElements=[]),this.attachedElements.push(s[0]),s.on(i+".jBox-attach-"+this.id,function(t){if(this.timer&&clearTimeout(this.timer),"mouseenter"!=i||!this.isOpen||this.source[0]!=s[0]){if(this.isOpen&&this.source&&this.source[0]!=s[0])var o=!0;this.source=s,!this.options.target&&(this.target=s),"click"==i&&this.options.preventDefault&&t.preventDefault(),this["click"!=i||o?"open":"toggle"]()}}.bind(this)),"mouseenter"==this.options.trigger&&s.on("mouseleave",function(t){(!this.options.closeOnMouseleave||t.relatedTarget!=this.wrapper[0]&&!jQuery(t.relatedTarget).parents("#"+this.id).length)&&this.close()}.bind(this)),s.data("jBox-attached-"+this.id,i),this.options._onAttach&&this.options._onAttach.bind(this)(s))}.bind(this)),this},jBox.prototype.detach=function(t){return t||(t=this.attachedElements||[]),t&&t.length&&jQuery.each(t,function(t,i){(i=jQuery(i)).data("jBox-attached-"+this.id)&&(i.off(i.data("jBox-attached-"+this.id)+".jBox-attach-"+this.id),i.data("jBox-attached-"+this.id,null)),this.attachedElements=jQuery.grep(this.attachedElements,(function(t){return t!=i[0]}))}.bind(this)),this},jBox.prototype.setTitle=function(t,i){var s=this.wrapper.height(),o=this.wrapper.width();return null==t||null==t||(!this.wrapper&&this._create(),this.title||(this.titleContainer=jQuery("<div/>",{class:"jBox-title"}),this.title=jQuery("<div/>").appendTo(this.titleContainer),this.wrapper.addClass("jBox-hasTitle"),("title"==this.options.closeButton||!0===this.options.closeButton&&!this.options.overlay)&&(this.wrapper.addClass("jBox-closeButton-title"),this.closeButton.appendTo(this.titleContainer)),this.titleContainer.insertBefore(this.content)),this.title.html(t),!i&&this.options.repositionOnContent&&(s!=this.wrapper.height()||o!=this.wrapper.width())&&this.position()),this},jBox.prototype.setContent=function(t,i){if(null==t)return this;!this.wrapper&&this._create();var s=this.wrapper.height(),o=this.wrapper.width(),e=jQuery("body").height(),n=jQuery("body").width();switch(this.content.children("[data-jbox-content-appended]").appendTo("body").css({display:"none"}),jQuery.type(t)){case"string":this.content.html(t);break;case"object":this.content.html(""),t.attr("data-jbox-content-appended",1).appendTo(this.content).css({display:"block"})}var a={x:n-jQuery("body").width(),y:e-jQuery("body").height()};return!i&&this.options.repositionOnContent&&(s!=this.wrapper.height()||o!=this.wrapper.width())&&this.position({adjustOffset:a}),this},jBox.prototype.setDimensions=function(t,i,s){!this.wrapper&&this._create(),this.content.css(t,i),(null==s||s)&&this.position()},jBox.prototype.setWidth=function(t,i){this.setDimensions("width",t,i)},jBox.prototype.setHeight=function(t,i){this.setDimensions("height",t,i)},jBox.prototype.position=function(t){if(t||(t={}),this.target=t.target||this.target||this.options.target||jQuery(window),this.dimensions={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()},"mouse"!=this.target){if("center"==this.options.position.x&&"center"==this.options.position.y)return this.wrapper.css({left:"50%",top:"50%",marginLeft:-.5*this.dimensions.x+this.options.offset.x,marginTop:-.5*this.dimensions.y+this.options.offset.y}),this;var i=this.target.offset();!this.target.data("jBox-fixed")&&this.target.data("jBox-fixed",this.target[0]==jQuery(window)[0]||"fixed"!=this.target.css("position")&&this.target.parents().filter((function(){return"fixed"==jQuery(this).css("position")})).length<=0?"static":"fixed"),"fixed"==this.target.data("jBox-fixed")&&this.options.fixed&&(i.top=i.top-jQuery(window).scrollTop(),i.left=i.left-jQuery(window).scrollLeft()),this.targetDimensions={x:this.target.outerWidth(),y:this.target.outerHeight(),top:i?i.top:0,left:i?i.left:0},this.pos={};var s=function(t){if(-1!=jQuery.inArray(this.options.position[t],["top","right","bottom","left","center"])){var i=this.options.attributes[t]="x"==t?"left":"top";return this.pos[i]=this.targetDimensions[i],"center"==this.options.position[t]?void(this.pos[i]+=Math.ceil((this.targetDimensions[t]-this.dimensions[t])/2)):(i!=this.options.position[t]&&(this.pos[i]+=this.targetDimensions[t]-this.dimensions[t]),void((this.options.outside==t||"xy"==this.options.outside)&&(this.pos[i]+=this.dimensions[t]*(i!=this.options.position[t]?1:-1))))}this.pos[this.options.attributes[t]]=this.options.position[t]}.bind(this);if(s("x"),s("y"),this.options.pointer&&"number"!=jQuery.type(this.options.position.x)&&"number"!=jQuery.type(this.options.position.y)){var o=0;if("center"===this.pointer.align)"center"!=this.options.position[this._getOpp(this.options.outside)]&&(o+=this.dimensions[this._getOpp(this.options.outside)]/2);else if("center"===this.options.position[this._getOpp(this.options.outside)])o+=(this.dimensions[this._getOpp(this.options.outside)]/2-this.pointer.dimensions[this._getOpp(this.options.outside)]/2)*(this.pointer.align==this._getTL(this.pointer.align)?1:-1);else o+=this.pointer.align!=this.options.position[this._getOpp(this.options.outside)]?this.dimensions[this._getOpp(this.options.outside)]*(-1!==jQuery.inArray(this.pointer.align,["top","left"])?1:-1)+this.pointer.dimensions[this._getOpp(this.options.outside)]/2*(-1!==jQuery.inArray(this.pointer.align,["top","left"])?-1:1):this.pointer.dimensions[this._getOpp(this.options.outside)]/2*(-1!==jQuery.inArray(this.pointer.align,["top","left"])?1:-1);o*=this.options.position[this._getOpp(this.options.outside)]==this.pointer.alignAttribute?-1:1,o+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1),this.pos[this._getTL(this._getOpp(this.pointer.xy))]+=o}return t.adjustOffset&&t.adjustOffset.x&&(this.pos[this.options.attributes.x]+=parseInt(t.adjustOffset.x)*("left"==this.options.attributes.x?1:-1)),t.adjustOffset&&t.adjustOffset.y&&(this.pos[this.options.attributes.y]+=parseInt(t.adjustOffset.y)*("top"==this.options.attributes.y?1:-1)),this.pos[this.options.attributes.x]+=this.options.offset.x,this.pos[this.options.attributes.y]+=this.options.offset.y,this.wrapper.css(this.pos),this._adjustPosition(),this}},jBox.prototype.open=function(t){if(t||(t={}),this.isDestroyed)return!1;if(!this.wrapper&&this._create(),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var i=function(){this.source&&this.options.getTitle&&(this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle))),this.source&&this.options.getContent&&(this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent"),!0):this.source.attr(this.options.getContent)&&this.setContent(this.source.attr(this.options.getContent),!0)),this.options.onOpen.bind(this)(),this.options._onOpen&&this.options._onOpen.bind(this)(),(this.options.ajax&&this.options.ajax.url&&(!this.ajaxLoaded||this.options.ajax.reload)||t.ajax&&t.ajax.url)&&this.ajax(t.ajax||null),(!this.positionedOnOpen||this.options.repositionOnOpen)&&this.position({target:t.target})&&(this.positionedOnOpen=!0),this.isClosing&&this._abortAnimation(),this.isOpen||(this.isOpen=!0,this._attachEvents(),this.options.blockScroll&&jQuery("body").addClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._addOverlay(),this.options.animation&&!this.isClosing&&this._animate("open"),this.options.fade?this.wrapper.stop().animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.isOpening=!0,this.wrapper.css({display:"block"})}.bind(this),always:function(){this.isOpening=!1}.bind(this)}):this.wrapper.css({display:"block",opacity:1}))}.bind(this);return!this.options.delayOpen||this.isOpen||this.isClosing||t.ignoreDelay?i():this.timer=setTimeout(i,this.options.delayOpen),this},jBox.prototype.close=function(t){if(t||(t={}),this.isDestroyed)return!1;if(this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var i=function(){this.options.onClose.bind(this)(),this.options._onClose&&this.options._onClose.bind(this)(),this.isOpen&&(this.isOpen=!1,this._detachEvents(),this.options.blockScroll&&jQuery("body").removeClass("jBox-blockScroll-"+this.id),this.options.overlay&&this._removeOverlay(),this.options.animation&&!this.isOpening&&this._animate("close"),this.options.fade?this.wrapper.stop().animate({opacity:0},{queue:!1,duration:this.options.fade,start:function(){this.isClosing=!0}.bind(this),complete:function(){this.wrapper.css({display:"none"}),this.options.onCloseComplete&&this.options.onCloseComplete.bind(this)(),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()}.bind(this),always:function(){this.isClosing=!1}.bind(this)}):(this.wrapper.css({display:"none",opacity:0}),this.options._onCloseComplete&&this.options._onCloseComplete.bind(this)()))}.bind(this);return t.ignoreDelay?i():this.timer=setTimeout(i,Math.max(this.options.delayClose,10)),this},jBox.prototype.toggle=function(t){return this[this.isOpen?"close":"open"](t),this},jBox.prototype.disable=function(){return this.isDisabled=!0,this},jBox.prototype.enable=function(){return this.isDisabled=!1,this},jBox.prototype.ajax=function(t){t||(t={}),this.options.ajax.getData&&!t.data&&this.source&&null!=this.source.attr(this.options.ajax.getData)&&(t.data=this.source.attr(this.options.ajax.getData)||"");var i=jQuery.extend(!0,{},this.options.ajax);this.ajaxRequest&&this.ajaxRequest.abort();var s=t.beforeSend||i.beforeSend||function(){},o=t.complete||i.complete||function(){},e=jQuery.extend(!0,i,t);return e.beforeSend=function(){e.spinner&&(this.wrapper.addClass("jBox-loading"),this.spinner=jQuery(!0!==e.spinner?e.spinner:'<div class="jBox-spinner"></div>').appendTo(this.container)),s.bind(this)()}.bind(this),e.complete=function(t){this.wrapper.removeClass("jBox-loading"),this.spinner&&this.spinner.remove(),e.setContent&&this.setContent(t.responseText),this.ajaxLoaded=!0,o.bind(this)(t)}.bind(this),this.ajaxRequest=jQuery.ajax(e),this},jBox.prototype.audio=function(t){if(t||(t={}),jBox._audio||(jBox._audio={}),!t.url||this.IE8)return this;if(!jBox._audio[t.url]){var i=jQuery("<audio/>");jQuery("<source/>",{src:t.url+".mp3"}).appendTo(i),jQuery("<source/>",{src:t.url+".ogg"}).appendTo(i),jBox._audio[t.url]=i[0]}jBox._audio[t.url].volume=Math.min(null!=t.volume?t.volume:(null!=this.options.volume?this.options.volume:100)/100,1),jBox._audio[t.url].pause();try{jBox._audio[t.url].currentTime=0}catch(s){}return jBox._audio[t.url].play(),this},jBox.prototype.destroy=function(){return this.detach().close({ignoreDelay:!0}),this.wrapper&&this.wrapper.remove(),this.isDestroyed=!0,this},jBox._getUniqueID=function(){var t=1;return function(){return t++}}(),jQuery.fn.jBox=function(t,i){return t||(t={}),i||(i={}),new jBox(t,jQuery.extend(i,{attach:this}))},Function.prototype.bind||(Function.prototype.bind=function(t){var i=Array.prototype.slice.call(arguments,1),s=this,o=function(){},e=function(){return s.apply(this instanceof o&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,e.prototype=new o,e}),d=jQuery,r=function(b){return b.split("").reverse().join("")},m={numberStep:function(b,a){var e=Math.floor(b);d(a.elem).text(e)}},g=function(b){var a=b.elem;a.nodeType&&a.parentNode&&((a=a._animateNumberSetter)||(a=m.numberStep),a(b.now,b))},d.Tween&&d.Tween.propHooks?d.Tween.propHooks.number={set:g}:d.fx.step.number=g,d.animateNumber={numberStepFactories:{append:function(b){return function(a,e){var f=Math.floor(a);d(e.elem).prop("number",a).text(f+b)}},separator:function(b,a,e){return b=b||" ",a=a||3,e=e||"",function(f,k){var u=0>f,c=Math.floor((u?-1:1)*f).toString(),n=d(k.elem);if(c.length>a){for(var p,s,q,h=c,l=a,m=h.split("").reverse(),t=(c=[],0),g=Math.ceil(h.length/l);t<g;t++){for(p="",q=0;q<l&&(s=t*l+q)!==h.length;q++)p+=m[s];c.push(p)}h=c.length-1,l=r(c[h]),c[h]=r(parseInt(l,10).toString()),c=c.join(b),c=r(c)}n.prop("number",f).text((u?"-":"")+c+e)}}}},d.fn.animateNumber=function(){for(var b=arguments[0],a=d.extend({},m,b),e=d(this),f=[a],k=1,g=arguments.length;k<g;k++)f.push(arguments[k]);if(b.numberStep){var c=this.each((function(){this._animateNumberSetter=b.numberStep})),n=a.complete;a.complete=function(){c.each((function(){delete this._animateNumberSetter})),n&&n.apply(this,arguments)}}return e.animate.apply(e,f)},
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}((function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function read(s,converter){var value=config.raw?s:function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var s,result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=(s=parts.shift(),config.raw?s:decodeURIComponent(s)),cookie=parts.join("=");if(key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return $.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key)}})),n=function(n){function e(n){var e=7.5625,t=2.75;return n<1/t?e*n*n:n<2/t?e*(n-=1.5/t)*n+.75:n<2.5/t?e*(n-=2.25/t)*n+.9375:e*(n-=2.625/t)*n+.984375}void 0!==n.easing&&(n.easing.jswing=n.easing.swing);var t=Math.pow,u=Math.sqrt,r=Math.sin,i=Math.cos,a=Math.PI,c=1.70158,o=1.525*c,s=2*a/3,f=2*a/4.5;n.extend(n.easing,{def:"easeOutQuad",swing:function(e){return n.easing[n.easing.def](e)},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return 1-(1-n)*(1-n)},easeInOutQuad:function(n){return n<.5?2*n*n:1-t(-2*n+2,2)/2},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1-t(1-n,3)},easeInOutCubic:function(n){return n<.5?4*n*n*n:1-t(-2*n+2,3)/2},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1-t(1-n,4)},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-t(-2*n+2,4)/2},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1-t(1-n,5)},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1-t(-2*n+2,5)/2},easeInSine:function(n){return 1-i(n*a/2)},easeOutSine:function(n){return r(n*a/2)},easeInOutSine:function(n){return-(i(a*n)-1)/2},easeInExpo:function(n){return 0===n?0:t(2,10*n-10)},easeOutExpo:function(n){return 1===n?1:1-t(2,-10*n)},easeInOutExpo:function(n){return 0===n?0:1===n?1:n<.5?t(2,20*n-10)/2:(2-t(2,-20*n+10))/2},easeInCirc:function(n){return 1-u(1-t(n,2))},easeOutCirc:function(n){return u(1-t(n-1,2))},easeInOutCirc:function(n){return n<.5?(1-u(1-t(2*n,2)))/2:(u(1-t(-2*n+2,2))+1)/2},easeInElastic:function(n){return 0===n?0:1===n?1:-t(2,10*n-10)*r((10*n-10.75)*s)},easeOutElastic:function(n){return 0===n?0:1===n?1:t(2,-10*n)*r((10*n-.75)*s)+1},easeInOutElastic:function(n){return 0===n?0:1===n?1:n<.5?-t(2,20*n-10)*r((20*n-11.125)*f)/2:t(2,-20*n+10)*r((20*n-11.125)*f)/2+1},easeInBack:function(n){return(c+1)*n*n*n-c*n*n},easeOutBack:function(n){return 1+(c+1)*t(n-1,3)+c*t(n-1,2)},easeInOutBack:function(n){return n<.5?t(2*n,2)*(7.189819*n-o)/2:(t(2*n-2,2)*((o+1)*(2*n-2)+o)+2)/2},easeInBounce:function(n){return 1-e(1-n)},easeOutBounce:e,easeInOutBounce:function(n){return n<.5?(1-e(1-2*n))/2:(1+e(2*n-1))/2}})},"function"==typeof define&&define.amd?define(["jquery"],(function(e){return n(e)})):"object"==typeof module&&"object"==typeof module.exports?exports=n(require("jquery")):n(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}((function($){var caretTimeoutId,ua=navigator.userAgent,iPhone=/iphone/i.test(ua),chrome=/chrome/i.test(ua),android=/android/i.test(ua);$.mask={definitions:{"^":"[0-9/-_]","&":"[A-Za-zА-Яа-яЁ]","*":"[A-Za-zА-Яа-яёЁ0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},$.fn.extend({caret:function(begin,end){var range;if(0!==this.length&&!this.is(":hidden")&&this.get(0)===document.activeElement)return"number"==typeof begin?(end="number"==typeof end?end:begin,this.each((function(){this.setSelectionRange?this.setSelectionRange(begin,end):this.createTextRange&&((range=this.createTextRange()).collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())}))):(this[0].setSelectionRange?(begin=this[0].selectionStart,end=this[0].selectionEnd):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-1e5),end=begin+range.text.length),{begin:begin,end:end})},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){var defs,tests,partialPosition,firstNonMaskPos,lastRequiredNonMaskPos,len,oldVal;if(!mask&&this.length>0){var fn=$(this[0]).data($.mask.dataName);return fn?fn():void 0}return settings=$.extend({autoclear:$.mask.autoclear,placeholder:$.mask.placeholder,completed:null},settings),defs=$.mask.definitions,tests=[],partialPosition=len=mask.length,firstNonMaskPos=null,mask=String(mask),$.each(mask.split(""),(function(i,c){"?"==c?(len--,partialPosition=i):defs[c]?(tests.push(new RegExp(defs[c])),null===firstNonMaskPos&&(firstNonMaskPos=tests.length-1),i<partialPosition&&(lastRequiredNonMaskPos=tests.length-1)):tests.push(null)})),this.trigger("unmask").each((function(){var input=$(this),buffer=$.map(mask.split(""),(function(c,i){if("?"!=c)return defs[c]?getPlaceholder(i):c})),defaultBuffer=buffer.join(""),focusText=input.val();function tryFireCompleted(){if(settings.completed){for(var i=firstNonMaskPos;i<=lastRequiredNonMaskPos;i++)if(tests[i]&&buffer[i]===getPlaceholder(i))return;settings.completed.call(input)}}function getPlaceholder(i){return i<settings.placeholder.length?settings.placeholder.charAt(i):settings.placeholder.charAt(0)}function seekNext(pos){for(;++pos<len&&!tests[pos];);return pos}function shiftL(begin,end){var i,j;if(!(begin<0)){for(i=begin,j=seekNext(end);i<len;i++)if(tests[i]){if(!(j<len&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j],buffer[j]=getPlaceholder(j),j=seekNext(j)}writeBuffer(),input.caret(Math.max(firstNonMaskPos,begin))}}function blurEvent(e){checkVal(),input.val()!=focusText&&input.change()}function clearBuffer(start,end){var i;for(i=start;i<end&&i<len;i++)tests[i]&&(buffer[i]=getPlaceholder(i))}function writeBuffer(){input.val(buffer.join(""))}function checkVal(allow){var i,c,pos,test=input.val(),lastMatch=-1;for(i=0,pos=0;i<len;i++)if(tests[i]){for(buffer[i]=getPlaceholder(i);pos++<test.length;)if(c=test.charAt(pos-1),tests[i].test(c)){buffer[i]=c,lastMatch=i;break}if(pos>test.length){clearBuffer(i+1,len);break}}else buffer[i]===test.charAt(pos)&&pos++,i<partialPosition&&(lastMatch=i);return allow?writeBuffer():lastMatch+1<partialPosition?settings.autoclear||buffer.join("")===defaultBuffer?(input.val()&&input.val(""),clearBuffer(0,len)):writeBuffer():(writeBuffer(),input.val(input.val().substring(0,lastMatch+1))),partialPosition?i:firstNonMaskPos}input.data($.mask.dataName,(function(){return $.map(buffer,(function(c,i){return tests[i]&&c!=getPlaceholder(i)?c:null})).join("")})),input.one("unmask",(function(){input.off(".mask").removeData($.mask.dataName)})).on("focus.mask",(function(){var pos;input.prop("readonly")||(clearTimeout(caretTimeoutId),focusText=input.val(),pos=checkVal(),caretTimeoutId=setTimeout((function(){input.get(0)===document.activeElement&&(writeBuffer(),pos==mask.replace("?","").length?input.caret(0,pos):input.caret(pos))}),10))})).on("blur.mask",blurEvent).on("keydown.mask",(function keydownEvent(e){if(!input.prop("readonly")){var pos,begin,end,k=e.which||e.keyCode;oldVal=input.val(),8===k||46===k||iPhone&&127===k?(begin=(pos=input.caret()).begin,(end=pos.end)-begin==0&&(begin=46!==k?function seekPrev(pos){for(;--pos>=0&&!tests[pos];);return pos}(begin):end=seekNext(begin-1),end=46===k?seekNext(end):end),clearBuffer(begin,end),shiftL(begin,end-1),e.preventDefault()):13===k?blurEvent.call(this,e):27===k&&(input.val(focusText),input.caret(0,checkVal()),e.preventDefault())}})).on("keypress.mask",(function keypressEvent(e){if(!input.prop("readonly")){var p,c,next,k=e.which||e.keyCode,pos=input.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||k<32)&&k&&13!==k){if(pos.end-pos.begin!=0&&(clearBuffer(pos.begin,pos.end),shiftL(pos.begin,pos.end-1)),(p=seekNext(pos.begin-1))<len&&(c=String.fromCharCode(k),tests[p].test(c))){if(function shiftR(pos){var i,c,j,t;for(i=pos,c=getPlaceholder(pos);i<len;i++)if(tests[i]){if(j=seekNext(i),t=buffer[i],buffer[i]=c,!(j<len&&tests[j].test(t)))break;c=t}}(p),buffer[p]=c,writeBuffer(),next=seekNext(p),android){setTimeout((function(){$.proxy($.fn.caret,input,next)()}),0)}else input.caret(next);pos.begin<=lastRequiredNonMaskPos&&tryFireCompleted()}e.preventDefault()}}})).on("input.mask paste.mask",(function(){input.prop("readonly")||setTimeout((function(){var pos=checkVal(!0);input.caret(pos),tryFireCompleted()}),0)})),chrome&&android&&input.off("input.mask").on("input.mask",(function androidInputEvent(e){var curVal=input.val(),pos=input.caret();if(oldVal&&oldVal.length&&oldVal.length>curVal.length){for(checkVal(!0);pos.begin>0&&!tests[pos.begin-1];)pos.begin--;if(0===pos.begin)for(;pos.begin<firstNonMaskPos&&!tests[pos.begin];)pos.begin++;input.caret(pos.begin,pos.begin)}else{checkVal(!0);var lastEnteredValue=curVal.charAt(pos.begin);pos.begin<len&&(tests[pos.begin]||pos.begin++,tests[pos.begin].test(lastEnteredValue)&&pos.begin++),input.caret(pos.begin,pos.begin)}tryFireCompleted()})),checkVal()}))}})})),
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}((function($){var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function handler(event){var absDelta,orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,offsetX=0,offsetY=0;if((event=$.event.fix(orgEvent)).type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(delta=deltaY=-1*orgEvent.deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})})),function(e){function t(e,t){if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",t-e),a.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function a(e){var t=this.value.length;if(e="start"==e.toLowerCase()?"Start":"End",document.selection){var a,i,n,l=document.selection.createRange();return(a=l.duplicate()).expand("textedit"),a.setEndPoint("EndToEnd",l),n=(i=a.text.length-l.text.length)+l.text.length,"Start"==e?i:n}return void 0!==this["selection"+e]&&(t=this["selection"+e]),t}var i={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};e.fn.number=function(n,l,s,r){r=void 0===r?",":r,l=void 0===l?0:l;var u="\\u"+("0000"+(s=void 0===s?".":s).charCodeAt(0).toString(16)).slice(-4),h=new RegExp("[^"+u+"0-9]","g"),o=new RegExp(u,"g");return!0===n?this.is("input:text")?this.on({"keydown.format":function(n){var u=e(this),h=u.data("numFormat"),o=n.keyCode?n.keyCode:n.which,c="",v=a.apply(this,["start"]),d=a.apply(this,["end"]),p="",f=!1;if(i.codes.hasOwnProperty(o)&&(o=i.codes[o]),!n.shiftKey&&o>=65&&90>=o?o+=32:!n.shiftKey&&o>=69&&105>=o?o-=48:n.shiftKey&&i.shifts.hasOwnProperty(o)&&(c=i.shifts[o]),""==c&&(c=String.fromCharCode(o)),8!=o&&45!=o&&127!=o&&c!=s&&!c.match(/[0-9]/)){var g=n.keyCode?n.keyCode:n.which;if(46==g||8==g||127==g||9==g||27==g||13==g||(65==g||82==g||80==g||83==g||70==g||72==g||66==g||74==g||84==g||90==g||61==g||173==g||48==g)&&!0===(n.ctrlKey||n.metaKey)||(86==g||67==g||88==g)&&!0===(n.ctrlKey||n.metaKey)||g>=35&&39>=g||g>=112&&123>=g)return;return n.preventDefault(),!1}if(0==v&&d==this.value.length?8==o?(v=d=1,this.value="",h.init=l>0?-1:0,h.c=l>0?-(l+1):0,t.apply(this,[0,0])):c==s?(v=d=1,this.value="0"+s+new Array(l+1).join("0"),h.init=l>0?1:0,h.c=l>0?-(l+1):0):45==o?(v=d=2,this.value="-0"+s+new Array(l+1).join("0"),h.init=l>0?1:0,h.c=l>0?-(l+1):0,t.apply(this,[2,2])):(h.init=l>0?-1:0,h.c=l>0?-l:0):h.c=d-this.value.length,h.isPartialSelection=v!=d,l>0&&c==s&&v==this.value.length-l-1)h.c++,h.init=Math.max(0,h.init),n.preventDefault(),f=this.value.length+h.c;else if(45!=o||0==v&&0!=this.value.indexOf("-"))if(c==s)h.init=Math.max(0,h.init),n.preventDefault();else if(l>0&&127==o&&v==this.value.length-l-1)n.preventDefault();else if(l>0&&8==o&&v==this.value.length-l)n.preventDefault(),h.c--,f=this.value.length+h.c;else if(l>0&&127==o&&v>this.value.length-l-1){if(""===this.value)return;"0"!=this.value.slice(v,v+1)&&(p=this.value.slice(0,v)+"0"+this.value.slice(v+1),u.val(p)),n.preventDefault(),f=this.value.length+h.c}else if(l>0&&8==o&&v>this.value.length-l){if(""===this.value)return;"0"!=this.value.slice(v-1,v)&&(p=this.value.slice(0,v-1)+"0"+this.value.slice(v),u.val(p)),n.preventDefault(),h.c--,f=this.value.length+h.c}else 127==o&&this.value.slice(v,v+1)==r?n.preventDefault():8==o&&this.value.slice(v-1,v)==r?(n.preventDefault(),h.c--,f=this.value.length+h.c):l>0&&v==d&&this.value.length>l+1&&v>this.value.length-l-1&&isFinite(+c)&&!n.metaKey&&!n.ctrlKey&&!n.altKey&&1===c.length&&(p=d===this.value.length?this.value.slice(0,v-1):this.value.slice(0,v)+this.value.slice(v+1),this.value=p,f=v);else n.preventDefault();!1!==f&&t.apply(this,[f,f]),u.data("numFormat",h)},"keyup.format":function(i){var n,s=e(this),r=s.data("numFormat"),u=i.keyCode?i.keyCode:i.which,h=a.apply(this,["start"]),o=a.apply(this,["end"]);0!==h||0!==o||189!==u&&109!==u||(s.val("-"+s.val()),h=1,r.c=1-this.value.length,r.init=1,s.data("numFormat",r),n=this.value.length+r.c,t.apply(this,[n,n])),""===this.value||(48>u||u>57)&&(96>u||u>105)&&8!==u&&46!==u&&110!==u||(s.val(s.val()),l>0&&(r.init<1?(h=this.value.length-l-(r.init<0?1:0),r.c=h-this.value.length,r.init=1,s.data("numFormat",r)):h>this.value.length-l&&8!=u&&(r.c++,s.data("numFormat",r))),46!=u||r.isPartialSelection||(r.c++,s.data("numFormat",r)),n=this.value.length+r.c,t.apply(this,[n,n]))},"paste.format":function(t){var a=e(this),i=t.originalEvent,n=null;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):i.clipboardData&&i.clipboardData.getData&&(n=i.clipboardData.getData("text/plain")),a.val(n),t.preventDefault(),!1}}).each((function(){var t=e(this).data("numFormat",{c:-(l+1),decimals:l,thousands_sep:r,dec_point:s,regex_dec_num:h,regex_dec:o,init:!!this.value.indexOf(".")});""!==this.value&&t.val(t.val())})):this.each((function(){var t=e(this),a=+t.text().replace(h,"").replace(o,".");t.number(isFinite(a)?+a:0,l,s,r)})):this.text(e.number.apply(window,arguments))};var n=null,l=null;e.isPlainObject(e.valHooks.text)?(e.isFunction(e.valHooks.text.get)&&(n=e.valHooks.text.get),e.isFunction(e.valHooks.text.set)&&(l=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(t){var a,l=e(t).data("numFormat");return l?""===t.value?"":(a=+t.value.replace(l.regex_dec_num,"").replace(l.regex_dec,"."),(0===t.value.indexOf("-")?"-":"")+(isFinite(a)?a:0)):e.isFunction(n)?n(t):void 0},e.valHooks.text.set=function(t,a){var n=e(t).data("numFormat");if(n){var s=e.number(a,n.decimals,n.dec_point,n.thousands_sep);return e.isFunction(l)?l(t,s):t.value=s}return e.isFunction(l)?l(t,a):void 0},e.number=function(e,t,a,i){i=void 0===i?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":i,a=void 0===a?new Number(.1).toLocaleString().charAt(1):a,t=isFinite(+t)?Math.abs(t):0;var n="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),l="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",a).replace(new RegExp(l,"g"),"").replace(new RegExp(n,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var s=isFinite(+e)?+e:0,r="";return r=(t?function(e,t){return""+ +(Math.round((""+e).indexOf("e")>0?e:e+"e+"+t)+"e-"+t)}(s,t):""+Math.round(s)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(a)}}(jQuery),function(root,factory){"function"==typeof define&&define.amd?define([],factory):"undefined"!=typeof module&&module.exports?module.exports=factory():root.lscache=factory()}(this,(function(){var cachedStorage,cachedJSON,expiryMilliseconds=6e4,maxDate=calculateMaxDate(expiryMilliseconds),cacheBucket="",warnings=!1;function supportsStorage(){var key="__lscachetest__",value=key;if(void 0!==cachedStorage)return cachedStorage;try{if(!localStorage)return!1}catch(ex){return!1}try{setItem(key,value),removeItem(key),cachedStorage=!0}catch(e){cachedStorage=!(!isOutOfSpace(e)||!localStorage.length)}return cachedStorage}function isOutOfSpace(e){return e&&("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function supportsJSON(){return void 0===cachedJSON&&(cachedJSON=null!=window.JSON),cachedJSON}function expirationKey(key){return key+"-cacheexpiration"}function currentTime(){return Math.floor((new Date).getTime()/expiryMilliseconds)}function getItem(key){return localStorage.getItem("lscache-"+cacheBucket+key)}function setItem(key,value){localStorage.removeItem("lscache-"+cacheBucket+key),localStorage.setItem("lscache-"+cacheBucket+key,value)}function removeItem(key){localStorage.removeItem("lscache-"+cacheBucket+key)}function eachKey(fn){for(var prefixRegExp=new RegExp("^lscache-"+function escapeRegExpSpecialCharacters(text){return text.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")}(cacheBucket)+"(.*)"),i=localStorage.length-1;i>=0;--i){var key=localStorage.key(i);(key=(key=key&&key.match(prefixRegExp))&&key[1])&&key.indexOf("-cacheexpiration")<0&&fn(key,expirationKey(key))}}function flushItem(key){var exprKey=expirationKey(key);removeItem(key),removeItem(exprKey)}function flushExpiredItem(key){var exprKey=expirationKey(key),expr=getItem(exprKey);if(expr){var expirationTime=parseInt(expr,10);if(currentTime()>=expirationTime)return removeItem(key),removeItem(exprKey),!0}}function warn(message,err){warnings&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+message),err&&window.console.warn("lscache - The error was: "+err.message))}function calculateMaxDate(expiryMilliseconds){return Math.floor(864e13/expiryMilliseconds)}var lscache={set:function(key,value,time){if(!supportsStorage())return!1;if(!supportsJSON())return!1;try{value=JSON.stringify(value)}catch(e){return!1}try{setItem(key,value)}catch(e){if(!isOutOfSpace(e))return warn("Could not add item with key '"+key+"'",e),!1;var storedKey,storedKeys=[];eachKey((function(key,exprKey){var expiration=getItem(exprKey);expiration=expiration?parseInt(expiration,10):maxDate,storedKeys.push({key:key,size:(getItem(key)||"").length,expiration:expiration})})),storedKeys.sort((function(a,b){return b.expiration-a.expiration}));for(var targetSize=(value||"").length;storedKeys.length&&targetSize>0;)storedKey=storedKeys.pop(),warn("Cache is full, removing item with key '"+key+"'"),flushItem(storedKey.key),targetSize-=storedKey.size;try{setItem(key,value)}catch(e){return warn("Could not add item with key '"+key+"', perhaps it's too big?",e),!1}}return time?setItem(expirationKey(key),(currentTime()+time).toString(10)):removeItem(expirationKey(key)),!0},get:function(key){if(!supportsStorage())return null;if(flushExpiredItem(key))return null;var value=getItem(key);if(!value||!supportsJSON())return value;try{return JSON.parse(value)}catch(e){return value}},remove:function(key){supportsStorage()&&flushItem(key)},supported:function(){return supportsStorage()},flush:function(){supportsStorage()&&eachKey((function(key){flushItem(key)}))},flushExpired:function(){supportsStorage()&&eachKey((function(key){flushExpiredItem(key)}))},setBucket:function(bucket){cacheBucket=bucket},resetBucket:function(){cacheBucket=""},getExpiryMilliseconds:function(){return expiryMilliseconds},setExpiryMilliseconds:function(milliseconds){maxDate=calculateMaxDate(expiryMilliseconds=milliseconds)},enableWarnings:function(enabled){warnings=enabled}};return lscache})),function(root,factory){"function"==typeof define&&define.amd?define("sifter",factory):"object"==typeof exports?module.exports=factory():root.Sifter=factory()}(this,(function(){function Sifter(items,settings){this.items=items,this.settings=settings||{diacritics:!0}}Sifter.prototype.tokenize=function(query){if(!(query=trim(String(query||"").toLowerCase()))||!query.length)return[];for(var regex,letter,tokens=[],words=query.split(/ +/),i=0,n=words.length;i<n;i++){if(regex=escape_regex(words[i]),this.settings.diacritics)for(letter in DIACRITICS)DIACRITICS.hasOwnProperty(letter)&&(regex=regex.replace(new RegExp(letter,"g"),DIACRITICS[letter]));tokens.push({string:words[i],regex:new RegExp(regex,"i")})}return tokens},Sifter.prototype.iterator=function(object,callback){var iterator=is_array(object)?Array.prototype.forEach||function(callback){for(var i=0,n=this.length;i<n;i++)callback(this[i],i,this)}:function(callback){for(var key in this)this.hasOwnProperty(key)&&callback(this[key],key,this)};iterator.apply(object,[callback])},Sifter.prototype.getScoreFunction=function(search,options){var fields,tokens,token_count,nesting;function scoreValue(score,token){var pos;return score&&-1!==(pos=(score=String(score||"")).search(token.regex))?(score=token.string.length/score.length,0===pos&&(score+=.5),score):0}search=this.prepareSearch(search,options),tokens=search.tokens,fields=search.options.fields,token_count=tokens.length,nesting=search.options.nesting;var field_count,scoreObject=(field_count=fields.length)?1===field_count?function(token,data){return scoreValue(getattr(data,fields[0],nesting),token)}:function(token,data){for(var i=0,sum=0;i<field_count;i++)sum+=scoreValue(getattr(data,fields[i],nesting),token);return sum/field_count}:function(){return 0};return token_count?1===token_count?function(data){return scoreObject(tokens[0],data)}:"and"===search.options.conjunction?function(data){for(var score,i=0,sum=0;i<token_count;i++){if((score=scoreObject(tokens[i],data))<=0)return 0;sum+=score}return sum/token_count}:function(data){for(var i=0,sum=0;i<token_count;i++)sum+=scoreObject(tokens[i],data);return sum/token_count}:function(){return 0}},Sifter.prototype.getSortFunction=function(search,options){var i,n,field,fields_count,multiplier,multipliers,implicit_score,self=this,sort=!(search=self.prepareSearch(search,options)).query&&options.sort_empty||options.sort,get_field=function(name,result){return"$score"===name?result.score:getattr(self.items[result.id],name,options.nesting)},fields=[];if(sort)for(i=0,n=sort.length;i<n;i++)!search.query&&"$score"===sort[i].field||fields.push(sort[i]);if(search.query){for(implicit_score=!0,i=0,n=fields.length;i<n;i++)if("$score"===fields[i].field){implicit_score=!1;break}implicit_score&&fields.unshift({field:"$score",direction:"desc"})}else for(i=0,n=fields.length;i<n;i++)if("$score"===fields[i].field){fields.splice(i,1);break}for(multipliers=[],i=0,n=fields.length;i<n;i++)multipliers.push("desc"===fields[i].direction?-1:1);return(fields_count=fields.length)?1===fields_count?(field=fields[0].field,multiplier=multipliers[0],function(a,b){return multiplier*cmp(get_field(field,a),get_field(field,b))}):function(a,b){for(var result,i=0;i<fields_count;i++)if(result=fields[i].field,result=multipliers[i]*cmp(get_field(result,a),get_field(result,b)))return result;return 0}:null},Sifter.prototype.prepareSearch=function(query,options){if("object"==typeof query)return query;var option_fields=(options=extend({},options)).fields,option_sort=options.sort,option_sort_empty=options.sort_empty;return option_fields&&!is_array(option_fields)&&(options.fields=[option_fields]),option_sort&&!is_array(option_sort)&&(options.sort=[option_sort]),option_sort_empty&&!is_array(option_sort_empty)&&(options.sort_empty=[option_sort_empty]),{options:options,query:String(query||"").toLowerCase(),tokens:this.tokenize(query),total:0,items:[]}},Sifter.prototype.search=function(fn_sort,options){var score,fn_score,search=this.prepareSearch(fn_sort,options);return options=search.options,fn_sort=search.query,fn_score=options.score||this.getScoreFunction(search),fn_sort.length?this.iterator(this.items,(function(item,id){score=fn_score(item),(!1===options.filter||0<score)&&search.items.push({score:score,id:id})})):this.iterator(this.items,(function(item,id){search.items.push({score:1,id:id})})),(fn_sort=this.getSortFunction(search,options))&&search.items.sort(fn_sort),search.total=search.items.length,"number"==typeof options.limit&&(search.items=search.items.slice(0,options.limit)),search};var cmp=function(a,b){return"number"==typeof a&&"number"==typeof b?b<a?1:a<b?-1:0:(a=asciifold(String(a||"")),(b=asciifold(String(b||"")))<a?1:a<b?-1:0)},extend=function(a,b){for(var k,object,i=1,n=arguments.length;i<n;i++)if(object=arguments[i])for(k in object)object.hasOwnProperty(k)&&(a[k]=object[k]);return a},getattr=function(obj,name,nesting){if(obj&&name){if(!nesting)return obj[name];for(var names=name.split(".");names.length&&(obj=obj[names.shift()]););return obj}},trim=function(str){return(str+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(str){return(str+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||"undefined"!=typeof $&&$.isArray||function(object){return"[object Array]"===Object.prototype.toString.call(object)},DIACRITICS={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},asciifold=function(){var i,n,k,chunk,foreignletters="",lookup={};for(k in DIACRITICS)if(DIACRITICS.hasOwnProperty(k))for(foreignletters+=chunk=DIACRITICS[k].substring(2,DIACRITICS[k].length-1),i=0,n=chunk.length;i<n;i++)lookup[chunk.charAt(i)]=k;var regexp=new RegExp("["+foreignletters+"]","g");return function(str){return str.replace(regexp,(function(foreignletter){return lookup[foreignletter]})).toLowerCase()}}();return Sifter})),function(root,factory){"function"==typeof define&&define.amd?define("microplugin",factory):"object"==typeof exports?module.exports=factory():root.MicroPlugin=factory()}(this,(function(){var MicroPlugin={mixin:function(Interface){Interface.plugins={},Interface.prototype.initializePlugins=function(plugins){var i,n,key,queue=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},utils.isArray(plugins))for(i=0,n=plugins.length;i<n;i++)"string"==typeof plugins[i]?queue.push(plugins[i]):(this.plugins.settings[plugins[i].name]=plugins[i].options,queue.push(plugins[i].name));else if(plugins)for(key in plugins)plugins.hasOwnProperty(key)&&(this.plugins.settings[key]=plugins[key],queue.push(key));for(;queue.length;)this.require(queue.shift())},Interface.prototype.loadPlugin=function(name){var plugins=this.plugins,plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name))throw new Error('Unable to find "'+name+'" plugin');plugins.requested[name]=!0,plugins.loaded[name]=plugin.fn.apply(this,[this.plugins.settings[name]||{}]),plugins.names.push(name)},Interface.prototype.require=function(name){var plugins=this.plugins;if(!this.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name])throw new Error('Plugin has circular dependency ("'+name+'")');this.loadPlugin(name)}return plugins.loaded[name]},Interface.define=function(name,fn){Interface.plugins[name]={name:name,fn:fn}}}},utils={isArray:Array.isArray||function(vArg){return"[object Array]"===Object.prototype.toString.call(vArg)}};return MicroPlugin})),function(root,factory){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],factory):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory(require("jquery"),require("sifter"),require("microplugin")):root.Selectize=factory(root.jQuery,root.Sifter,root.MicroPlugin)}(this,(function($,Sifter,MicroPlugin){function MicroEvent(){}function isset(object){return void 0!==object}function hash_key(value){return null==value?null:"boolean"==typeof value?value?"1":"0":value+""}function escape_html(str){return(str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function debounce_events(self,types,fn){var type,trigger=self.trigger,event_args={};for(type in self.trigger=function(){var type=arguments[0];if(-1===types.indexOf(type))return trigger.apply(self,arguments);event_args[type]=arguments},fn.apply(self,[]),self.trigger=trigger,event_args)event_args.hasOwnProperty(type)&&trigger.apply(self,event_args[type])}function getSelection(input){var sel,selLen,result={};return void 0===input?console.warn("WARN getSelection cannot locate input control"):"selectionStart"in input?(result.start=input.selectionStart,result.length=input.selectionEnd-result.start):document.selection&&(input.focus(),sel=document.selection.createRange(),selLen=document.selection.createRange().text.length,sel.moveStart("character",-input.value.length),result.start=sel.text.length-selLen,result.length=selLen),result}function autoGrow($input){function update(e,selection){var keyCode,width,shift,placeholder;selection=selection||{},(e=e||window.event||{}).metaKey||e.altKey||!selection.force&&!1===$input.data("grow")||(width=$input.val(),e.type&&"keydown"===e.type.toLowerCase()&&(shift=48<=(keyCode=e.keyCode)&&keyCode<=57||65<=keyCode&&keyCode<=90||96<=keyCode&&keyCode<=111||186<=keyCode&&keyCode<=222||32===keyCode,46===keyCode||8===keyCode?(selection=getSelection($input[0])).length?width=width.substring(0,selection.start)+width.substring(selection.start+selection.length):8===keyCode&&selection.start?width=width.substring(0,selection.start-1)+width.substring(selection.start+1):46===keyCode&&void 0!==selection.start&&(width=width.substring(0,selection.start)+width.substring(selection.start+1)):shift&&(shift=e.shiftKey,placeholder=String.fromCharCode(e.keyCode),width+=placeholder=shift?placeholder.toUpperCase():placeholder.toLowerCase())),placeholder=$input.attr("placeholder"),(width=function measureString(str,$parent){return str?(Selectize.$testInput||(Selectize.$testInput=$("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),$("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).append(Selectize.$testInput).appendTo("body")),Selectize.$testInput.text(str),function($from,$to,properties){var i,n,styles={};if(properties)for(i=0,n=properties.length;i<n;i++)styles[properties[i]]=$from.css(properties[i]);else styles=$from.css();$to.css(styles)}($parent,Selectize.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),Selectize.$testInput.width()):0}(width=!width&&placeholder?placeholder:width,$input)+4)!==currentWidth&&(currentWidth=width,$input.width(width),$input.triggerHandler("resize")))}var currentWidth=null;$input.on("keydown keyup update blur",update),update()}$.fn.removeHighlight=function(){return this.find("span.highlight").each((function(){this.parentNode.firstChild.nodeName;var parent=this.parentNode;parent.replaceChild(this.firstChild,this),parent.normalize()})).end()},MicroEvent.prototype={on:function(event,fct){this._events=this._events||{},this._events[event]=this._events[event]||[],this._events[event].push(fct)},off:function(event,fct){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[event]:(this._events=this._events||{},void(event in this._events!=0&&this._events[event].splice(this._events[event].indexOf(fct),1)))},trigger:function(event){if(this._events=this._events||{},event in this._events!=0)for(var i=0;i<this._events[event].length;i++)this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(destObject){for(var props=["on","off","trigger"],i=0;i<props.length;i++)destObject.prototype[props[i]]=MicroEvent.prototype[props[i]]};var options,IS_MAC=/Mac/.test(navigator.userAgent),KEY_CMD=IS_MAC?91:17,KEY_CTRL=IS_MAC?18:17,SUPPORTS_VALIDITY_API=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,hook_after=function(self,method,fn){var original=self[method];self[method]=function(){var result=original.apply(self,arguments);return fn.apply(self,arguments),result}},Selectize=function($input,settings){var i,n,input=$input[0];input.selectize=this;var fn,delay,timeout,dir=window.getComputedStyle&&window.getComputedStyle(input,null);if(dir=(dir=dir?dir.getPropertyValue("direction"):input.currentStyle&&input.currentStyle.direction)||$input.parents("[dir]:first").attr("dir")||"",$.extend(this,{order:0,settings:settings,$input:$input,tabIndex:$input.attr("tabindex")||"",tagType:"select"===input.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(dir),eventNS:".selectize"+ ++Selectize.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:$input.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===settings.loadThrottle?this.onSearchChange:(fn=this.onSearchChange,delay=settings.loadThrottle,function(){var self=this,args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout((function(){fn.apply(self,args)}),delay)})}),this.sifter=new Sifter(this.options,{diacritics:settings.diacritics}),this.settings.options){for(i=0,n=this.settings.options.length;i<n;i++)this.registerOption(this.settings.options[i]);delete this.settings.options}if(this.settings.optgroups){for(i=0,n=this.settings.optgroups.length;i<n;i++)this.registerOptionGroup(this.settings.optgroups[i]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()};return MicroEvent.mixin(Selectize),void 0!==MicroPlugin?MicroPlugin.mixin(Selectize):(options=(options={explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'})||{},console.error("Selectize: Dependency MicroPlugin is missing"),options.explanation&&(console.group&&console.group(),console.error(options.explanation),console.group&&console.groupEnd())),$.extend(Selectize.prototype,{setup:function(){var delimiterEscaped,$parent,fn,self=this,settings=self.settings,eventNS=self.eventNS,$window=$(window),$document=$(document),$input=self.$input,event=self.settings.mode,classes=$input.attr("class")||"",$wrapper=$("<div>").addClass(settings.wrapperClass).addClass(classes).addClass(event),$control=$("<div>").addClass(settings.inputClass).addClass("items").appendTo($wrapper),$control_input=$('<input type="text" autocomplete="new-password" autofill="no" />').appendTo($control).attr("tabindex",$input.is(":disabled")?"-1":self.tabIndex),inputId=$(settings.dropdownParent||$wrapper),selector=$("<div>").addClass(settings.dropdownClass).addClass(event).hide().appendTo(inputId);event=$("<div>").addClass(settings.dropdownContentClass).attr("tabindex","-1").appendTo(selector);(inputId=$input.attr("id"))&&($control_input.attr("id",inputId+"-selectized"),$("label[for='"+inputId+"']").attr("for",inputId+"-selectized")),self.settings.copyClassesToDropdown&&selector.addClass(classes),$wrapper.css({width:$input[0].style.width}),self.plugins.names.length&&(delimiterEscaped="plugin-"+self.plugins.names.join(" plugin-"),$wrapper.addClass(delimiterEscaped),selector.addClass(delimiterEscaped)),(null===settings.maxItems||1<settings.maxItems)&&1===self.tagType&&$input.attr("multiple","multiple"),self.settings.placeholder&&$control_input.attr("placeholder",settings.placeholder),!self.settings.splitOn&&self.settings.delimiter&&(delimiterEscaped=self.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),self.settings.splitOn=new RegExp("\\s*"+delimiterEscaped+"+\\s*")),$input.attr("autocorrect")&&$control_input.attr("autocorrect",$input.attr("autocorrect")),$input.attr("autocapitalize")&&$control_input.attr("autocapitalize",$input.attr("autocapitalize")),$control_input[0].type=$input[0].type,self.$wrapper=$wrapper,self.$control=$control,self.$control_input=$control_input,self.$dropdown=selector,self.$dropdown_content=event,selector.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",(function(e){e.stopImmediatePropagation()})),selector.on("mouseenter","[data-selectable]",(function(){return self.onOptionHover.apply(self,arguments)})),selector.on("mousedown click","[data-selectable]",(function(){return self.onOptionSelect.apply(self,arguments)})),event="mousedown",selector="*:not(input)",fn=function(){return self.onItemSelect.apply(self,arguments)},($parent=$control).on(event,selector,(function(e){for(var child=e.target;child&&child.parentNode!==$parent[0];)child=child.parentNode;return e.currentTarget=child,fn.apply(this,[e])})),autoGrow($control_input),$control.on({mousedown:function(){return self.onMouseDown.apply(self,arguments)},click:function(){return self.onClick.apply(self,arguments)}}),$control_input.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return self.onKeyDown.apply(self,arguments)},keyup:function(){return self.onKeyUp.apply(self,arguments)},keypress:function(){return self.onKeyPress.apply(self,arguments)},resize:function(){self.positionDropdown.apply(self,[])},blur:function(){return self.onBlur.apply(self,arguments)},focus:function(){return self.ignoreBlur=!1,self.onFocus.apply(self,arguments)},paste:function(){return self.onPaste.apply(self,arguments)}}),$document.on("keydown"+eventNS,(function(e){self.isCmdDown=e[IS_MAC?"metaKey":"ctrlKey"],self.isCtrlDown=e[IS_MAC?"altKey":"ctrlKey"],self.isShiftDown=e.shiftKey})),$document.on("keyup"+eventNS,(function(e){e.keyCode===KEY_CTRL&&(self.isCtrlDown=!1),16===e.keyCode&&(self.isShiftDown=!1),e.keyCode===KEY_CMD&&(self.isCmdDown=!1)})),$document.on("mousedown"+eventNS,(function(e){if(self.isFocused){if(e.target===self.$dropdown[0]||e.target.parentNode===self.$dropdown[0])return!1;self.$control.has(e.target).length||e.target===self.$control[0]||self.blur(e.target)}})),$window.on(["scroll"+eventNS,"resize"+eventNS].join(" "),(function(){self.isOpen&&self.positionDropdown.apply(self,arguments)})),$window.on("mousemove"+eventNS,(function(){self.ignoreHover=!1})),this.revertSettings={$children:$input.children().detach(),tabindex:$input.attr("tabindex")},$input.attr("tabindex",-1).hide().after(self.$wrapper),$.isArray(settings.items)&&(self.lastValidValue=settings.items,self.setValue(settings.items),delete settings.items),SUPPORTS_VALIDITY_API&&$input.on("invalid"+eventNS,(function(e){e.preventDefault(),self.isInvalid=!0,self.refreshState()})),self.updateOriginalInput(),self.refreshItems(),self.refreshState(),self.updatePlaceholder(),self.isSetup=!0,$input.is(":disabled")&&self.disable(),self.on("change",this.onChange),$input.data("selectize",self),$input.addClass("selectized"),self.trigger("initialize"),!0===settings.preload&&self.onSearchChange("")},setupTemplates:function(){var field_label=this.settings.labelField,field_optgroup=this.settings.optgroupLabelField,templates={optgroup:function(data){return'<div class="optgroup">'+data.html+"</div>"},optgroup_header:function(data,escape){return'<div class="optgroup-header">'+escape(data[field_optgroup])+"</div>"},option:function(data,escape){return'<div class="option">'+escape(data[field_label])+"</div>"},item:function(data,escape){return'<div class="item">'+escape(data[field_label])+"</div>"},option_create:function(data,escape){return'<div class="create">Добавить <strong>'+escape(data.input)+"</strong>&hellip;</div>"}};this.settings.render=$.extend({},templates,this.settings.render)},setupCallbacks:function(){var key,fn,callbacks={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(key in callbacks)callbacks.hasOwnProperty(key)&&(fn=this.settings[callbacks[key]])&&this.on(key,fn)},onClick:function(e){this.isFocused&&this.isOpen||(this.focus(),e.preventDefault())},onMouseDown:function(e){var self=this,defaultPrevented=e.isDefaultPrevented();if($(e.target),self.isFocused){if(e.target!==self.$control_input[0])return"single"===self.settings.mode?self.isOpen?self.close():self.open():defaultPrevented||self.setActiveItem(null),!1}else defaultPrevented||window.setTimeout((function(){self.focus()}),0)},onChange:function(){""!==this.getValue()&&(this.lastValidValue=this.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var self=this;self.isFull()||self.isInputHidden||self.isLocked?e.preventDefault():self.settings.splitOn&&setTimeout((function(){var pastedText=self.$control_input.val();if(pastedText.match(self.settings.splitOn))for(var splitInput=$.trim(pastedText).split(self.settings.splitOn),i=0,n=splitInput.length;i<n;i++)self.createItem(splitInput[i])}),0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var character=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&character===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var $prev;if(e.target,this.$control_input[0],this.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(this.isCmdDown)return void this.selectAll();break;case 27:return void(this.isOpen&&(e.preventDefault(),e.stopPropagation(),this.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:return!this.isOpen&&this.hasOptions?this.open():this.$activeOption&&(this.ignoreHover=!0,($prev=this.getAdjacentOption(this.$activeOption,1)).length&&this.setActiveOption($prev,!0,!0)),void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:return this.$activeOption&&(this.ignoreHover=!0,($prev=this.getAdjacentOption(this.$activeOption,-1)).length&&this.setActiveOption($prev,!0,!0)),void e.preventDefault();case 13:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),e.preventDefault()));case 37:return void this.advanceSelection(-1,e);case 39:return void this.advanceSelection(1,e);case 9:return this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),this.isFull()||e.preventDefault()),void(this.settings.create&&this.createItem()&&e.preventDefault());case 8:case 46:return void this.deleteSelection(e)}!this.isFull()&&!this.isInputHidden||(IS_MAC?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(value){if(this.isLocked)return value&&value.preventDefault();value=this.$control_input.val()||"",this.lastValue!==value&&(this.lastValue=value,this.onSearchChange(value),this.refreshOptions(),this.trigger("type",value))},onSearchChange:function(value){var self=this,fn=self.settings.load;fn&&(self.loadedSearches.hasOwnProperty(value)||(self.loadedSearches[value]=!0,self.load((function(callback){fn.apply(self,[value,callback])}))))},onFocus:function(e){var wasFocused=this.isFocused;if(this.isDisabled)return this.blur(),e&&e.preventDefault(),!1;this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.onSearchChange(""),wasFocused||this.trigger("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())},onBlur:function(deactivate,dest){var self=this;if(self.isFocused&&(self.isFocused=!1,!self.ignoreFocus)){if(!self.ignoreBlur&&document.activeElement===self.$dropdown_content[0])return self.ignoreBlur=!0,void self.onFocus(deactivate);deactivate=function(){self.close(),self.setTextboxValue(""),self.setActiveItem(null),self.setActiveOption(null),self.setCaret(self.items.length),self.refreshState(),dest&&dest.focus&&dest.focus(),self.isBlurring=!1,self.ignoreFocus=!1,self.trigger("blur")},self.isBlurring=!0,self.ignoreFocus=!0,self.settings.create&&self.settings.createOnBlur?self.createItem(null,!1,deactivate):deactivate()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var value,self=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(value=$(e.currentTarget)).hasClass("create")?self.createItem(null,(function(){self.settings.closeAfterSelect&&self.close()})):void 0!==(value=value.attr("data-value"))&&(self.lastQuery=null,self.setTextboxValue(""),self.addItem(value),self.settings.closeAfterSelect?self.close():!self.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&self.setActiveOption(self.getOption(value)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(fn){var self=this,$wrapper=self.$wrapper.addClass(self.settings.loadingClass);self.loading++,fn.apply(self,[function(results){self.loading=Math.max(self.loading-1,0),results&&results.length&&(self.addOption(results),self.refreshOptions(self.isFocused&&!self.isInputHidden)),self.loading||$wrapper.removeClass(self.settings.loadingClass),self.trigger("load",results)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(value){var $input=this.$control_input;$input.val()!==value&&($input.val(value).triggerHandler("update"),this.lastValue=value)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(value,silent){debounce_events(this,silent?[]:["change"],(function(){this.clear(silent),this.addItems(value,silent)}))},setMaxItems:function(value){0===value&&(value=null),this.settings.maxItems=value,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function($item,e){var i,idx,begin,end,item,swap;if("single"!==this.settings.mode){if(!($item=$($item)).length)return $(this.$activeItems).removeClass("active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(idx=e&&e.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){for(swap=this.$control.children(".active:last"),begin=Array.prototype.indexOf.apply(this.$control[0].childNodes,[swap[0]]),(end=Array.prototype.indexOf.apply(this.$control[0].childNodes,[$item[0]]))<begin&&(swap=begin,begin=end,end=swap),i=begin;i<=end;i++)item=this.$control[0].childNodes[i],-1===this.$activeItems.indexOf(item)&&($(item).addClass("active"),this.$activeItems.push(item));e.preventDefault()}else"mousedown"===idx&&this.isCtrlDown||"keydown"===idx&&this.isShiftDown?$item.hasClass("active")?(idx=this.$activeItems.indexOf($item[0]),this.$activeItems.splice(idx,1),$item.removeClass("active")):this.$activeItems.push($item.addClass("active")[0]):($(this.$activeItems).removeClass("active"),this.$activeItems=[$item.addClass("active")[0]]);this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(scroll_bottom,scroll,animate){var height_menu,height_item,y,scroll_top;this.$activeOption&&(this.$activeOption.removeClass("active"),this.trigger("dropdown_item_deactivate",this.$activeOption.attr("data-value"))),this.$activeOption=null,(scroll_bottom=$(scroll_bottom)).length&&(this.$activeOption=scroll_bottom.addClass("active"),this.isOpen&&this.trigger("dropdown_item_activate",this.$activeOption.attr("data-value")),!scroll&&isset(scroll)||(height_menu=this.$dropdown_content.height(),height_item=this.$activeOption.outerHeight(!0),scroll=this.$dropdown_content.scrollTop()||0,scroll_bottom=(scroll_top=y=this.$activeOption.offset().top-this.$dropdown_content.offset().top+scroll)-height_menu+height_item,height_menu+scroll<y+height_item?this.$dropdown_content.stop().animate({scrollTop:scroll_bottom},animate?this.settings.scrollDuration:0):y<scroll&&this.$dropdown_content.stop().animate({scrollTop:scroll_top},animate?this.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var self=this;return self.isDisabled||(self.ignoreFocus=!0,self.$control_input[0].focus(),window.setTimeout((function(){self.ignoreFocus=!1,self.onFocus()}),0)),self},blur:function(dest){return this.$control_input[0].blur(),this.onBlur(null,dest),this},getScoreFunction:function(query){return this.sifter.getScoreFunction(query,this.getSearchOptions())},getSearchOptions:function(){var settings=this.settings,sort=settings.sortField;return"string"==typeof sort&&(sort=[{field:sort}]),{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort,nesting:settings.nesting}},search:function(query){var i,result,calculateScore,settings=this.settings,options=this.getSearchOptions();if(settings.score&&"function"!=typeof(calculateScore=this.settings.score.apply(this,[query])))throw new Error('Selectize "score" setting must be a function that returns a function');if(query!==this.lastQuery?(this.lastQuery=query,result=this.sifter.search(query,$.extend(options,{score:calculateScore})),this.currentResults=result):result=$.extend(!0,{},this.currentResults),settings.hideSelected)for(i=result.items.length-1;0<=i;i--)-1!==this.items.indexOf(hash_key(result.items[i].id))&&result.items.splice(i,1);return result},refreshOptions:function(triggerDropdown){var i,j,k,groups,groups_order,option,option_html,optgroup,optgroups,html,html_children,has_create_option,$active,$create;void 0===triggerDropdown&&(triggerDropdown=!0);var d,tmp,self=this,query=$.trim(self.$control_input.val()),results=self.search(query),$dropdown_content=self.$dropdown_content,$active_before=self.$activeOption&&hash_key(self.$activeOption.attr("data-value")),n=results.items.length;for("number"==typeof self.settings.maxOptions&&(n=Math.min(n,self.settings.maxOptions)),groups={},groups_order=[],i=0;i<n;i++)for(option=self.options[results.items[i].id],option_html=self.render("option",option),optgroup=option[self.settings.optgroupField]||"",j=0,k=(optgroups=$.isArray(optgroup)?optgroup:[optgroup])&&optgroups.length;j<k;j++)optgroup=optgroups[j],self.optgroups.hasOwnProperty(optgroup)||(optgroup=""),groups.hasOwnProperty(optgroup)||(groups[optgroup]=document.createDocumentFragment(),groups_order.push(optgroup)),groups[optgroup].appendChild(option_html);for(this.settings.lockOptgroupOrder&&groups_order.sort((function(a,b){return(self.optgroups[a].$order||0)-(self.optgroups[b].$order||0)})),html=document.createDocumentFragment(),i=0,n=groups_order.length;i<n;i++)optgroup=groups_order[i],self.optgroups.hasOwnProperty(optgroup)&&groups[optgroup].childNodes.length?((html_children=document.createDocumentFragment()).appendChild(self.render("optgroup_header",self.optgroups[optgroup])),html_children.appendChild(groups[optgroup]),html.appendChild(self.render("optgroup",$.extend({},self.optgroups[optgroup],{html:(d=html_children,tmp=void 0,(tmp=document.createElement("div")).appendChild(d.cloneNode(!0)),tmp.innerHTML),dom:html_children})))):html.appendChild(groups[optgroup]);if($dropdown_content.html(html),self.settings.highlight&&($dropdown_content.removeHighlight(),results.query.length&&results.tokens.length))for(i=0,n=results.tokens.length;i<n;i++)!function($element,pattern){if("string"!=typeof pattern||pattern.length){var regex="string"==typeof pattern?new RegExp(pattern,"i"):pattern,highlight=function(node){var skip=0;if(3===node.nodeType){var spannode,middleclone,middlebit=node.data.search(regex);0<=middlebit&&0<node.data.length&&(middleclone=node.data.match(regex),(spannode=document.createElement("span")).className="highlight",(middlebit=node.splitText(middlebit)).splitText(middleclone[0].length),middleclone=middlebit.cloneNode(!0),spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1)}else if(1===node.nodeType&&node.childNodes&&!/(script|style)/i.test(node.tagName)&&("highlight"!==node.className||"SPAN"!==node.tagName))for(var i=0;i<node.childNodes.length;++i)i+=highlight(node.childNodes[i]);return skip};$element.each((function(){highlight(this)}))}}($dropdown_content,results.tokens[i].regex);if(!self.settings.hideSelected)for(self.$dropdown.find(".selected").removeClass("selected"),i=0,n=self.items.length;i<n;i++)self.getOption(self.items[i]).addClass("selected");(has_create_option=self.canCreate(query))&&($dropdown_content.prepend(self.render("option_create",{input:query})),$create=$($dropdown_content[0].childNodes[0])),self.hasOptions=0<results.items.length||has_create_option,self.hasOptions?(0<results.items.length?(($active_before=$active_before&&self.getOption($active_before))&&$active_before.length?$active=$active_before:"single"===self.settings.mode&&self.items.length&&($active=self.getOption(self.items[0])),$active&&$active.length||($active=$create&&!self.settings.addPrecedence?self.getAdjacentOption($create,1):$dropdown_content.find("[data-selectable]:first"))):$active=$create,self.setActiveOption($active),triggerDropdown&&!self.isOpen&&self.open()):(self.setActiveOption(null),triggerDropdown&&self.isOpen&&self.close())},addOption:function(data){var i,n,value;if($.isArray(data))for(i=0,n=data.length;i<n;i++)this.addOption(data[i]);else(value=this.registerOption(data))&&(this.userOptions[value]=!0,this.lastQuery=null,this.trigger("option_add",value,data))},registerOption:function(data){var key=hash_key(data[this.settings.valueField]);return null!=key&&!this.options.hasOwnProperty(key)&&(data.$order=data.$order||++this.order,this.options[key]=data,key)},registerOptionGroup:function(data){var key=hash_key(data[this.settings.optgroupValueField]);return!!key&&(data.$order=data.$order||++this.order,this.optgroups[key]=data,key)},addOptionGroup:function(id,data){data[this.settings.optgroupValueField]=id,(id=this.registerOptionGroup(data))&&this.trigger("optgroup_add",id,data)},removeOptionGroup:function(id){this.optgroups.hasOwnProperty(id)&&(delete this.optgroups[id],this.renderCache={},this.trigger("optgroup_remove",id))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function($item,$item_new){var value_new,cache_items,cache_options;if($item=hash_key($item),value_new=hash_key($item_new[this.settings.valueField]),null!==$item&&this.options.hasOwnProperty($item)){if("string"!=typeof value_new)throw new Error("Value must be set in option data");cache_options=this.options[$item].$order,value_new!==$item&&(delete this.options[$item],-1!==(cache_items=this.items.indexOf($item))&&this.items.splice(cache_items,1,value_new)),$item_new.$order=$item_new.$order||cache_options,this.options[value_new]=$item_new,cache_items=this.renderCache.item,cache_options=this.renderCache.option,cache_items&&(delete cache_items[$item],delete cache_items[value_new]),cache_options&&(delete cache_options[$item],delete cache_options[value_new]),-1!==this.items.indexOf(value_new)&&($item=this.getItem($item),$item_new=$(this.render("item",$item_new)),$item.hasClass("active")&&$item_new.addClass("active"),$item.replaceWith($item_new)),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(value,silent){value=hash_key(value);var cache_items=this.renderCache.item,cache_options=this.renderCache.option;cache_items&&delete cache_items[value],cache_options&&delete cache_options[value],delete this.userOptions[value],delete this.options[value],this.lastQuery=null,this.trigger("option_remove",value),this.removeItem(value,silent)},clearOptions:function(silent){var self=this;self.loadedSearches={},self.userOptions={},self.renderCache={};var options=self.options;$.each(self.options,(function(key,value){-1==self.items.indexOf(key)&&delete options[key]})),self.options=self.sifter.items=options,self.lastQuery=null,self.trigger("option_clear"),self.clear(silent)},getOption:function(value){return this.getElementWithValue(value,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function($option,index){var $options=this.$dropdown.find("[data-selectable]");return 0<=(index=$options.index($option)+index)&&index<$options.length?$options.eq(index):$()},getElementWithValue:function(value,$els){if(null!=(value=hash_key(value)))for(var i=0,n=$els.length;i<n;i++)if($els[i].getAttribute("data-value")===value)return $($els[i]);return $()},getElementWithTextContent:function(textContent,ignoreCase,$els){if(null!=(textContent=hash_key(textContent)))for(var i=0,n=$els.length;i<n;i++){var eleTextContent=$els[i].textContent;if(1==ignoreCase&&(eleTextContent=null!==eleTextContent?eleTextContent.toLowerCase():null,textContent=textContent.toLowerCase()),eleTextContent===textContent)return $($els[i])}return $()},getItem:function(value){return this.getElementWithValue(value,this.$control.children())},getFirstItemMatchedByTextContent:function(textContent,ignoreCase){return ignoreCase=null!==ignoreCase&&!0===ignoreCase,this.getElementWithTextContent(textContent,ignoreCase,this.$dropdown_content.find("[data-selectable]"))},addItems:function(control,silent){this.buffer=document.createDocumentFragment();for(var childNodes=this.$control[0].childNodes,i=0;i<childNodes.length;i++)this.buffer.appendChild(childNodes[i]);for(var items=$.isArray(control)?control:[control],n=(i=0,items.length);i<n;i++)this.isPending=i<n-1,this.addItem(items[i],silent);(control=this.$control[0]).insertBefore(this.buffer,control.firstChild),this.buffer=null},addItem:function(value,silent){debounce_events(this,silent?[]:["change"],(function(){var $item,$options,value_next,inputMode=this.settings.mode;value=hash_key(value),-1===this.items.indexOf(value)?this.options.hasOwnProperty(value)&&("single"===inputMode&&this.clear(silent),"multi"===inputMode&&this.isFull()||($item=$(this.render("item",this.options[value])),value_next=this.isFull(),this.items.splice(this.caretPos,0,value),this.insertAtCaret($item),this.isPending&&(value_next||!this.isFull())||this.refreshState(),this.isSetup&&($options=this.$dropdown_content.find("[data-selectable]"),this.isPending||(value_next=this.getOption(value),value_next=this.getAdjacentOption(value_next,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==inputMode),value_next&&this.setActiveOption(this.getOption(value_next))),!$options.length||this.isFull()?this.close():this.isPending||this.positionDropdown(),this.updatePlaceholder(),this.trigger("item_add",value,$item),this.isPending||this.updateOriginalInput({silent:silent})))):"single"===inputMode&&this.close()}))},removeItem:function(value,silent){var i,idx,$item=value instanceof $?value:this.getItem(value);value=hash_key($item.attr("data-value")),-1!==(i=this.items.indexOf(value))&&(this.trigger("item_before_remove",value,$item),$item.remove(),$item.hasClass("active")&&(idx=this.$activeItems.indexOf($item[0]),this.$activeItems.splice(idx,1)),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(value)&&this.removeOption(value,silent),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:silent}),this.positionDropdown(),this.trigger("item_remove",value,$item))},createItem:function(output,triggerDropdown){var self=this,caret=self.caretPos;output=output||$.trim(self.$control_input.val()||"");var callback=arguments[arguments.length-1];if("function"!=typeof callback&&(callback=function(){}),"boolean"!=typeof triggerDropdown&&(triggerDropdown=!0),!self.canCreate(output))return callback(),!1;self.lock();var fn,called,setup="function"==typeof self.settings.create?this.settings.create:function(input){var data={};return data[self.settings.labelField]=input,data[self.settings.valueField]=input,data},create=(called=!(fn=function(data){if(self.unlock(),!data||"object"!=typeof data)return callback();var value=hash_key(data[self.settings.valueField]);if("string"!=typeof value)return callback();self.setTextboxValue(""),self.addOption(data),self.setCaret(caret),self.addItem(value),self.refreshOptions(triggerDropdown&&"single"!==self.settings.mode),callback(data)}),function(){called||(called=!0,fn.apply(this,arguments))});return void 0!==(output=setup.apply(this,[output,create]))&&create(output),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var invalid=!this.items.length;this.isInvalid=invalid,this.$control_input.prop("required",invalid),this.$input.prop("required",!invalid)},refreshClasses:function(){var isFull=this.isFull(),isLocked=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl),this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",isLocked).toggleClass("full",isFull).toggleClass("not-full",!isFull).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",this.isOpen).toggleClass("has-options",!$.isEmptyObject(this.options)).toggleClass("has-items",0<this.items.length),this.$control_input.data("grow",!isFull&&!isLocked)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(opts){var i,n,options,label;if(opts=opts||{},1===this.tagType){for(options=[],i=0,n=this.items.length;i<n;i++)label=this.options[this.items[i]][this.settings.labelField]||"",options.push('<option value="'+escape_html(this.items[i])+'" selected="selected">'+escape_html(label)+"</option>");options.length||this.$input.attr("multiple")||options.push('<option value="" selected="selected"></option>'),this.$input.html(options.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(opts.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){var $input;this.settings.placeholder&&($input=this.$control_input,this.items.length?$input.removeAttr("placeholder"):$input.attr("placeholder",this.settings.placeholder),$input.triggerHandler("update",{force:!0}))},open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var trigger=this.isOpen;"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.isBlurring&&this.$control_input.blur()),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),trigger&&this.trigger("dropdown_close",this.$dropdown)},positionDropdown:function(){var $control=this.$control,offset="body"===this.settings.dropdownParent?$control.offset():$control.position();offset.top+=$control.outerHeight(!0),this.$dropdown.css({width:$control[0].getBoundingClientRect().width,top:offset.top,left:offset.left})},clear:function(silent){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:silent}),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function(target){var caret=Math.min(this.caretPos,this.items.length),el=target[0];target=this.buffer||this.$control[0];0===caret?target.insertBefore(el,target.firstChild):target.insertBefore(el,target.childNodes[caret]),this.setCaret(caret+1)},deleteSelection:function(e){var i,n,values,option_select,$option_select,caret,direction=e&&8===e.keyCode?-1:1,selection=getSelection(this.$control_input[0]);if(this.$activeOption&&!this.settings.hideSelected&&(option_select=this.getAdjacentOption(this.$activeOption,-1).attr("data-value")),values=[],this.$activeItems.length){for(caret=this.$control.children(".active:"+(0<direction?"last":"first")),caret=this.$control.children(":not(input)").index(caret),0<direction&&caret++,i=0,n=this.$activeItems.length;i<n;i++)values.push($(this.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(direction<0&&0===selection.start&&0===selection.length?values.push(this.items[this.caretPos-1]):0<direction&&selection.start===this.$control_input.val().length&&values.push(this.items[this.caretPos]));if(!values.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[values]))return!1;for(void 0!==caret&&this.setCaret(caret);values.length;)this.removeItem(values.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),option_select&&($option_select=this.getOption(option_select)).length&&this.setActiveOption($option_select),!0},advanceSelection:function(direction,e){var selection,valueLength,idx;0!==direction&&(this.rtl&&(direction*=-1),idx=0<direction?"last":"first",selection=getSelection(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(valueLength=this.$control_input.val().length,(direction<0?0!==selection.start||0!==selection.length:selection.start!==valueLength)||valueLength||this.advanceCaret(direction,e)):(idx=this.$control.children(".active:"+idx)).length&&(idx=this.$control.children(":not(input)").index(idx),this.setActiveItem(null),this.setCaret(0<direction?idx+1:idx)))},advanceCaret:function(direction,e){var $adj;0!==direction&&($adj=0<direction?"next":"prev",this.isShiftDown?($adj=this.$control_input[$adj]()).length&&(this.hideInput(),this.setActiveItem($adj),e&&e.preventDefault()):this.setCaret(this.caretPos+direction))},setCaret:function(i){if(i="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,i)),!this.isPending)for(var $child,$children=this.$control.children(":not(input)"),j=0,n=$children.length;j<n;j++)$child=$($children[j]).detach(),j<i?this.$control_input.before($child):this.$control.append($child);this.caretPos=i},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var eventNS=this.eventNS,revertSettings=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(revertSettings.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:revertSettings.tabindex}).show(),this.$control_input.removeData("grow"),this.$input.removeData("selectize"),0==--Selectize.count&&Selectize.$testInput&&(Selectize.$testInput.remove(),Selectize.$testInput=void 0),$(window).off(eventNS),$(document).off(eventNS),$(document.body).off(eventNS),delete this.$input[0].selectize},render:function(templateName,data){var value,id,html="",cache=!1;return(cache="option"===templateName||"item"===templateName?!!(value=hash_key(data[this.settings.valueField])):cache)&&(isset(this.renderCache[templateName])||(this.renderCache[templateName]={}),this.renderCache[templateName].hasOwnProperty(value))?this.renderCache[templateName][value]:(html=$(this.settings.render[templateName].apply(this,[data,escape_html])),"option"===templateName||"option_create"===templateName?data[this.settings.disabledField]||html.attr("data-selectable",""):"optgroup"===templateName&&(id=data[this.settings.optgroupValueField]||"",html.attr("data-group",id),data[this.settings.disabledField]&&html.attr("data-disabled","")),"option"!==templateName&&"item"!==templateName||html.attr("data-value",value||""),cache&&(this.renderCache[templateName][value]=html[0]),html[0])},clearCache:function(templateName){void 0===templateName?this.renderCache={}:delete this.renderCache[templateName]},canCreate:function(input){if(!this.settings.create)return!1;var filter=this.settings.createFilter;return input.length&&("function"!=typeof filter||filter.apply(this,[input]))&&("string"!=typeof filter||new RegExp(filter).test(input))&&(!(filter instanceof RegExp)||filter.test(input))}}),Selectize.count=0,Selectize.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},$.fn.selectize=function(settings_user){function init_select($input,settings_element){function readData(data){return"string"==typeof(data=attr_data&&data.attr(attr_data))&&data.length?JSON.parse(data):null}function addOption($option,group){var option,value=hash_key(($option=$($option)).val());(value||settings.allowEmptyOption)&&(optionsMap.hasOwnProperty(value)?group&&((option=optionsMap[value][field_optgroup])?$.isArray(option)?option.push(group):optionsMap[value][field_optgroup]=[option,group]:optionsMap[value][field_optgroup]=group):((option=readData($option)||{})[field_label]=option[field_label]||$option.text(),option[field_value]=option[field_value]||value,option[field_disabled]=option[field_disabled]||$option.prop("disabled"),option[field_optgroup]=option[field_optgroup]||group,optionsMap[value]=option,options.push(option),$option.is(":selected")&&settings_element.items.push(value)))}var i,n,tagName,$children,options=settings_element.options,optionsMap={};for(settings_element.maxItems=$input.attr("multiple")?null:1,i=0,n=($children=$input.children()).length;i<n;i++)"optgroup"===(tagName=$children[i].tagName.toLowerCase())?function($optgroup){var i,n,id,optgroup,$options;for((id=($optgroup=$($optgroup)).attr("label"))&&((optgroup=readData($optgroup)||{})[field_optgroup_label]=id,optgroup[field_optgroup_value]=id,optgroup[field_disabled]=$optgroup.prop("disabled"),settings_element.optgroups.push(optgroup)),i=0,n=($options=$("option",$optgroup)).length;i<n;i++)addOption($options[i],id)}($children[i]):"option"===tagName&&addOption($children[i])}var defaults=$.fn.selectize.defaults,settings=$.extend({},defaults,settings_user),attr_data=settings.dataAttr,field_label=settings.labelField,field_value=settings.valueField,field_disabled=settings.disabledField,field_optgroup=settings.optgroupField,field_optgroup_label=settings.optgroupLabelField,field_optgroup_value=settings.optgroupValueField;return this.each((function(){var $input,tag_name,settings_element;this.selectize||($input=$(this),tag_name=this.tagName.toLowerCase(),settings_element={placeholder:settings_element=(settings_element=$input.attr("placeholder")||$input.attr("data-placeholder"))||settings.allowEmptyOption?settings_element:$input.children('option[value=""]').text(),options:[],optgroups:[],items:[]},("select"===tag_name?init_select:function(value,settings_element){var i,n,values,option,data_raw=value.attr(attr_data);if(data_raw)for(settings_element.options=JSON.parse(data_raw),i=0,n=settings_element.options.length;i<n;i++)settings_element.items.push(settings_element.options[i][field_value]);else if(value=$.trim(value.val()||""),settings.allowEmptyOption||value.length){for(i=0,n=(values=value.split(settings.delimiter)).length;i<n;i++)(option={})[field_label]=values[i],option[field_value]=values[i],settings_element.options.push(option);settings_element.items=values}})($input,settings_element),new Selectize($input,$.extend(!0,{},defaults,settings_element,settings_user)))}))},$.fn.selectize.defaults=Selectize.defaults,$.fn.selectize.support={validity:SUPPORTS_VALIDITY_API},Selectize.define("auto_select_on_type",(function(options){var originalBlur,self=this;self.onBlur=(originalBlur=self.onBlur,function(e){var $matchedItem=self.getFirstItemMatchedByTextContent(self.lastValue,!0);return void 0!==$matchedItem.attr("data-value")&&self.getValue()!==$matchedItem.attr("data-value")&&self.setValue($matchedItem.attr("data-value")),originalBlur.apply(this,arguments)})})),Selectize.define("autofill_disable",(function(options){var original,self=this;self.setup=(original=self.setup,function(){original.apply(self,arguments),self.$control_input.attr({autocomplete:"new-password",autofill:"no"})})})),Selectize.define("drag_drop",(function(options){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');var self,original;"multi"===this.settings.mode&&((self=this).lock=(original=self.lock,function(){var sortable=self.$control.data("sortable");return sortable&&sortable.disable(),original.apply(self,arguments)}),self.unlock=function(){var original=self.unlock;return function(){var sortable=self.$control.data("sortable");return sortable&&sortable.enable(),original.apply(self,arguments)}}(),self.setup=function(){var original=self.setup;return function(){original.apply(this,arguments);var $control=self.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:self.isLocked,start:function(e,ui){ui.placeholder.css("width",ui.helper.css("width")),$control.css({overflow:"visible"})},stop:function(){$control.css({overflow:"hidden"});var active=self.$activeItems?self.$activeItems.slice():null,values=[];$control.children("[data-value]").each((function(){values.push($(this).attr("data-value"))})),self.setValue(values),self.setActiveItem(active)}})}}())})),Selectize.define("dropdown_header",(function(options){var original,self=this;options=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(data){return'<div class="'+data.headerClass+'"><div class="'+data.titleRowClass+'"><span class="'+data.labelClass+'">'+data.title+'</span><a href="javascript:void(0)" class="'+data.closeClass+'">&times;</a></div></div>'}},options),self.setup=(original=self.setup,function(){original.apply(self,arguments),self.$dropdown_header=$(options.html(options)),self.$dropdown.prepend(self.$dropdown_header)})})),Selectize.define("optgroup_columns",(function(options){var original,self=this;function equalizeSizes(){var i,height_max,width_last,width_parent,$optgroups=$("[data-group]",self.$dropdown_content),n=$optgroups.length;if(n&&self.$dropdown_content.width()){if(options.equalizeHeight){for(i=height_max=0;i<n;i++)height_max=Math.max(height_max,$optgroups.eq(i).height());$optgroups.css({height:height_max})}options.equalizeWidth&&(width_parent=self.$dropdown_content.innerWidth()-getScrollbarWidth(),width_last=Math.round(width_parent/n),$optgroups.css({width:width_last}),1<n&&(width_last=width_parent-width_last*(n-1),$optgroups.eq(n-1).css({width:width_last})))}}options=$.extend({equalizeWidth:!0,equalizeHeight:!0},options),this.getAdjacentOption=function($option,index){var $options=$option.closest("[data-group]").find("[data-selectable]");return 0<=(index=$options.index($option)+index)&&index<$options.length?$options.eq(index):$()},this.onKeyDown=(original=self.onKeyDown,function(e){var $option,$options;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?original.apply(this,arguments):(self.ignoreHover=!0,$option=($options=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void(($option=($options=($options=37===e.keyCode?$options.prev("[data-group]"):$options.next("[data-group]")).find("[data-selectable]")).eq(Math.min($options.length-1,$option))).length&&this.setActiveOption($option)))});var getScrollbarWidth=function(){var div,width=getScrollbarWidth.width,doc=document;return void 0===width&&((div=doc.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',div=div.firstChild,doc.body.appendChild(div),width=getScrollbarWidth.width=div.offsetWidth-div.clientWidth,doc.body.removeChild(div)),width};(options.equalizeHeight||options.equalizeWidth)&&(hook_after(this,"positionDropdown",equalizeSizes),hook_after(this,"refreshOptions",equalizeSizes))})),Selectize.define("remove_button",(function(options){options=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},options),("single"===this.settings.mode?function(thisRef,options){options.className="remove-single";var original,self=thisRef,html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+"</a>";thisRef.setup=(original=self.setup,function(){var id,render_item;options.append&&(id=$(self.$input.context).attr("id"),$("#"+id),render_item=self.settings.render.item,self.settings.render.item=function(data){return html_container=render_item.apply(thisRef,arguments),html_element=html,$("<span>").append(html_container).append(html_element);var html_container,html_element}),original.apply(thisRef,arguments),thisRef.$control.on("click","."+options.className,(function(e){e.preventDefault(),self.isLocked||self.clear()}))})}:function(thisRef,options){var original,self=thisRef,html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+"</a>";thisRef.setup=(original=self.setup,function(){var render_item;options.append&&(render_item=self.settings.render.item,self.settings.render.item=function(data){return html_container=render_item.apply(thisRef,arguments),html_element=html,pos=html_container.search(/(<\/[^>]+>\s*)$/),html_container.substring(0,pos)+html_element+html_container.substring(pos);var html_container,html_element,pos}),original.apply(thisRef,arguments),thisRef.$control.on("click","."+options.className,(function($item){if($item.preventDefault(),!self.isLocked)return $item=$($item.currentTarget).parent(),self.setActiveItem($item),self.deleteSelection()&&self.setCaret(self.items.length),!1}))})})(this,options)})),Selectize.define("restore_on_backspace",(function(options){var original;options.text=options.text||function(option){return option[this.settings.labelField]},this.onKeyDown=(original=this.onKeyDown,function(e){var option;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(option=this.caretPos-1)&&option<this.items.length?(option=this.options[this.items[option]],this.deleteSelection(e)&&(this.setTextboxValue(options.text.apply(this,[option])),this.refreshOptions(!0)),void e.preventDefault()):original.apply(this,arguments)})})),Selectize.define("select_on_focus",(function(options){var originalFocus,originalBlur,self=this;self.on("focus",(originalFocus=self.onFocus,function(e){var value=self.getItem(self.getValue()).text();return self.clear(),self.setTextboxValue(value),self.$control_input.select(),setTimeout((function(){self.settings.selectOnTab&&self.setActiveOption(self.getFirstItemMatchedByTextContent(value)),self.settings.score=null}),0),originalFocus.apply(this,arguments)})),self.onBlur=(originalBlur=self.onBlur,function(e){return""===self.getValue()&&self.lastValidValue!==self.getValue()&&self.setValue(self.lastValidValue),setTimeout((function(){self.settings.score=function(){return function(){return 1}}}),0),originalBlur.apply(this,arguments)}),self.settings.score=function(){return function(){return 1}}})),Selectize})),e=function(D){function n(t,i,e){var n,o,r;"string"==typeof e&&(e={className:e}),this.options=(n=f,o=D.isPlainObject(e)?e:{},(r=function(){}).prototype=n,D.extend(!0,new r,o)),this.loadHTML(),this.wrapper=D(A.html),this.options.clickToHide&&this.wrapper.addClass(l+"-hidable"),this.wrapper.data(l,this),this.arrow=this.wrapper.find("."+l+"-arrow"),this.container=this.wrapper.find("."+l+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=m(t),this.elem.data(l,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(i)}var k=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1},s="notify",l=s+"js",a=s+"!blank",B={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},H=["l","c","r"],Q=["t","m","b"],R=["t","b","l","r"],U={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},h={},A={name:"core",html:'<div class="'+l+'-wrapper">\n\t<div class="'+l+'-arrow"></div>\n\t<div class="'+l+'-container"></div>\n</div>',css:"."+l+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+l+"-corner ."+l+"-wrapper,\n."+l+"-corner ."+l+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+l+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+l+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+l+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+l+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},c={"border-radius":["-webkit-","-moz-"]},t=function(t,e){if(!t)throw"Missing Style name";if(!e)throw"Missing Style definition";if(!e.html)throw"Missing Style HTML";var i=h[t];i&&i.cssElem&&(window.console&&console.warn(s+": overwriting style '"+t+"'"),h[t].cssElem.remove()),e.name=t,h[t]=e;var o="";e.classes&&D.each(e.classes,(function(t,i){return o+="."+l+"-"+e.name+"-"+t+" {\n",D.each(i,(function(e,n){return c[e]&&D.each(c[e],(function(t,i){return o+="\t"+i+e+": "+n+";\n"})),o+="\t"+e+": "+n+";\n"})),o+="}\n"})),e.css&&(o+="/* styles for "+e.name+" */\n"+e.css),o&&(e.cssElem=d(o),e.cssElem.attr("id","notify-"+e.name));var n={},r=D(e.html);p("html",r,n),p("text",r,n),e.fields=n},d=function(i){var e;(e=g("style")).attr("type","text/css"),D("head").append(e);try{e.html(i)}catch(t){e[0].styleSheet.cssText=i}return e},p=function(i,t,e){var n;return"html"!==i&&(i="text"),u(t,"["+(n="data-notify-"+i)+"]").each((function(){var t;(t=D(this).attr(n))||(t=a),e[t]=i}))},u=function(t,i){return t.is(i)?t:t.find(i)},f={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},g=function(t){return D("<"+t+"></"+t+">")},w={},m=function(e){return e.is("[type=radio]")&&(e=e.parents("form:first").find("[type=radio]").filter((function(t,i){return D(i).attr("name")===e.attr("name")})).first()),e},X=function(t,i,e){var n;if("string"==typeof e)e=parseInt(e,10);else if("number"!=typeof e)return;if(!isNaN(e))return void 0!==t[n=B[U[i.charAt(0)]]]&&(i=B[n.charAt(0)],e=-e),void 0===t[i]?t[i]=e:t[i]+=e,null},z=function(t,i,e){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return e/2-i/2;if("r"===t||"b"===t)return e-i;throw"Invalid alignment"};n.prototype.loadHTML=function(){var t;t=this.getStyle(),this.userContainer=D(t.html),this.userFields=t.fields},n.prototype.show=function(t,i){var e,n,o,r,s,a;if(n=function(){if(!t&&!a.elem&&a.destroy(),i)return i()},s=0<(a=this).container.parent().parents(":hidden").length,o=this.container.add(this.arrow),e=[],s&&t)r="show";else if(s&&!t)r="hide";else if(!s&&t)r=this.options.showAnimation,e.push(this.options.showDuration);else{if(s||t)return n();r=this.options.hideAnimation,e.push(this.options.hideDuration)}return e.push(n),o[r].apply(o,e)},n.prototype.setGlobalPosition=function(){var t=this.getPosition(),i=t[0],e=t[1],n=B[i],o=B[e],r=i+"|"+e,s=w[r];if(!s||!document.body.contains(s[0])){s=w[r]=g("div");var a={};a[n]=0,"middle"===o?a.top="45%":"center"===o?a.left="45%":a[o]=0,s.css(a).addClass(l+"-corner"),D("body").append(s)}return s.prepend(this.wrapper)},n.prototype.setElementPosition=function(){var t,i,e,n,o,r,s,a,l,h,A,c,d,p,u,f,g,w,m,y,b,v,C,E,x,S,F,M;for(C=(S=this.getPosition())[0],v=S[1],S[2],A=this.elem.position(),a=this.elem.outerHeight(),c=this.elem.outerWidth(),l=this.elem.innerHeight(),h=this.elem.innerWidth(),M=this.wrapper.position(),o=this.container.height(),r=this.container.width(),w=B[C],(s={})[b=B[y=U[C]]]="b"===C?a:"r"===C?c:0,X(s,"top",A.top-M.top),X(s,"left",A.left-M.left),p=0,f=(F=["top","left"]).length;p<f;p++)E=F[p],(m=parseInt(this.elem.css("margin-"+E),10))&&X(s,E,m);if(d=Math.max(0,this.options.gap-(this.options.arrowShow?e:0)),X(s,b,d),this.options.arrowShow){for(e=this.options.arrowSize,i=D.extend({},s),t=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",u=0,g=R.length;u<g;u++)x=B[E=R[u]],E!==y&&(n=x===w?t:"transparent",i["border-"+x]=e+"px solid "+n);X(s,B[y],e),0<=k.call(R,v)&&X(i,B[v],2*e)}else this.arrow.hide();if(0<=k.call(Q,C)?(X(s,"left",z(v,r,c)),i&&X(i,"left",z(v,e,h))):0<=k.call(H,C)&&(X(s,"top",z(v,o,a)),i&&X(i,"top",z(v,e,l))),this.container.is(":visible")&&(s.display="block"),this.container.removeAttr("style").css(s),i)return this.arrow.removeAttr("style").css(i)},n.prototype.getPosition=function(){var t,i,e,n,o,r,s,l,h;if(l=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),h=[],D.each(l.split(/\W+/),(function(t,i){var e;if(e=i.toLowerCase().charAt(0),B[e])return h.push(e)})),0===(t=h).length&&(t[0]="b"),i=t[0],k.call(R,i)<0)throw"Must be one of ["+R+"]";return(1===t.length||(e=t[0],0<=k.call(Q,e)&&(n=t[1],k.call(H,n)<0))||(o=t[0],0<=k.call(H,o)&&(r=t[1],k.call(Q,r)<0)))&&(t[1]=(s=t[0],0<=k.call(H,s)?"m":"l")),2===t.length&&(t[2]=t[1]),t},n.prototype.getStyle=function(t){var i;if(t||(t=this.options.style),t||(t="default"),!(i=h[t]))throw"Missing style: "+t;return i},n.prototype.updateClasses=function(){var t,i;return t=["base"],D.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),i=this.getStyle(),t=D.map(t,(function(t){return l+"-"+i.name+"-"+t})).join(" "),this.userContainer.attr("class",t)},n.prototype.run=function(t,i){var e,n,o,r,s;if(D.isPlainObject(i)?D.extend(this.options,i):"string"===D.type(i)&&(this.options.className=i),!this.container||t){if(this.container||t){for(o in n={},D.isPlainObject(t)?n=t:n[a]=t,n)e=n[o],(r=this.userFields[o])&&("text"===r&&this.options.breakNewLines&&(e=e.replace(/\n/g,"<br/>")),s=o===a?"":"="+o,u(this.userContainer,"[data-notify-"+r+s+"]").html(e));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},n.prototype.destroy=function(){this.wrapper.data(l,null),this.wrapper.remove()},D[s]=function(t,i,e){return t&&t.nodeName||t.jquery?D(t)[s](i,e):(e=i,new n(null,i=t,e)),t},D.fn[s]=function(i,e){return D(this).each((function(){var t=m(D(this)).data(l);t&&t.destroy(),new n(D(this),i,e)})),this},D.extend(D[s],{defaults:function(t){return D.extend(f,t)},addStyle:t,removeStyle:function(t){if(!t)throw"Missing Style name";h[t]&&delete h[t]},pluginOptions:f,getStyle:function(t){return h[t]},insertCSS:d}),t("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),D((function(){d(A.css).attr("id","core-notify"),D(document).on("click","."+l+"-hidable",(function(t){D(this).trigger("notify-hide")})),D(document).on("notify-hide","."+l+"-wrapper",(function(t){var i=D(this).data(l);i&&i.show(!1)}))}))},"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery),function(t,i,e,s){function o(i,e){var h=this;"object"==typeof e&&(delete e.refresh,delete e.render,t.extend(this,e)),this.$element=t(i),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var r=(this.position+"").toLowerCase().match(/\S+/g)||[];if(r.length<1&&r.push("center"),1==r.length&&r.push(r[0]),("top"==r[0]||"bottom"==r[0]||"left"==r[1]||"right"==r[1])&&(r=[r[1],r[0]]),this.positionX!=s&&(r[0]=this.positionX.toLowerCase()),this.positionY!=s&&(r[1]=this.positionY.toLowerCase()),h.positionX=r[0],h.positionY=r[1],"left"!=this.positionX&&"right"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?"center":parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?"center":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=t("<div />").prependTo("body");var a=this.$element.find(">.parallax-slider"),n=!1;0==a.length?this.$slider=t("<img />").prependTo(this.$mirror):(this.$slider=a.prependTo(this.$mirror),n=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",(function(){h.naturalHeight&&h.naturalWidth||(h.naturalHeight=this.naturalHeight||this.height||1,h.naturalWidth=this.naturalWidth||this.width||1),h.aspectRatio=h.naturalWidth/h.naturalHeight,o.isSetup||o.setup(),o.sliders.push(h),o.isFresh=!1,o.requestRender()})),n||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||a.length>0)&&this.$slider.trigger("load")}!function(){for(var t=0,e=["ms","moz","webkit","o"],s=0;s<e.length&&!i.requestAnimationFrame;++s)i.requestAnimationFrame=i[e[s]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[e[s]+"CancelAnimationFrame"]||i[e[s]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),h=i.setTimeout((function(){e(s+o)}),o);return t=s+o,h}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t=o.winHeight,i=o.docHeight,e=Math.min(this.boxOffsetTop,i-t),s=Math.max(this.boxOffsetTop+this.boxHeight-t,0),h=this.boxHeight+(e-s)*(1-this.speed)|0,r=(this.boxOffsetTop-e)*(1-this.speed)|0;if(h*this.aspectRatio>=this.boxWidth){this.imageWidth=h*this.aspectRatio|0,this.imageHeight=h,this.offsetBaseTop=r;var a=this.imageWidth-this.boxWidth;this.offsetLeft="left"==this.positionX?0:"right"==this.positionX?-a:isNaN(this.positionX)?-a/2|0:Math.max(this.positionX,-a)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;a=this.imageHeight-h;this.offsetBaseTop="top"==this.positionY?r:"bottom"==this.positionY?r-a:isNaN(this.positionY)?r-a/2|0:r+Math.max(this.positionY,-a)}},render:function(){var t=o.scrollTop,i=o.scrollLeft,e=this.overScrollFix?o.overScroll:0,s=t+o.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=s?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-i,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop-e,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=t(e),h=t(i),r=function(){o.winHeight=h.height(),o.winWidth=h.width(),o.docHeight=s.height(),o.docWidth=s.width()},a=function(){var t=h.scrollTop(),i=o.docHeight-o.winHeight,e=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(i,t)),o.scrollLeft=Math.max(0,Math.min(e,h.scrollLeft())),o.overScroll=Math.max(t-i,Math.min(t,0))};h.on("resize.px.parallax load.px.parallax",(function(){r(),o.isFresh=!1,o.requestRender()})).on("scroll.px.parallax load.px.parallax",(function(){a(),o.requestRender()})),r(),a(),this.isReady=!0}},configure:function(i){"object"==typeof i&&(delete i.refresh,delete i.render,t.extend(this.prototype,i))},refresh:function(){t.each(this.sliders,(function(){this.refresh()})),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,(function(){this.render()}))},requestRender:function(){var t=this;this.isBusy||(this.isBusy=!0,i.requestAnimationFrame((function(){t.render(),t.isBusy=!1})))},destroy:function(e){var s,h=t(e).data("px.parallax");for(h.$mirror.remove(),s=0;s<this.sliders.length;s+=1)this.sliders[s]==h&&this.sliders.splice(s,1);t(e).data("px.parallax",!1),0===this.sliders.length&&(t(i).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,o.isSetup=!1)}});var r=t.fn.parallax;t.fn.parallax=function h(s){return this.each((function(){var h=t(this),r="object"==typeof s&&s;this==i||this==e||h.is("body")?o.configure(r):h.data("px.parallax")?"object"==typeof s&&t.extend(h.data("px.parallax"),r):(r=t.extend({},h.data(),r),h.data("px.parallax",new o(this,r))),"string"==typeof s&&("destroy"==s?o.destroy(this):o[s]())}))},t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=r,this},t(e).on("ready.px.parallax.data-api",(function(){t('[data-parallax="scroll"]').parallax()}))}(jQuery,window,document),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}((function(a){var b=window.Slick||{};b=function(){var b=0;return function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.focussed=!1,e.interrupted=!1,e.hidden="hidden",e.paused=!0,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,d,f),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,void 0!==document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0)}}(),b.prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):!0===d?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each((function(b,c){a(c).attr("data-slick-index",b)})),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&!0===a.options.adaptiveHeight&&!1===a.options.vertical){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),!0===e.options.rtl&&!1===e.options.vertical&&(b=-b),!1===e.transformsEnabled?!1===e.options.vertical?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):!1===e.cssTransitions?(!0===e.options.rtl&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),!1===e.options.vertical?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),!1===e.options.vertical?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout((function(){e.disableTransition(),c.call()}),e.options.speed))},b.prototype.getNavTarget=function(){var c=this.options.asNavFor;return c&&null!==c&&(c=a(c).not(this.$slider)),c},b.prototype.asNavFor=function(b){var d=this.getNavTarget();null!==d&&"object"==typeof d&&d.each((function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)}))},b.prototype.applyTransition=function(a){var b=this,c={};!1===b.options.fade?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(!1===a.options.infinite&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1==0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;!0===b.options.arrows&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),!0!==b.options.infinite&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(!0===b.options.dots&&b.slideCount>b.options.slidesToShow){for(b.$slider.addClass("slick-dotted"),d=a("<ul />").addClass(b.options.dotsClass),c=0;c<=b.getDotCount();c+=1)d.append(a("<li />").append(b.options.customPaging.call(this,b,c)));b.$dots=d.appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each((function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")})),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(!0===b.options.centerMode||!0===b.options.swipeToSlide)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),!0===b.options.draggable&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.empty().append(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){for(e in f=null,d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(!1===d.originalSettings.mobileFirst?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),!0===b&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),!0===b&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,!0===b&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||!1===h||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,d=this,e=a(b.currentTarget);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),f=d.slideCount%d.options.slidesToScroll!=0?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d;if(d=0,a>(c=this.getNavigableIndexes())[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),!0===b.options.arrows&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),!0===b.options.accessibility&&b.$list.off("keydown.slick",b.keyHandler),!0===b.options.focusOnSelect&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&((b=a.$slides.children().children()).removeAttr("style"),a.$slider.empty().append(b))},b.prototype.clickHandler=function(a){!1===this.shouldClick&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){a(this).attr("style",a(this).data("originalStyling"))})),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",!1===b.options.fade?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;!1===c.cssTransitions?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout((function(){c.disableTransition(a),b.call()}),c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;!1===b.cssTransitions?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",(function(c){c.stopImmediatePropagation();var d=a(this);setTimeout((function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())}),0)}))},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){return this.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(!0===a.options.infinite)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(!0===a.options.centerMode)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),!0===b.options.infinite?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!=0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),!0===b.options.centerMode&&!0===b.options.infinite?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:!0===b.options.centerMode&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=!1===b.options.vertical?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,!0===b.options.variableWidth&&(f=b.slideCount<=b.options.slidesToShow||!1===b.options.infinite?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=!0===b.options.rtl?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,!0===b.options.centerMode&&(f=b.slideCount<=b.options.slidesToShow||!1===b.options.infinite?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=!0===b.options.rtl?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){return this.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(!1===a.options.infinite?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var d,e,b=this;return e=!0===b.options.centerMode?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,!0===b.options.swipeToSlide?(b.$slideTrack.find(".slick-slide").each((function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0})),Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){this.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),!0===c.options.accessibility&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each((function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})})),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each((function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})})).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;!0===b.options.dots&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),!0===b.options.dots&&!0===b.options.pauseOnDotsHover&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),!0===b.options.accessibility&&b.$list.on("keydown.slick",b.keyHandler),!0===b.options.focusOnSelect&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&!0===b.options.accessibility?b.changeSlide({data:{message:!0===b.options.rtl?"next":"previous"}}):39===a.keyCode&&!0===b.options.accessibility&&b.changeSlide({data:{message:!0===b.options.rtl?"previous":"next"}}))},b.prototype.lazyLoad=function(){function g(c){a("img[data-lazy]",c).each((function(){var c=a(this),d=a(this).attr("data-lazy"),e=document.createElement("img");e.onload=function(){c.animate({opacity:0},100,(function(){c.attr("src",d).animate({opacity:1},200,(function(){c.removeAttr("data-lazy").removeClass("slick-loading")})),b.$slider.trigger("lazyLoaded",[b,c,d])}))},e.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),b.$slider.trigger("lazyLoadError",[b,c,d])},e.src=d}))}var e,f,b=this;!0===b.options.centerMode?!0===b.options.infinite?f=(e=b.currentSlide+(b.options.slidesToShow/2+1))+b.options.slidesToShow+2:(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=b.options.slidesToShow/2+1+2+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=Math.ceil(e+b.options.slidesToShow),!0===b.options.fade&&(e>0&&e--,f<=b.slideCount&&f++)),g(b.$slider.find(".slick-slide").slice(e,f)),b.slideCount<=b.options.slidesToShow?g(b.$slider.find(".slick-slide")):b.currentSlide>=b.slideCount-b.options.slidesToShow?g(b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow)):0===b.currentSlide&&g(b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),!0===b.options.accessibility&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var e,f,g,c=this,d=a("img[data-lazy]",c.$slider);d.length?(e=d.first(),f=e.attr("data-lazy"),(g=document.createElement("img")).onload=function(){e.attr("src",f).removeAttr("data-lazy").removeClass("slick-loading"),!0===c.options.adaptiveHeight&&c.setPosition(),c.$slider.trigger("lazyLoaded",[c,e,f]),c.progressiveLazyLoad()},g.onerror=function(){3>b?setTimeout((function(){c.progressiveLazyLoad(b+1)}),500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),c.$slider.trigger("lazyLoadError",[c,e,f]),c.progressiveLazyLoad())},g.src=f):c.$slider.trigger("allImagesLoaded",[c])},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,!c.options.infinite&&c.currentSlide>e&&(c.currentSlide=e),c.slideCount<=c.options.slidesToShow&&(c.currentSlide=0),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){for(c in b.respondTo=b.options.respondTo||"window",f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort((function(a,c){return b.options.mobileFirst?a-c:c-a}))}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),!0===b.options.focusOnSelect&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout((function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()}),50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?a=!0===(b=a)?0:d.slideCount-1:a=!0===b?--a:a,!(d.slideCount<1||0>a||a>d.slideCount-1)&&(d.unload(),!0===c?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};!0===b.options.rtl&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,!1===b.transformsEnabled?b.$slideTrack.css(c):(c={},!1===b.cssTransitions?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;!1===a.options.vertical?!0===a.options.centerMode&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),!0===a.options.centerMode&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),!1===a.options.vertical&&!1===a.options.variableWidth?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):!0===a.options.variableWidth?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();!1===a.options.variableWidth&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each((function(d,e){c=b.slideWidth*d*-1,!0===b.options.rtl?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})})),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&!0===a.options.adaptiveHeight&&!1===a.options.vertical){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var c,d,e,f,h,b=this,g=!1;if("object"===a.type(arguments[0])?(e=arguments[0],g=arguments[1],h="multiple"):"string"===a.type(arguments[0])&&(e=arguments[0],f=arguments[1],g=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?h="responsive":void 0!==arguments[1]&&(h="single")),"single"===h)b.options[e]=f;else if("multiple"===h)a.each(e,(function(a,c){b.options[a]=c}));else if("responsive"===h)for(d in f)if("array"!==a.type(b.options.responsive))b.options.responsive=[f[d]];else{for(c=b.options.responsive.length-1;c>=0;)b.options.responsive[c].breakpoint===f[d].breakpoint&&b.options.responsive.splice(c,1),c--;b.options.responsive.push(f[d])}g&&(b.unload(),b.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),!1===a.options.fade?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=!0===a.options.vertical?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&!0===a.options.useCSS&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&!1!==a.animType&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&!1!==a.animType},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),!0===b.options.centerMode?(c=Math.floor(b.options.slidesToShow/2),!0===b.options.infinite&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=!0===b.options.infinite?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(!0===b.options.fade&&(b.options.centerMode=!1),!0===b.options.infinite&&!1===b.options.fade&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=!0===b.options.centerMode?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each((function(){a(this).attr("id","")}))}},b.prototype.interrupt=function(a){a||this.autoPlay(),this.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,j,h=null,i=this;return b=b||!1,!0===i.animating&&!0===i.options.waitForAnimate||!0===i.options.fade&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(!1===b&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,!1===i.options.infinite&&!1===i.options.centerMode&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)||!1===i.options.infinite&&!0===i.options.centerMode&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(!1===i.options.fade&&(d=i.currentSlide,!0!==c?i.animateSlide(g,(function(){i.postSlide(d)})):i.postSlide(d))):(i.options.autoplay&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!=0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!=0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.options.asNavFor&&((j=(j=i.getNavTarget()).slick("getSlick")).slideCount<=j.options.slidesToShow&&j.setSlideClasses(i.currentSlide)),i.updateDots(),i.updateArrows(),!0===i.options.fade?(!0!==c?(i.fadeSlideOut(f),i.fadeSlide(e,(function(){i.postSlide(e)}))):i.postSlide(e),void i.animateHeight()):void(!0!==c?i.animateSlide(h,(function(){i.postSlide(e)})):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),!0===a.options.dots&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),0>(d=Math.round(180*c/Math.PI))&&(d=360-Math.abs(d)),45>=d&&d>=0||360>=d&&d>=315?!1===e.options.rtl?"left":"right":d>=135&&225>=d?!1===e.options.rtl?"right":"left":!0===e.options.verticalSwiping?d>=35&&135>=d?"down":"up":"vertical"},b.prototype.swipeEnd=function(a){var c,d,b=this;if(b.dragging=!1,b.interrupted=!1,b.shouldClick=!(b.touchObject.swipeLength>10),void 0===b.touchObject.curX)return!1;if(!0===b.touchObject.edgeHit&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe){switch(d=b.swipeDirection()){case"left":case"down":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.currentDirection=0;break;case"right":case"up":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.currentDirection=1}"vertical"!=d&&(b.slideHandler(c),b.touchObject={},b.$slider.trigger("swipe",[b,d]))}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(!1===b.options.swipe||"ontouchend"in document&&!1===b.options.swipe||!1===b.options.draggable&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,!0===b.options.verticalSwiping&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!(!b.dragging||h&&1!==h.length)&&(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),!0===b.options.verticalSwiping&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),"vertical"!==(e=b.swipeDirection())?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(!1===b.options.rtl?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),!0===b.options.verticalSwiping&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,!1===b.options.infinite&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),!1===b.options.vertical?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,!0===b.options.verticalSwiping&&(b.swipeLeft=d+f*g),!0!==b.options.fade&&!1!==b.options.touchMove&&(!0===b.animating?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return b.interrupted=!0,1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var a=this;Math.floor(a.options.slidesToShow/2),!0===a.options.arrows&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(a.currentSlide>=a.slideCount-a.options.slidesToShow&&!1===a.options.centerMode||a.currentSlide>=a.slideCount-1&&!0===a.options.centerMode)&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(document[a.hidden]?a.interrupted=!0:a.interrupted=!1)},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||void 0===c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),void 0!==g)return g;return a}})),function(win,doc){var Snap=Snap||function(userOpts){var opts,settings={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},cache={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},eventList={},utils={hasTouch:"ontouchstart"in doc.documentElement||win.navigator.msPointerEnabled,eventType:function(action){return{down:utils.hasTouch?"touchstart":"mousedown",move:utils.hasTouch?"touchmove":"mousemove",up:utils.hasTouch?"touchend":"mouseup",out:utils.hasTouch?"touchcancel":"mouseout"}[action]},page:function(t,e){return utils.hasTouch&&e.touches.length&&e.touches[0]?e.touches[0]["page"+t]:e["page"+t]},klass:{has:function(el,name){return-1!==el.className.indexOf(name)},add:function(el,name){!utils.klass.has(el,name)&&settings.addBodyClasses&&(el.className+=" "+name)},remove:function(el,name){settings.addBodyClasses&&(el.className=el.className.replace(name,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(type){if("function"==typeof eventList[type])return eventList[type].call()},vendor:function(){var i,tmp=doc.createElement("div"),prefixes="webkit Moz O ms".split(" ");for(i in prefixes)if(void 0!==tmp.style[prefixes[i]+"Transition"])return prefixes[i]},transitionCallback:function(){return"Moz"===cache.vendor||"ms"===cache.vendor?"transitionend":cache.vendor+"TransitionEnd"},canTransform:function(){return void 0!==settings.element.style[cache.vendor+"Transform"]},deepExtend:function(destination,source){var property;for(property in source)source[property]&&source[property].constructor&&source[property].constructor===Object?(destination[property]=destination[property]||{},utils.deepExtend(destination[property],source[property])):destination[property]=source[property];return destination},angleOfDrag:function(x,y){var degrees,theta;return(theta=Math.atan2(-(cache.startDragY-y),cache.startDragX-x))<0&&(theta+=2*Math.PI),(degrees=Math.floor(theta*(180/Math.PI)-180))<0&&degrees>-180&&(degrees=360-Math.abs(degrees)),Math.abs(degrees)},events:{addEvent:function addEvent(element,eventName,func){return element.addEventListener?element.addEventListener(eventName,func,!1):element.attachEvent?element.attachEvent("on"+eventName,func):void 0},removeEvent:function addEvent(element,eventName,func){return element.addEventListener?element.removeEventListener(eventName,func,!1):element.attachEvent?element.detachEvent("on"+eventName,func):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},parentUntil:function(el,attr){for(var isStr="string"==typeof attr;el.parentNode;){if(isStr&&el.getAttribute&&el.getAttribute(attr))return el;if(!isStr&&el===attr)return el;el=el.parentNode}return null}},action={translate:{get:{matrix:function(index){if(utils.canTransform()){var matrix=win.getComputedStyle(settings.element)[cache.vendor+"Transform"].match(/\((.*)\)/);return matrix?(16===(matrix=matrix[1].split(",")).length&&(index+=8),parseInt(matrix[index],10)):0}return parseInt(settings.element.style.left,10)}},easeCallback:function(){settings.element.style[cache.vendor+"Transition"]="",cache.translation=action.translate.get.matrix(4),cache.easing=!1,clearInterval(cache.animatingInterval),0===cache.easingTo&&(utils.klass.remove(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left")),utils.dispatchEvent("animated"),utils.events.removeEvent(settings.element,utils.transitionCallback(),action.translate.easeCallback)},easeTo:function(n){utils.canTransform()?(cache.easing=!0,cache.easingTo=n,settings.element.style[cache.vendor+"Transition"]="all "+settings.transitionSpeed+"s "+settings.easing,cache.animatingInterval=setInterval((function(){utils.dispatchEvent("animating")}),1),utils.events.addEvent(settings.element,utils.transitionCallback(),action.translate.easeCallback),action.translate.x(n)):(cache.translation=n,action.translate.x(n)),0===n&&(settings.element.style[cache.vendor+"Transform"]="")},x:function(n){if(!("left"===settings.disable&&n>0||"right"===settings.disable&&n<0))if(settings.hyperextensible||(n===settings.maxPosition||n>settings.maxPosition?n=settings.maxPosition:(n===settings.minPosition||n<settings.minPosition)&&(n=settings.minPosition)),n=parseInt(n,10),isNaN(n)&&(n=0),utils.canTransform()){var theTranslate="translate3d("+n+"px, 0,0)";settings.element.style[cache.vendor+"Transform"]=theTranslate}else settings.element.style.width=(win.innerWidth||doc.documentElement.clientWidth)+"px",settings.element.style.left=n+"px",settings.element.style.right=""}},drag:{listen:function(){cache.translation=0,cache.easing=!1,utils.events.addEvent(settings.element,utils.eventType("down"),action.drag.startDrag),utils.events.addEvent(settings.element,utils.eventType("move"),action.drag.dragging),utils.events.addEvent(settings.element,utils.eventType("up"),action.drag.endDrag)},stopListening:function(){utils.events.removeEvent(settings.element,utils.eventType("down"),action.drag.startDrag),utils.events.removeEvent(settings.element,utils.eventType("move"),action.drag.dragging),utils.events.removeEvent(settings.element,utils.eventType("up"),action.drag.endDrag)},startDrag:function(e){var target=e.target?e.target:e.srcElement;if(utils.parentUntil(target,"data-snap-ignore"))utils.dispatchEvent("ignore");else{if(settings.dragger)if(!utils.parentUntil(target,settings.dragger)&&cache.translation!==settings.minPosition&&cache.translation!==settings.maxPosition)return;utils.dispatchEvent("start"),settings.element.style[cache.vendor+"Transition"]="",cache.isDragging=!0,cache.hasIntent=null,cache.intentChecked=!1,cache.startDragX=utils.page("X",e),cache.startDragY=utils.page("Y",e),cache.dragWatchers={current:0,last:0,hold:0,state:""},cache.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}}},dragging:function(e){if(cache.isDragging&&settings.touchToDrag){var thePageX=utils.page("X",e),thePageY=utils.page("Y",e),translated=cache.translation,absoluteTranslation=action.translate.get.matrix(4),whileDragX=thePageX-cache.startDragX,openingLeft=absoluteTranslation>0,translateTo=whileDragX;if(cache.intentChecked&&!cache.hasIntent)return;if(settings.addBodyClasses&&(absoluteTranslation>0?(utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right")):absoluteTranslation<0&&(utils.klass.add(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left"))),!1===cache.hasIntent||null===cache.hasIntent){var deg=utils.angleOfDrag(thePageX,thePageY),inRightRange=deg>=0&&deg<=settings.slideIntent||deg<=360&&deg>360-settings.slideIntent,inLeftRange=deg>=180&&deg<=180+settings.slideIntent||deg<=180&&deg>=180-settings.slideIntent;cache.hasIntent=!(!inLeftRange&&!inRightRange),cache.intentChecked=!0}if(settings.minDragDistance>=Math.abs(thePageX-cache.startDragX)||!1===cache.hasIntent)return;utils.events.prevent(e),utils.dispatchEvent("drag"),cache.dragWatchers.current=thePageX,cache.dragWatchers.last>thePageX?("left"!==cache.dragWatchers.state&&(cache.dragWatchers.state="left",cache.dragWatchers.hold=thePageX),cache.dragWatchers.last=thePageX):cache.dragWatchers.last<thePageX&&("right"!==cache.dragWatchers.state&&(cache.dragWatchers.state="right",cache.dragWatchers.hold=thePageX),cache.dragWatchers.last=thePageX),openingLeft?(settings.maxPosition<absoluteTranslation&&(translateTo=whileDragX-(absoluteTranslation-settings.maxPosition)*settings.resistance),cache.simpleStates={opening:"left",towards:cache.dragWatchers.state,hyperExtending:settings.maxPosition<absoluteTranslation,halfway:absoluteTranslation>settings.maxPosition/2,flick:Math.abs(cache.dragWatchers.current-cache.dragWatchers.hold)>settings.flickThreshold,translation:{absolute:absoluteTranslation,relative:whileDragX,sinceDirectionChange:cache.dragWatchers.current-cache.dragWatchers.hold,percentage:absoluteTranslation/settings.maxPosition*100}}):(settings.minPosition>absoluteTranslation&&(translateTo=whileDragX-(absoluteTranslation-settings.minPosition)*settings.resistance),cache.simpleStates={opening:"right",towards:cache.dragWatchers.state,hyperExtending:settings.minPosition>absoluteTranslation,halfway:absoluteTranslation<settings.minPosition/2,flick:Math.abs(cache.dragWatchers.current-cache.dragWatchers.hold)>settings.flickThreshold,translation:{absolute:absoluteTranslation,relative:whileDragX,sinceDirectionChange:cache.dragWatchers.current-cache.dragWatchers.hold,percentage:absoluteTranslation/settings.minPosition*100}}),action.translate.x(translateTo+translated)}},endDrag:function(e){if(cache.isDragging){utils.dispatchEvent("end");var translated=action.translate.get.matrix(4);if(0===cache.dragWatchers.current&&0!==translated&&settings.tapToClose)return utils.dispatchEvent("close"),utils.events.prevent(e),action.translate.easeTo(0),cache.isDragging=!1,void(cache.startDragX=0);"left"===cache.simpleStates.opening?cache.simpleStates.halfway||cache.simpleStates.hyperExtending||cache.simpleStates.flick?cache.simpleStates.flick&&"left"===cache.simpleStates.towards?action.translate.easeTo(0):(cache.simpleStates.flick&&"right"===cache.simpleStates.towards||cache.simpleStates.halfway||cache.simpleStates.hyperExtending)&&action.translate.easeTo(settings.maxPosition):action.translate.easeTo(0):"right"===cache.simpleStates.opening&&(cache.simpleStates.halfway||cache.simpleStates.hyperExtending||cache.simpleStates.flick?cache.simpleStates.flick&&"right"===cache.simpleStates.towards?action.translate.easeTo(0):(cache.simpleStates.flick&&"left"===cache.simpleStates.towards||cache.simpleStates.halfway||cache.simpleStates.hyperExtending)&&action.translate.easeTo(settings.minPosition):action.translate.easeTo(0)),cache.isDragging=!1,cache.startDragX=utils.page("X",e)}}}};this.open=function(side){utils.dispatchEvent("open"),utils.klass.remove(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right"),"left"===side?(cache.simpleStates.opening="left",cache.simpleStates.towards="right",utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right"),action.translate.easeTo(settings.maxPosition)):"right"===side&&(cache.simpleStates.opening="right",cache.simpleStates.towards="left",utils.klass.remove(doc.body,"snapjs-left"),utils.klass.add(doc.body,"snapjs-right"),action.translate.easeTo(settings.minPosition))},this.close=function(){utils.dispatchEvent("close"),action.translate.easeTo(0)},this.expand=function(side){var to=win.innerWidth||doc.documentElement.clientWidth;"left"===side?(utils.dispatchEvent("expandLeft"),utils.klass.add(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right")):(utils.dispatchEvent("expandRight"),utils.klass.add(doc.body,"snapjs-expand-right"),utils.klass.remove(doc.body,"snapjs-expand-left"),to*=-1),action.translate.easeTo(to)},this.on=function(evt,fn){return eventList[evt]=fn,this},this.off=function(evt){eventList[evt]&&(eventList[evt]=!1)},this.enable=function(){utils.dispatchEvent("enable"),action.drag.listen()},this.disable=function(){utils.dispatchEvent("disable"),action.drag.stopListening()},this.settings=function(opts){utils.deepExtend(settings,opts)},this.state=function(){var fromLeft=action.translate.get.matrix(4);return{state:fromLeft===settings.maxPosition?"left":fromLeft===settings.minPosition?"right":"closed",info:cache.simpleStates}},(opts=userOpts).element&&(utils.deepExtend(settings,opts),cache.vendor=utils.vendor(),action.drag.listen())};"undefined"!=typeof module&&module.exports&&(module.exports=Snap),"undefined"==typeof ender&&(this.Snap=Snap),"function"==typeof define&&define.amd&&define("snap",[],(function(){return Snap}))}.call(this,window,document),function(t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&void 0!==module.exports?module.exports=t():window.Sortable=t()}((function(){if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var T,S,E,x,A,B,h,w,y,D,c,i,N,P,l,s,d,u,C,X,Y,k,R,t,o,I=[],M=!1,H=!1,O=!1,r=/\s+/g,L="Sortable"+(new Date).getTime(),F=window,f=F.document,W=F.parseInt,U=F.setTimeout,e=F.jQuery||F.Zepto,n=F.Polymer,a={capture:!1,passive:!1},p="draggable"in f.createElement("div"),g=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((t=f.createElement("x")).style.cssText="pointer-events:auto","auto"===t.style.pointerEvents),j=!1,v=!1,z=Math.abs,m=Math.min,_=[],b=[],V=function(t,e){var n=it(t),i=W(n.width),o=ct(t,0,e),r=ct(t,1,e),a=o&&it(o),l=r&&it(r),s=a&&W(a.marginLeft)+W(a.marginRight)+o.getBoundingClientRect().width,c=l&&W(l.marginLeft)+W(l.marginRight)+r.getBoundingClientRect().width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":o&&("block"===a.display||"grid"===a.display||i<=s&&"none"===n.float||r&&"none"===n.float&&i<s+c)?"vertical":"horizontal"},q=function(t,e){if(!t||!t.getBoundingClientRect)return F;var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=it(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n||!n.getBoundingClientRect||n===f.body)return F;if(i||e)return n;i=!0}}}while(n=n.parentNode);return F},G=pt((function(n,t,e,i){if(t.scroll){var o,r,a,l,s=e?e[L]:window,c=t.scrollSensitivity,d=t.scrollSpeed,h=n.clientX,u=n.clientY,f=window.innerWidth,p=window.innerHeight,g=!1;y!==e&&(Z(),w=t.scroll,D=t.scrollFn,!0===w&&(w=q(e,!0),y=w));var v=0,m=w;do{var _;if(m&&m!==F?(r=it(_=m),o=m.getBoundingClientRect(),a=_.clientWidth<_.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)&&(z(o.right-h)<=c)-(z(o.left-h)<=c),l=_.clientHeight<_.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)&&(z(o.bottom-u)<=c)-(z(o.top-u)<=c)):m===F&&(_=F,a=(f-h<=c)-(h<=c),l=(p-u<=c)-(u<=c)),!I[v])for(var b=0;b<=v;b++)I[b]||(I[b]={});I[v].vx==a&&I[v].vy==l&&I[v].el===_||(I[v].el=_,I[v].vx=a,I[v].vy=l,clearInterval(I[v].pid),!_||0==a&&0==l||(g=!0,I[v].pid=setInterval(function(){i&&0===this.layer&&K.active._emulateDragOver(!0);var t=I[this.layer].vy?I[this.layer].vy*d:0,e=I[this.layer].vx?I[this.layer].vx*d:0;"function"==typeof D&&"continue"!==D.call(s,e,t,n,C,I[this.layer].el)||(I[this.layer].el===F?F.scrollTo(F.pageXOffset+e,F.pageYOffset+t):(I[this.layer].el.scrollTop+=t,I[this.layer].el.scrollLeft+=e))}.bind({layer:v}),24))),v++}while(t.bubbleScroll&&m!==F&&(m=q(m,!1)));M=g}}),30),Z=function(){I.forEach((function(t){clearInterval(t.pid)})),I=[]},Q=function(t){function e(a,l){return function(t,e,n,i){var o;if(null==a&&l)o=!0;else if(null==a||!1===a)o=!1;else if(l&&"clone"===a)o=a;else if("function"==typeof a)o=a(t,e,n,i);else{var r=(l?t:e).options.group.name;o=!0===a||"string"==typeof a&&a===r||a.join&&-1<a.indexOf(r)}return o||t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name}}var n={},i=t.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},J=function(t){T&&T.parentNode[L]&&T.parentNode[L]._computeIsAligned(t)};function K(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=gt({},e),t[L]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:W(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==K.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator)};for(var i in n)!(i in e)&&(e[i]=n[i]);for(var o in"direction"in e||(e.direction=function(){return V(t,e)}),Q(e),null==e.invertedSwapThreshold&&(e.invertedSwapThreshold=e.swapThreshold),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&p,tt(t,"mousedown",this._onTapStart),tt(t,"touchstart",this._onTapStart),e.supportPointer&&tt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(tt(t,"dragover",this),tt(t,"dragenter",this)),b.push(this._onDragOver),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function $(t,e,n,i){if(t){n=n||f;do{if(">*"===e&&t.parentNode===n||ft(t,e)||i&&t===n)return t;if(t===n)break}while(t=(o=t).host&&o!==f&&o.host.nodeType?o.host:o.parentNode)}var o;return null}function tt(t,e,n){t.addEventListener(e,n,a)}function et(t,e,n){t.removeEventListener(e,n,a)}function nt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(r," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(r," ")}}function it(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return f.defaultView&&f.defaultView.getComputedStyle?n=f.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function ot(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function rt(t,e,n,i,o,r,a,l,s){var c,d=(t=t||e[L]).options,h="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent?c=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(c=f.createEvent("Event")).initEvent(n,!0,!0),c.to=o||e,c.from=r||e,c.item=i||e,c.clone=x,c.oldIndex=a,c.newIndex=l,c.originalEvent=s,e.dispatchEvent(c),d[h]&&d[h].call(t,c)}function at(t,e,n,i,o,r,a,l){var s,c,d=t[L],h=d.options.onMove;return window.CustomEvent?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=f.createEvent("Event")).initEvent("move",!0,!0),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=o||e,s.relatedRect=r||e.getBoundingClientRect(),s.willInsertAfter=l,s.originalEvent=a,t.dispatchEvent(s),h&&(c=h.call(d,s,a)),c}function lt(t){t.draggable=!1}function st(){j=!1}function ct(t,e,n){for(var i=0,o=0,r=t.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==E&&r[o]!==T&&$(r[o],n.draggable,t,!1)){if(i===e)return r[o];i++}o++}return null}function dt(t){var e=t.lastElementChild;return e===E&&(e=t.children[t.childElementCount-2]),e||null}function ht(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function ut(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!ft(t,e)||n++;return n}function ft(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e)}catch(t){return!1}return!1}function pt(n,i){return function(){if(!o){var t=arguments,e=this;o=U((function(){1===t.length?n.call(e,t[0]):n.apply(e,t),o=void 0}),i)}}}function gt(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function vt(t){return n&&n.dom?n.dom(t).cloneNode(!0):e?e(t).clone(!0)[0]:t.cloneNode(!0)}function mt(t){return U(t,0)}function _t(t){return clearTimeout(t)}function bt(t){K.active&&t.cancelable&&t.preventDefault()}return K.prototype={constructor:K,_isAligned:!0,_computeIsAligned:function(t,e){var n,i,o,r,a,l,s;v||T&&T.parentNode===this.el&&(!0!==e&&!1!==e&&(e=!!$(t.target,null,T,!0)),this._isAligned=!M&&(e||this._isAligned&&(n=t.clientX,i=t.clientY,this.el,o=this._getDirection(t,null),this.options,r=R||T.getBoundingClientRect(),a="vertical"===o?r.left:r.top,l="vertical"===o?r.right:r.bottom,a<(s="vertical"===o?n:i)&&s<l)),v=!0,U((function(){v=!1}),30))},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,T):this.options.direction},_onTapStart:function(t){var e,n=this,i=this.el,o=this.options,r=o.preventOnFilter,a=t.type,l=t.touches&&t.touches[0],s=(l||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,d=o.filter;if(function(t){_.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&_.push(i)}}(i),!T&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||o.disabled)&&!c.isContentEditable&&(s=$(s,o.draggable,i,!0))&&h!==s){if(e=ut(s,o.draggable),"function"==typeof d){if(d.call(this,t,s,this))return rt(n,c,"filter",s,i,i,e),void(r&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some((function(t){if(t=$(c,t.trim(),i,!1))return rt(n,t,"filter",s,i,i,e),!0}))))return void(r&&t.cancelable&&t.preventDefault());o.handle&&!$(c,o.handle,i,!1)||this._prepareDragStart(t,l,s,e)}},_handleAutoScroll:function(e,t){if(T&&this.options.scroll){var n=e.clientX,i=e.clientY,o=f.elementFromPoint(n,i),r=this;if(t||window.navigator&&-1<window.navigator.userAgent.toLowerCase().indexOf("firefox")){G(e,r.options,o,!0);var a=q(o,!0);!M||l&&n===s&&i===d||(l&&clearInterval(l),l=setInterval((function(){if(T){var t=q(f.elementFromPoint(n,i),!0);t!==a&&(a=t,Z(),G(e,r.options,a,!0))}}),10),s=n,d=i)}else{if(!r.options.bubbleScroll||q(o,!0)===window)return void Z();G(e,r.options,q(o,!1))}}},_prepareDragStart:function(t,e,n,i){var o,r=this,a=r.el,l=r.options,s=a.ownerDocument;n&&!T&&n.parentNode===a&&(u=t,A=a,S=(T=n).parentNode,B=T.nextSibling,h=n,N=l.group,c=i,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,T.style["will-change"]="all",o=function(){r._disableDelayedDrag(),T.draggable=r.nativeDraggable,r._triggerDragStart(t,e),rt(r,A,"choose",T,A,A,c),nt(T,l.chosenClass,!0)},l.ignore.split(",").forEach((function(t){ot(T,t.trim(),lt)})),tt(s,"mouseup",r._onDrop),tt(s,"touchend",r._onDrop),tt(s,"touchcancel",r._onDrop),l.supportPointer&&tt(s,"pointercancel",r._onDrop),l.delay?(tt(s,"mouseup",r._disableDelayedDrag),tt(s,"touchend",r._disableDelayedDrag),tt(s,"touchcancel",r._disableDelayedDrag),tt(s,"mousemove",r._delayedDragTouchMoveHandler),tt(s,"touchmove",r._delayedDragTouchMoveHandler),l.supportPointer&&tt(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=U(o.bind(r),l.delay)):o())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;m(z(e.clientX-this._lastX),z(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),et(t,"mouseup",this._disableDelayedDrag),et(t,"touchend",this._disableDelayedDrag),et(t,"touchcancel",this._disableDelayedDrag),et(t,"mousemove",this._delayedDragTouchMoveHandler),et(t,"touchmove",this._delayedDragTouchMoveHandler),et(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){(e=e||("touch"==t.pointerType?t:null))?(u={target:T,clientX:e.clientX,clientY:e.clientY},this._onDragStart(u,"touch")):this.nativeDraggable?(tt(T,"dragend",this),tt(A,"dragstart",this._onDragStart)):this._onDragStart(u,!0);try{f.selection?mt((function(){f.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){if(A&&T){this.nativeDraggable&&(tt(f,"dragover",this._handleAutoScroll),tt(f,"dragover",J));var t=this.options;nt(T,t.dragClass,!1),nt(T,t.ghostClass,!0),it(T,"transform",""),(K.active=this)._isAligned=!0,rt(this,A,"start",T,A,A,c)}else this._nulling()},_emulateDragOver:function(t){if(C){if(this._lastX===C.clientX&&this._lastY===C.clientY&&!t)return;this._lastX=C.clientX,this._lastY=C.clientY,g||it(E,"display","none");for(var e=f.elementFromPoint(C.clientX,C.clientY),n=e,i=!!$(e,null,T,!0);e&&e.shadowRoot;)n=e=e.shadowRoot.elementFromPoint(C.clientX,C.clientY);if(n)do{if(n[L]){for(var o=b.length;o--;)b[o]({clientX:C.clientX,clientY:C.clientY,target:e,rootEl:n});if(!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);T.parentNode[L]._computeIsAligned(C,i),g||it(E,"display","")}},_onTouchMove:function(t){if(u){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=o.clientX-u.clientX+i.x,a=o.clientY-u.clientY+i.y,l=t.touches?"translate3d("+r+"px,"+a+"px,0)":"translate("+r+"px,"+a+"px)";if(this.options.supportPointer&&"touchmove"===t.type)return;if(!K.active){if(n&&m(z(o.clientX-this._lastX),z(o.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),this._handleAutoScroll(o,!0),X=!0,C=o,it(E,"webkitTransform",l),it(E,"mozTransform",l),it(E,"msTransform",l),it(E,"transform",l),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!E){var t,e=T.getBoundingClientRect(),n=it(T),i=this.options;nt(E=T.cloneNode(!0),i.ghostClass,!1),nt(E,i.fallbackClass,!0),nt(E,i.dragClass,!0),it(E,"top",e.top-W(n.marginTop,10)),it(E,"left",e.left-W(n.marginLeft,10)),it(E,"width",e.width),it(E,"height",e.height),it(E,"opacity","0.8"),it(E,"position","fixed"),it(E,"zIndex","100000"),it(E,"pointerEvents","none"),i.fallbackOnBody&&f.body.appendChild(E)||A.appendChild(E),t=E.getBoundingClientRect(),it(E,"width",2*e.width-t.width),it(E,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;n._offUpEvents(),N.checkPull(n,n,T,t)&&((x=vt(T)).draggable=!1,x.style["will-change"]="",this._hideClone(),nt(x,n.options.chosenClass,!1),n._cloneId=mt((function(){A.insertBefore(x,T),rt(n,A,"clone",T)}))),nt(T,o.dragClass,!0),e?("touch"===e?(tt(f,"touchmove",bt),tt(f,"touchmove",n._onTouchMove),tt(f,"touchend",n._onDrop),tt(f,"touchcancel",n._onDrop),o.supportPointer&&(tt(f,"pointermove",n._onTouchMove),tt(f,"pointerup",n._onDrop))):(tt(f,"mousemove",n._onTouchMove),tt(f,"mouseup",n._onDrop)),n._loopId=setInterval(n._emulateDragOver,50),nt(T,o.dragClass,!1)):(i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,T)),tt(f,"drop",n),it(T,"transform","translateZ(0)"),n._dragStartId=mt(n._dragStarted)),tt(f,"selectstart",n)},_onDragOver:function(t){var e,n,i,o,r,a,l,s,c,d,h,u,f=this.el,p=this.options,g=p.group,v=K.active,m=N===g,_=p.sort;if((void 0===t.rootEl||t.rootEl===this.el)&&(p.dragoverBubble||t.rootEl||(this._handleAutoScroll(t),T.parentNode[L]._computeIsAligned(t)),void 0!==t.preventDefault&&(t.cancelable&&t.preventDefault(),!p.dragoverBubble&&t.stopPropagation()),X=!0,e=$(t.target,p.draggable,f,!0),!(T.animated&&e===T||e.animated||j)&&(e!==Y&&(H=O=!1,Y=null),v&&!p.disabled&&(m?_||(o=!A.contains(T)):P===this||(this.lastPutMode=N.checkPull(this,v,T,t))&&g.checkPut(this,v,T,t))))){var b,w=this._getDirection(t,e);if(n=T.getBoundingClientRect(),P!==this&&this!==K.active?P=this:this===K.active&&(P=null),o)return this._hideClone(),S=A,void(x||B?A.insertBefore(T,x||B):_||A.appendChild(T));if(0===f.children.length||f.children[0]===E||f===t.target&&(r=t,a=w,l=dt(f).getBoundingClientRect(),s="vertical"===a?r.clientY:r.clientX,c="vertical"===a?r.clientX:r.clientY,d="vertical"===a?l.bottom:l.right,h="vertical"===a?l.left:l.top,u="vertical"===a?l.right:l.bottom,h<c&&c<u&&d<s)){if(0!==f.children.length&&f.children[0]!==E&&f===t.target&&(e=dt(f)),e){if(e.animated)return;i=e.getBoundingClientRect()}m?v._hideClone():v._showClone(this),!1!==at(A,f,T,n,e,i,t,!!e)&&(T.contains(f)||(f.appendChild(T),S=f,this._isAligned=!0,R=null),this._animate(n,T),e&&this._animate(i,e))}else if(e&&!e.animated&&e!==T&&void 0!==e.parentNode[L]&&e!==f){if(O=O||p.invertSwap||T.parentNode!==f||!this._isAligned,0===(b=function(t,e,n,i,o,r,a){var l=e.getBoundingClientRect(),s="vertical"===n?t.clientY:t.clientX,c="vertical"===n?l.height:l.width,d="vertical"===n?l.top:l.left,h="vertical"===n?l.bottom:l.right,u=T.getBoundingClientRect(),f="vertical"===n?u.height:u.width,p=!1,g=it(T);if(f+=W(g.marginLeft)+W(g.marginRight),!r)if(a&&f<c*i){if(!H&&(1===k?d+c*o/2<s:s<h-c*o/2)&&(H=!0),H)p=!0;else if("vertical"===n?u.top:u.left,"vertical"===n?u.bottom:u.right,1===k?s<d+f:h-f<s)return-1*k}else if(d+c*(1-i)/2<s&&s<h-c*(1-i)/2)return d+c/2<s?-1:1;return(p=p||r)&&(s<d+c*o/2||h-c*o/2<s)?d+c/2<s?1:-1:0}(t,e,w,p.swapThreshold,p.invertedSwapThreshold,O,Y===e)))return;R=null,this._isAligned=!0,Y&&(Y===e||e&&e.animated)||(H=!1,Y=e),k=b,i=e.getBoundingClientRect();var y=e.nextElementSibling,D=!1,C=at(A,f,T,n,e,i,t,D=1===b);!1!==C&&(1!==C&&-1!==C||(D=1===C),j=!0,U(st,30),m?v._hideClone():v._showClone(this),T.contains(f)||(D&&!y?f.appendChild(T):e.parentNode.insertBefore(T,D?y:e)),S=T.parentNode,this._animate(n,T),this._animate(i,e))}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();if(e===T&&(R=i),1===t.nodeType&&(t=t.getBoundingClientRect()),t.left+t.width/2===i.left+i.width/2&&t.top+t.height/2===i.top+i.height/2)return;it(e,"transition","none"),it(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,it(e,"transition","all "+n+"ms"),it(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=U((function(){it(e,"transition",""),it(e,"transform",""),e.animated=!1}),n)}},_offUpEvents:function(){var t=this.el.ownerDocument;et(f,"touchmove",bt),et(f,"touchmove",this._onTouchMove),et(f,"pointermove",this._onTouchMove),et(t,"mouseup",this._onDrop),et(t,"touchend",this._onDrop),et(t,"pointerup",this._onDrop),et(t,"touchcancel",this._onDrop),et(t,"pointercancel",this._onDrop),et(f,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;H=O=M=!1,clearInterval(this._loopId),clearInterval(l),Z(),clearTimeout(o),o=void 0,clearTimeout(this._dragStartTimer),_t(this._cloneId),_t(this._dragStartId),et(f,"mousemove",this._onTouchMove),this.nativeDraggable&&(et(f,"drop",this),et(e,"dragstart",this._onDragStart),et(f,"dragover",this._handleAutoScroll),et(f,"dragover",J)),this._offUpEvents(),t&&(X&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(A===S||P&&"clone"!==P.lastPutMode)&&x&&x.parentNode&&x.parentNode.removeChild(x),T&&(this.nativeDraggable&&et(T,"dragend",this),lt(T),T.style["will-change"]="",nt(T,this.options.ghostClass,!1),nt(T,this.options.chosenClass,!1),rt(this,A,"unchoose",T,S,A,c,null,t),A!==S?(0<=(i=ut(T,n.draggable))&&(rt(null,S,"add",T,S,A,c,i,t),rt(this,A,"remove",T,S,A,c,i,t),rt(null,S,"sort",T,S,A,c,i,t),rt(this,A,"sort",T,S,A,c,i,t)),P&&P.save()):T.nextSibling!==B&&0<=(i=ut(T,n.draggable))&&(rt(this,A,"update",T,S,A,c,i,t),rt(this,A,"sort",T,S,A,c,i,t)),K.active&&(null!=i&&-1!==i||(i=c),rt(this,A,"end",T,S,A,c,i,t),this.save()))),this._nulling()},_nulling:function(){A=T=S=E=B=x=h=w=y=I.length=l=s=d=u=C=X=i=c=Y=k=R=P=N=K.active=null,_.forEach((function(t){t.checked=!0})),_.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":T&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)$(t=n[i],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||ht(t));return e},sort:function(t){var i={},o=this.el;this.toArray().forEach((function(t,e){var n=o.children[e];$(n,this.options.draggable,o,!1)&&(i[t]=n)}),this),t.forEach((function(t){i[t]&&(o.removeChild(i[t]),o.appendChild(i[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return $(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&Q(n)},destroy:function(){var t=this.el;t[L]=null,et(t,"mousedown",this._onTapStart),et(t,"touchstart",this._onTapStart),et(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(et(t,"dragover",this),et(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),b.splice(b.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null},_hideClone:function(){x.cloneHidden||(it(x,"display","none"),x.cloneHidden=!0)},_showClone:function(t){"clone"===t.lastPutMode?x.cloneHidden&&(A.contains(T)&&!this.options.group.revertClone?A.insertBefore(x,T):B?A.insertBefore(x,B):A.appendChild(x),this.options.group.revertClone&&this._animate(T,x),it(x,"display",""),x.cloneHidden=!1):this._hideClone()}},K.utils={on:tt,off:et,css:it,find:ot,is:function(t,e){return!!$(t,e,t,!1)},extend:gt,throttle:pt,closest:$,toggleClass:nt,clone:vt,index:ut,nextTick:mt,cancelNextTick:_t,detectDirection:V,getChild:ct},K.create=function(t,e){return new K(t,e)},K.version="1.8.0-rc1",K})),function(){var g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function y(e){return function(e,t){var r,n,i,s,a,o,p,c,l,u=1,f=e.length,d="";for(n=0;n<f;n++)if("string"==typeof e[n])d+=e[n];else if("object"==typeof e[n]){if((s=e[n]).keys)for(r=t[u],i=0;i<s.keys.length;i++){if(null==r)throw new Error(y('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));r=r[s.keys[i]]}else r=s.param_no?t[s.param_no]:t[u++];if(g.not_type.test(s.type)&&g.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),g.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(y("[sprintf] expecting number but found %T",r));switch(g.number.test(s.type)&&(c=0<=r),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}g.json.test(s.type)?d+=r:(!g.number.test(s.type)||c&&!s.sign?l="":(l=c?"+":"-",r=r.toString().replace(g.sign,"")),o=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",p=s.width-(l+r).length,a=s.width&&0<p?o.repeat(p):"",d+=s.align?l+r+a:"0"===o?l+a+r:a+l+r)}return d}(function(e){if(p[e])return p[e];for(var t,r=e,n=[],i=0;r;){if(null!==(t=g.text.exec(r)))n.push(t[0]);else if(null!==(t=g.modulo.exec(r)))n.push("%");else{if(null===(t=g.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var s=[],a=t[2],o=[];if(null===(o=g.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=g.key_access.exec(a)))s.push(o[1]);else{if(null===(o=g.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(o[1])}t[2]=s}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return p[e]=n}(e),arguments)}function e(e,t){return y.apply(null,[e].concat(t||[]))}var p=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=y,exports.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=y,window.vsprintf=e,"function"==typeof define&&define.amd&&define((function(){return{sprintf:y,vsprintf:e}})))}(),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],factory):factory(global.jQuery)}(this,(function($$1){$$1=$$1&&$$1.hasOwnProperty("default")?$$1.default:$$1;var Renderer=function(){function Renderer(markup,children,options,callback){this.markup=markup,this.children=children,this.options=options,this.callback=callback}return Renderer.prototype.render=function($parent){var $node=$$1(this.markup);if(this.options&&this.options.contents&&$node.html(this.options.contents),this.options&&this.options.className&&$node.addClass(this.options.className),this.options&&this.options.data&&$$1.each(this.options.data,(function(k,v){$node.attr("data-"+k,v)})),this.options&&this.options.click&&$node.on("click",this.options.click),this.children){var $container_1=$node.find(".note-children-container");this.children.forEach((function(child){child.render($container_1.length?$container_1:$node)}))}return this.callback&&this.callback($node,this.options),this.options&&this.options.callback&&this.options.callback($node),$parent&&$parent.append($node),$node},Renderer}(),renderer_create=function(markup,callback){return function(){var options="object"==typeof arguments[1]?arguments[1]:arguments[0],children=$$1.isArray(arguments[0])?arguments[0]:[];return options&&options.children&&(children=options.children),new Renderer(markup,children,options,callback)}},TooltipUI=function(){function TooltipUI($node,options){if(this.$node=$node,this.options=$.extend({},{title:"",target:options.container,trigger:"hover focus",placement:"bottom"},options),this.$tooltip=$(['<div class="note-tooltip in">','  <div class="note-tooltip-arrow"/>','  <div class="note-tooltip-content"/>',"</div>"].join("")),"manual"!==this.options.trigger){var showCallback_1=this.show.bind(this),hideCallback_1=this.hide.bind(this),toggleCallback_1=this.toggle.bind(this);this.options.trigger.split(" ").forEach((function(eventName){"hover"===eventName?($node.off("mouseenter mouseleave"),$node.on("mouseenter",showCallback_1).on("mouseleave",hideCallback_1)):"click"===eventName?$node.on("click",toggleCallback_1):"focus"===eventName&&$node.on("focus",showCallback_1).on("blur",hideCallback_1)}))}}return TooltipUI.prototype.show=function(){var $node=this.$node,offset=$node.offset(),$tooltip=this.$tooltip,title=this.options.title||$node.attr("title")||$node.data("title"),placement=this.options.placement||$node.data("placement");$tooltip.addClass(placement),$tooltip.addClass("in"),$tooltip.find(".note-tooltip-content").text(title),$tooltip.appendTo(this.options.target);var nodeWidth=$node.outerWidth(),nodeHeight=$node.outerHeight(),tooltipWidth=$tooltip.outerWidth(),tooltipHeight=$tooltip.outerHeight();"bottom"===placement?$tooltip.css({top:offset.top+nodeHeight,left:offset.left+(nodeWidth/2-tooltipWidth/2)}):"top"===placement?$tooltip.css({top:offset.top-tooltipHeight,left:offset.left+(nodeWidth/2-tooltipWidth/2)}):"left"===placement?$tooltip.css({top:offset.top+(nodeHeight/2-tooltipHeight/2),left:offset.left-tooltipWidth}):"right"===placement&&$tooltip.css({top:offset.top+(nodeHeight/2-tooltipHeight/2),left:offset.left+nodeWidth})},TooltipUI.prototype.hide=function(){this.$tooltip.removeClass("in"),this.$tooltip.remove()},TooltipUI.prototype.toggle=function(){this.$tooltip.hasClass("in")?this.hide():this.show()},TooltipUI}(),DropdownUI=function(){function DropdownUI($node,options){this.$button=$node,this.options=$.extend({},{target:options.container},options),this.setEvent()}return DropdownUI.prototype.setEvent=function(){var _this=this;this.$button.on("click",(function(e){_this.toggle(),e.stopImmediatePropagation()}))},DropdownUI.prototype.clear=function(){var $parent=$(".note-btn-group.open");$parent.find(".note-btn.active").removeClass("active"),$parent.removeClass("open")},DropdownUI.prototype.show=function(){this.$button.addClass("active"),this.$button.parent().addClass("open");var $dropdown=this.$button.next(),offset=$dropdown.offset(),width=$dropdown.outerWidth(),windowWidth=$(window).width(),targetMarginRight=parseFloat($(this.options.target).css("margin-right"));offset.left+width>windowWidth-targetMarginRight?$dropdown.css("margin-left",windowWidth-targetMarginRight-(offset.left+width)):$dropdown.css("margin-left","")},DropdownUI.prototype.hide=function(){this.$button.removeClass("active"),this.$button.parent().removeClass("open")},DropdownUI.prototype.toggle=function(){var isOpened=this.$button.parent().hasClass("open");this.clear(),isOpened?this.hide():this.show()},DropdownUI}();$(document).on("click",(function(e){$(e.target).closest(".note-btn-group").length||$(".note-btn-group.open").removeClass("open")})),$(document).on("click.note-dropdown-menu",(function(e){$(e.target).closest(".note-dropdown-menu").parent().removeClass("open")}));var ModalUI=function(){function ModalUI($node,options){this.options=$.extend({},{target:options.container||"body"},options),this.$modal=$node,this.$backdrop=$('<div class="note-modal-backdrop" />')}return ModalUI.prototype.show=function(){"body"===this.options.target?(this.$backdrop.css("position","fixed"),this.$modal.css("position","fixed")):(this.$backdrop.css("position","absolute"),this.$modal.css("position","absolute")),this.$backdrop.appendTo(this.options.target).show(),this.$modal.appendTo(this.options.target).addClass("open").show(),this.$modal.trigger("note.modal.show"),this.$modal.off("click",".close").on("click",".close",this.hide.bind(this))},ModalUI.prototype.hide=function(){this.$modal.removeClass("open").hide(),this.$backdrop.hide(),this.$modal.trigger("note.modal.hide")},ModalUI}(),editor=renderer_create('<div class="note-editor note-frame"/>'),toolbar=renderer_create('<div class="note-toolbar" role="toolbar"/>'),editingArea=renderer_create('<div class="note-editing-area"/>'),codable=renderer_create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),editable=renderer_create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),statusbar=renderer_create(['<output class="note-status-output" role="status" aria-live="polite"/>','<div class="note-statusbar" role="resize">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),airEditor=renderer_create('<div class="note-editor"/>'),airEditable=renderer_create(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" role="status" aria-live="polite"/>'].join("")),buttonGroup=renderer_create('<div class="note-btn-group">'),button=renderer_create('<button type="button" class="note-btn" role="button" tabindex="-1">',(function($node,options){options&&options.tooltip&&($node.attr({"aria-label":options.tooltip}),$node.data("_lite_tooltip",new TooltipUI($node,{title:options.tooltip,container:options.container}))),options.contents&&$node.html(options.contents),options&&options.data&&"dropdown"===options.data.toggle&&$node.data("_lite_dropdown",new DropdownUI($node,{container:options.container}))})),dropdown=renderer_create('<div class="note-dropdown-menu" role="list">',(function($node,options){var markup=$.isArray(options.items)?options.items.map((function(item){var value="string"==typeof item?item:item.value||"",content=options.template?options.template(item):item,$temp=$('<a class="note-dropdown-item" href="#" data-value="'+value+'" role="listitem" aria-label="'+item+'"></a>');return $temp.html(content).data("item",item),$temp})):options.items;$node.html(markup).attr({"aria-label":options.title}),$node.on("click","> .note-dropdown-item",(function(e){var $a=$(this),item=$a.data("item"),value=$a.data("value");item.click?item.click($a):options.itemClick&&options.itemClick(e,item,value)}))})),dropdownCheck=renderer_create('<div class="note-dropdown-menu note-check" role="list">',(function($node,options){var markup=$.isArray(options.items)?options.items.map((function(item){var value="string"==typeof item?item:item.value||"",content=options.template?options.template(item):item,$temp=$('<a class="note-dropdown-item" href="#" data-value="'+value+'" role="listitem" aria-label="'+item+'"></a>');return $temp.html([icon(options.checkClassName)," ",content]).data("item",item),$temp})):options.items;$node.html(markup).attr({"aria-label":options.title}),$node.on("click","> .note-dropdown-item",(function(e){var $a=$(this),item=$a.data("item"),value=$a.data("value");item.click?item.click($a):options.itemClick&&options.itemClick(e,item,value)}))})),palette=renderer_create('<div class="note-color-palette"/>',(function($node,options){for(var contents=[],row=0,rowSize=options.colors.length;row<rowSize;row++){for(var eventName=options.eventName,colors=options.colors[row],colorsName=options.colorsName[row],buttons=[],col=0,colSize=colors.length;col<colSize;col++){var color=colors[col],colorName=colorsName[col];buttons.push(['<button type="button" class="note-btn note-color-btn"','style="background-color:',color,'" ','data-event="',eventName,'" ','data-value="',color,'" ','title="',colorName,'" ','aria-label="',colorName,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}contents.push('<div class="note-color-row">'+buttons.join("")+"</div>")}$node.html(contents.join("")),$node.find(".note-color-btn").each((function(){$(this).data("_lite_tooltip",new TooltipUI($(this),{container:options.container}))}))})),dialog=renderer_create('<div class="note-modal" aria-hidden="false" tabindex="-1" role="dialog"/>',(function($node,options){options.fade&&$node.addClass("fade"),$node.attr({"aria-label":options.title}),$node.html(['  <div class="note-modal-content">',options.title?'    <div class="note-modal-header">      <button type="button" class="close" aria-label="Close" aria-hidden="true"><i class="note-icon-close"></i></button>      <h4 class="note-modal-title">'+options.title+"</h4>    </div>":"",'    <div class="note-modal-body">'+options.body+"</div>",options.footer?'    <div class="note-modal-footer">'+options.footer+"</div>":"","  </div>"].join("")),$node.data("modal",new ModalUI($node,options))})),popover=renderer_create(['<div class="note-popover bottom">','  <div class="note-popover-arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),(function($node,options){var direction=void 0!==options.direction?options.direction:"bottom";$node.addClass(direction).hide(),options.hideArrow&&$node.find(".note-popover-arrow").hide()})),checkbox=renderer_create('<div class="checkbox"></div>',(function($node,options){$node.html(["<label"+(options.id?' for="'+options.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(options.id?' id="'+options.id+'"':""),options.checked?" checked":"",' aria-checked="'+(options.checked?"true":"false")+'"/>',options.text?options.text:"","</label>"].join(""))})),icon=function(iconClassName,tagName){return"<"+(tagName=tagName||"i")+' class="'+iconClassName+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,dropdownButton:function(opt,callback){return buttonGroup([button({className:"dropdown-toggle",contents:opt.title+" "+icon("note-icon-caret"),tooltip:opt.tooltip,data:{toggle:"dropdown"}}),dropdown({className:opt.className,items:opt.items,template:opt.template,itemClick:opt.itemClick})],{callback:callback}).render()},dropdownButtonContents:function(contents,options){return contents+" "+icon(options.icons.caret,"span")},dropdownCheckButton:function(opt,callback){return buttonGroup([button({className:"dropdown-toggle",contents:opt.title+" "+icon("note-icon-caret"),tooltip:opt.tooltip,data:{toggle:"dropdown"}}),dropdownCheck({className:opt.className,checkClassName:opt.checkClassName,items:opt.items,template:opt.template,itemClick:opt.itemClick})],{callback:callback}).render()},paragraphDropdownButton:function(opt){return buttonGroup([button({className:"dropdown-toggle",contents:opt.title+" "+icon("note-icon-caret"),tooltip:opt.tooltip,data:{toggle:"dropdown"}}),dropdown([buttonGroup({className:"note-align",children:opt.items[0]}),buttonGroup({className:"note-list",children:opt.items[1]})])]).render()},tableDropdownButton:function(opt){return buttonGroup([button({className:"dropdown-toggle",contents:opt.title+" "+icon("note-icon-caret"),tooltip:opt.tooltip,data:{toggle:"dropdown"}}),dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function($node){$node.find(".note-dimension-picker-mousecatcher").css({width:opt.col+"em",height:opt.row+"em"}).mousedown(opt.itemClick).mousemove((function(e){!function(event,col,row){var posOffset,$picker=$(event.target.parentNode),$dimensionDisplay=$picker.next(),$catcher=$picker.find(".note-dimension-picker-mousecatcher"),$highlighted=$picker.find(".note-dimension-picker-highlighted"),$unhighlighted=$picker.find(".note-dimension-picker-unhighlighted");if(void 0===event.offsetX){var posCatcher=$(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-posCatcher.top}}else posOffset={x:event.offsetX,y:event.offsetY};var dim_c=Math.ceil(posOffset.x/18)||1,dim_r=Math.ceil(posOffset.y/18)||1;$highlighted.css({width:dim_c+"em",height:dim_r+"em"}),$catcher.data("value",dim_c+"x"+dim_r),dim_c>3&&dim_c<col&&$unhighlighted.css({width:dim_c+1+"em"}),dim_r>3&&dim_r<row&&$unhighlighted.css({height:dim_r+1+"em"}),$dimensionDisplay.html(dim_c+" x "+dim_r)}(e,opt.col,opt.row)}))}}).render()},colorDropdownButton:function(opt,type){return buttonGroup({className:"note-color",children:[button({className:"note-current-color-button",contents:opt.title,tooltip:opt.lang.color.recent,click:opt.currentClick,callback:function($button){var $recentColor=$button.find(".note-recent-color");"foreColor"!==type&&($recentColor.css("background-color","#FFFF00"),$button.attr("data-backColor","#FFFF00"))}}),button({className:"dropdown-toggle",contents:icon("note-icon-caret"),tooltip:opt.lang.color.more,data:{toggle:"dropdown"}}),dropdown({items:["<div>",'<div class="note-btn-group btn-background-color">','  <div class="note-palette-title">'+opt.lang.color.background+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="backColor" data-value="inherit">',opt.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>','  <div class="btn-sm">','    <input type="color" id="html5bcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="backColor" data-value="cpbackColor">',opt.lang.color.cpSelect,"    </button>","  </div>","</div>",'<div class="note-btn-group btn-foreground-color">','  <div class="note-palette-title">'+opt.lang.color.foreground+"</div>","  <div>",'<button type="button" class="note-color-reset note-btn note-btn-block"  data-event="removeFormat" data-value="foreColor">',opt.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>','  <div class="btn-sm">','    <input type="color" id="html5fcp" class="note-btn btn-default" value="#21104A" style="width:100%;" data-value="cp">','    <button type="button" class="note-color-reset btn" data-event="foreColor" data-value="cpforeColor">',opt.lang.color.cpSelect,"    </button>","  </div>","</div>","</div>"].join(""),callback:function($dropdown){$dropdown.find(".note-holder").each((function(){var $holder=$(this);$holder.append(palette({colors:opt.colors,eventName:$holder.data("event")}).render())})),"fore"===type?($dropdown.find(".btn-background-color").hide(),$dropdown.css({"min-width":"210px"})):"back"===type&&($dropdown.find(".btn-foreground-color").hide(),$dropdown.css({"min-width":"210px"}))},click:function(event){var $button=$(event.target),eventName=$button.data("event"),value=$button.data("value"),foreinput=document.getElementById("html5fcp").value,backinput=document.getElementById("html5bcp").value;if("cp"===value?event.stopPropagation():"cpbackColor"===value?value=backinput:"cpforeColor"===value&&(value=foreinput),eventName&&value){var key="backColor"===eventName?"background-color":"color",$color=$button.closest(".note-color").find(".note-recent-color"),$currentButton=$button.closest(".note-color").find(".note-current-color-button");$color.css(key,value),$currentButton.attr("data-"+eventName,value),"fore"===type?opt.itemClick("foreColor",value):"back"===type?opt.itemClick("backColor",value):opt.itemClick(eventName,value)}}})]}).render()},palette:palette,dialog:dialog,videoDialog:function(opt){var body='<div class="note-form-group"><label class="note-form-label">'+opt.lang.video.url+' <small class="text-muted">'+opt.lang.video.providers+'</small></label><input class="note-video-url note-input" type="text" /></div>',footer=['<button type="button" href="#" class="note-btn note-btn-primary note-video-btn disabled" disabled>',opt.lang.video.insert,"</button>"].join("");return dialog({title:opt.lang.video.insert,fade:opt.fade,body:body,footer:footer}).render()},imageDialog:function(opt){var body='<div class="note-form-group note-group-select-from-files"><label class="note-form-label">'+opt.lang.image.selectFromFiles+'</label><input class="note-note-image-input note-input" type="file" name="files" accept="image/*" multiple="multiple" />'+opt.imageLimitation+'</div><div class="note-form-group" style="overflow:auto;"><label class="note-form-label">'+opt.lang.image.url+'</label><input class="note-image-url note-input" type="text" /></div>',footer=['<button href="#" type="button" class="note-btn note-btn-primary note-btn-large note-image-btn disabled" disabled>',opt.lang.image.insert,"</button>"].join("");return dialog({title:opt.lang.image.insert,fade:opt.fade,body:body,footer:footer}).render()},linkDialog:function(opt){var body='<div class="note-form-group"><label class="note-form-label">'+opt.lang.link.textToDisplay+'</label><input class="note-link-text note-input" type="text" /></div><div class="note-form-group"><label class="note-form-label">'+opt.lang.link.url+'</label><input class="note-link-url note-input" type="text" value="http://" /></div>'+(opt.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+opt.lang.link.openInNewWindow+"</label></div>"),footer=['<button href="#" type="button" class="note-btn note-btn-primary note-link-btn disabled" disabled>',opt.lang.link.insert,"</button>"].join("");return dialog({className:"link-dialog",title:opt.lang.link.insert,fade:opt.fade,body:body,footer:footer}).render()},popover:popover,checkbox:checkbox,icon:icon,toggleBtn:function($btn,isEnable){$btn.toggleClass("disabled",!isEnable),$btn.attr("disabled",!isEnable)},toggleBtnActive:function($btn,isActive){$btn.toggleClass("active",isActive)},check:function($dom,value){$dom.find(".checked").removeClass("checked"),$dom.find('[data-value="'+value+'"]').addClass("checked")},onDialogShown:function($dialog,handler){$dialog.one("note.modal.show",handler)},onDialogHidden:function($dialog,handler){$dialog.one("note.modal.hide",handler)},showDialog:function($dialog){$dialog.data("modal").show()},hideDialog:function($dialog){$dialog.data("modal").hide()},getPopoverContent:function($popover){return $popover.find(".note-popover-content")},getDialogBody:function($dialog){return $dialog.find(".note-modal-body")},createLayout:function($note,options){var $editor=(options.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return $editor.insertAfter($note),{note:$note,editor:$editor,toolbar:$editor.find(".note-toolbar"),editingArea:$editor.find(".note-editing-area"),editable:$editor.find(".note-editable"),codable:$editor.find(".note-codable"),statusbar:$editor.find(".note-statusbar")}},removeLayout:function($note,layoutInfo){$note.html(layoutInfo.editable.html()),layoutInfo.editor.remove(),$note.off("summernote"),$note.show()}};$$1.summernote=$$1.summernote||{lang:{}},$$1.extend($$1.summernote.lang,{"en-US":{font:{bold:"Полужирный",italic:"Курсив",underline:"Подчёркнутый",clear:"Убрать стили шрифта",height:"Высота линии",name:"Шрифт",strikethrough:"Зачёркнутый",subscript:"Нижний индекс",superscript:"Верхний индекс",size:"Размер шрифта"},image:{image:"Картинка",insert:"Вставить картинку",resizeFull:"Восстановить размер",resizeHalf:"Уменьшить до 50%",resizeQuarter:"Уменьшить до 25%",floatLeft:"Расположить слева",floatRight:"Расположить справа",floatNone:"Расположение по-умолчанию",shapeRounded:"Форма: Закругленная",shapeCircle:"Форма: Круг",shapeThumbnail:"Форма: Миниатюра",shapeNone:"Форма: Нет",dragImageHere:"Перетащите сюда картинку",dropImage:"Перетащите картинку",selectFromFiles:"Выбрать из файлов",maximumFileSize:"Максимальный размер файла",maximumFileSizeError:"Превышен максимальный размер файла",url:"URL картинки",remove:"Удалить картинку",original:"Оригинал"},video:{video:"Видео",videoLink:"Ссылка на видео",insert:"Вставить видео",url:"URL видео",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion или Youku)"},link:{link:"Ссылка",insert:"Вставить ссылку",unlink:"Убрать ссылку",edit:"Редактировать",textToDisplay:"Отображаемый текст",url:"URL для перехода",openInNewWindow:"Открывать в новом окне"},table:{table:"Таблица",addRowAbove:"Добавить строку выше",addRowBelow:"Добавить строку ниже",addColLeft:"Добавить столбец слева",addColRight:"Добавить столбец справа",delRow:"Удалить строку",delCol:"Удалить столбец",delTable:"Удалить таблицу"},hr:{insert:"Вставить горизонтальную линию"},style:{style:"Стиль",p:"Нормальный",blockquote:"Цитата",pre:"Код",h1:"Заголовок 1",h2:"Заголовок 2",h3:"Заголовок 3",h4:"Заголовок 4",h5:"Заголовок 5",h6:"Заголовок 6"},lists:{unordered:"Маркированный список",ordered:"Нумерованный список"},options:{help:"Помощь",fullscreen:"На весь экран",codeview:"Исходный код"},paragraph:{paragraph:"Параграф",outdent:"Уменьшить отступ",indent:"Увеличить отступ",left:"Выровнять по левому краю",center:"Выровнять по центру",right:"Выровнять по правому краю",justify:"Растянуть по ширине"},color:{recent:"Последний цвет",more:"Еще цвета",background:"Цвет фона",foreground:"Цвет шрифта",transparent:"Прозрачный",setTransparent:"Сделать прозрачным",reset:"Сброс",resetToDefault:"Восстановить умолчания"},shortcut:{shortcuts:"Сочетания клавиш",close:"Закрыть",textFormatting:"Форматирование текста",action:"Действие",paragraphFormatting:"Форматирование параграфа",documentStyle:"Стиль документа",extraKeys:"Дополнительные комбинации"},help:{insertParagraph:"Новый параграф",undo:"Отменить последнюю команду",redo:"Повторить последнюю команду",tab:"Tab",untab:"Untab",bold:'Установить стиль "Жирный"',italic:'Установить стиль "Наклонный"',underline:'Установить стиль "Подчеркнутый"',strikethrough:'Установить стиль "Зачеркнутый"',removeFormat:"Сборсить стили",justifyLeft:"Выровнять по левому краю",justifyCenter:"Выровнять по центру",justifyRight:"Выровнять по правому краю",justifyFull:"Растянуть на всю ширину",insertUnorderedList:"Включить/отключить маркированный список",insertOrderedList:"Включить/отключить нумерованный список",outdent:"Убрать отступ в текущем параграфе",indent:"Вставить отступ в текущем параграфе",formatPara:"Форматировать текущий блок как параграф (тег P)",formatH1:"Форматировать текущий блок как H1",formatH2:"Форматировать текущий блок как H2",formatH3:"Форматировать текущий блок как H3",formatH4:"Форматировать текущий блок как H4",formatH5:"Форматировать текущий блок как H5",formatH6:"Форматировать текущий блок как H6",insertHorizontalRule:"Вставить горизонтальную черту","linkDialog.show":'Показать диалог "Ссылка"'},history:{undo:"Отменить",redo:"Повтор"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var isSupportAmd="function"==typeof define&&define.amd;var browserVersion,userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent);if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);matches&&(browserVersion=parseFloat(matches[1])),(matches=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(userAgent))&&(browserVersion=parseFloat(matches[1]))}var isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd)if("function"==typeof __webpack_require__)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(e){}else if("undefined"!=typeof require)if(void 0!==require.resolve)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(e){}else void 0!==require.specified&&(hasCodeMirror=require.specified("codemirror"));var isSupportTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,inputEventName=isMSIE||isEdge?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",env={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($$1.fn.jquery),isSupportAmd:isSupportAmd,isSupportTouch:isSupportTouch,hasCodeMirror:hasCodeMirror,isFontInstalled:function isFontInstalled(fontName){var testFontName="Comic Sans MS"===fontName?"Courier New":"Comic Sans MS",$tester=$$1("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),originalWidth=$tester.css("fontFamily",testFontName).width(),width=$tester.css("fontFamily",fontName+","+testFontName).width();return $tester.remove(),originalWidth!==width},isW3CRangeSupport:!!document.createRange,inputEventName:inputEventName};var idCounter=0;var func={eq:function eq(itemA){return function(itemB){return itemA===itemB}},eq2:function eq2(itemA,itemB){return itemA===itemB},peq2:function peq2(propName){return function(itemA,itemB){return itemA[propName]===itemB[propName]}},ok:function ok(){return!0},fail:function fail(){return!1},self:function self(a){return a},not:function not(f){return function(){return!f.apply(f,arguments)}},and:function and(fA,fB){return function(item){return fA(item)&&fB(item)}},invoke:function invoke(obj,method){return function(){return obj[method].apply(obj,arguments)}},uniqueId:function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id},rect2bnd:function rect2bnd(rect){var $document=$(document);return{top:rect.top+$document.scrollTop(),left:rect.left+$document.scrollLeft(),width:rect.right-rect.left,height:rect.bottom-rect.top}},invertObject:function invertObject(obj){var inverted={};for(var key in obj)obj.hasOwnProperty(key)&&(inverted[obj[key]]=key);return inverted},namespaceToCamel:function namespaceToCamel(namespace,prefix){return(prefix=prefix||"")+namespace.split(".").map((function(name){return name.substring(0,1).toUpperCase()+name.substring(1)})).join("")},debounce:function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout((function(){timeout=null,immediate||func.apply(context,args)}),wait),callNow&&func.apply(context,args)}}};function head(array){return array[0]}function last(array){return array[array.length-1]}function tail(array){return array.slice(1)}function indexOf(array,item){return $$1.inArray(item,array)}function contains(array,item){return-1!==indexOf(array,item)}var lists={head:head,last:last,initial:function initial(array){return array.slice(0,array.length-1)},tail:tail,prev:function prev(array,item){var idx=indexOf(array,item);return-1===idx?null:array[idx-1]},next:function next(array,item){var idx=indexOf(array,item);return-1===idx?null:array[idx+1]},find:function find(array,pred){for(var idx=0,len=array.length;idx<len;idx++){var item=array[idx];if(pred(item))return item}},contains:contains,all:function all(array,pred){for(var idx=0,len=array.length;idx<len;idx++)if(!pred(array[idx]))return!1;return!0},sum:function sum(array,fn){return fn=fn||func.self,array.reduce((function(memo,v){return memo+fn(v)}),0)},from:function from(collection){for(var result=[],length=collection.length,idx=-1;++idx<length;)result[idx]=collection[idx];return result},isEmpty:function isEmpty(array){return!array||!array.length},clusterBy:function clusterBy(array,fn){return array.length?tail(array).reduce((function(memo,v){var aLast=last(memo);return fn(last(aLast),v)?aLast[aLast.length]=v:memo[memo.length]=[v],memo}),[[head(array)]]):[]},compact:function compact(array){for(var aResult=[],idx=0,len=array.length;idx<len;idx++)array[idx]&&aResult.push(array[idx]);return aResult},unique:function unique(array){for(var results=[],idx=0,len=array.length;idx<len;idx++)contains(results,array[idx])||results.push(array[idx]);return results}},KEY_MAP={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},key={isEdit:function(keyCode){return lists.contains([KEY_MAP.BACKSPACE,KEY_MAP.TAB,KEY_MAP.ENTER,KEY_MAP.SPACE,KEY_MAP.DELETE],keyCode)},isMove:function(keyCode){return lists.contains([KEY_MAP.LEFT,KEY_MAP.UP,KEY_MAP.RIGHT,KEY_MAP.DOWN],keyCode)},nameFromCode:func.invertObject(KEY_MAP),code:KEY_MAP},NBSP_CHAR=String.fromCharCode(160);function isEditable(node){return node&&$$1(node).hasClass("note-editable")}function makePredByNodeName(nodeName){return nodeName=nodeName.toUpperCase(),function(node){return node&&node.nodeName.toUpperCase()===nodeName}}function isText(node){return node&&3===node.nodeType}function isVoid(node){return node&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^VIDEO|^EMBED/.test(node.nodeName.toUpperCase())}function isPara(node){return!isEditable(node)&&(node&&/^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase()))}var isPre=makePredByNodeName("PRE"),isLi=makePredByNodeName("LI");var isTable=makePredByNodeName("TABLE"),isData=makePredByNodeName("DATA");function isInline(node){return!(isBodyContainer(node)||isList(node)||isHr(node)||isPara(node)||isTable(node)||isBlockquote(node)||isData(node))}function isList(node){return node&&/^UL|^OL/.test(node.nodeName.toUpperCase())}var isHr=makePredByNodeName("HR");function isCell(node){return node&&/^TD|^TH/.test(node.nodeName.toUpperCase())}var isBlockquote=makePredByNodeName("BLOCKQUOTE");function isBodyContainer(node){return isCell(node)||isBlockquote(node)||isEditable(node)}var isAnchor=makePredByNodeName("A");var isBody=makePredByNodeName("BODY");var blankHTML=env.isMSIE&&env.browserVersion<11?"&nbsp;":"<br>";function nodeLength(node){return isText(node)?node.nodeValue.length:node?node.childNodes.length:0}function isEmpty$1(node){var len=nodeLength(node);return 0===len||(!isText(node)&&1===len&&node.innerHTML===blankHTML||!(!lists.all(node.childNodes,isText)||""!==node.innerHTML))}function paddingBlankHTML(node){isVoid(node)||nodeLength(node)||(node.innerHTML=blankHTML)}function ancestor(node,pred){for(;node;){if(pred(node))return node;if(isEditable(node))break;node=node.parentNode}return null}function listAncestor(node,pred){pred=pred||func.fail;var ancestors=[];return ancestor(node,(function(el){return isEditable(el)||ancestors.push(el),pred(el)})),ancestors}function listNext(node,pred){pred=pred||func.fail;for(var nodes=[];node&&!pred(node);)nodes.push(node),node=node.nextSibling;return nodes}function insertAfter(node,preceding){var next=preceding.nextSibling,parent=preceding.parentNode;return next?parent.insertBefore(node,next):parent.appendChild(node),node}function appendChildNodes(node,aChild){return $$1.each(aChild,(function(idx,child){node.appendChild(child)})),node}function isLeftEdgePoint(point){return 0===point.offset}function isRightEdgePoint(point){return point.offset===nodeLength(point.node)}function isEdgePoint(point){return isLeftEdgePoint(point)||isRightEdgePoint(point)}function isLeftEdgeOf(node,ancestor){for(;node&&node!==ancestor;){if(0!==position(node))return!1;node=node.parentNode}return!0}function isRightEdgeOf(node,ancestor){if(!ancestor)return!1;for(;node&&node!==ancestor;){if(position(node)!==nodeLength(node.parentNode)-1)return!1;node=node.parentNode}return!0}function position(node){for(var offset=0;node=node.previousSibling;)offset+=1;return offset}function hasChildren(node){return!!(node&&node.childNodes&&node.childNodes.length)}function prevPoint(point,isSkipInnerOffset){var node,offset;if(0===point.offset){if(isEditable(point.node))return null;node=point.node.parentNode,offset=position(point.node)}else hasChildren(point.node)?offset=nodeLength(node=point.node.childNodes[point.offset-1]):(node=point.node,offset=isSkipInnerOffset?0:point.offset-1);return{node:node,offset:offset}}function nextPoint(point,isSkipInnerOffset){var node,offset;if(nodeLength(point.node)===point.offset){if(isEditable(point.node))return null;node=point.node.parentNode,offset=position(point.node)+1}else hasChildren(point.node)?(node=point.node.childNodes[point.offset],offset=0):(node=point.node,offset=isSkipInnerOffset?nodeLength(point.node):point.offset+1);return{node:node,offset:offset}}function isSamePoint(pointA,pointB){return pointA.node===pointB.node&&pointA.offset===pointB.offset}function splitNode(point,options){var isSkipPaddingBlankHTML=options&&options.isSkipPaddingBlankHTML,isNotSplitEdgePoint=options&&options.isNotSplitEdgePoint,isDiscardEmptySplits=options&&options.isDiscardEmptySplits;if(isDiscardEmptySplits&&(isSkipPaddingBlankHTML=!0),isEdgePoint(point)&&(isText(point.node)||isNotSplitEdgePoint)){if(isLeftEdgePoint(point))return point.node;if(isRightEdgePoint(point))return point.node.nextSibling}if(isText(point.node))return point.node.splitText(point.offset);var childNode=point.node.childNodes[point.offset],clone=insertAfter(point.node.cloneNode(!1),point.node);return appendChildNodes(clone,listNext(childNode)),isSkipPaddingBlankHTML||(paddingBlankHTML(point.node),paddingBlankHTML(clone)),isDiscardEmptySplits&&(isEmpty$1(point.node)&&remove(point.node),isEmpty$1(clone))?(remove(clone),point.node.nextSibling):clone}function splitTree(root,point,options){var ancestors=listAncestor(point.node,func.eq(root));return ancestors.length?1===ancestors.length?splitNode(point,options):ancestors.reduce((function(node,parent){return node===point.node&&(node=splitNode(point,options)),splitNode({node:parent,offset:node?position(node):nodeLength(parent)},options)})):null}function create(nodeName){return document.createElement(nodeName)}function remove(node,isRemoveChild){if(node&&node.parentNode){if(node.removeNode)return node.removeNode(isRemoveChild);var parent=node.parentNode;if(!isRemoveChild){for(var nodes=[],i=0,len=node.childNodes.length;i<len;i++)nodes.push(node.childNodes[i]);for(i=0,len=nodes.length;i<len;i++)parent.insertBefore(nodes[i],node)}parent.removeChild(node)}}var isTextarea=makePredByNodeName("TEXTAREA");function value($node,stripLinebreaks){var val=isTextarea($node[0])?$node.val():$node.html();return stripLinebreaks?val.replace(/[\n\r]/g,""):val}var dom={NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:blankHTML,emptyPara:"<p>"+blankHTML+"</p>",makePredByNodeName:makePredByNodeName,isEditable:isEditable,isControlSizing:function isControlSizing(node){return node&&$$1(node).hasClass("note-control-sizing")},isText:isText,isElement:function isElement(node){return node&&1===node.nodeType},isVoid:isVoid,isPara:isPara,isPurePara:function isPurePara(node){return isPara(node)&&!isLi(node)},isHeading:function isHeading(node){return node&&/^H[1-7]/.test(node.nodeName.toUpperCase())},isInline:isInline,isBlock:func.not(isInline),isBodyInline:function isBodyInline(node){return isInline(node)&&!ancestor(node,isPara)},isBody:isBody,isParaInline:function isParaInline(node){return isInline(node)&&!!ancestor(node,isPara)},isPre:isPre,isList:isList,isTable:isTable,isData:isData,isCell:isCell,isBlockquote:isBlockquote,isBodyContainer:isBodyContainer,isAnchor:isAnchor,isDiv:makePredByNodeName("DIV"),isLi:isLi,isBR:makePredByNodeName("BR"),isSpan:makePredByNodeName("SPAN"),isB:makePredByNodeName("B"),isU:makePredByNodeName("U"),isS:makePredByNodeName("S"),isI:makePredByNodeName("I"),isImg:makePredByNodeName("IMG"),isTextarea:isTextarea,isEmpty:isEmpty$1,isEmptyAnchor:func.and(isAnchor,isEmpty$1),isClosestSibling:function isClosestSibling(nodeA,nodeB){return nodeA.nextSibling===nodeB||nodeA.previousSibling===nodeB},withClosestSiblings:function withClosestSiblings(node,pred){pred=pred||func.ok;var siblings=[];return node.previousSibling&&pred(node.previousSibling)&&siblings.push(node.previousSibling),siblings.push(node),node.nextSibling&&pred(node.nextSibling)&&siblings.push(node.nextSibling),siblings},nodeLength:nodeLength,isLeftEdgePoint:isLeftEdgePoint,isRightEdgePoint:isRightEdgePoint,isEdgePoint:isEdgePoint,isLeftEdgeOf:isLeftEdgeOf,isRightEdgeOf:isRightEdgeOf,isLeftEdgePointOf:function isLeftEdgePointOf(point,ancestor){return isLeftEdgePoint(point)&&isLeftEdgeOf(point.node,ancestor)},isRightEdgePointOf:function isRightEdgePointOf(point,ancestor){return isRightEdgePoint(point)&&isRightEdgeOf(point.node,ancestor)},prevPoint:prevPoint,nextPoint:nextPoint,isSamePoint:isSamePoint,isVisiblePoint:function isVisiblePoint(point){if(isText(point.node)||!hasChildren(point.node)||isEmpty$1(point.node))return!0;var leftNode=point.node.childNodes[point.offset-1],rightNode=point.node.childNodes[point.offset];return!(leftNode&&!isVoid(leftNode)||rightNode&&!isVoid(rightNode))},prevPointUntil:function prevPointUntil(point,pred){for(;point;){if(pred(point))return point;point=prevPoint(point)}return null},nextPointUntil:function nextPointUntil(point,pred){for(;point;){if(pred(point))return point;point=nextPoint(point)}return null},isCharPoint:function isCharPoint(point){if(!isText(point.node))return!1;var ch=point.node.nodeValue.charAt(point.offset-1);return ch&&" "!==ch&&ch!==NBSP_CHAR},walkPoint:function walkPoint(startPoint,endPoint,handler,isSkipInnerOffset){for(var point=startPoint;point&&(handler(point),!isSamePoint(point,endPoint));){point=nextPoint(point,isSkipInnerOffset&&startPoint.node!==point.node&&endPoint.node!==point.node)}},ancestor:ancestor,singleChildAncestor:function singleChildAncestor(node,pred){for(node=node.parentNode;node&&1===nodeLength(node);){if(pred(node))return node;if(isEditable(node))break;node=node.parentNode}return null},listAncestor:listAncestor,lastAncestor:function lastAncestor(node,pred){var ancestors=listAncestor(node);return lists.last(ancestors.filter(pred))},listNext:listNext,listPrev:function listPrev(node,pred){pred=pred||func.fail;for(var nodes=[];node&&!pred(node);)nodes.push(node),node=node.previousSibling;return nodes},listDescendant:function listDescendant(node,pred){var descendants=[];return pred=pred||func.ok,function fnWalk(current){node!==current&&pred(current)&&descendants.push(current);for(var idx=0,len=current.childNodes.length;idx<len;idx++)fnWalk(current.childNodes[idx])}(node),descendants},commonAncestor:function commonAncestor(nodeA,nodeB){for(var ancestors=listAncestor(nodeA),n=nodeB;n;n=n.parentNode)if($$1.inArray(n,ancestors)>-1)return n;return null},wrap:function wrap(node,wrapperName){var parent=node.parentNode,wrapper=$$1("<"+wrapperName+">")[0];return parent.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper},insertAfter:insertAfter,appendChildNodes:appendChildNodes,position:position,hasChildren:hasChildren,makeOffsetPath:function makeOffsetPath(ancestor,node){return listAncestor(node,func.eq(ancestor)).map(position).reverse()},fromOffsetPath:function fromOffsetPath(ancestor,offsets){for(var current=ancestor,i=0,len=offsets.length;i<len;i++)current=current.childNodes.length<=offsets[i]?current.childNodes[current.childNodes.length-1]:current.childNodes[offsets[i]];return current},splitTree:splitTree,splitPoint:function splitPoint(point,isInline){var splitRoot,container,pred=isInline?isPara:isBodyContainer,ancestors=listAncestor(point.node,pred),topAncestor=lists.last(ancestors)||point.node;pred(topAncestor)?(splitRoot=ancestors[ancestors.length-2],container=topAncestor):container=(splitRoot=topAncestor).parentNode;var pivot=splitRoot&&splitTree(splitRoot,point,{isSkipPaddingBlankHTML:isInline,isNotSplitEdgePoint:isInline});return pivot||container!==point.node||(pivot=point.node.childNodes[point.offset]),{rightNode:pivot,container:container}},create:create,createText:function createText(text){return document.createTextNode(text)},remove:remove,removeWhile:function removeWhile(node,pred){for(;node&&!isEditable(node)&&pred(node);){var parent=node.parentNode;remove(node),node=parent}},replace:function replace(node,nodeName){if(node.nodeName.toUpperCase()===nodeName.toUpperCase())return node;var newNode=create(nodeName);return node.style.cssText&&(newNode.style.cssText=node.style.cssText),appendChildNodes(newNode,lists.from(node.childNodes)),insertAfter(newNode,node),remove(node),newNode},html:function html($node,isNewlineOnBlock){var markup=value($node);if(isNewlineOnBlock){markup=markup.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,(function(match,endSlash,name){name=name.toUpperCase();var isEndOfInlineContainer=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name)&&!!endSlash,isBlockNode=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);return match+(isEndOfInlineContainer||isBlockNode?"\n":"")})),markup=$$1.trim(markup)}return markup},value:value,posFromPlaceholder:function posFromPlaceholder(placeholder){var $placeholder=$$1(placeholder),pos=$placeholder.offset(),height=$placeholder.outerHeight(!0);return{left:pos.left,top:pos.top+height}},attachEvents:function attachEvents($node,events){Object.keys(events).forEach((function(key){$node.on(key,events[key])}))},detachEvents:function detachEvents($node,events){Object.keys(events).forEach((function(key){$node.off(key,events[key])}))},isCustomStyleTag:function isCustomStyleTag(node){return node&&!isText(node)&&lists.contains(node.classList,"note-styletag")}};function textRangeToPoint(textRange,isStart){var offset,prevContainer,container=textRange.parentElement(),tester=document.body.createTextRange(),childNodes=lists.from(container.childNodes);for(offset=0;offset<childNodes.length;offset++)if(!dom.isText(childNodes[offset])){if(tester.moveToElementText(childNodes[offset]),tester.compareEndPoints("StartToStart",textRange)>=0)break;prevContainer=childNodes[offset]}if(0!==offset&&dom.isText(childNodes[offset-1])){var textRangeStart=document.body.createTextRange(),curTextNode=null;textRangeStart.moveToElementText(prevContainer||container),textRangeStart.collapse(!prevContainer),curTextNode=prevContainer?prevContainer.nextSibling:container.firstChild;var pointTester=textRange.duplicate();pointTester.setEndPoint("StartToStart",textRangeStart);for(var textCount=pointTester.text.replace(/[\r\n]/g,"").length;textCount>curTextNode.nodeValue.length&&curTextNode.nextSibling;)textCount-=curTextNode.nodeValue.length,curTextNode=curTextNode.nextSibling;curTextNode.nodeValue;isStart&&curTextNode.nextSibling&&dom.isText(curTextNode.nextSibling)&&textCount===curTextNode.nodeValue.length&&(textCount-=curTextNode.nodeValue.length,curTextNode=curTextNode.nextSibling),container=curTextNode,offset=textCount}return{cont:container,offset:offset}}function pointToTextRange(point){var textRangeInfo=function(container,offset){var node,isCollapseToStart;if(dom.isText(container)){var prevTextNodes=dom.listPrev(container,func.not(dom.isText)),prevContainer=lists.last(prevTextNodes).previousSibling;node=prevContainer||container.parentNode,offset+=lists.sum(lists.tail(prevTextNodes),dom.nodeLength),isCollapseToStart=!prevContainer}else{if(node=container.childNodes[offset]||container,dom.isText(node))return textRangeInfo(node,0);offset=0,isCollapseToStart=!1}return{node:node,collapseToStart:isCollapseToStart,offset:offset}},textRange=document.body.createTextRange(),info=textRangeInfo(point.node,point.offset);return textRange.moveToElementText(info.node),textRange.collapse(info.collapseToStart),textRange.moveStart("character",info.offset),textRange}var WrappedRange=function(){function WrappedRange(sc,so,ec,eo){this.sc=sc,this.so=so,this.ec=ec,this.eo=eo,this.isOnEditable=this.makeIsOn(dom.isEditable),this.isOnList=this.makeIsOn(dom.isList),this.isOnAnchor=this.makeIsOn(dom.isAnchor),this.isOnCell=this.makeIsOn(dom.isCell),this.isOnData=this.makeIsOn(dom.isData)}return WrappedRange.prototype.nativeRange=function(){if(env.isW3CRangeSupport){var w3cRange=document.createRange();return w3cRange.setStart(this.sc,this.so),w3cRange.setEnd(this.ec,this.eo),w3cRange}var textRange=pointToTextRange({node:this.sc,offset:this.so});return textRange.setEndPoint("EndToEnd",pointToTextRange({node:this.ec,offset:this.eo})),textRange},WrappedRange.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},WrappedRange.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},WrappedRange.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},WrappedRange.prototype.select=function(){var nativeRng=this.nativeRange();if(env.isW3CRangeSupport){var selection=document.getSelection();selection.rangeCount>0&&selection.removeAllRanges(),selection.addRange(nativeRng)}else nativeRng.select();return this},WrappedRange.prototype.scrollIntoView=function(container){var height=$$1(container).height();return container.scrollTop+height<this.sc.offsetTop&&(container.scrollTop+=Math.abs(container.scrollTop+height-this.sc.offsetTop)),this},WrappedRange.prototype.normalize=function(){var getVisiblePoint=function(point,isLeftToRight){if(dom.isVisiblePoint(point)&&!dom.isEdgePoint(point)||dom.isVisiblePoint(point)&&dom.isRightEdgePoint(point)&&!isLeftToRight||dom.isVisiblePoint(point)&&dom.isLeftEdgePoint(point)&&isLeftToRight||dom.isVisiblePoint(point)&&dom.isBlock(point.node)&&dom.isEmpty(point.node))return point;var block=dom.ancestor(point.node,dom.isBlock);if((dom.isLeftEdgePointOf(point,block)||dom.isVoid(dom.prevPoint(point).node))&&!isLeftToRight||(dom.isRightEdgePointOf(point,block)||dom.isVoid(dom.nextPoint(point).node))&&isLeftToRight){if(dom.isVisiblePoint(point))return point;isLeftToRight=!isLeftToRight}return(isLeftToRight?dom.nextPointUntil(dom.nextPoint(point),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(point),dom.isVisiblePoint))||point},endPoint=getVisiblePoint(this.getEndPoint(),!1),startPoint=this.isCollapsed()?endPoint:getVisiblePoint(this.getStartPoint(),!0);return new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset)},WrappedRange.prototype.nodes=function(pred,options){pred=pred||func.ok;var includeAncestor=options&&options.includeAncestor,fullyContains=options&&options.fullyContains,startPoint=this.getStartPoint(),endPoint=this.getEndPoint(),nodes=[],leftEdgeNodes=[];return dom.walkPoint(startPoint,endPoint,(function(point){var node;dom.isEditable(point.node)||(fullyContains?(dom.isLeftEdgePoint(point)&&leftEdgeNodes.push(point.node),dom.isRightEdgePoint(point)&&lists.contains(leftEdgeNodes,point.node)&&(node=point.node)):node=includeAncestor?dom.ancestor(point.node,pred):point.node,node&&pred(node)&&nodes.push(node))}),!0),lists.unique(nodes)},WrappedRange.prototype.commonAncestor=function(){return dom.commonAncestor(this.sc,this.ec)},WrappedRange.prototype.expand=function(pred){var startAncestor=dom.ancestor(this.sc,pred),endAncestor=dom.ancestor(this.ec,pred);if(!startAncestor&&!endAncestor)return new WrappedRange(this.sc,this.so,this.ec,this.eo);var boundaryPoints=this.getPoints();return startAncestor&&(boundaryPoints.sc=startAncestor,boundaryPoints.so=0),endAncestor&&(boundaryPoints.ec=endAncestor,boundaryPoints.eo=dom.nodeLength(endAncestor)),new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)},WrappedRange.prototype.collapse=function(isCollapseToStart){return isCollapseToStart?new WrappedRange(this.sc,this.so,this.sc,this.so):new WrappedRange(this.ec,this.eo,this.ec,this.eo)},WrappedRange.prototype.splitText=function(){var isSameContainer=this.sc===this.ec,boundaryPoints=this.getPoints();return dom.isText(this.ec)&&!dom.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),dom.isText(this.sc)&&!dom.isEdgePoint(this.getStartPoint())&&(boundaryPoints.sc=this.sc.splitText(this.so),boundaryPoints.so=0,isSameContainer&&(boundaryPoints.ec=boundaryPoints.sc,boundaryPoints.eo=this.eo-this.so)),new WrappedRange(boundaryPoints.sc,boundaryPoints.so,boundaryPoints.ec,boundaryPoints.eo)},WrappedRange.prototype.deleteContents=function(){if(this.isCollapsed())return this;var rng=this.splitText(),nodes=rng.nodes(null,{fullyContains:!0}),point=dom.prevPointUntil(rng.getStartPoint(),(function(point){return!lists.contains(nodes,point.node)})),emptyParents=[];return $$1.each(nodes,(function(idx,node){var parent=node.parentNode;point.node!==parent&&1===dom.nodeLength(parent)&&emptyParents.push(parent),dom.remove(node,!1)})),$$1.each(emptyParents,(function(idx,node){dom.remove(node,!1)})),new WrappedRange(point.node,point.offset,point.node,point.offset).normalize()},WrappedRange.prototype.makeIsOn=function(pred){return function(){var ancestor=dom.ancestor(this.sc,pred);return!!ancestor&&ancestor===dom.ancestor(this.ec,pred)}},WrappedRange.prototype.isLeftEdgeOf=function(pred){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var node=dom.ancestor(this.sc,pred);return node&&dom.isLeftEdgeOf(this.sc,node)},WrappedRange.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},WrappedRange.prototype.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(this.sc)&&dom.isEmpty(this.sc))return this.sc.innerHTML=dom.emptyPara,new WrappedRange(this.sc.firstChild,0,this.sc.firstChild,0);var topAncestor,rng=this.normalize();if(dom.isParaInline(this.sc)||dom.isPara(this.sc))return rng;if(dom.isInline(rng.sc)){var ancestors=dom.listAncestor(rng.sc,func.not(dom.isInline));topAncestor=lists.last(ancestors),dom.isInline(topAncestor)||(topAncestor=ancestors[ancestors.length-2]||rng.sc.childNodes[rng.so])}else topAncestor=rng.sc.childNodes[rng.so>0?rng.so-1:0];var inlineSiblings=dom.listPrev(topAncestor,dom.isParaInline).reverse();if((inlineSiblings=inlineSiblings.concat(dom.listNext(topAncestor.nextSibling,dom.isParaInline))).length){var para=dom.wrap(lists.head(inlineSiblings),"p");dom.appendChildNodes(para,lists.tail(inlineSiblings))}return this.normalize()},WrappedRange.prototype.insertNode=function(node){var rng=this.wrapBodyInlineWithPara().deleteContents(),info=dom.splitPoint(rng.getStartPoint(),dom.isInline(node));return info.rightNode?info.rightNode.parentNode.insertBefore(node,info.rightNode):info.container.appendChild(node),node},WrappedRange.prototype.pasteHTML=function(markup){var contentsContainer=$$1("<div></div>").html(markup)[0],childNodes=lists.from(contentsContainer.childNodes),rng=this.wrapBodyInlineWithPara().deleteContents();return rng.so>0&&(childNodes=childNodes.reverse()),childNodes=childNodes.map((function(childNode){return rng.insertNode(childNode)})),rng.so>0&&(childNodes=childNodes.reverse()),childNodes},WrappedRange.prototype.toString=function(){var nativeRng=this.nativeRange();return env.isW3CRangeSupport?nativeRng.toString():nativeRng.text},WrappedRange.prototype.getWordRange=function(findAfter){var endPoint=this.getEndPoint();if(!dom.isCharPoint(endPoint))return this;var startPoint=dom.prevPointUntil(endPoint,(function(point){return!dom.isCharPoint(point)}));return findAfter&&(endPoint=dom.nextPointUntil(endPoint,(function(point){return!dom.isCharPoint(point)}))),new WrappedRange(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset)},WrappedRange.prototype.bookmark=function(editable){return{s:{path:dom.makeOffsetPath(editable,this.sc),offset:this.so},e:{path:dom.makeOffsetPath(editable,this.ec),offset:this.eo}}},WrappedRange.prototype.paraBookmark=function(paras){return{s:{path:lists.tail(dom.makeOffsetPath(lists.head(paras),this.sc)),offset:this.so},e:{path:lists.tail(dom.makeOffsetPath(lists.last(paras),this.ec)),offset:this.eo}}},WrappedRange.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},WrappedRange}(),range={create:function(sc,so,ec,eo){if(4===arguments.length)return new WrappedRange(sc,so,ec,eo);if(2===arguments.length)return new WrappedRange(sc,so,ec=sc,eo=so);var wrappedRange=this.createFromSelection();return wrappedRange||1!==arguments.length?wrappedRange:(wrappedRange=this.createFromNode(arguments[0])).collapse(dom.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var sc,so,ec,eo;if(env.isW3CRangeSupport){var selection=document.getSelection();if(!selection||0===selection.rangeCount)return null;if(dom.isBody(selection.anchorNode))return null;var nativeRng=selection.getRangeAt(0);sc=nativeRng.startContainer,so=nativeRng.startOffset,ec=nativeRng.endContainer,eo=nativeRng.endOffset}else{var textRange=document.selection.createRange(),textRangeEnd=textRange.duplicate();textRangeEnd.collapse(!1);var textRangeStart=textRange;textRangeStart.collapse(!0);var startPoint=textRangeToPoint(textRangeStart,!0),endPoint=textRangeToPoint(textRangeEnd,!1);dom.isText(startPoint.node)&&dom.isLeftEdgePoint(startPoint)&&dom.isTextNode(endPoint.node)&&dom.isRightEdgePoint(endPoint)&&endPoint.node.nextSibling===startPoint.node&&(startPoint=endPoint),sc=startPoint.cont,so=startPoint.offset,ec=endPoint.cont,eo=endPoint.offset}return new WrappedRange(sc,so,ec,eo)},createFromNode:function(node){var sc=node,so=0,ec=node,eo=dom.nodeLength(ec);return dom.isVoid(sc)&&(so=dom.listPrev(sc).length-1,sc=sc.parentNode),dom.isBR(ec)?(eo=dom.listPrev(ec).length-1,ec=ec.parentNode):dom.isVoid(ec)&&(eo=dom.listPrev(ec).length,ec=ec.parentNode),this.create(sc,so,ec,eo)},createFromNodeBefore:function(node){return this.createFromNode(node).collapse(!0)},createFromNodeAfter:function(node){return this.createFromNode(node).collapse()},createFromBookmark:function(editable,bookmark){var sc=dom.fromOffsetPath(editable,bookmark.s.path),so=bookmark.s.offset,ec=dom.fromOffsetPath(editable,bookmark.e.path),eo=bookmark.e.offset;return new WrappedRange(sc,so,ec,eo)},createFromParaBookmark:function(bookmark,paras){var so=bookmark.s.offset,eo=bookmark.e.offset,sc=dom.fromOffsetPath(lists.head(paras),bookmark.s.path),ec=dom.fromOffsetPath(lists.last(paras),bookmark.e.path);return new WrappedRange(sc,so,ec,eo)}};var History=function(){function History($editable){this.stack=[],this.stackOffset=-1,this.$editable=$editable,this.editable=$editable[0]}return History.prototype.makeSnapshot=function(){var rng=range.create(this.editable);return{contents:this.$editable.html(),bookmark:rng?rng.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},History.prototype.applySnapshot=function(snapshot){null!==snapshot.contents&&this.$editable.html(snapshot.contents),null!==snapshot.bookmark&&range.createFromBookmark(this.editable,snapshot.bookmark).select()},History.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},History.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},History.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},History.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},History.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},History.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},History}(),Style=function(){function Style(){}return Style.prototype.jQueryCSS=function($obj,propertyNames){if(env.jqueryVersion<1.9){var result_1={};return $$1.each(propertyNames,(function(idx,propertyName){result_1[propertyName]=$obj.css(propertyName)})),result_1}return $obj.css(propertyNames)},Style.prototype.fromNode=function($node){var styleInfo=this.jQueryCSS($node,["font-family","font-size","text-align","list-style-type","line-height"])||{};return styleInfo["font-size"]=parseInt(styleInfo["font-size"],10),styleInfo},Style.prototype.stylePara=function(rng,styleInfo){$$1.each(rng.nodes(dom.isPara,{includeAncestor:!0}),(function(idx,para){$$1(para).css(styleInfo)}))},Style.prototype.styleNodes=function(rng,options){rng=rng.splitText();var nodeName=options&&options.nodeName||"SPAN",expandClosestSibling=!(!options||!options.expandClosestSibling),onlyPartialContains=!(!options||!options.onlyPartialContains);if(rng.isCollapsed())return[rng.insertNode(dom.create(nodeName))];var pred=dom.makePredByNodeName(nodeName),nodes=rng.nodes(dom.isText,{fullyContains:!0}).map((function(text){return dom.singleChildAncestor(text,pred)||dom.wrap(text,nodeName)}));if(expandClosestSibling){if(onlyPartialContains){var nodesInRange_1=rng.nodes();pred=func.and(pred,(function(node){return lists.contains(nodesInRange_1,node)}))}return nodes.map((function(node){var siblings=dom.withClosestSiblings(node,pred),head=lists.head(siblings),tails=lists.tail(siblings);return $$1.each(tails,(function(idx,elem){dom.appendChildNodes(head,elem.childNodes),dom.remove(elem)})),lists.head(siblings)}))}return nodes},Style.prototype.current=function(rng){var $cont=$$1(dom.isElement(rng.sc)?rng.sc:rng.sc.parentNode),styleInfo=this.fromNode($cont);try{styleInfo=$$1.extend(styleInfo,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||styleInfo["font-family"]})}catch(e){}if(rng.isOnList()){var isUnordered=$$1.inArray(styleInfo["list-style-type"],["circle","disc","disc-leading-zero","square"])>-1;styleInfo["list-style"]=isUnordered?"unordered":"ordered"}else styleInfo["list-style"]="none";var para=dom.ancestor(rng.sc,dom.isPara);if(para&&para.style["line-height"])styleInfo["line-height"]=para.style.lineHeight;else{var lineHeight=parseInt(styleInfo["line-height"],10)/parseInt(styleInfo["font-size"],10);styleInfo["line-height"]=lineHeight.toFixed(1)}return styleInfo.anchor=rng.isOnAnchor()&&dom.ancestor(rng.sc,dom.isAnchor),styleInfo.ancestors=dom.listAncestor(rng.sc,dom.isEditable),styleInfo.range=rng,styleInfo},Style}(),Bullet=function(){function Bullet(){}return Bullet.prototype.insertOrderedList=function(editable){this.toggleList("OL",editable)},Bullet.prototype.insertUnorderedList=function(editable){this.toggleList("UL",editable)},Bullet.prototype.indent=function(editable){var _this=this,rng=range.create(editable).wrapBodyInlineWithPara(),paras=rng.nodes(dom.isPara,{includeAncestor:!0}),clustereds=lists.clusterBy(paras,func.peq2("parentNode"));$$1.each(clustereds,(function(idx,paras){var head=lists.head(paras);if(dom.isLi(head)){var previousList_1=_this.findList(head.previousSibling);previousList_1?paras.map((function(para){return previousList_1.appendChild(para)})):(_this.wrapList(paras,head.parentNode.nodeName),paras.map((function(para){return para.parentNode})).map((function(para){return _this.appendToPrevious(para)})))}else $$1.each(paras,(function(idx,para){$$1(para).css("marginLeft",(function(idx,val){return(parseInt(val,10)||0)+25}))}))})),rng.select()},Bullet.prototype.outdent=function(editable){var _this=this,rng=range.create(editable).wrapBodyInlineWithPara(),paras=rng.nodes(dom.isPara,{includeAncestor:!0}),clustereds=lists.clusterBy(paras,func.peq2("parentNode"));$$1.each(clustereds,(function(idx,paras){var head=lists.head(paras);dom.isLi(head)?_this.releaseList([paras]):$$1.each(paras,(function(idx,para){$$1(para).css("marginLeft",(function(idx,val){return(val=parseInt(val,10)||0)>25?val-25:""}))}))})),rng.select()},Bullet.prototype.toggleList=function(listName,editable){var _this=this,rng=range.create(editable).wrapBodyInlineWithPara(),paras=rng.nodes(dom.isPara,{includeAncestor:!0}),bookmark=rng.paraBookmark(paras),clustereds=lists.clusterBy(paras,func.peq2("parentNode"));if(lists.find(paras,dom.isPurePara)){var wrappedParas_1=[];$$1.each(clustereds,(function(idx,paras){wrappedParas_1=wrappedParas_1.concat(_this.wrapList(paras,listName))})),paras=wrappedParas_1}else{var diffLists=rng.nodes(dom.isList,{includeAncestor:!0}).filter((function(listNode){return!$$1.nodeName(listNode,listName)}));diffLists.length?$$1.each(diffLists,(function(idx,listNode){dom.replace(listNode,listName)})):paras=this.releaseList(clustereds,!0)}range.createFromParaBookmark(bookmark,paras).select()},Bullet.prototype.wrapList=function(paras,listName){var head=lists.head(paras),last=lists.last(paras),prevList=dom.isList(head.previousSibling)&&head.previousSibling,nextList=dom.isList(last.nextSibling)&&last.nextSibling,listNode=prevList||dom.insertAfter(dom.create(listName||"UL"),last);return paras=paras.map((function(para){return dom.isPurePara(para)?dom.replace(para,"LI"):para})),dom.appendChildNodes(listNode,paras),nextList&&(dom.appendChildNodes(listNode,lists.from(nextList.childNodes)),dom.remove(nextList)),paras},Bullet.prototype.releaseList=function(clustereds,isEscapseToBody){var _this=this,releasedParas=[];return $$1.each(clustereds,(function(idx,paras){var head=lists.head(paras),last=lists.last(paras),headList=isEscapseToBody?dom.lastAncestor(head,dom.isList):head.parentNode,parentItem=headList.parentNode;if("LI"===headList.parentNode.nodeName)paras.map((function(para){var newList=_this.findNextSiblings(para);parentItem.nextSibling?parentItem.parentNode.insertBefore(para,parentItem.nextSibling):parentItem.parentNode.appendChild(para),newList.length&&(_this.wrapList(newList,headList.nodeName),para.appendChild(newList[0].parentNode))})),0===headList.children.length&&parentItem.removeChild(headList),0===parentItem.childNodes.length&&parentItem.parentNode.removeChild(parentItem);else{var lastList=headList.childNodes.length>1?dom.splitTree(headList,{node:last.parentNode,offset:dom.position(last)+1},{isSkipPaddingBlankHTML:!0}):null,middleList=dom.splitTree(headList,{node:head.parentNode,offset:dom.position(head)},{isSkipPaddingBlankHTML:!0});paras=isEscapseToBody?dom.listDescendant(middleList,dom.isLi):lists.from(middleList.childNodes).filter(dom.isLi),!isEscapseToBody&&dom.isList(headList.parentNode)||(paras=paras.map((function(para){return dom.replace(para,"P")}))),$$1.each(lists.from(paras).reverse(),(function(idx,para){dom.insertAfter(para,headList)}));var rootLists=lists.compact([headList,middleList,lastList]);$$1.each(rootLists,(function(idx,rootList){var listNodes=[rootList].concat(dom.listDescendant(rootList,dom.isList));$$1.each(listNodes.reverse(),(function(idx,listNode){dom.nodeLength(listNode)||dom.remove(listNode,!0)}))}))}releasedParas=releasedParas.concat(paras)})),releasedParas},Bullet.prototype.appendToPrevious=function(node){return node.previousSibling?dom.appendChildNodes(node.previousSibling,[node]):this.wrapList([node],"LI")},Bullet.prototype.findList=function(node){return node?lists.find(node.children,(function(child){return["OL","UL"].indexOf(child.nodeName)>-1})):null},Bullet.prototype.findNextSiblings=function(node){for(var siblings=[];node.nextSibling;)siblings.push(node.nextSibling),node=node.nextSibling;return siblings},Bullet}(),Typing=function(){function Typing(context){this.bullet=new Bullet,this.options=context.options}return Typing.prototype.insertTab=function(rng,tabsize){var tab=dom.createText(new Array(tabsize+1).join(dom.NBSP_CHAR));(rng=rng.deleteContents()).insertNode(tab,!0),(rng=range.create(tab,tabsize)).select()},Typing.prototype.insertParagraph=function(editable,rng){rng=(rng=(rng=rng||range.create(editable)).deleteContents()).wrapBodyInlineWithPara();var nextPara,splitRoot=dom.ancestor(rng.sc,dom.isPara);if(splitRoot){if(dom.isEmpty(splitRoot)&&dom.isLi(splitRoot))return void this.bullet.toggleList(splitRoot.parentNode.nodeName);var blockquote=null;if(1===this.options.blockquoteBreakingLevel?blockquote=dom.ancestor(splitRoot,dom.isBlockquote):2===this.options.blockquoteBreakingLevel&&(blockquote=dom.lastAncestor(splitRoot,dom.isBlockquote)),blockquote){nextPara=$$1(dom.emptyPara)[0],dom.isRightEdgePoint(rng.getStartPoint())&&dom.isBR(rng.sc.nextSibling)&&$$1(rng.sc.nextSibling).remove();var split=dom.splitTree(blockquote,rng.getStartPoint(),{isDiscardEmptySplits:!0});split?split.parentNode.insertBefore(nextPara,split):dom.insertAfter(nextPara,blockquote)}else{nextPara=dom.splitTree(splitRoot,rng.getStartPoint());var emptyAnchors=dom.listDescendant(splitRoot,dom.isEmptyAnchor);emptyAnchors=emptyAnchors.concat(dom.listDescendant(nextPara,dom.isEmptyAnchor)),$$1.each(emptyAnchors,(function(idx,anchor){dom.remove(anchor)})),(dom.isHeading(nextPara)||dom.isPre(nextPara)||dom.isCustomStyleTag(nextPara))&&dom.isEmpty(nextPara)&&(nextPara=dom.replace(nextPara,"p"))}}else{var next=rng.sc.childNodes[rng.so];nextPara=$$1(dom.emptyPara)[0],next?rng.sc.insertBefore(nextPara,next):rng.sc.appendChild(nextPara)}range.create(nextPara,0).normalize().select().scrollIntoView(editable)},Typing}(),TableResultAction=function(startPoint,where,action,domTable){var _startPoint={colPos:0,rowPos:0},_virtualTable=[],_actionCellList=[];function setVirtualTablePosition(rowIndex,cellIndex,baseRow,baseCell,isRowSpan,isColSpan,isVirtualCell){var objPosition={baseRow:baseRow,baseCell:baseCell,isRowSpan:isRowSpan,isColSpan:isColSpan,isVirtual:isVirtualCell};_virtualTable[rowIndex]||(_virtualTable[rowIndex]=[]),_virtualTable[rowIndex][cellIndex]=objPosition}function getActionCell(virtualTableCellObj,resultAction,virtualRowPosition,virtualColPosition){return{baseCell:virtualTableCellObj.baseCell,action:resultAction,virtualTable:{rowIndex:virtualRowPosition,cellIndex:virtualColPosition}}}function recoverCellIndex(rowIndex,cellIndex){if(!_virtualTable[rowIndex])return cellIndex;if(!_virtualTable[rowIndex][cellIndex])return cellIndex;for(var newCellIndex=cellIndex;_virtualTable[rowIndex][newCellIndex];)if(newCellIndex++,!_virtualTable[rowIndex][newCellIndex])return newCellIndex}function addCellInfoToVirtual(row,cell){var cellIndex=recoverCellIndex(row.rowIndex,cell.cellIndex),cellHasColspan=cell.colSpan>1,cellHasRowspan=cell.rowSpan>1,isThisSelectedCell=row.rowIndex===_startPoint.rowPos&&cell.cellIndex===_startPoint.colPos;setVirtualTablePosition(row.rowIndex,cellIndex,row,cell,cellHasRowspan,cellHasColspan,!1);var rowspanNumber=cell.attributes.rowSpan?parseInt(cell.attributes.rowSpan.value,10):0;if(rowspanNumber>1)for(var rp=1;rp<rowspanNumber;rp++){var rowspanIndex=row.rowIndex+rp;adjustStartPoint(rowspanIndex,cellIndex,cell,isThisSelectedCell),setVirtualTablePosition(rowspanIndex,cellIndex,row,cell,!0,cellHasColspan,!0)}var colspanNumber=cell.attributes.colSpan?parseInt(cell.attributes.colSpan.value,10):0;if(colspanNumber>1)for(var cp=1;cp<colspanNumber;cp++){var cellspanIndex=recoverCellIndex(row.rowIndex,cellIndex+cp);adjustStartPoint(row.rowIndex,cellspanIndex,cell,isThisSelectedCell),setVirtualTablePosition(row.rowIndex,cellspanIndex,row,cell,cellHasRowspan,!0,!0)}}function adjustStartPoint(rowIndex,cellIndex,cell,isSelectedCell){rowIndex===_startPoint.rowPos&&_startPoint.colPos>=cell.cellIndex&&cell.cellIndex<=cellIndex&&!isSelectedCell&&_startPoint.colPos++}function getDeleteResultActionToCell(cell){switch(where){case TableResultAction.where.Column:if(cell.isColSpan)return TableResultAction.resultAction.SubtractSpanCount;break;case TableResultAction.where.Row:if(!cell.isVirtual&&cell.isRowSpan)return TableResultAction.resultAction.AddCell;if(cell.isRowSpan)return TableResultAction.resultAction.SubtractSpanCount}return TableResultAction.resultAction.RemoveCell}function getAddResultActionToCell(cell){switch(where){case TableResultAction.where.Column:if(cell.isColSpan)return TableResultAction.resultAction.SumSpanCount;if(cell.isRowSpan&&cell.isVirtual)return TableResultAction.resultAction.Ignore;break;case TableResultAction.where.Row:if(cell.isRowSpan)return TableResultAction.resultAction.SumSpanCount;if(cell.isColSpan&&cell.isVirtual)return TableResultAction.resultAction.Ignore}return TableResultAction.resultAction.AddCell}this.getActionList=function(){for(var fixedRow=where===TableResultAction.where.Row?_startPoint.rowPos:-1,fixedCol=where===TableResultAction.where.Column?_startPoint.colPos:-1,actualPosition=0,canContinue=!0;canContinue;){var rowPosition=fixedRow>=0?fixedRow:actualPosition,colPosition=fixedCol>=0?fixedCol:actualPosition,row=_virtualTable[rowPosition];if(!row)return canContinue=!1,_actionCellList;var cell=row[colPosition];if(!cell)return canContinue=!1,_actionCellList;var resultAction=TableResultAction.resultAction.Ignore;switch(action){case TableResultAction.requestAction.Add:resultAction=getAddResultActionToCell(cell);break;case TableResultAction.requestAction.Delete:resultAction=getDeleteResultActionToCell(cell)}_actionCellList.push(getActionCell(cell,resultAction,rowPosition,colPosition)),actualPosition++}return _actionCellList},function init(){!function setStartPoint(){startPoint&&startPoint.tagName&&("td"===startPoint.tagName.toLowerCase()||"th"===startPoint.tagName.toLowerCase())?(_startPoint.colPos=startPoint.cellIndex,startPoint.parentElement&&startPoint.parentElement.tagName&&"tr"===startPoint.parentElement.tagName.toLowerCase()?_startPoint.rowPos=startPoint.parentElement.rowIndex:console.error("Impossible to identify start Row point.",startPoint)):console.error("Impossible to identify start Cell point.",startPoint)}(),function createVirtualTable(){for(var rows=domTable.rows,rowIndex=0;rowIndex<rows.length;rowIndex++)for(var cells=rows[rowIndex].cells,cellIndex=0;cellIndex<cells.length;cellIndex++)addCellInfoToVirtual(rows[rowIndex],cells[cellIndex])}()}()};TableResultAction.where={Row:0,Column:1},TableResultAction.requestAction={Add:0,Delete:1},TableResultAction.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var CodeMirror,Table=function(){function Table(){}return Table.prototype.tab=function(rng,isShift){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell),table=dom.ancestor(cell,dom.isTable),cells=dom.listDescendant(table,dom.isCell),nextCell=lists[isShift?"prev":"next"](cells,cell);nextCell&&range.create(nextCell,0).select()},Table.prototype.addRow=function(rng,position){for(var cell=dom.ancestor(rng.commonAncestor(),dom.isCell),currentTr=$$1(cell).closest("tr"),trAttributes=this.recoverAttributes(currentTr),html=$$1("<tr"+trAttributes+"></tr>"),actions=new TableResultAction(cell,TableResultAction.where.Row,TableResultAction.requestAction.Add,$$1(currentTr).closest("table")[0]).getActionList(),idCell=0;idCell<actions.length;idCell++){var currentCell=actions[idCell],tdAttributes=this.recoverAttributes(currentCell.baseCell);switch(currentCell.action){case TableResultAction.resultAction.AddCell:html.append("<td"+tdAttributes+">"+dom.blank+"</td>");break;case TableResultAction.resultAction.SumSpanCount:if("top"===position)if((currentCell.baseCell.parent?currentCell.baseCell.closest("tr").rowIndex:0)<=currentTr[0].rowIndex){var newTd=$$1("<div></div>").append($$1("<td"+tdAttributes+">"+dom.blank+"</td>").removeAttr("rowspan")).html();html.append(newTd);break}var rowspanNumber=parseInt(currentCell.baseCell.rowSpan,10);rowspanNumber++,currentCell.baseCell.setAttribute("rowSpan",rowspanNumber)}}if("top"===position)currentTr.before(html);else{if(cell.rowSpan>1){var lastTrIndex=currentTr[0].rowIndex+(cell.rowSpan-2);return void $$1($$1(currentTr).parent().find("tr")[lastTrIndex]).after($$1(html))}currentTr.after(html)}},Table.prototype.addCol=function(rng,position){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell),row=$$1(cell).closest("tr");$$1(row).siblings().push(row);for(var actions=new TableResultAction(cell,TableResultAction.where.Column,TableResultAction.requestAction.Add,$$1(row).closest("table")[0]).getActionList(),actionIndex=0;actionIndex<actions.length;actionIndex++){var currentCell=actions[actionIndex],tdAttributes=this.recoverAttributes(currentCell.baseCell);switch(currentCell.action){case TableResultAction.resultAction.AddCell:"right"===position?$$1(currentCell.baseCell).after("<td"+tdAttributes+">"+dom.blank+"</td>"):$$1(currentCell.baseCell).before("<td"+tdAttributes+">"+dom.blank+"</td>");break;case TableResultAction.resultAction.SumSpanCount:if("right"===position){var colspanNumber=parseInt(currentCell.baseCell.colSpan,10);colspanNumber++,currentCell.baseCell.setAttribute("colSpan",colspanNumber)}else $$1(currentCell.baseCell).before("<td"+tdAttributes+">"+dom.blank+"</td>")}}},Table.prototype.recoverAttributes=function(el){var resultStr="";if(!el)return resultStr;for(var attrList=el.attributes||[],i=0;i<attrList.length;i++)"id"!==attrList[i].name.toLowerCase()&&attrList[i].specified&&(resultStr+=" "+attrList[i].name+"='"+attrList[i].value+"'");return resultStr},Table.prototype.deleteRow=function(rng){for(var cell=dom.ancestor(rng.commonAncestor(),dom.isCell),row=$$1(cell).closest("tr"),cellPos=row.children("td, th").index($$1(cell)),rowPos=row[0].rowIndex,actions=new TableResultAction(cell,TableResultAction.where.Row,TableResultAction.requestAction.Delete,$$1(row).closest("table")[0]).getActionList(),actionIndex=0;actionIndex<actions.length;actionIndex++)if(actions[actionIndex]){var baseCell=actions[actionIndex].baseCell,virtualPosition=actions[actionIndex].virtualTable,hasRowspan=baseCell.rowSpan&&baseCell.rowSpan>1,rowspanNumber=hasRowspan?parseInt(baseCell.rowSpan,10):0;switch(actions[actionIndex].action){case TableResultAction.resultAction.Ignore:continue;case TableResultAction.resultAction.AddCell:var nextRow=row.next("tr")[0];if(!nextRow)continue;var cloneRow=row[0].cells[cellPos];hasRowspan&&(rowspanNumber>2?(rowspanNumber--,nextRow.insertBefore(cloneRow,nextRow.cells[cellPos]),nextRow.cells[cellPos].setAttribute("rowSpan",rowspanNumber),nextRow.cells[cellPos].innerHTML=""):2===rowspanNumber&&(nextRow.insertBefore(cloneRow,nextRow.cells[cellPos]),nextRow.cells[cellPos].removeAttribute("rowSpan"),nextRow.cells[cellPos].innerHTML=""));continue;case TableResultAction.resultAction.SubtractSpanCount:hasRowspan&&(rowspanNumber>2?(rowspanNumber--,baseCell.setAttribute("rowSpan",rowspanNumber),virtualPosition.rowIndex!==rowPos&&baseCell.cellIndex===cellPos&&(baseCell.innerHTML="")):2===rowspanNumber&&(baseCell.removeAttribute("rowSpan"),virtualPosition.rowIndex!==rowPos&&baseCell.cellIndex===cellPos&&(baseCell.innerHTML="")));continue;case TableResultAction.resultAction.RemoveCell:continue}}row.remove()},Table.prototype.deleteCol=function(rng){for(var cell=dom.ancestor(rng.commonAncestor(),dom.isCell),row=$$1(cell).closest("tr"),cellPos=row.children("td, th").index($$1(cell)),actions=new TableResultAction(cell,TableResultAction.where.Column,TableResultAction.requestAction.Delete,$$1(row).closest("table")[0]).getActionList(),actionIndex=0;actionIndex<actions.length;actionIndex++)if(actions[actionIndex])switch(actions[actionIndex].action){case TableResultAction.resultAction.Ignore:continue;case TableResultAction.resultAction.SubtractSpanCount:var baseCell=actions[actionIndex].baseCell;if(baseCell.colSpan&&baseCell.colSpan>1){var colspanNumber=baseCell.colSpan?parseInt(baseCell.colSpan,10):0;colspanNumber>2?(colspanNumber--,baseCell.setAttribute("colSpan",colspanNumber),baseCell.cellIndex===cellPos&&(baseCell.innerHTML="")):2===colspanNumber&&(baseCell.removeAttribute("colSpan"),baseCell.cellIndex===cellPos&&(baseCell.innerHTML=""))}continue;case TableResultAction.resultAction.RemoveCell:dom.remove(actions[actionIndex].baseCell,!0);continue}},Table.prototype.createTable=function(colCount,rowCount,options){for(var tdHTML,tds=[],idxCol=0;idxCol<colCount;idxCol++)tds.push("<td>"+dom.blank+"</td>");tdHTML=tds.join("");for(var trHTML,trs=[],idxRow=0;idxRow<rowCount;idxRow++)trs.push("<tr>"+tdHTML+"</tr>");trHTML=trs.join("");var $table=$$1("<table>"+trHTML+"</table>");return options&&options.tableClassName&&$table.addClass(options.tableClassName),$table[0]},Table.prototype.deleteTable=function(rng){var cell=dom.ancestor(rng.commonAncestor(),dom.isCell);$$1(cell).closest("table").remove()},Table}(),Editor=function(){function Editor(context){var _this=this;this.context=context,this.$note=context.layoutInfo.note,this.$editor=context.layoutInfo.editor,this.$editable=context.layoutInfo.editable,this.options=context.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new Style,this.table=new Table,this.typing=new Typing(context),this.bullet=new Bullet,this.history=new History(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var commands=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],idx=0,len=commands.length;idx<len;idx++)this[commands[idx]]=function(sCmd){return function(value){_this.beforeCommand(),document.execCommand(sCmd,!1,value),_this.afterCommand(!0)}}(commands[idx]),this.context.memo("help."+commands[idx],this.lang.help[commands[idx]]);this.fontName=this.wrapCommand((function(value){return _this.fontStyling("font-family","'"+value+"'")})),this.fontSize=this.wrapCommand((function(value){return _this.fontStyling("font-size",value+"px")}));for(idx=1;idx<=6;idx++)this["formatH"+idx]=function(idx){return function(){_this.formatBlock("H"+idx)}}(idx),this.context.memo("help.formatH"+idx,this.lang.help["formatH"+idx]);this.insertParagraph=this.wrapCommand((function(){_this.typing.insertParagraph(_this.editable)})),this.insertOrderedList=this.wrapCommand((function(){_this.bullet.insertOrderedList(_this.editable)})),this.insertUnorderedList=this.wrapCommand((function(){_this.bullet.insertUnorderedList(_this.editable)})),this.indent=this.wrapCommand((function(){_this.bullet.indent(_this.editable)})),this.outdent=this.wrapCommand((function(){_this.bullet.outdent(_this.editable)})),this.insertNode=this.wrapCommand((function(node){_this.isLimited($$1(node).text().length)||(_this.createRange().insertNode(node),range.createFromNodeAfter(node).select())})),this.insertText=this.wrapCommand((function(text){if(!_this.isLimited(text.length)){var textNode=_this.createRange().insertNode(dom.createText(text));range.create(textNode,dom.nodeLength(textNode)).select()}})),this.pasteHTML=this.wrapCommand((function(markup){if(!_this.isLimited(markup.length)){var contents=_this.createRange().pasteHTML(markup);range.createFromNodeAfter(lists.last(contents)).select()}})),this.formatBlock=this.wrapCommand((function(tagName,$target){var onApplyCustomStyle=_this.options.callbacks.onApplyCustomStyle;onApplyCustomStyle?onApplyCustomStyle.call(_this,$target,_this.context,_this.onFormatBlock):_this.onFormatBlock(tagName,$target)})),this.insertHorizontalRule=this.wrapCommand((function(){var hrNode=_this.createRange().insertNode(dom.create("HR"));hrNode.nextSibling&&range.create(hrNode.nextSibling,0).normalize().select()})),this.lineHeight=this.wrapCommand((function(value){_this.style.stylePara(_this.createRange(),{lineHeight:value})})),this.createLink=this.wrapCommand((function(linkInfo){var linkUrl=linkInfo.url,linkText=linkInfo.text,isNewWindow=linkInfo.isNewWindow,rng=linkInfo.range||_this.createRange(),additionalTextLength=linkText.length-rng.toString().length;if(!(additionalTextLength>0&&_this.isLimited(additionalTextLength))){var isTextChanged=rng.toString()!==linkText;"string"==typeof linkUrl&&(linkUrl=linkUrl.trim()),_this.options.onCreateLink?linkUrl=_this.options.onCreateLink(linkUrl):/^\.?\/(.*)/.test(linkUrl)||(linkUrl=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(linkUrl)?linkUrl:"http://"+linkUrl);var anchors=[];if(isTextChanged){var anchor=(rng=rng.deleteContents()).insertNode($$1("<A>"+linkText+"</A>")[0]);anchors.push(anchor)}else anchors=_this.style.styleNodes(rng,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$$1.each(anchors,(function(idx,anchor){$$1(anchor).attr("href",linkUrl),isNewWindow?$$1(anchor).attr("target","_blank"):$$1(anchor).removeAttr("target")}));var startPoint=range.createFromNodeBefore(lists.head(anchors)).getStartPoint(),endPoint=range.createFromNodeAfter(lists.last(anchors)).getEndPoint();range.create(startPoint.node,startPoint.offset,endPoint.node,endPoint.offset).select()}})),this.color=this.wrapCommand((function(colorInfo){var foreColor=colorInfo.foreColor,backColor=colorInfo.backColor;foreColor&&document.execCommand("foreColor",!1,foreColor),backColor&&document.execCommand("backColor",!1,backColor)})),this.foreColor=this.wrapCommand((function(colorInfo){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,colorInfo)})),this.insertTable=this.wrapCommand((function(dim){var dimension=dim.split("x");_this.createRange().deleteContents().insertNode(_this.table.createTable(dimension[0],dimension[1],_this.options))})),this.removeMedia=this.wrapCommand((function(){var $target=$$1(_this.restoreTarget()).parent();$target.parent("figure").length?$target.parent("figure").remove():$target=$$1(_this.restoreTarget()).detach(),_this.context.triggerEvent("media.delete",$target,_this.$editable)})),this.floatMe=this.wrapCommand((function(value){var $target=$$1(_this.restoreTarget());$target.toggleClass("note-float-left","left"===value),$target.toggleClass("note-float-right","right"===value),$target.css("float",value)})),this.resize=this.wrapCommand((function(value){$$1(_this.restoreTarget()).css({width:100*value+"%",height:""})}))}return Editor.prototype.initialize=function(){var _this=this;this.$editable.on("keydown",(function(event){if(event.keyCode===key.code.ENTER&&_this.context.triggerEvent("enter",event),_this.context.triggerEvent("keydown",event),event.isDefaultPrevented()||(_this.options.shortcuts?_this.handleKeyMap(event):_this.preventDefaultEditableShortCuts(event)),_this.isLimited(1,event))return!1})).on("keyup",(function(event){_this.context.triggerEvent("keyup",event)})).on("focus",(function(event){_this.context.triggerEvent("focus",event)})).on("blur",(function(event){_this.context.triggerEvent("blur",event)})).on("mousedown",(function(event){_this.context.triggerEvent("mousedown",event)})).on("mouseup",(function(event){_this.context.triggerEvent("mouseup",event)})).on("scroll",(function(event){_this.context.triggerEvent("scroll",event)})).on("paste",(function(event){_this.context.triggerEvent("paste",event)})),this.$editable.html(dom.html(this.$note)||dom.emptyPara),this.$editable.on(env.inputEventName,func.debounce((function(){_this.context.triggerEvent("change",_this.$editable.html())}),10)),this.$editor.on("focusin",(function(event){_this.context.triggerEvent("focusin",event)})).on("focusout",(function(event){_this.context.triggerEvent("focusout",event)})),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()},Editor.prototype.destroy=function(){this.$editable.off()},Editor.prototype.handleKeyMap=function(event){var keyMap=this.options.keyMap[env.isMac?"mac":"pc"],keys=[];event.metaKey&&keys.push("CMD"),event.ctrlKey&&!event.altKey&&keys.push("CTRL"),event.shiftKey&&keys.push("SHIFT");var keyName=key.nameFromCode[event.keyCode];keyName&&keys.push(keyName);var eventName=keyMap[keys.join("+")];eventName?!1!==this.context.invoke(eventName)&&event.preventDefault():key.isEdit(event.keyCode)&&this.afterCommand()},Editor.prototype.preventDefaultEditableShortCuts=function(event){(event.ctrlKey||event.metaKey)&&lists.contains([66,73,85],event.keyCode)&&event.preventDefault()},Editor.prototype.isLimited=function(pad,event){return pad=pad||0,(void 0===event||!(key.isMove(event.keyCode)||event.ctrlKey||event.metaKey||lists.contains([key.code.BACKSPACE,key.code.DELETE],event.keyCode)))&&(this.options.maxTextLength>0&&this.$editable.text().length+pad>=this.options.maxTextLength)},Editor.prototype.createRange=function(){return this.focus(),range.create(this.editable)},Editor.prototype.saveRange=function(thenCollapse){this.lastRange=this.createRange(),thenCollapse&&this.lastRange.collapse().select()},Editor.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},Editor.prototype.saveTarget=function(node){this.$editable.data("target",node)},Editor.prototype.clearTarget=function(){this.$editable.removeData("target")},Editor.prototype.restoreTarget=function(){return this.$editable.data("target")},Editor.prototype.currentStyle=function(){var rng=range.create();return rng&&(rng=rng.normalize()),rng?this.style.current(rng):this.style.fromNode(this.$editable)},Editor.prototype.styleFromNode=function($node){return this.style.fromNode($node)},Editor.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html())},Editor.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html())},Editor.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html())},Editor.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},Editor.prototype.afterCommand=function(isPreventTrigger){this.normalizeContent(),this.history.recordUndo(),isPreventTrigger||this.context.triggerEvent("change",this.$editable.html())},Editor.prototype.tab=function(){var rng=this.createRange();if(rng.isCollapsed()&&rng.isOnCell())this.table.tab(rng);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(rng,this.options.tabSize),this.afterCommand())}},Editor.prototype.untab=function(){var rng=this.createRange();if(rng.isCollapsed()&&rng.isOnCell())this.table.tab(rng,!0);else if(0===this.options.tabSize)return!1},Editor.prototype.wrapCommand=function(fn){return function(){this.beforeCommand(),fn.apply(this,arguments),this.afterCommand()}},Editor.prototype.insertImage=function(src,param){var _this=this;return function createImage(url){return $$1.Deferred((function(deferred){var $img=$$1("<img>");$img.one("load",(function(){$img.off("error abort"),deferred.resolve($img)})).one("error abort",(function(){$img.off("load").detach(),deferred.reject($img)})).css({display:"none"}).appendTo(document.body).attr("src",url)})).promise()}(src).then((function($image){_this.beforeCommand(),"function"==typeof param?param($image):("string"==typeof param&&$image.attr("data-filename",param),$image.css("width",Math.min(_this.$editable.width(),$image.width()))),$image.show(),range.create(_this.editable).insertNode($image[0]),range.createFromNodeAfter($image[0]).select(),_this.afterCommand()})).fail((function(e){_this.context.triggerEvent("image.upload.error",e)}))},Editor.prototype.insertImagesAsDataURL=function(files){var _this=this;$$1.each(files,(function(idx,file){var filename=file.name;_this.options.maximumImageFileSize&&_this.options.maximumImageFileSize<file.size?_this.context.triggerEvent("image.upload.error",_this.lang.image.maximumFileSizeError):function readFileAsDataURL(file){return $$1.Deferred((function(deferred){$$1.extend(new FileReader,{onload:function(e){var dataURL=e.target.result;deferred.resolve(dataURL)},onerror:function(err){deferred.reject(err)}}).readAsDataURL(file)})).promise()}(file).then((function(dataURL){return _this.insertImage(dataURL,filename)})).fail((function(){_this.context.triggerEvent("image.upload.error")}))}))},Editor.prototype.getSelectedText=function(){var rng=this.createRange();return rng.isOnAnchor()&&(rng=range.createFromNode(dom.ancestor(rng.sc,dom.isAnchor))),rng.toString()},Editor.prototype.onFormatBlock=function(tagName,$target){if(tagName=env.isMSIE?"<"+tagName+">":tagName,document.execCommand("FormatBlock",!1,tagName),$target&&$target.length){var className=$target[0].className||"";if(className){var currentRange=this.createRange();$$1([currentRange.sc,currentRange.ec]).closest(tagName).addClass(className)}}},Editor.prototype.formatPara=function(){this.formatBlock("P")},Editor.prototype.fontStyling=function(target,value){var rng=this.createRange();if(rng){var spans=this.style.styleNodes(rng);if($$1(spans).css(target,value),rng.isCollapsed()){var firstSpan=lists.head(spans);firstSpan&&!dom.nodeLength(firstSpan)&&(firstSpan.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(firstSpan.firstChild).select(),this.$editable.data("bogus",firstSpan))}}},Editor.prototype.unlink=function(){var rng=this.createRange();if(rng.isOnAnchor()){var anchor=dom.ancestor(rng.sc,dom.isAnchor);(rng=range.createFromNode(anchor)).select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},Editor.prototype.getLinkInfo=function(){var rng=this.createRange().expand(dom.isAnchor),$anchor=$$1(lists.head(rng.nodes(dom.isAnchor))),linkInfo={range:rng,text:rng.toString(),url:$anchor.length?$anchor.attr("href"):""};return $anchor.length&&(linkInfo.isNewWindow="_blank"===$anchor.attr("target")),linkInfo},Editor.prototype.addRow=function(position){var rng=this.createRange(this.$editable);rng.isCollapsed()&&rng.isOnCell()&&(this.beforeCommand(),this.table.addRow(rng,position),this.afterCommand())},Editor.prototype.addCol=function(position){var rng=this.createRange(this.$editable);rng.isCollapsed()&&rng.isOnCell()&&(this.beforeCommand(),this.table.addCol(rng,position),this.afterCommand())},Editor.prototype.deleteRow=function(){var rng=this.createRange(this.$editable);rng.isCollapsed()&&rng.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(rng),this.afterCommand())},Editor.prototype.deleteCol=function(){var rng=this.createRange(this.$editable);rng.isCollapsed()&&rng.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(rng),this.afterCommand())},Editor.prototype.deleteTable=function(){var rng=this.createRange(this.$editable);rng.isCollapsed()&&rng.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(rng),this.afterCommand())},Editor.prototype.resizeTo=function(pos,$target,bKeepRatio){var imageSize;if(bKeepRatio){var newRatio=pos.y/pos.x,ratio=$target.data("ratio");imageSize={width:ratio>newRatio?pos.x:pos.y/ratio,height:ratio>newRatio?pos.x*ratio:pos.y}}else imageSize={width:pos.x,height:pos.y};$target.css(imageSize)},Editor.prototype.hasFocus=function(){return this.$editable.is(":focus")},Editor.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},Editor.prototype.isEmpty=function(){return dom.isEmpty(this.$editable[0])||dom.emptyPara===this.$editable.html()},Editor.prototype.empty=function(){this.context.invoke("code",dom.emptyPara)},Editor.prototype.normalizeContent=function(){this.$editable[0].normalize()},Editor}(),Clipboard=function(){function Clipboard(context){this.context=context,this.$editable=context.layoutInfo.editable}return Clipboard.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},Clipboard.prototype.pasteByEvent=function(event){var clipboardData=event.originalEvent.clipboardData;if(clipboardData&&clipboardData.items&&clipboardData.items.length){var item=clipboardData.items.length>1?clipboardData.items[1]:lists.head(clipboardData.items);"file"===item.kind&&-1!==item.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[item.getAsFile()]),this.context.invoke("editor.afterCommand")}},Clipboard}(),Dropzone=function(){function Dropzone(context){this.context=context,this.$eventListener=$$1(document),this.$editor=context.layoutInfo.editor,this.$editable=context.layoutInfo.editable,this.options=context.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=$$1(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return Dropzone.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(e){e.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},Dropzone.prototype.attachDragAndDropEvent=function(){var _this=this,collection=$$1(),$dropzoneMessage=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(e){var isCodeview=_this.context.invoke("codeview.isActivated"),hasEditorSize=_this.$editor.width()>0&&_this.$editor.height()>0;isCodeview||collection.length||!hasEditorSize||(_this.$editor.addClass("dragover"),_this.$dropzone.width(_this.$editor.width()),_this.$dropzone.height(_this.$editor.height()),$dropzoneMessage.text(_this.lang.image.dragImageHere)),collection=collection.add(e.target)},this.documentEventHandlers.onDragleave=function(e){(collection=collection.not(e.target)).length||_this.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){collection=$$1(),_this.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",(function(){_this.$dropzone.addClass("hover"),$dropzoneMessage.text(_this.lang.image.dropImage)})).on("dragleave",(function(){_this.$dropzone.removeClass("hover"),$dropzoneMessage.text(_this.lang.image.dragImageHere)})),this.$dropzone.on("drop",(function(event){var dataTransfer=event.originalEvent.dataTransfer;event.preventDefault(),dataTransfer&&dataTransfer.files&&dataTransfer.files.length?(_this.$editable.focus(),_this.context.invoke("editor.insertImagesOrCallback",dataTransfer.files)):$$1.each(dataTransfer.types,(function(idx,type){var content=dataTransfer.getData(type);type.toLowerCase().indexOf("text")>-1?_this.context.invoke("editor.pasteHTML",content):$$1(content).each((function(idx,item){_this.context.invoke("editor.insertNode",item)}))}))})).on("dragover",!1)},Dropzone.prototype.destroy=function(){var _this=this;Object.keys(this.documentEventHandlers).forEach((function(key){_this.$eventListener.off(key.substr(2).toLowerCase(),_this.documentEventHandlers[key])})),this.documentEventHandlers={}},Dropzone}();env.hasCodeMirror&&(env.isSupportAmd?require(["codemirror"],(function(cm){CodeMirror=cm})):CodeMirror=window.CodeMirror);var CodeView=function(){function CodeView(context){this.context=context,this.$editor=context.layoutInfo.editor,this.$editable=context.layoutInfo.editable,this.$codable=context.layoutInfo.codable,this.options=context.options}return CodeView.prototype.sync=function(){this.isActivated()&&env.hasCodeMirror&&this.$codable.data("cmEditor").save()},CodeView.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},CodeView.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},CodeView.prototype.activate=function(){var _this=this;if(this.$codable.val(dom.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),env.hasCodeMirror){var cmEditor_1=CodeMirror.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var server_1=new CodeMirror.TernServer(this.options.codemirror.tern);cmEditor_1.ternServer=server_1,cmEditor_1.on("cursorActivity",(function(cm){server_1.updateArgHints(cm)}))}cmEditor_1.on("blur",(function(event){_this.context.triggerEvent("blur.codeview",cmEditor_1.getValue(),event)})),cmEditor_1.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",cmEditor_1)}else this.$codable.on("blur",(function(event){_this.context.triggerEvent("blur.codeview",_this.$codable.val(),event)}))},CodeView.prototype.deactivate=function(){if(env.hasCodeMirror){var cmEditor=this.$codable.data("cmEditor");this.$codable.val(cmEditor.getValue()),cmEditor.toTextArea()}var value=dom.value(this.$codable,this.options.prettifyHtml)||dom.emptyPara,isChange=this.$editable.html()!==value;this.$editable.html(value),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),isChange&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},CodeView.prototype.destroy=function(){this.isActivated()&&this.deactivate()},CodeView}(),Statusbar=function(){function Statusbar(context){this.$document=$$1(document),this.$statusbar=context.layoutInfo.statusbar,this.$editable=context.layoutInfo.editable,this.options=context.options}return Statusbar.prototype.initialize=function(){var _this=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",(function(event){event.preventDefault(),event.stopPropagation();var editableTop=_this.$editable.offset().top-_this.$document.scrollTop(),onMouseMove=function(event){var height=event.clientY-(editableTop+24);height=_this.options.minheight>0?Math.max(height,_this.options.minheight):height,height=_this.options.maxHeight>0?Math.min(height,_this.options.maxHeight):height,_this.$editable.height(height)};_this.$document.on("mousemove",onMouseMove).one("mouseup",(function(){_this.$document.off("mousemove",onMouseMove)}))}))},Statusbar.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},Statusbar}(),Fullscreen=function(){function Fullscreen(context){var _this=this;this.context=context,this.$editor=context.layoutInfo.editor,this.$toolbar=context.layoutInfo.toolbar,this.$editable=context.layoutInfo.editable,this.$codable=context.layoutInfo.codable,this.$window=$$1(window),this.$scrollbar=$$1("html, body"),this.onResize=function(){_this.resizeTo({h:_this.$window.height()-_this.$toolbar.outerHeight()})}}return Fullscreen.prototype.resizeTo=function(size){this.$editable.css("height",size.h),this.$codable.css("height",size.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,size.h)},Fullscreen.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},Fullscreen.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},Fullscreen}(),Handle=function(){function Handle(context){var _this=this;this.context=context,this.$document=$$1(document),this.$editingArea=context.layoutInfo.editingArea,this.options=context.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(we,e){_this.update(e.target)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){_this.update()},"summernote.disable":function(){_this.hide()},"summernote.codeview.toggled":function(){_this.update()}}}return Handle.prototype.initialize=function(){var _this=this;this.$handle=$$1(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",(function(event){if(dom.isControlSizing(event.target)){event.preventDefault(),event.stopPropagation();var $target_1=_this.$handle.find(".note-control-selection").data("target"),posStart_1=$target_1.offset(),scrollTop_1=_this.$document.scrollTop(),onMouseMove_1=function(event){_this.context.invoke("editor.resizeTo",{x:event.clientX-posStart_1.left,y:event.clientY-(posStart_1.top-scrollTop_1)},$target_1,!event.shiftKey),_this.update($target_1[0])};_this.$document.on("mousemove",onMouseMove_1).one("mouseup",(function(e){e.preventDefault(),_this.$document.off("mousemove",onMouseMove_1),_this.context.invoke("editor.afterCommand")})),$target_1.data("ratio")||$target_1.data("ratio",$target_1.height()/$target_1.width())}})),this.$handle.on("wheel",(function(e){e.preventDefault(),_this.update()}))},Handle.prototype.destroy=function(){this.$handle.remove()},Handle.prototype.update=function(target){if(this.context.isDisabled())return!1;var isImage=dom.isImg(target),$selection=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",target),isImage){var $image=$$1(target),position=$image.position(),pos={left:position.left+parseInt($image.css("marginLeft"),10),top:position.top+parseInt($image.css("marginTop"),10)},imageSize={w:$image.outerWidth(!1),h:$image.outerHeight(!1)};$selection.css({display:"block",left:pos.left,top:pos.top,width:imageSize.w,height:imageSize.h}).data("target",$image);var origImageObj=new Image;origImageObj.src=$image.attr("src");var sizingText=imageSize.w+"x"+imageSize.h+" ("+this.lang.image.original+": "+origImageObj.width+"x"+origImageObj.height+")";$selection.find(".note-control-selection-info").text(sizingText),this.context.invoke("editor.saveTarget",target)}else this.hide();return isImage},Handle.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},Handle}(),linkPattern=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,AutoLink=function(){function AutoLink(context){var _this=this;this.context=context,this.events={"summernote.keyup":function(we,e){e.isDefaultPrevented()||_this.handleKeyup(e)},"summernote.keydown":function(we,e){_this.handleKeydown(e)}}}return AutoLink.prototype.initialize=function(){this.lastWordRange=null},AutoLink.prototype.destroy=function(){this.lastWordRange=null},AutoLink.prototype.replace=function(){if(this.lastWordRange){var keyword=this.lastWordRange.toString(),match=keyword.match(linkPattern);if(match&&(match[1]||match[2])){var link=match[1]?keyword:"http://"+keyword,node=$$1("<a />").html(keyword).attr("href",link)[0];this.context.options.linkTargetBlank&&$$1(node).attr("target","_blank"),this.lastWordRange.insertNode(node),this.lastWordRange=null,this.context.invoke("editor.focus")}}},AutoLink.prototype.handleKeydown=function(e){if(lists.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){var wordRange=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=wordRange}},AutoLink.prototype.handleKeyup=function(e){lists.contains([key.code.ENTER,key.code.SPACE],e.keyCode)&&this.replace()},AutoLink}(),AutoSync=function(){function AutoSync(context){var _this=this;this.$note=context.layoutInfo.note,this.events={"summernote.change":function(){_this.$note.val(context.invoke("code"))}}}return AutoSync.prototype.shouldInitialize=function(){return dom.isTextarea(this.$note[0])},AutoSync}(),Placeholder=function(){function Placeholder(context){var _this=this;this.context=context,this.$editingArea=context.layoutInfo.editingArea,this.options=context.options,this.events={"summernote.init summernote.change":function(){_this.update()},"summernote.codeview.toggled":function(){_this.update()}}}return Placeholder.prototype.shouldInitialize=function(){return!!this.options.placeholder},Placeholder.prototype.initialize=function(){var _this=this;this.$placeholder=$$1('<div class="note-placeholder">'),this.$placeholder.on("click",(function(){_this.context.invoke("focus")})).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},Placeholder.prototype.destroy=function(){this.$placeholder.remove()},Placeholder.prototype.update=function(){var isShow=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(isShow)},Placeholder}(),Buttons=function(){function Buttons(context){this.ui=$$1.summernote.ui,this.context=context,this.$toolbar=context.layoutInfo.toolbar,this.options=context.options,this.lang=this.options.langInfo,this.invertedKeyMap=func.invertObject(this.options.keyMap[env.isMac?"mac":"pc"])}return Buttons.prototype.representShortcut=function(editorMethod){var shortcut=this.invertedKeyMap[editorMethod];return this.options.shortcuts&&shortcut?(env.isMac&&(shortcut=shortcut.replace("CMD","⌘").replace("SHIFT","⇧"))," ("+(shortcut=shortcut.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},Buttons.prototype.button=function(o){return!this.options.tooltip&&o.tooltip&&delete o.tooltip,o.container=this.options.container,this.ui.button(o)},Buttons.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},Buttons.prototype.destroy=function(){delete this.fontInstalledMap},Buttons.prototype.isFontInstalled=function(name){return this.fontInstalledMap.hasOwnProperty(name)||(this.fontInstalledMap[name]=env.isFontInstalled(name)||lists.contains(this.options.fontNamesIgnoreCheck,name)),this.fontInstalledMap[name]},Buttons.prototype.isFontDeservedToAdd=function(name){return""!==(name=name.toLowerCase())&&this.isFontInstalled(name)&&-1===$$1.inArray(name,["sans-serif","serif","monospace","cursive","fantasy"])},Buttons.prototype.colorPalette=function(className,tooltip,backColor,foreColor){var _this=this;return this.ui.buttonGroup({className:"note-color "+className,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:tooltip,click:function(e){var $button=$$1(e.currentTarget);backColor&&foreColor?_this.context.invoke("editor.color",{backColor:$button.attr("data-backColor"),foreColor:$button.attr("data-foreColor")}):backColor?_this.context.invoke("editor.color",{backColor:$button.attr("data-backColor")}):foreColor&&_this.context.invoke("editor.color",{foreColor:$button.attr("data-foreColor")})},callback:function($button){var $recentColor=$button.find(".note-recent-color");backColor&&($recentColor.css("background-color","#FFFF00"),$button.attr("data-backColor","#FFFF00")),foreColor||$recentColor.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(backColor?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker'+generateCode("lLllnnnLl")+'" class="note-btn note-color-select-btn" value="#FFFF00" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(foreColor?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker'+generateCode("lLllnnnLl")+'" class="note-btn note-color-select-btn" value="#000000" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function($dropdown){$dropdown.find(".note-holder").each((function(idx,item){var $holder=$$1(item);$holder.append(_this.ui.palette({colors:_this.options.colors,colorsName:_this.options.colorsName,eventName:$holder.data("event"),container:_this.options.container,tooltip:_this.options.tooltip}).render())}));var customColors=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];$dropdown.find(".note-holder-custom").each((function(idx,item){var $holder=$$1(item);$holder.append(_this.ui.palette({colors:customColors,colorsName:customColors,eventName:$holder.data("event"),container:_this.options.container,tooltip:_this.options.tooltip}).render())})),$dropdown.find("input[type=color]").each((function(idx,item){$$1(item).change((function(){var $chip=$dropdown.find("#"+$$1(this).data("event")).find(".note-color-btn").first(),color=this.value.toUpperCase();$chip.css("background-color",color).attr("aria-label",color).attr("data-value",color).attr("data-original-title",color),$chip.click()}))}))},click:function(event){event.stopPropagation();var $parent=$$1("."+className),$button=$$1(event.target),eventName=$button.data("event"),value=$button.attr("data-value");if("openPalette"===eventName){var $picker=$parent.find("#"+value),$palette=$$1($parent.find("#"+$picker.data("event")).find(".note-color-row")[0]),$chip=$palette.find(".note-color-btn").last().detach(),color=$picker.val();$chip.css("background-color",color).attr("aria-label",color).attr("data-value",color).attr("data-original-title",color),$palette.prepend($chip),$picker.click()}else if(lists.contains(["backColor","foreColor"],eventName)){var key="backColor"===eventName?"background-color":"color",$color=$button.closest(".note-color").find(".note-recent-color"),$currentButton=$button.closest(".note-color").find(".note-current-color-button");$color.css(key,value),$currentButton.attr("data-"+eventName,value),_this.context.invoke("editor."+eventName,value)}}})]}).render()},Buttons.prototype.addToolbarButtons=function(){var _this=this;this.context.memo("button.style",(function(){return _this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.magic),_this.options),tooltip:_this.lang.style.style,data:{toggle:"dropdown"}}),_this.ui.dropdown({className:"dropdown-style",items:_this.options.styleTags,title:_this.lang.style.style,template:function(item){"string"==typeof item&&(item={tag:item,title:_this.lang.style.hasOwnProperty(item)?_this.lang.style[item]:item});var tag=item.tag,title=item.title;return"<"+tag+(item.style?' style="'+item.style+'" ':"")+(item.className?' class="'+item.className+'"':"")+">"+title+"</"+tag+">"},click:_this.context.createInvokeHandler("editor.formatBlock")})]).render()}));for(var _loop_1=function(styleIdx,styleLen){var item=this_1.options.styleTags[styleIdx];this_1.context.memo("button.style."+item,(function(){return _this.button({className:"note-btn-style-"+item,contents:'<div data-value="'+item+'">'+item.toUpperCase()+"</div>",tooltip:_this.lang.style[item],click:_this.context.createInvokeHandler("editor.formatBlock")}).render()}))},this_1=this,styleIdx=0,styleLen=this.options.styleTags.length;styleIdx<styleLen;styleIdx++)_loop_1(styleIdx);this.context.memo("button.bold",(function(){return _this.button({className:"note-btn-bold",contents:_this.ui.icon(_this.options.icons.bold),tooltip:_this.lang.font.bold+_this.representShortcut("bold"),click:_this.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()})),this.context.memo("button.italic",(function(){return _this.button({className:"note-btn-italic",contents:_this.ui.icon(_this.options.icons.italic),tooltip:_this.lang.font.italic+_this.representShortcut("italic"),click:_this.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()})),this.context.memo("button.underline",(function(){return _this.button({className:"note-btn-underline",contents:_this.ui.icon(_this.options.icons.underline),tooltip:_this.lang.font.underline+_this.representShortcut("underline"),click:_this.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()})),this.context.memo("button.clear",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.eraser),tooltip:_this.lang.font.clear+_this.representShortcut("removeFormat"),click:_this.context.createInvokeHandler("editor.removeFormat")}).render()})),this.context.memo("button.strikethrough",(function(){return _this.button({className:"note-btn-strikethrough",contents:_this.ui.icon(_this.options.icons.strikethrough),tooltip:_this.lang.font.strikethrough+_this.representShortcut("strikethrough"),click:_this.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()})),this.context.memo("button.superscript",(function(){return _this.button({className:"note-btn-superscript",contents:_this.ui.icon(_this.options.icons.superscript),tooltip:_this.lang.font.superscript,click:_this.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()})),this.context.memo("button.subscript",(function(){return _this.button({className:"note-btn-subscript",contents:_this.ui.icon(_this.options.icons.subscript),tooltip:_this.lang.font.subscript,click:_this.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()})),this.context.memo("button.fontname",(function(){var styleInfo=_this.context.invoke("editor.currentStyle");return $$1.each(styleInfo["font-family"].split(","),(function(idx,fontname){fontname=fontname.trim().replace(/['"]+/g,""),_this.isFontDeservedToAdd(fontname)&&-1===$$1.inArray(fontname,_this.options.fontNames)&&_this.options.fontNames.push(fontname)})),_this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents('<span class="note-current-fontname"/>',_this.options),tooltip:_this.lang.font.name,data:{toggle:"dropdown"}}),_this.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:_this.options.icons.menuCheck,items:_this.options.fontNames.filter(_this.isFontInstalled.bind(_this)),title:_this.lang.font.name,template:function(item){return"<span style=\"font-family: '"+item+"'\">"+item+"</span>"},click:_this.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()})),this.context.memo("button.fontsize",(function(){return _this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',_this.options),tooltip:_this.lang.font.size,data:{toggle:"dropdown"}}),_this.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:_this.options.icons.menuCheck,items:_this.options.fontSizes,title:_this.lang.font.size,click:_this.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()})),this.context.memo("button.color",(function(){return _this.colorPalette("note-color-all",_this.lang.color.recent,!0,!0)})),this.context.memo("button.forecolor",(function(){return _this.colorPalette("note-color-fore",_this.lang.color.foreground,!1,!0)})),this.context.memo("button.backcolor",(function(){return _this.colorPalette("note-color-back",_this.lang.color.background,!0,!1)})),this.context.memo("button.ul",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.unorderedlist),tooltip:_this.lang.lists.unordered+_this.representShortcut("insertUnorderedList"),click:_this.context.createInvokeHandler("editor.insertUnorderedList")}).render()})),this.context.memo("button.ol",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.orderedlist),tooltip:_this.lang.lists.ordered+_this.representShortcut("insertOrderedList"),click:_this.context.createInvokeHandler("editor.insertOrderedList")}).render()}));var justifyLeft=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),justifyCenter=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),justifyRight=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),justifyFull=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),outdent=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),indent=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",func.invoke(justifyLeft,"render")),this.context.memo("button.justifyCenter",func.invoke(justifyCenter,"render")),this.context.memo("button.justifyRight",func.invoke(justifyRight,"render")),this.context.memo("button.justifyFull",func.invoke(justifyFull,"render")),this.context.memo("button.outdent",func.invoke(outdent,"render")),this.context.memo("button.indent",func.invoke(indent,"render")),this.context.memo("button.paragraph",(function(){return _this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.alignLeft),_this.options),tooltip:_this.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),_this.ui.dropdown([_this.ui.buttonGroup({className:"note-align",children:[justifyLeft,justifyCenter,justifyRight,justifyFull]}),_this.ui.buttonGroup({className:"note-list",children:[outdent,indent]})])]).render()})),this.context.memo("button.height",(function(){return _this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.textHeight),_this.options),tooltip:_this.lang.font.height,data:{toggle:"dropdown"}}),_this.ui.dropdownCheck({items:_this.options.lineHeights,checkClassName:_this.options.icons.menuCheck,className:"dropdown-line-height",title:_this.lang.font.height,click:_this.context.createInvokeHandler("editor.lineHeight")})]).render()})),this.context.memo("button.table",(function(){return _this.ui.buttonGroup([_this.button({className:"dropdown-toggle",contents:_this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.table),_this.options),tooltip:_this.lang.table.table,data:{toggle:"dropdown"}}),_this.ui.dropdown({title:_this.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function($node){$node.find(".note-dimension-picker-mousecatcher").css({width:_this.options.insertTableMaxSize.col+"em",height:_this.options.insertTableMaxSize.row+"em"}).mousedown(_this.context.createInvokeHandler("editor.insertTable")).on("mousemove",_this.tableMoveHandler.bind(_this))}}).render()})),this.context.memo("button.link",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.link),tooltip:_this.lang.link.link+_this.representShortcut("linkDialog.show"),click:_this.context.createInvokeHandler("linkDialog.show")}).render()})),this.context.memo("button.picture",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.picture),tooltip:_this.lang.image.image,click:_this.context.createInvokeHandler("imageDialog.show")}).render()})),this.context.memo("button.video",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.video),tooltip:_this.lang.video.video,click:_this.context.createInvokeHandler("videoDialog.show")}).render()})),this.context.memo("button.hr",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.minus),tooltip:_this.lang.hr.insert+_this.representShortcut("insertHorizontalRule"),click:_this.context.createInvokeHandler("editor.insertHorizontalRule")}).render()})),this.context.memo("button.fullscreen",(function(){return _this.button({className:"btn-fullscreen",contents:_this.ui.icon(_this.options.icons.arrowsAlt),tooltip:_this.lang.options.fullscreen,click:_this.context.createInvokeHandler("fullscreen.toggle")}).render()})),this.context.memo("button.codeview",(function(){return _this.button({className:"btn-codeview",contents:_this.ui.icon(_this.options.icons.code),tooltip:_this.lang.options.codeview,click:_this.context.createInvokeHandler("codeview.toggle")}).render()})),this.context.memo("button.redo",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.redo),tooltip:_this.lang.history.redo+_this.representShortcut("redo"),click:_this.context.createInvokeHandler("editor.redo")}).render()})),this.context.memo("button.undo",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.undo),tooltip:_this.lang.history.undo+_this.representShortcut("undo"),click:_this.context.createInvokeHandler("editor.undo")}).render()})),this.context.memo("button.help",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.question),tooltip:_this.lang.options.help,click:_this.context.createInvokeHandler("helpDialog.show")}).render()}))},Buttons.prototype.addImagePopoverButtons=function(){var _this=this;this.context.memo("button.imageSize100",(function(){return _this.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:_this.lang.image.resizeFull,click:_this.context.createInvokeHandler("editor.resize","1")}).render()})),this.context.memo("button.imageSize50",(function(){return _this.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:_this.lang.image.resizeHalf,click:_this.context.createInvokeHandler("editor.resize","0.5")}).render()})),this.context.memo("button.imageSize25",(function(){return _this.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:_this.lang.image.resizeQuarter,click:_this.context.createInvokeHandler("editor.resize","0.25")}).render()})),this.context.memo("button.floatLeft",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignLeft),tooltip:_this.lang.image.floatLeft,click:_this.context.createInvokeHandler("editor.floatMe","left")}).render()})),this.context.memo("button.floatRight",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignRight),tooltip:_this.lang.image.floatRight,click:_this.context.createInvokeHandler("editor.floatMe","right")}).render()})),this.context.memo("button.floatNone",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.alignJustify),tooltip:_this.lang.image.floatNone,click:_this.context.createInvokeHandler("editor.floatMe","none")}).render()})),this.context.memo("button.removeMedia",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.trash),tooltip:_this.lang.image.remove,click:_this.context.createInvokeHandler("editor.removeMedia")}).render()}))},Buttons.prototype.addLinkPopoverButtons=function(){var _this=this;this.context.memo("button.linkDialogShow",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.link),tooltip:_this.lang.link.edit,click:_this.context.createInvokeHandler("linkDialog.show")}).render()})),this.context.memo("button.unlink",(function(){return _this.button({contents:_this.ui.icon(_this.options.icons.unlink),tooltip:_this.lang.link.unlink,click:_this.context.createInvokeHandler("editor.unlink")}).render()}))},Buttons.prototype.addTablePopoverButtons=function(){var _this=this;this.context.memo("button.addRowUp",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.rowAbove),tooltip:_this.lang.table.addRowAbove,click:_this.context.createInvokeHandler("editor.addRow","top")}).render()})),this.context.memo("button.addRowDown",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.rowBelow),tooltip:_this.lang.table.addRowBelow,click:_this.context.createInvokeHandler("editor.addRow","bottom")}).render()})),this.context.memo("button.addColLeft",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.colBefore),tooltip:_this.lang.table.addColLeft,click:_this.context.createInvokeHandler("editor.addCol","left")}).render()})),this.context.memo("button.addColRight",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.colAfter),tooltip:_this.lang.table.addColRight,click:_this.context.createInvokeHandler("editor.addCol","right")}).render()})),this.context.memo("button.deleteRow",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.rowRemove),tooltip:_this.lang.table.delRow,click:_this.context.createInvokeHandler("editor.deleteRow")}).render()})),this.context.memo("button.deleteCol",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.colRemove),tooltip:_this.lang.table.delCol,click:_this.context.createInvokeHandler("editor.deleteCol")}).render()})),this.context.memo("button.deleteTable",(function(){return _this.button({className:"btn-md",contents:_this.ui.icon(_this.options.icons.trash),tooltip:_this.lang.table.delTable,click:_this.context.createInvokeHandler("editor.deleteTable")}).render()}))},Buttons.prototype.build=function($container,groups){for(var groupIdx=0,groupLen=groups.length;groupIdx<groupLen;groupIdx++){for(var group=groups[groupIdx],groupName=$$1.isArray(group)?group[0]:group,buttons=$$1.isArray(group)?1===group.length?[group[0]]:group[1]:[group],$group=this.ui.buttonGroup({className:"note-"+groupName}).render(),idx=0,len=buttons.length;idx<len;idx++){var btn=this.context.memo("button."+buttons[idx]);btn&&$group.append("function"==typeof btn?btn(this.context):btn)}$group.appendTo($container)}},Buttons.prototype.updateCurrentStyle=function($container){var _this=this,$cont=$container||this.$toolbar,styleInfo=this.context.invoke("editor.currentStyle");if(this.updateBtnStates($cont,{".note-btn-bold":function(){return"bold"===styleInfo["font-bold"]},".note-btn-italic":function(){return"italic"===styleInfo["font-italic"]},".note-btn-underline":function(){return"underline"===styleInfo["font-underline"]},".note-btn-subscript":function(){return"subscript"===styleInfo["font-subscript"]},".note-btn-superscript":function(){return"superscript"===styleInfo["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===styleInfo["font-strikethrough"]}}),styleInfo["font-family"]){var fontNames=styleInfo["font-family"].split(",").map((function(name){return name.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")})),fontName_1=lists.find(fontNames,this.isFontInstalled.bind(this));$cont.find(".dropdown-fontname a").each((function(idx,item){var $item=$$1(item),isChecked=$item.data("value")+""==fontName_1+"";$item.toggleClass("checked",isChecked)})),$cont.find(".note-current-fontname").text(fontName_1).css("font-family",fontName_1)}if(styleInfo["font-size"]){var fontSize_1=styleInfo["font-size"];$cont.find(".dropdown-fontsize a").each((function(idx,item){var $item=$$1(item),isChecked=$item.data("value")+""==fontSize_1+"";$item.toggleClass("checked",isChecked)})),$cont.find(".note-current-fontsize").text(fontSize_1)}if(styleInfo["line-height"]){var lineHeight_1=styleInfo["line-height"];$cont.find(".dropdown-line-height li a").each((function(idx,item){var isChecked=$$1(item).data("value")+""==lineHeight_1+"";_this.className=isChecked?"checked":""}))}},Buttons.prototype.updateBtnStates=function($container,infos){var _this=this;$$1.each(infos,(function(selector,pred){_this.ui.toggleBtnActive($container.find(selector),pred())}))},Buttons.prototype.tableMoveHandler=function(event){var posOffset,$picker=$$1(event.target.parentNode),$dimensionDisplay=$picker.next(),$catcher=$picker.find(".note-dimension-picker-mousecatcher"),$highlighted=$picker.find(".note-dimension-picker-highlighted"),$unhighlighted=$picker.find(".note-dimension-picker-unhighlighted");if(void 0===event.offsetX){var posCatcher=$$1(event.target).offset();posOffset={x:event.pageX-posCatcher.left,y:event.pageY-posCatcher.top}}else posOffset={x:event.offsetX,y:event.offsetY};var dim_c=Math.ceil(posOffset.x/18)||1,dim_r=Math.ceil(posOffset.y/18)||1;$highlighted.css({width:dim_c+"em",height:dim_r+"em"}),$catcher.data("value",dim_c+"x"+dim_r),dim_c>3&&dim_c<this.options.insertTableMaxSize.col&&$unhighlighted.css({width:dim_c+1+"em"}),dim_r>3&&dim_r<this.options.insertTableMaxSize.row&&$unhighlighted.css({height:dim_r+1+"em"}),$dimensionDisplay.html(dim_c+" x "+dim_r)},Buttons}(),Toolbar=function(){function Toolbar(context){this.context=context,this.$window=$$1(window),this.$document=$$1(document),this.ui=$$1.summernote.ui,this.$note=context.layoutInfo.note,this.$editor=context.layoutInfo.editor,this.$toolbar=context.layoutInfo.toolbar,this.options=context.options,this.followScroll=this.followScroll.bind(this)}return Toolbar.prototype.shouldInitialize=function(){return!this.options.airMode},Toolbar.prototype.initialize=function(){var _this=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",(function(){_this.context.invoke("buttons.updateCurrentStyle")})),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},Toolbar.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},Toolbar.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var $toolbarWrapper=this.$toolbar.parent(".note-toolbar-wrapper"),editorHeight=this.$editor.outerHeight(),editorWidth=this.$editor.width(),toolbarHeight=this.$toolbar.height();$toolbarWrapper.css({height:toolbarHeight});var otherBarHeight=0;this.options.otherStaticBar&&(otherBarHeight=$$1(this.options.otherStaticBar).outerHeight());var currentOffset=this.$document.scrollTop(),editorOffsetTop=this.$editor.offset().top;currentOffset>editorOffsetTop-otherBarHeight&&currentOffset<editorOffsetTop+editorHeight-otherBarHeight-toolbarHeight?this.$toolbar.css({position:"fixed",top:otherBarHeight,width:editorWidth}):this.$toolbar.css({position:"relative",top:0,width:"100%"})},Toolbar.prototype.changeContainer=function(isFullscreen){isFullscreen?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},Toolbar.prototype.updateFullscreen=function(isFullscreen){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),isFullscreen),this.changeContainer(isFullscreen)},Toolbar.prototype.updateCodeview=function(isCodeview){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),isCodeview),isCodeview?this.deactivate():this.activate()},Toolbar.prototype.activate=function(isIncludeCodeview){var $btn=this.$toolbar.find("button");isIncludeCodeview||($btn=$btn.not(".btn-codeview")),this.ui.toggleBtn($btn,!0)},Toolbar.prototype.deactivate=function(isIncludeCodeview){var $btn=this.$toolbar.find("button");isIncludeCodeview||($btn=$btn.not(".btn-codeview")),this.ui.toggleBtn($btn,!1)},Toolbar}(),LinkDialog=function(){function LinkDialog(context){this.context=context,this.ui=$$1.summernote.ui,this.$body=$$1(document.body),this.$editor=context.layoutInfo.editor,this.options=context.options,this.lang=this.options.langInfo,context.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return LinkDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor,body=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":$$1("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),footer='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>';this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)},LinkDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},LinkDialog.prototype.bindEnterKey=function($input,$btn){$input.on("keypress",(function(event){event.keyCode===key.code.ENTER&&(event.preventDefault(),$btn.trigger("click"))}))},LinkDialog.prototype.toggleLinkBtn=function($linkBtn,$linkText,$linkUrl){this.ui.toggleBtn($linkBtn,$linkText.val()&&$linkUrl.val())},LinkDialog.prototype.showLinkDialog=function(linkInfo){var _this=this;return $$1.Deferred((function(deferred){var $linkText=_this.$dialog.find(".note-link-text"),$linkUrl=_this.$dialog.find(".note-link-url"),$linkBtn=_this.$dialog.find(".note-link-btn"),$openInNewWindow=_this.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");_this.ui.onDialogShown(_this.$dialog,(function(){_this.context.triggerEvent("dialog.shown"),linkInfo.url||(linkInfo.url=linkInfo.text),$linkText.val(linkInfo.text);var handleLinkTextUpdate=function(){_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl),linkInfo.text=$linkText.val()};$linkText.on("input",handleLinkTextUpdate).on("paste",(function(){setTimeout(handleLinkTextUpdate,0)}));var handleLinkUrlUpdate=function(){_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl),linkInfo.text||$linkText.val($linkUrl.val())};$linkUrl.on("input",handleLinkUrlUpdate).on("paste",(function(){setTimeout(handleLinkUrlUpdate,0)})).val(linkInfo.url),env.isSupportTouch||$linkUrl.trigger("focus"),_this.toggleLinkBtn($linkBtn,$linkText,$linkUrl),_this.bindEnterKey($linkUrl,$linkBtn),_this.bindEnterKey($linkText,$linkBtn);var isNewWindowChecked=void 0!==linkInfo.isNewWindow?linkInfo.isNewWindow:_this.context.options.linkTargetBlank;$openInNewWindow.prop("checked",isNewWindowChecked),$linkBtn.one("click",(function(event){event.preventDefault(),deferred.resolve({range:linkInfo.range,url:$linkUrl.val(),text:$linkText.val(),isNewWindow:$openInNewWindow.is(":checked")}),_this.ui.hideDialog(_this.$dialog)}))})),_this.ui.onDialogHidden(_this.$dialog,(function(){$linkText.off("input paste keypress"),$linkUrl.off("input paste keypress"),$linkBtn.off("click"),"pending"===deferred.state()&&deferred.reject()})),_this.ui.showDialog(_this.$dialog)})).promise()},LinkDialog.prototype.show=function(){var _this=this,linkInfo=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(linkInfo).then((function(linkInfo){_this.context.invoke("editor.restoreRange"),_this.context.invoke("editor.createLink",linkInfo)})).fail((function(){_this.context.invoke("editor.restoreRange")}))},LinkDialog}(),LinkPopover=function(){function LinkPopover(context){var _this=this;this.context=context,this.ui=$$1.summernote.ui,this.options=context.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){_this.update()},"summernote.disable summernote.dialog.shown":function(){_this.hide()}}}return LinkPopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.link)},LinkPopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function($node){$node.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var $content=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",$content,this.options.popover.link)},LinkPopover.prototype.destroy=function(){this.$popover.remove()},LinkPopover.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var rng=this.context.invoke("editor.createRange");if(rng.isCollapsed()&&rng.isOnAnchor()){var anchor=dom.ancestor(rng.sc,dom.isAnchor),href=$$1(anchor).attr("href");this.$popover.find("a").attr("href",href).html(href);var pos=dom.posFromPlaceholder(anchor);this.$popover.css({display:"block",left:pos.left,top:pos.top})}else this.hide()}else this.hide()},LinkPopover.prototype.hide=function(){this.$popover.hide()},LinkPopover}(),ImageDialog=function(){function ImageDialog(context){this.context=context,this.ui=$$1.summernote.ui,this.$body=$$1(document.body),this.$editor=context.layoutInfo.editor,this.options=context.options,this.lang=this.options.langInfo}return ImageDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor,imageLimitation="";if(this.options.maximumImageFileSize){var unit=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),readableSize=1*(this.options.maximumImageFileSize/Math.pow(1024,unit)).toFixed(2)+" "+" KMGTP"[unit]+"B";imageLimitation="<small>"+this.lang.image.maximumFileSize+" : "+readableSize+"</small>"}var body=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',imageLimitation,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),footer='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)},ImageDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},ImageDialog.prototype.bindEnterKey=function($input,$btn){$input.on("keypress",(function(event){event.keyCode===key.code.ENTER&&(event.preventDefault(),$btn.trigger("click"))}))},ImageDialog.prototype.show=function(){var _this=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then((function(data){_this.ui.hideDialog(_this.$dialog),_this.context.invoke("editor.restoreRange"),"string"==typeof data?_this.options.callbacks.onImageLinkInsert?_this.context.triggerEvent("image.link.insert",data):_this.context.invoke("editor.insertImage",data):_this.options.callbacks.onImageUpload?_this.context.triggerEvent("image.upload",data):_this.context.invoke("editor.insertImagesAsDataURL",data)})).fail((function(){_this.context.invoke("editor.restoreRange")}))},ImageDialog.prototype.showImageDialog=function(){var _this=this;return $$1.Deferred((function(deferred){var $imageInput=_this.$dialog.find(".note-image-input"),$imageUrl=_this.$dialog.find(".note-image-url"),$imageBtn=_this.$dialog.find(".note-image-btn");_this.ui.onDialogShown(_this.$dialog,(function(){_this.context.triggerEvent("dialog.shown"),$imageInput.replaceWith($imageInput.clone().on("change",(function(event){deferred.resolve(event.target.files||event.target.value)})).val("")),$imageBtn.click((function(event){event.preventDefault(),deferred.resolve($imageUrl.val())})),$imageUrl.on("keyup paste",(function(){var url=$imageUrl.val();_this.ui.toggleBtn($imageBtn,url)})).val(""),env.isSupportTouch||$imageUrl.trigger("focus"),_this.bindEnterKey($imageUrl,$imageBtn)})),_this.ui.onDialogHidden(_this.$dialog,(function(){$imageInput.off("change"),$imageUrl.off("keyup paste keypress"),$imageBtn.off("click"),"pending"===deferred.state()&&deferred.reject()})),_this.ui.showDialog(_this.$dialog)}))},ImageDialog}(),ImagePopover=function(){function ImagePopover(context){var _this=this;this.context=context,this.ui=$$1.summernote.ui,this.editable=context.layoutInfo.editable[0],this.options=context.options,this.events={"summernote.disable":function(){_this.hide()}}}return ImagePopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.image)},ImagePopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var $content=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",$content,this.options.popover.image)},ImagePopover.prototype.destroy=function(){this.$popover.remove()},ImagePopover.prototype.update=function(target){if(dom.isImg(target)){var pos=dom.posFromPlaceholder(target),posEditor=dom.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:pos.left,top:this.options.popatmouse?event.pageY:Math.min(pos.top,posEditor.top)})}else this.hide()},ImagePopover.prototype.hide=function(){this.$popover.hide()},ImagePopover}(),TablePopover=function(){function TablePopover(context){var _this=this;this.context=context,this.ui=$$1.summernote.ui,this.options=context.options,this.events={"summernote.mousedown":function(we,e){_this.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){_this.update()},"summernote.disable":function(){_this.hide()}}}return TablePopover.prototype.shouldInitialize=function(){return!lists.isEmpty(this.options.popover.table)},TablePopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var $content=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",$content,this.options.popover.table),env.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},TablePopover.prototype.destroy=function(){this.$popover.remove()},TablePopover.prototype.update=function(target){if(this.context.isDisabled())return!1;var isCell=dom.isCell(target);if(isCell){var pos=dom.posFromPlaceholder(target);this.$popover.css({display:"block",left:pos.left,top:pos.top})}else this.hide();return isCell},TablePopover.prototype.hide=function(){this.$popover.hide()},TablePopover}(),VideoDialog=function(){function VideoDialog(context){this.context=context,this.ui=$$1.summernote.ui,this.$body=$$1(document.body),this.$editor=context.layoutInfo.editor,this.options=context.options,this.lang=this.options.langInfo}return VideoDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor,body=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),footer='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:body,footer:footer}).render().appendTo($container)},VideoDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},VideoDialog.prototype.bindEnterKey=function($input,$btn){$input.on("keypress",(function(event){event.keyCode===key.code.ENTER&&(event.preventDefault(),$btn.trigger("click"))}))},VideoDialog.prototype.createVideoNode=function(url){var $video,ytMatch=url.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),igMatch=url.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),vMatch=url.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),vimMatch=url.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),dmMatch=url.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),youkuMatch=url.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),qqMatch=url.match(/\/\/v\.qq\.com.*?vid=(.+)/),qqMatch2=url.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),mp4Match=url.match(/^.+.(mp4|m4v)$/),oggMatch=url.match(/^.+.(ogg|ogv)$/),webmMatch=url.match(/^.+.(webm)$/);if(ytMatch&&11===ytMatch[1].length){var youtubeId=ytMatch[1],start=0;if(void 0!==ytMatch[2]){var ytMatchForStart=ytMatch[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(ytMatchForStart)for(var n=[3600,60,1],i=0,r=n.length;i<r;i++)start+=void 0!==ytMatchForStart[i+1]?n[i]*parseInt(ytMatchForStart[i+1],10):0}$video=$$1("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+youtubeId+(start>0?"?start="+start:"")).attr("width","640").attr("height","360")}else if(igMatch&&igMatch[0].length)$video=$$1("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+igMatch[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(vMatch&&vMatch[0].length)$video=$$1("<iframe>").attr("frameborder",0).attr("src",vMatch[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(vimMatch&&vimMatch[3].length)$video=$$1("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+vimMatch[3]).attr("width","640").attr("height","360");else if(dmMatch&&dmMatch[2].length)$video=$$1("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+dmMatch[2]).attr("width","640").attr("height","360");else if(youkuMatch&&youkuMatch[1].length)$video=$$1("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+youkuMatch[1]);else if(qqMatch&&qqMatch[1].length||qqMatch2&&qqMatch2[2].length){var vid=qqMatch&&qqMatch[1].length?qqMatch[1]:qqMatch2[2];$video=$$1("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+vid+"&amp;auto=0")}else{if(!(mp4Match||oggMatch||webmMatch))return!1;$video=$$1("<video controls>").attr("src",url).attr("width","640").attr("height","360")}return $video.addClass("note-video-clip"),$video[0]},VideoDialog.prototype.show=function(){var _this=this,text=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(text).then((function(url){_this.ui.hideDialog(_this.$dialog),_this.context.invoke("editor.restoreRange");var $node=_this.createVideoNode(url);$node&&_this.context.invoke("editor.insertNode",$node)})).fail((function(){_this.context.invoke("editor.restoreRange")}))},VideoDialog.prototype.showVideoDialog=function(text){var _this=this;return $$1.Deferred((function(deferred){var $videoUrl=_this.$dialog.find(".note-video-url"),$videoBtn=_this.$dialog.find(".note-video-btn");_this.ui.onDialogShown(_this.$dialog,(function(){_this.context.triggerEvent("dialog.shown"),$videoUrl.val(text).on("input",(function(){_this.ui.toggleBtn($videoBtn,$videoUrl.val())})),env.isSupportTouch||$videoUrl.trigger("focus"),$videoBtn.click((function(event){event.preventDefault(),deferred.resolve($videoUrl.val())})),_this.bindEnterKey($videoUrl,$videoBtn)})),_this.ui.onDialogHidden(_this.$dialog,(function(){$videoUrl.off("input"),$videoBtn.off("click"),"pending"===deferred.state()&&deferred.reject()})),_this.ui.showDialog(_this.$dialog)}))},VideoDialog}(),HelpDialog=function(){function HelpDialog(context){this.context=context,this.ui=$$1.summernote.ui,this.$body=$$1(document.body),this.$editor=context.layoutInfo.editor,this.options=context.options,this.lang=this.options.langInfo}return HelpDialog.prototype.initialize=function(){var $container=this.options.dialogsInBody?this.$body:this.$editor,body=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.11</a> · ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:body,callback:function($node){$node.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo($container)},HelpDialog.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},HelpDialog.prototype.createShortcutList=function(){var _this=this,keyMap=this.options.keyMap[env.isMac?"mac":"pc"];return Object.keys(keyMap).map((function(key){var command=keyMap[key],$row=$$1('<div><div class="help-list-item"/></div>');return $row.append($$1("<label><kbd>"+key+"</kdb></label>").css({width:180,"margin-right":10})).append($$1("<span/>").html(_this.context.memo("help."+command)||command)),$row.html()})).join("")},HelpDialog.prototype.showHelpDialog=function(){var _this=this;return $$1.Deferred((function(deferred){_this.ui.onDialogShown(_this.$dialog,(function(){_this.context.triggerEvent("dialog.shown"),deferred.resolve()})),_this.ui.showDialog(_this.$dialog)})).promise()},HelpDialog.prototype.show=function(){var _this=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then((function(){_this.context.invoke("editor.restoreRange")}))},HelpDialog}(),AirPopover=function(){function AirPopover(context){var _this=this;this.context=context,this.ui=$$1.summernote.ui,this.options=context.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){_this.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){_this.hide()},"summernote.focusout":function(we,e){env.isFF||e.relatedTarget&&dom.ancestor(e.relatedTarget,func.eq(_this.$popover[0]))||_this.hide()}}}return AirPopover.prototype.shouldInitialize=function(){return this.options.airMode&&!lists.isEmpty(this.options.popover.air)},AirPopover.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var $content=this.$popover.find(".popover-content");this.context.invoke("buttons.build",$content,this.options.popover.air)},AirPopover.prototype.destroy=function(){this.$popover.remove()},AirPopover.prototype.update=function(){var styleInfo=this.context.invoke("editor.currentStyle");if(styleInfo.range&&!styleInfo.range.isCollapsed()){var rect=lists.last(styleInfo.range.getClientRects());if(rect){var bnd=func.rect2bnd(rect);this.$popover.css({display:"block",left:Math.max(bnd.left+bnd.width/2,0)-20,top:bnd.top+bnd.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},AirPopover.prototype.hide=function(){this.$popover.hide()},AirPopover}(),HintPopover=function(){function HintPopover(context){var _this=this;this.context=context,this.ui=$$1.summernote.ui,this.$editable=context.layoutInfo.editable,this.options=context.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=$$1.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(we,e){e.isDefaultPrevented()||_this.handleKeyup(e)},"summernote.keydown":function(we,e){_this.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){_this.hide()}}}return HintPopover.prototype.shouldInitialize=function(){return this.hints.length>0},HintPopover.prototype.initialize=function(){var _this=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",(function(e){_this.$content.find(".active").removeClass("active"),$$1(e.currentTarget).addClass("active"),_this.replace()}))},HintPopover.prototype.destroy=function(){this.$popover.remove()},HintPopover.prototype.selectItem=function($item){this.$content.find(".active").removeClass("active"),$item.addClass("active"),this.$content[0].scrollTop=$item[0].offsetTop-this.$content.innerHeight()/2},HintPopover.prototype.moveDown=function(){var $current=this.$content.find(".note-hint-item.active"),$next=$current.next();if($next.length)this.selectItem($next);else{var $nextGroup=$current.parent().next();$nextGroup.length||($nextGroup=this.$content.find(".note-hint-group").first()),this.selectItem($nextGroup.find(".note-hint-item").first())}},HintPopover.prototype.moveUp=function(){var $current=this.$content.find(".note-hint-item.active"),$prev=$current.prev();if($prev.length)this.selectItem($prev);else{var $prevGroup=$current.parent().prev();$prevGroup.length||($prevGroup=this.$content.find(".note-hint-group").last()),this.selectItem($prevGroup.find(".note-hint-item").last())}},HintPopover.prototype.replace=function(){var $item=this.$content.find(".note-hint-item.active");if($item.length){var node=this.nodeFromItem($item);this.lastWordRange.insertNode(node),range.createFromNode(node).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},HintPopover.prototype.nodeFromItem=function($item){var hint=this.hints[$item.data("index")],item=$item.data("item"),node=hint.content?hint.content(item):item;return"string"==typeof node&&(node=dom.createText(node)),node},HintPopover.prototype.createItemTemplates=function(hintIdx,items){var hint=this.hints[hintIdx];return items.map((function(item,idx){var $item=$$1('<div class="note-hint-item"/>');return $item.append(hint.template?hint.template(item):item+""),$item.data({index:hintIdx,item:item}),$item}))},HintPopover.prototype.handleKeydown=function(e){this.$popover.is(":visible")&&(e.keyCode===key.code.ENTER?(e.preventDefault(),this.replace()):e.keyCode===key.code.UP?(e.preventDefault(),this.moveUp()):e.keyCode===key.code.DOWN&&(e.preventDefault(),this.moveDown()))},HintPopover.prototype.searchKeyword=function(index,keyword,callback){var hint=this.hints[index];if(hint&&hint.match.test(keyword)&&hint.search){var matches=hint.match.exec(keyword);hint.search(matches[1],callback)}else callback()},HintPopover.prototype.createGroup=function(idx,keyword){var _this=this,$group=$$1('<div class="note-hint-group note-hint-group-'+idx+'"/>');return this.searchKeyword(idx,keyword,(function(items){(items=items||[]).length&&($group.html(_this.createItemTemplates(idx,items)),_this.show())})),$group},HintPopover.prototype.handleKeyup=function(e){var _this=this;if(!lists.contains([key.code.ENTER,key.code.UP,key.code.DOWN],e.keyCode)){var wordRange=this.context.invoke("editor.createRange").getWordRange(),keyword_1=wordRange.toString();if(this.hints.length&&keyword_1){this.$content.empty();var bnd=func.rect2bnd(lists.last(wordRange.getClientRects()));bnd&&(this.$popover.hide(),this.lastWordRange=wordRange,this.hints.forEach((function(hint,idx){hint.match.test(keyword_1)&&_this.createGroup(idx,keyword_1).appendTo(_this.$content)})),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:bnd.left,top:bnd.top-this.$popover.outerHeight()-5}):this.$popover.css({left:bnd.left,top:bnd.top+bnd.height+5}))}else this.hide()}},HintPopover.prototype.show=function(){this.$popover.show()},HintPopover.prototype.hide=function(){this.$popover.hide()},HintPopover}(),Context=function(){function Context($note,options){this.ui=$$1.summernote.ui,this.$note=$note,this.memos={},this.modules={},this.layoutInfo={},this.options=options,this.initialize()}return Context.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},Context.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},Context.prototype.reset=function(){var disabled=this.isDisabled();this.code(dom.emptyPara),this._destroy(),this._initialize(),disabled&&this.disable()},Context.prototype._initialize=function(){var _this=this,buttons=$$1.extend({},this.options.buttons);Object.keys(buttons).forEach((function(key){_this.memo("button."+key,buttons[key])}));var modules=$$1.extend({},this.options.modules,$$1.summernote.plugins||{});Object.keys(modules).forEach((function(key){_this.module(key,modules[key],!0)})),Object.keys(this.modules).forEach((function(key){_this.initializeModule(key)}))},Context.prototype._destroy=function(){var _this=this;Object.keys(this.modules).reverse().forEach((function(key){_this.removeModule(key)})),Object.keys(this.memos).forEach((function(key){_this.removeMemo(key)})),this.triggerEvent("destroy",this)},Context.prototype.code=function(html){var isActivated=this.invoke("codeview.isActivated");if(void 0===html)return this.invoke("codeview.sync"),isActivated?this.layoutInfo.codable.val():this.layoutInfo.editable.html();isActivated?this.layoutInfo.codable.val(html):this.layoutInfo.editable.html(html),this.$note.val(html),this.triggerEvent("change",html)},Context.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},Context.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},Context.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},Context.prototype.triggerEvent=function(){var namespace=lists.head(arguments),args=lists.tail(lists.from(arguments)),callback=this.options.callbacks[func.namespaceToCamel(namespace,"on")];callback&&callback.apply(this.$note[0],args),this.$note.trigger("summernote."+namespace,args)},Context.prototype.initializeModule=function(key){var module=this.modules[key];module.shouldInitialize=module.shouldInitialize||func.ok,module.shouldInitialize()&&(module.initialize&&module.initialize(),module.events&&dom.attachEvents(this.$note,module.events))},Context.prototype.module=function(key,ModuleClass,withoutIntialize){if(1===arguments.length)return this.modules[key];this.modules[key]=new ModuleClass(this),withoutIntialize||this.initializeModule(key)},Context.prototype.removeModule=function(key){var module=this.modules[key];module.shouldInitialize()&&(module.events&&dom.detachEvents(this.$note,module.events),module.destroy&&module.destroy()),delete this.modules[key]},Context.prototype.memo=function(key,obj){if(1===arguments.length)return this.memos[key];this.memos[key]=obj},Context.prototype.removeMemo=function(key){this.memos[key]&&this.memos[key].destroy&&this.memos[key].destroy(),delete this.memos[key]},Context.prototype.createInvokeHandlerAndUpdateState=function(namespace,value){var _this=this;return function(event){_this.createInvokeHandler(namespace,value)(event),_this.invoke("buttons.updateCurrentStyle")}},Context.prototype.createInvokeHandler=function(namespace,value){var _this=this;return function(event){event.preventDefault();var $target=$$1(event.target);_this.invoke(namespace,value||$target.closest("[data-value]").data("value"),$target)}},Context.prototype.invoke=function(){var namespace=lists.head(arguments),args=lists.tail(lists.from(arguments)),splits=namespace.split("."),hasSeparator=splits.length>1,moduleName=hasSeparator&&lists.head(splits),methodName=hasSeparator?lists.last(splits):lists.head(splits),module=this.modules[moduleName||"editor"];return!moduleName&&this[methodName]?this[methodName].apply(this,args):module&&module[methodName]&&module.shouldInitialize()?module[methodName].apply(module,args):void 0},Context}();$$1.fn.extend({summernote:function(){var type=$$1.type(lists.head(arguments)),isExternalAPICalled="string"===type,hasInitOptions="object"===type,options=$$1.extend({},$$1.summernote.options,hasInitOptions?lists.head(arguments):{});options.langInfo=$$1.extend(!0,{},$$1.summernote.lang["en-US"],$$1.summernote.lang[options.lang]),options.icons=$$1.extend(!0,{},$$1.summernote.options.icons,options.icons),options.tooltip="auto"===options.tooltip?!env.isSupportTouch:options.tooltip,this.each((function(idx,note){var $note=$$1(note);if(!$note.data("summernote")){var context=new Context($note,options);$note.data("summernote",context),$note.data("summernote").triggerEvent("init",context.layoutInfo)}}));var $note=this.first();if($note.length){var context=$note.data("summernote");if(isExternalAPICalled)return context.invoke.apply(context,lists.from(arguments));options.focus&&context.invoke("editor.focus")}return this}}),$$1.summernote=$$1.extend($$1.summernote,{version:"0.8.11",ui:ui,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:CodeView,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,tablePopover:TablePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,styleTags:["p","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null,onImageLinkInsert:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})})),function($){$.attrFn=$.attrFn||{};var touchCapable="ontouchstart"in window,settings={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:touchCapable,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:touchCapable?"touchstart":"mousedown",endevent:touchCapable?"touchend":"mouseup",moveevent:touchCapable?"touchmove":"mousemove",tapevent:touchCapable?"tap":"click",scrollevent:touchCapable?"touchmove":"scroll",hold_timer:null,tap_timer:null};$.isTouchCapable=function(){return settings.touch_capable},$.getStartEvent=function(){return settings.startevent},$.getEndEvent=function(){return settings.endevent},$.getMoveEvent=function(){return settings.moveevent},$.getTapEvent=function(){return settings.tapevent},$.getScrollEvent=function(){return settings.scrollevent},$.each(["tapstart","tapend","tapmove","tap","tap2","tap3","tap4","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange"],(function(i,name){$.fn[name]=function(fn){return fn?this.on(name,fn):this.trigger(name)},$.attrFn[name]=!0})),$.event.special.tapstart={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.startevent,(function tapStartFunc(e){if($this.data("callee",tapStartFunc),e.originalEvent){if(e.which&&1!==e.which)return!1;var origEvent=e.originalEvent,touchData={position:{x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};return triggerCustomEvent(thisObject,"tapstart",e,touchData),!0}}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee)}},$.event.special.tapmove={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.moveevent,(function tapMoveFunc(e){if($this.data("callee",tapMoveFunc),e.originalEvent){var origEvent=e.originalEvent,touchData={position:{x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};return triggerCustomEvent(thisObject,"tapmove",e,touchData),!0}}))},remove:function(){$(this).off(settings.moveevent,$(this).data.callee)}},$.event.special.tapend={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.endevent,(function tapEndFunc(e){if($this.data("callee",tapEndFunc),e.originalEvent){var origEvent=e.originalEvent,touchData={position:{x:settings.touch_capable?origEvent.changedTouches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.changedTouches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};return triggerCustomEvent(thisObject,"tapend",e,touchData),!0}}))},remove:function(){$(this).off(settings.endevent,$(this).data.callee)}},$.event.special.taphold={setup:function(){var origTarget,thisObject=this,$this=$(thisObject),start_pos={x:0,y:0},end_x=0,end_y=0;$this.on(settings.startevent,(function tapHoldFunc1(e){if(e.originalEvent){if(e.which&&1!==e.which)return!1;$this.data("tapheld",!1),origTarget=e.target;var origEvent=e.originalEvent,start_time=Date.now(),startPosition={x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},startOffset={x:settings.touch_capable?origEvent.touches[0].pageX-origEvent.touches[0].target.offsetLeft:e.offsetX,y:settings.touch_capable?origEvent.touches[0].pageY-origEvent.touches[0].target.offsetTop:e.offsetY};start_pos.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,start_pos.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,end_x=start_pos.x,end_y=start_pos.y;var ele_threshold=$this.parent().data("threshold")?$this.parent().data("threshold"):$this.data("threshold"),threshold=void 0!==ele_threshold&&!1!==ele_threshold&&parseInt(ele_threshold)?parseInt(ele_threshold):settings.taphold_threshold;return settings.hold_timer=window.setTimeout((function(){var diff_x=start_pos.x-end_x,diff_y=start_pos.y-end_y;if(e.target==origTarget&&(start_pos.x==end_x&&start_pos.y==end_y||diff_x>=-settings.tap_pixel_range&&diff_x<=settings.tap_pixel_range&&diff_y>=-settings.tap_pixel_range&&diff_y<=settings.tap_pixel_range)){$this.data("tapheld",!0);var end_time=Date.now(),endPosition={x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},endOffset={x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},touchData={startTime:start_time,endTime:end_time,startPosition:startPosition,startOffset:startOffset,endPosition:endPosition,endOffset:endOffset,duration:end_time-start_time,target:e.target};$this.data("callee1",tapHoldFunc1),triggerCustomEvent(thisObject,"taphold",e,touchData)}}),threshold),!0}})).on(settings.endevent,(function tapHoldFunc2(){$this.data("callee2",tapHoldFunc2),$this.data("tapheld",!1),window.clearTimeout(settings.hold_timer)})).on(settings.moveevent,(function tapHoldFunc3(e){$this.data("callee3",tapHoldFunc3),e.originalEvent&&(end_x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,end_y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY)}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2).off(settings.moveevent,$(this).data.callee3)}},$.event.special.doubletap={setup:function(){var action,origEvent,thisObject=this,$this=$(thisObject),firstTap=null,cooling=!1;$this.on(settings.startevent,(function doubleTapFunc1(e){if(e.originalEvent)return(!e.which||1===e.which)&&($this.data("doubletapped",!1),e.target,$this.data("callee1",doubleTapFunc1),origEvent=e.originalEvent,firstTap||(firstTap={position:{x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target,element:e.originalEvent.srcElement,index:$(e.target).index()}),!0)})).on(settings.endevent,(function doubleTapFunc2(e){if(e.originalEvent){var now=Date.now(),delta=now-($this.data("lastTouch")||now+1);if(window.clearTimeout(action),$this.data("callee2",doubleTapFunc2),delta<settings.doubletap_int&&$(e.target).index()==firstTap.index&&delta>100){$this.data("doubletapped",!0),window.clearTimeout(settings.tap_timer);var lastTap={position:{x:settings.touch_capable?e.originalEvent.changedTouches[0].screenX:e.screenX,y:settings.touch_capable?e.originalEvent.changedTouches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target,element:e.originalEvent.srcElement,index:$(e.target).index()},touchData={firstTap:firstTap,secondTap:lastTap,interval:lastTap.time-firstTap.time};cooling||(triggerCustomEvent(thisObject,"doubletap",e,touchData),firstTap=null),cooling=!0,window.setTimeout((function(){cooling=!1}),settings.doubletap_int)}else $this.data("lastTouch",now),action=window.setTimeout((function(){firstTap=null,window.clearTimeout(action)}),settings.doubletap_int,[e]);$this.data("lastTouch",now)}}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2)}},$.event.special.singletap={setup:function(){var thisObject=this,$this=$(thisObject),origTarget=null,startTime=null,start_pos={x:0,y:0};$this.on(settings.startevent,(function singleTapFunc1(e){if(e.originalEvent)return(!e.which||1===e.which)&&(startTime=Date.now(),origTarget=e.target,$this.data("callee1",singleTapFunc1),start_pos.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,start_pos.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,!0)})).on(settings.endevent,(function singleTapFunc2(e){if($this.data("callee2",singleTapFunc2),e.originalEvent&&e.target==origTarget){var end_pos_x=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,end_pos_y=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0].pageY:e.pageY;settings.tap_timer=window.setTimeout((function(){var diff_x=start_pos.x-end_pos_x,diff_y=start_pos.y-end_pos_y;if(!$this.data("doubletapped")&&!$this.data("tapheld")&&(start_pos.x==end_pos_x&&start_pos.y==end_pos_y||diff_x>=-settings.tap_pixel_range&&diff_x<=settings.tap_pixel_range&&diff_y>=-settings.tap_pixel_range&&diff_y<=settings.tap_pixel_range)){var origEvent=e.originalEvent,touchData={position:{x:settings.touch_capable?origEvent.changedTouches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.changedTouches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};touchData.time-startTime<settings.taphold_threshold&&triggerCustomEvent(thisObject,"singletap",e,touchData)}}),settings.doubletap_int)}}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2)}},$.event.special.tap={setup:function(){var start_time,touches,thisObject=this,$this=$(thisObject),started=!1,origTarget=null,start_pos={x:0,y:0};$this.on(settings.startevent,(function tapFunc1(e){if($this.data("callee1",tapFunc1),e.originalEvent)return(!e.which||1===e.which)&&(started=!0,start_pos.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,start_pos.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,start_time=Date.now(),origTarget=e.target,touches=e.originalEvent.targetTouches?e.originalEvent.targetTouches:[e],!0)})).on(settings.endevent,(function tapFunc2(e){if($this.data("callee2",tapFunc2),e.originalEvent){var end_x=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageX:e.pageX,end_y=e.originalEvent.targetTouches?e.originalEvent.changedTouches[0].pageY:e.pageY,diff_x=start_pos.x-end_x,diff_y=start_pos.y-end_y;if(origTarget==e.target&&started&&Date.now()-start_time<settings.taphold_threshold&&(start_pos.x==end_x&&start_pos.y==end_y||diff_x>=-settings.tap_pixel_range&&diff_x<=settings.tap_pixel_range&&diff_y>=-settings.tap_pixel_range&&diff_y<=settings.tap_pixel_range)){for(var origEvent=e.originalEvent,touchData=[],i=0;i<touches.length;i++){var touch={position:{x:settings.touch_capable?origEvent.changedTouches[i].screenX:e.screenX,y:settings.touch_capable?origEvent.changedTouches[i].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[i].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[i].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};touchData.push(touch)}triggerCustomEvent(thisObject,"tap",e,touchData)}}}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2)}},$.event.special.swipe={setup:function(){var startEvnt,$this=$(this),started=!1,hasSwiped=!1,originalCoord={x:0,y:0},finalCoord={x:0,y:0};$this.on(settings.startevent,(function touchStart(e){if(e.originalEvent){($this=$(e.currentTarget)).data("callee1",touchStart),originalCoord.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,originalCoord.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY,finalCoord.x=originalCoord.x,finalCoord.y=originalCoord.y,started=!0;var origEvent=e.originalEvent;startEvnt={position:{x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target}}})),$this.on(settings.moveevent,(function touchMove(e){if(e.originalEvent){var swipedir;($this=$(e.currentTarget)).data("callee2",touchMove),finalCoord.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,finalCoord.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY;var ele_x_threshold=$this.parent().data("xthreshold")?$this.parent().data("xthreshold"):$this.data("xthreshold"),ele_y_threshold=$this.parent().data("ythreshold")?$this.parent().data("ythreshold"):$this.data("ythreshold"),h_threshold=void 0!==ele_x_threshold&&!1!==ele_x_threshold&&parseInt(ele_x_threshold)?parseInt(ele_x_threshold):settings.swipe_h_threshold,v_threshold=void 0!==ele_y_threshold&&!1!==ele_y_threshold&&parseInt(ele_y_threshold)?parseInt(ele_y_threshold):settings.swipe_v_threshold;if(originalCoord.y>finalCoord.y&&originalCoord.y-finalCoord.y>v_threshold&&(swipedir="swipeup"),originalCoord.x<finalCoord.x&&finalCoord.x-originalCoord.x>h_threshold&&(swipedir="swiperight"),originalCoord.y<finalCoord.y&&finalCoord.y-originalCoord.y>v_threshold&&(swipedir="swipedown"),originalCoord.x>finalCoord.x&&originalCoord.x-finalCoord.x>h_threshold&&(swipedir="swipeleft"),null!=swipedir&&started){originalCoord.x=0,originalCoord.y=0,finalCoord.x=0,finalCoord.y=0,started=!1;var origEvent=e.originalEvent,endEvnt={position:{x:settings.touch_capable?origEvent.touches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.touches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target},xAmount=Math.abs(startEvnt.position.x-endEvnt.position.x),yAmount=Math.abs(startEvnt.position.y-endEvnt.position.y),touchData={startEvnt:startEvnt,endEvnt:endEvnt,direction:swipedir.replace("swipe",""),xAmount:xAmount,yAmount:yAmount,duration:endEvnt.time-startEvnt.time};hasSwiped=!0,$this.trigger("swipe",touchData).trigger(swipedir,touchData)}}})),$this.on(settings.endevent,(function touchEnd(e){if(e.originalEvent){var swipedir="";if(($this=$(e.currentTarget)).data("callee3",touchEnd),hasSwiped){var ele_x_threshold=$this.data("xthreshold"),ele_y_threshold=$this.data("ythreshold"),h_threshold=void 0!==ele_x_threshold&&!1!==ele_x_threshold&&parseInt(ele_x_threshold)?parseInt(ele_x_threshold):settings.swipe_h_threshold,v_threshold=void 0!==ele_y_threshold&&!1!==ele_y_threshold&&parseInt(ele_y_threshold)?parseInt(ele_y_threshold):settings.swipe_v_threshold,origEvent=e.originalEvent,endEvnt={position:{x:settings.touch_capable?origEvent.changedTouches[0].screenX:e.screenX,y:settings.touch_capable?origEvent.changedTouches[0].screenY:e.screenY},offset:{x:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageX-($this.offset()?$this.offset().left:0)):Math.round(e.pageX-($this.offset()?$this.offset().left:0)),y:settings.touch_capable?Math.round(origEvent.changedTouches[0].pageY-($this.offset()?$this.offset().top:0)):Math.round(e.pageY-($this.offset()?$this.offset().top:0))},time:Date.now(),target:e.target};startEvnt.position.y>endEvnt.position.y&&startEvnt.position.y-endEvnt.position.y>v_threshold&&(swipedir="swipeup"),startEvnt.position.x<endEvnt.position.x&&endEvnt.position.x-startEvnt.position.x>h_threshold&&(swipedir="swiperight"),startEvnt.position.y<endEvnt.position.y&&endEvnt.position.y-startEvnt.position.y>v_threshold&&(swipedir="swipedown"),startEvnt.position.x>endEvnt.position.x&&startEvnt.position.x-endEvnt.position.x>h_threshold&&(swipedir="swipeleft");var xAmount=Math.abs(startEvnt.position.x-endEvnt.position.x),yAmount=Math.abs(startEvnt.position.y-endEvnt.position.y),touchData={startEvnt:startEvnt,endEvnt:endEvnt,direction:swipedir.replace("swipe",""),xAmount:xAmount,yAmount:yAmount,duration:endEvnt.time-startEvnt.time};$this.trigger("swipeend",touchData)}started=!1,hasSwiped=!1}}))},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.moveevent,$(this).data.callee2).off(settings.endevent,$(this).data.callee3)}},$.event.special.scrollstart={setup:function(){var scrolling,timer,thisObject=this,$this=$(thisObject);function trigger(event,state){triggerCustomEvent(thisObject,(scrolling=state)?"scrollstart":"scrollend",event)}$this.on(settings.scrollevent,(function scrollFunc(event){$this.data("callee",scrollFunc),scrolling||trigger(event,!0),clearTimeout(timer),timer=setTimeout((function(){trigger(event,!1)}),50)}))},remove:function(){$(this).off(settings.scrollevent,$(this).data.callee)}};var get_orientation,last_orientation,initial_orientation_is_landscape,initial_orientation_is_default,win=$(window),portrait_map={0:!0,180:!0};if(settings.orientation_support){var ww=window.innerWidth||win.width(),wh=window.innerHeight||win.height();initial_orientation_is_landscape=ww>wh&&ww-wh>50,initial_orientation_is_default=portrait_map[window.orientation],(initial_orientation_is_landscape&&initial_orientation_is_default||!initial_orientation_is_landscape&&!initial_orientation_is_default)&&(portrait_map={"-90":!0,90:!0})}function handler(){var orientation=get_orientation();orientation!==last_orientation&&(last_orientation=orientation,win.trigger("orientationchange"))}$.event.special.orientationchange={setup:function(){return!settings.orientation_support&&(last_orientation=get_orientation(),win.on("throttledresize",handler),!0)},teardown:function(){return!settings.orientation_support&&(win.off("throttledresize",handler),!0)},add:function(handleObj){var old_handler=handleObj.handler;handleObj.handler=function(event){return event.orientation=get_orientation(),old_handler.apply(this,arguments)}}},$.event.special.orientationchange.orientation=get_orientation=function(){var elem=document.documentElement;return(settings.orientation_support?portrait_map[window.orientation]:elem&&elem.clientWidth/elem.clientHeight<1.1)?"portrait":"landscape"},$.event.special.throttledresize={setup:function(){$(this).on("resize",throttle_handler)},teardown:function(){$(this).off("resize",throttle_handler)}};var heldCall,curr,diff,throttle_handler=function(){curr=Date.now(),(diff=curr-lastCall)>=250?(lastCall=curr,$(this).trigger("throttledresize")):(heldCall&&window.clearTimeout(heldCall),heldCall=window.setTimeout(handler,250-diff))},lastCall=0;function triggerCustomEvent(obj,eventType,event,touchData){var originalType=event.type;event.type=eventType,$.event.dispatch.call(obj,event,touchData),event.type=originalType}$.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap"},(function(e,srcE){$.event.special[e]={setup:function(){$(this).on(srcE,$.noop)}}}))}(jQuery),function($){var START_EVENT="mousedown touchstart MSPointerDown pointerdown",END_EVENT="mouseup touchend MSPointerUp pointerup",MOVE_EVENT="mousemove touchmove MSPointerMove pointermove scroll";function translate(el,x,y){vendorify("transform",el,"translate("+x+"px, "+y+"px)")}function transition(el,val){vendorify("transition",el,val)}function getTouchPageX(e){return e=e.originalEvent||e,window.event&&window.event.changedTouches&&event.changedTouches[0].pageX||e.pageX}function getTouchPageY(e){return e=e.originalEvent||e,window.event&&window.event.changedTouches&&event.changedTouches[0].pageY||e.pageY}function vendorify(property,el,val){for(var titleCased=(property=property.toLowerCase()).charAt(0).toUpperCase()+property.substr(1),properties=["webkit","Moz","ms","O"].map((function(prefix){return prefix+titleCased})).concat("transform"),i=0,len=properties.length;i<len;++i)if(properties[i]in el.style){if(void 0===val)return el.style[properties[i]];el.style[properties[i]]=val;break}}var eventProperties=["altKey","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","metaKey","offsetX","offsetY","originalTarget","pageX","pageY","relatedTarget","screenX","screenY","shiftKey","target","view","which"];function trigger(el,name,originalEvent,arg){if(el[0]){originalEvent=originalEvent.originalEvent||originalEvent;var props={};eventProperties.forEach((function(prop){props[prop]=originalEvent[prop]})),props.currentTarget=props.target=el[0];var win=el[0].ownerDocument.defaultView||el[0].ownerDocument.parentWindow,$=win.Zepto||win.jQuery,e=$.Event(name,props);return $(el[0]).trigger(e,arg),e}}var dragging,nextId=0,Dragging=function(){var placeholder;this.eventHandler=$("<div />"),this.parent=this.el=this.handle=null,this.origin={x:0,y:0,transition:null,translate:null,offset:{x:0,y:0}},this.lastEntered=this.currentTarget=null,this.lastX=this.lastY=this.lastDirection=null,this.originalCss={},this.windows=[window],Object.defineProperty(this,"placeholder",{get:function(){return placeholder},set:function(val){placeholder!==val&&(placeholder&&placeholder.remove(),placeholder=val)}})};Dragging.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},Dragging.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},Dragging.prototype.start=function(parent,el,e,handle){this.parent=parent,this.el=el,this.handle=handle;el=this.handle||this.el;this.origin.x=getTouchPageX(e),this.origin.y=getTouchPageY(e),this.origin.transform=vendorify("transform",this.el[0]),this.origin.transition=vendorify("transition",this.el[0]);var rect=this.el[0].getBoundingClientRect();return this.origin.offset.x=rect.left+(window.scrollX||window.pageXOffset)-this.origin.x,this.origin.offset.y=rect.top+(window.scrollY||window.pageYOffset)-this.origin.y,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset,el[0].style.pointerEvents="none",this.windows.forEach((function(win){$(win).on(MOVE_EVENT,$.proxy(this.move,this)),$(win).on(END_EVENT,$.proxy(this.stop,this))}),this),transition(el[0],""),trigger(this.eventHandler,"dragging:start",e),this.el},Dragging.prototype.stop=function(e){if(this.last){var last=this.last;this.last=null,!trigger($(last),"dragging:drop",e).isDefaultPrevented()}if(this.el){for(var prop in this.originalCss)this.el.css(prop,this.originalCss[prop]),delete this.originalCss[prop];trigger(this.eventHandler,"dragging:stop",e,this.el),this.placeholder=null,this.handle||this.adjustPlacement(e);var el=this.el;this.handle&&this.handle.remove(),setTimeout(function(el,origin){transition(el[0],"all 0.25s ease-in-out 0s"),vendorify("transform",el[0],origin.transform||""),setTimeout(transition.bind(null,el[0],origin.transition||""),250),el[0].style.pointerEvents=""}.bind(null,el,this.origin)),this.windows.forEach((function(win){$(win).off(MOVE_EVENT,this.move),$(win).off(END_EVENT,this.stop)}),this),this.parent=this.el=this.handle=null}},Dragging.prototype.move=function(e){if(this.el){var win=(doc=this.el[0].ownerDocument).defaultView||doc.parentWindow;if("scroll"!==e.type){var pageX=getTouchPageX(e),pageY=getTouchPageY(e);e.view!==win&&e.view.frameElement&&(pageX+=e.view.frameElement.offsetLeft,pageY+=e.view.frameElement.offsetTop);var over,clientX=e.clientX||e.originalEvent&&e.originalEvent.clientX||window.event&&window.event.touches&&window.event.touches[0].clientX||0,clientY=e.clientY||e.originalEvent&&e.originalEvent.clientY||window.event&&window.event.touches&&window.event.touches[0].clientY||0,doc=this.el[0].ownerDocument;over=isOldIE?(over=e.view.document.msElementsFromPoint(clientX,clientY))[0]===this.el[0]?over[1]:over[0]:e.view.document.elementFromPoint(clientX,clientY);var deltaX=this.lastX-pageX,direction=((deltaY=this.lastY-pageY)>0?"up":deltaY<0&&"down")||deltaX>0&&"up"||deltaX<0&&"down"||this.lastDirection;dragging.currentTarget||this.setCurrent(over),this.currentTarget&&(over!==this.last&&this.lastEntered!==this.currentTarget?(trigger($(this.lastEntered),"dragging:leave",e),trigger($(this.currentTarget),"dragging:enter",e),this.lastEntered=this.currentTarget):direction!==this.lastDirection&&trigger($(this.currentTarget),"dragging:diverted",e)),this.last=over,this.currentTarget=null,this.lastDirection=direction,this.lastX=pageX,this.lastY=pageY,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset}else pageX=this.lastX+((window.scrollX||window.pageXOffset)-this.origin.scrollX),pageY=this.lastY+((window.scrollY||window.pageYOffset)-this.origin.scrollY);if(e.view!==win&&e.view&&e.view.frameElement){var bottom=-1*(pageY-(window.scrollY||window.pageYOffset)-window.innerHeight),bottomReached=document.documentElement.offsetHeight<(window.scrollY||window.pageYOffset)+window.innerHeight;bottom<=10&&!bottomReached&&setTimeout((function(){window.scrollBy(0,5)}),50);var top=pageY-(window.scrollY||window.pageYOffset),topReached=(window.scrollY||window.pageYOffset)<=0;top<=10&&!topReached&&setTimeout((function(){window.scrollBy(0,-5)}),50)}deltaX=pageX-this.origin.x;var deltaY=pageY-this.origin.y;translate((this.handle||this.el)[0],deltaX,deltaY)}},Dragging.prototype.setCurrent=function(target){this.currentTarget=target},Dragging.prototype.css=function(prop,val){this.el&&(this.originalCss[prop]=this.el.css(prop),this.el.css(prop,val))},Dragging.prototype.adjustPlacement=function(e){var el=this.handle&&this.handle[0]||this.el[0];translate(el,0,0);var rect=el.getBoundingClientRect();this.origin.x=rect.left+(window.scrollX||window.pageXOffset)-this.origin.offset.x,this.origin.y=rect.top+(window.scrollY||window.pageYOffset)-this.origin.offset.y;var pageX=getTouchPageX(e)||this.lastX,pageY=getTouchPageY(e)||this.lastY;translate(el,pageX-this.origin.x,pageY-this.origin.y)};try{parent.$&&parent.$.dragging&&(dragging=parent.$.dragging).windows.push(window)}catch(e){}dragging=$.dragging=dragging||new Dragging;var MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;function toArr(nodeList){return Array.prototype.slice.call(nodeList)}var isOldIE=!1;void 0===MutationObserver&&(MutationObserver=function(callback){this.targets=[],this.onAdded=function(e){callback([{addedNodes:[e.target],removedNodes:[]}])},this.onRemoved=function(e){callback([{addedNodes:[],removedNodes:[e.target]}])}},MutationObserver.prototype.observe=function(target){target.addEventListener("DOMNodeInserted",this.onAdded),target.addEventListener("DOMNodeRemoved",this.onRemoved),this.targets.push(target)},MutationObserver.prototype.disconnect=function(){for(var target;target=this.targets.shift();)target.removeEventListener("DOMNodeInserted",this.onAdded),target.removeEventListener("DOMNodeRemoved",this.onRemoved)},isOldIE=!!~navigator.appName.indexOf("Internet Explorer"));var SelectorObserver=function(targets,selector,onAdded,onRemoved){var self=this;this.targets=targets instanceof NodeList?Array.prototype.slice.call(targets):[targets];var childsOnly=">"===selector[0],search=childsOnly?selector.substr(1):selector,initialized=!1;function apply(nodes,deep,callback){callback&&function query(nodes,deep){var result=[];return toArr(nodes).forEach((function(node){1===node.nodeType&&(childsOnly&&-1===self.targets.indexOf(node.parentNode)||(function matches(el,selector){var fn=el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector;return!!fn&&fn.call(el,selector)}(node,search)&&result.push(node),!childsOnly&&deep&&toArr(node.querySelectorAll(selector)).forEach((function(node){result.push(node)}))))})),result}(nodes,deep).filter((function(node,i,self){return self.indexOf(node)===i})).forEach((function(node){callback.call(node)}))}var timeout=null,addedNodes=[],removedNodes=[];function handle(){self.disconnect();for(var i=0,len=removedNodes.length;i<len;++i){var index=addedNodes.indexOf(removedNodes[i]);index>-1&&(addedNodes.splice(index,1),removedNodes.splice(i--,1))}apply(addedNodes,!(initialized&&isOldIE),onAdded),apply(removedNodes,!0,onRemoved),addedNodes.length=0,removedNodes.length=0,self.observe()}this.observer=new MutationObserver((function(mutations){mutations.forEach((function(mutation){addedNodes.push.apply(addedNodes,mutation.addedNodes),removedNodes.push.apply(removedNodes,mutation.removedNodes)})),timeout&&clearTimeout(timeout),timeout=setTimeout(handle)})),onAdded&&this.targets.forEach((function(target){apply(target.children,!0,onAdded)})),initialized=!0,this.observe()};SelectorObserver.prototype.disconnect=function(){this.observer.disconnect()},SelectorObserver.prototype.observe=function(){var self=this;this.targets.forEach((function(target){self.observer.observe(target,{childList:!0,subtree:!0})}))};var Draggable=function(element,opts){this.id=nextId++,this.el=$(element),this.opts=opts,this.cancel=!1!==opts.handle};Draggable.prototype.create=function(){this.el.on(START_EVENT,$.proxy(this.start,this)).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),dragging.on("dragging:stop",$.proxy(this.reset,this));var self=this;setTimeout((function(){self.el.trigger("draggable:create",self)}))},Draggable.prototype.destroy=function(){this.el.off(START_EVENT,this.start),dragging.off("dragging:stop",this.reset)},Draggable.prototype.enable=function(){this.opts.disabled=!1},Draggable.prototype.disable=function(){this.opts.disabled=!0},Draggable.prototype.start=function(e){if(this.opts.disabled)return!1;if("mousedown"===e.type&&1!==e.which)return!1;if(e=e.originalEvent||e,this.opts.cancel)for(var target=$(e.target);target[0]!==this.el[0];){if(target.is(this.opts.cancel))return;target=target.parent()}if(this.opts.handle){target=$(e.target);for(var isHandle=!1;target[0]!==this.el[0];){if(target.is(this.opts.handle)){isHandle=!0;break}target=target.parent()}if(!isHandle)return}e.preventDefault();var helper;this.el;if(this.opts.clone){"function"==typeof this.opts.clone?helper=this.opts.clone.call(this.el):(helper=this.el.clone(),this.opts.cloneClass&&helper.addClass(this.opts.cloneClass));var position=this.el.position();helper.css("position","absolute").css("left",position.left).css("top",position.top).width(this.el.width()).height(this.el.height()),helper.insertAfter(this.el)}dragging.start(this,this.el,e,helper),trigger(this.el,"draggable:start",e,{item:dragging.el})},Draggable.prototype.reset=function(e,last){last===this.el[0]&&trigger(this.el,"draggable:stop",e,{item:dragging.el})};var Droppable=function(element,opts){this.id=nextId++,this.el=$(element),this.opts=opts,this.accept=!1};Droppable.prototype.create=function(){this.el.on("dragging:enter",$.proxy(this.enter,this)).on("dragging:leave",$.proxy(this.leave,this)).on("dragging:drop",$.proxy(this.drop,this)),dragging.on("dragging:start",$.proxy(this.activate,this)).on("dragging:stop",$.proxy(this.reset,this));var self=this;setTimeout((function(){self.el.trigger("droppable:create",self)}))},Droppable.prototype.destroy=function(){this.el.off("dragging:enter",this.enter).off("dragging:leave",this.leave).off("dragging:drop",this.drop)},Droppable.prototype.enable=function(){this.opts.disabled=!1},Droppable.prototype.disable=function(){this.opts.disabled=!0},Droppable.prototype.activate=function(e){if(this.accept=dragging.parent.opts.connectWith&&this.el.is(dragging.parent.opts.connectWith),!this.accept){var accept="*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],dragging.el):dragging.el.is(this.opts.accept));"default"!==this.opts.scope?(this.accept=dragging.parent.opts.scope===this.opts.scope,this.accept||"*"===this.opts.accept||(this.accept=accept)):this.accept=accept}this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),trigger(this.el,"droppable:activate",e,{item:dragging.el}))},Droppable.prototype.reset=function(e){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),trigger(this.el,"droppable:deactivate",e,{item:dragging.el}))},Droppable.prototype.enter=function(e){if(this.opts.disabled)return!1;e.stopPropagation(),dragging.placeholder&&dragging.placeholder.hide(),this.accept&&(this.opts.hoverClass&&this.el.addClass(this.opts.hoverClass),trigger(this.el,"droppable:over",e,{item:dragging.el}))},Droppable.prototype.leave=function(e){if(this.opts.disabled)return!1;this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass),trigger(this.el,"droppable:out",e,{item:dragging.el})},Droppable.prototype.drop=function(e){if(this.opts.disabled||!this.accept)return!1;if(dragging.el){var el=dragging.el,handler="function"==typeof this.opts.receiveHandler&&this.opts.receiveHandler,evtObj={item:el},clone=null;dragging.handle&&(evtObj.helper=dragging.handle,handler||(clone=evtObj.clone=dragging.el.clone())),trigger(this.el,"droppable:drop",e,evtObj).isDefaultPrevented()||(handler?handler.call(this.el,evtObj):$(this.el).append(clone||dragging.el))}};var Sortable=function(element,opts){this.id=nextId++,this.el=element,this.opts=opts;var tag=this.opts.placeholderTag;if(!tag)try{tag=this.el.find(this.opts.items)[0].tagName}catch(e){tag=/^ul|ol$/i.test(this.el[0].tagName)?"li":"div"}this.placeholder=$("<"+tag+' id="__ph'+this.id+'" class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.direction=null};function generic(constructor,identifier,defaults){return function(opts,name,value){var result=[];return this.each((function(){var instance=$(this).data(identifier);if("string"==typeof opts){if(void 0===instance)throw new Error(identifier+" not defined");switch(opts){case"enable":instance.enable();break;case"disable":instance.disable();break;case"destroy":instance.destroy(),$(this).removeData(identifier);break;case"option":void 0!==value?instance.opts[name]=value:"object"==typeof name?instance.opts=$.extend(instance.opts,name):name?result.push(instance.opts[name]):result.push(instance.opts);break;case"toArray":if("sortable"!==identifier)return;result.push(instance.toArray(name))}}else{if(instance)return $.extend(instance.opts,opts),this;(instance=new constructor($(this),$.extend({},defaults,opts))).create(),$(this).data(identifier,instance)}})),result.length?1===result.length?result[0]:result:this}}Sortable.prototype.create=function(){this.el.on(START_EVENT,this.opts.items,$.proxy(this.start,this)).on("dragging:enter",this.opts.items,$.proxy(this.enter,this)).on("dragging:diverted",this.opts.items,$.proxy(this.diverted,this)).on("dragging:drop",this.opts.items,$.proxy(this.drop,this)),$(this.el).find(this.opts.items).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),this.el.on("dragging:enter",$.proxy(this.enter,this)).on("dragging:diverted",$.proxy(this.diverted,this)).on("dragging:drop",$.proxy(this.drop,this)),dragging.on("dragging:start",$.proxy(this.activate,this)).on("dragging:stop",$.proxy(this.reset,this));var self=this;setTimeout((function(){self.el.trigger("sortable:create",self)})),this.observer=new SelectorObserver(this.el[0],this.opts.items,(function(){}),(function(){if(!(this===self.placeholder[0]||dragging.el&&this===dragging.el[0])){var item=$(this);item.css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),self.el.trigger("sortable:change",{item:item}),self.el.trigger("sortable:update",{item:item,index:-1})}}))},Sortable.prototype.destroy=function(){this.el.off(START_EVENT,this.opts.items,this.start).off("dragging:enter",this.opts.items,this.enter).off("dragging:diverted",this.opts.items,this.diverted).off("dragging:drop",this.opts.items,this.drop),this.el.off("dragging:enter",this.enter).off("dragging:diverted",this.diverted).off("dragging:drop",this.drop),this.observer.disconnect()},Sortable.prototype.enable=function(){this.opts.disabled=!1},Sortable.prototype.disable=function(){this.opts.disabled=!0},Sortable.prototype.activate=function(e){this.isEmpty=0===this.el.find(this.opts.items).length,this.accept=dragging.parent.id===this.id,!this.accept&&dragging.parent.opts.connectWith&&(this.accept=this.el.is(dragging.parent.opts.connectWith)),this.accept&&(this.accept=dragging.parent.id===this.id||"*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],dragging.el):dragging.el.is(this.opts.accept)),this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),trigger(this.el,"sortable:activate",e,{item:dragging.el})))},Sortable.prototype.reset=function(e){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),trigger(this.el,"sortable:deactivate",e,{item:dragging.el}),null!==this.index&&(trigger(this.el,"sortable:beforeStop",e,{item:dragging.el}),trigger(this.el,"sortable:stop",e,{item:dragging.el}),this.index=null))},Sortable.prototype.indexOf=function(el){return this.el.find(this.opts.items+", #"+this.placeholder.attr("id")).index(el)},Sortable.prototype.start=function(e){if(!this.opts.disabled&&!dragging.el){if("mousedown"===e.type&&1!==e.which)return!1;if(this.opts.cancel)for(var target=$(e.target);target[0]!==this.el[0];){if(target.is(this.opts.cancel))return;target=target.parent()}if(this.opts.handle){target=$(e.target);for(var isHandle=!1;target[0]!==this.el[0];){if(target.is(this.opts.handle)){isHandle=!0;break}target=target.parent()}if(!isHandle)return}if(e.stopPropagation(),e.preventDefault(),dragging.start(this,$(e.currentTarget),e),this.index=this.indexOf(dragging.el),dragging.el.before(dragging.placeholder=this.placeholder.show()),null!==this.index){var height=dragging.el.outerHeight?dragging.el.outerHeight():dragging.el.height();dragging.css("margin-bottom",-height)}this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(dragging.el.css("height"))),this.placeholder.width(parseFloat(dragging.el.css("width")))),dragging.adjustPlacement(e),trigger(this.el,"sortable:start",e,{item:dragging.el})}},Sortable.prototype.enter=function(e){if(this.accept&&!this.opts.disabled){e.stopPropagation();var child=e.currentTarget,isContainer=child===this.el[0];child!==this.placeholder[0]&&(child=$(child),isContainer&&!this.isEmpty&&this.placeholder.parent().length||(dragging.placeholder=this.placeholder,this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(dragging.el.css("height"))),this.placeholder.width(parseFloat(dragging.el.css("width")))),isContainer?(this.el.append(this.placeholder),this.el.trigger("sortable:change",{item:dragging.el})):this.diverted(e)))}},Sortable.prototype.diverted=function(e){if(this.accept&&!this.opts.disabled){e.stopPropagation();var child=$(e.currentTarget);child[0]===this.el[0]||(dragging.placeholder=this.placeholder,this.direction=this.indexOf(this.placeholder.show())<this.indexOf(child)?"down":"up",child["down"===this.direction?"after":"before"](this.placeholder),dragging.adjustPlacement(e),this.el.trigger("sortable:change",{item:dragging.el}))}},Sortable.prototype.drop=function(e){if(this.accept&&!this.opts.disabled&&(e.stopPropagation(),e.preventDefault(),dragging.el&&this.placeholder.parent().length)){trigger(this.el,"sortable:beforeStop",e,{item:dragging.el}),this.observer.disconnect();var handler,newIndex=this.indexOf(this.placeholder);newIndex>this.index&&newIndex--,handler=null===this.index?this.opts.receiveHandler:this.opts.updateHandler||this.opts.updatePosition;var el=dragging.el;"function"==typeof handler?handler.call(this.el,{item:dragging.el,index:newIndex}):(dragging.handle&&(el=dragging.el.clone()),el.insertBefore(this.placeholder)),null===this.index&&trigger(this.el,"sortable:receive",e,{item:el}),newIndex!==this.index&&this.el.trigger("sortable:update",{item:el,index:newIndex}),trigger(this.el,"sortable:stop",e,{item:el}),this.index=null,this.observer.observe(),dragging.stop(e)}},Sortable.prototype.toArray=function(opts){opts||(opts={});var attr=opts.attribute||"id",attrs=[];return this.el.find(this.opts.items).each((function(){attrs.push($(this).prop(attr))})),attrs},$.fn.draggable=generic(Draggable,"draggable",{cancel:"input, textarea, button, select, option",connectWith:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,clone:!1,cloneClass:"",scope:"default"}),$.fn.droppable=generic(Droppable,"droppable",{accept:"*",activeClass:"",disabled:!1,hoverClass:"",initialized:!1,scope:"default",receiveHandler:null}),$.fn.sortable=generic(Sortable,"sortable",{accept:"*",activeClass:"",cancel:"input, textarea, button, select, option, span.delete",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder",placeholderTag:null,updateHandler:null,receiveHandler:null})}(window.Zepto||window.jQuery),function(){var MutationObserver,Util,WeakMap,getComputedStyle,getComputedStyleRX,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};Util=function(){function Util(){}return Util.prototype.extend=function(custom,defaults){var key,value;for(key in defaults)value=defaults[key],null==custom[key]&&(custom[key]=value);return custom},Util.prototype.isMobile=function(agent){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(agent)},Util.prototype.createEvent=function(event,bubble,cancel,detail){var customEvent;return null==bubble&&(bubble=!1),null==cancel&&(cancel=!1),null==detail&&(detail=null),null!=document.createEvent?(customEvent=document.createEvent("CustomEvent")).initCustomEvent(event,bubble,cancel,detail):null!=document.createEventObject?(customEvent=document.createEventObject()).eventType=event:customEvent.eventName=event,customEvent},Util.prototype.emitEvent=function(elem,event){return null!=elem.dispatchEvent?elem.dispatchEvent(event):event in(null!=elem)?elem[event]():"on"+event in(null!=elem)?elem["on"+event]():void 0},Util.prototype.addEvent=function(elem,event,fn){return null!=elem.addEventListener?elem.addEventListener(event,fn,!1):null!=elem.attachEvent?elem.attachEvent("on"+event,fn):elem[event]=fn},Util.prototype.removeEvent=function(elem,event,fn){return null!=elem.removeEventListener?elem.removeEventListener(event,fn,!1):null!=elem.detachEvent?elem.detachEvent("on"+event,fn):delete elem[event]},Util.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},Util}(),WeakMap=this.WeakMap||this.MozWeakMap||(WeakMap=function(){function WeakMap(){this.keys=[],this.values=[]}return WeakMap.prototype.get=function(key){var i,j,len,ref;for(i=j=0,len=(ref=this.keys).length;j<len;i=++j)if(ref[i]===key)return this.values[i]},WeakMap.prototype.set=function(key,value){var i,j,len,ref;for(i=j=0,len=(ref=this.keys).length;j<len;i=++j)if(ref[i]===key)return void(this.values[i]=value);return this.keys.push(key),this.values.push(value)},WeakMap}()),MutationObserver=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(MutationObserver=function(){function MutationObserver(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return MutationObserver.notSupported=!0,MutationObserver.prototype.observe=function(){},MutationObserver}()),getComputedStyle=this.getComputedStyle||function(el,pseudo){return this.getPropertyValue=function(prop){var ref;return"float"===prop&&(prop="styleFloat"),getComputedStyleRX.test(prop)&&prop.replace(getComputedStyleRX,(function(_,_char){return _char.toUpperCase()})),(null!=(ref=el.currentStyle)?ref[prop]:void 0)||null},this},getComputedStyleRX=/(\-([a-z]){1})/g,this.WOW=function(){function WOW(options){null==options&&(options={}),this.scrollCallback=bind(this.scrollCallback,this),this.scrollHandler=bind(this.scrollHandler,this),this.resetAnimation=bind(this.resetAnimation,this),this.start=bind(this.start,this),this.scrolled=!0,this.config=this.util().extend(options,this.defaults),null!=options.scrollContainer&&(this.config.scrollContainer=document.querySelector(options.scrollContainer)),this.animationNameCache=new WeakMap,this.wowEvent=this.util().createEvent(this.config.boxClass)}return WOW.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},WOW.prototype.init=function(){var ref;return this.element=window.document.documentElement,"interactive"===(ref=document.readyState)||"complete"===ref?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},WOW.prototype.start=function(){var box,j,len,ref,_this;if(this.stopped=!1,this.boxes=function(){var j,len,ref,results;for(results=[],j=0,len=(ref=this.element.querySelectorAll("."+this.config.boxClass)).length;j<len;j++)box=ref[j],results.push(box);return results}.call(this),this.all=function(){var j,len,ref,results;for(results=[],j=0,len=(ref=this.boxes).length;j<len;j++)box=ref[j],results.push(box);return results}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(j=0,len=(ref=this.boxes).length;j<len;j++)box=ref[j],this.applyStyle(box,!0);if(this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new MutationObserver((_this=this,function(records){var k,len1,node,record,results;for(results=[],k=0,len1=records.length;k<len1;k++)record=records[k],results.push(function(){var l,len2,ref1,results1;for(results1=[],l=0,len2=(ref1=record.addedNodes||[]).length;l<len2;l++)node=ref1[l],results1.push(this.doSync(node));return results1}.call(_this));return results})).observe(document.body,{childList:!0,subtree:!0})},WOW.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},WOW.prototype.sync=function(element){if(MutationObserver.notSupported)return this.doSync(this.element)},WOW.prototype.doSync=function(element){var box,j,len,ref,results;if(null==element&&(element=this.element),1===element.nodeType){for(results=[],j=0,len=(ref=(element=element.parentNode||element).querySelectorAll("."+this.config.boxClass)).length;j<len;j++)box=ref[j],indexOf.call(this.all,box)<0?(this.boxes.push(box),this.all.push(box),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(box,!0),results.push(this.scrolled=!0)):results.push(void 0);return results}},WOW.prototype.show=function(box){return this.applyStyle(box),box.className=box.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(box),this.util().emitEvent(box,this.wowEvent),this.util().addEvent(box,"animationend",this.resetAnimation),this.util().addEvent(box,"oanimationend",this.resetAnimation),this.util().addEvent(box,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(box,"MSAnimationEnd",this.resetAnimation),box},WOW.prototype.applyStyle=function(box,hidden){var delay,duration,iteration,_this;return duration=box.getAttribute("data-wow-duration"),delay=box.getAttribute("data-wow-delay"),iteration=box.getAttribute("data-wow-iteration"),this.animate((_this=this,function(){return _this.customStyle(box,hidden,duration,delay,iteration)}))},WOW.prototype.animate="requestAnimationFrame"in window?function(callback){return window.requestAnimationFrame(callback)}:function(callback){return callback()},WOW.prototype.resetStyle=function(){var box,j,len,ref,results;for(results=[],j=0,len=(ref=this.boxes).length;j<len;j++)box=ref[j],results.push(box.style.visibility="visible");return results},WOW.prototype.resetAnimation=function(event){var target;if(event.type.toLowerCase().indexOf("animationend")>=0)return(target=event.target||event.srcElement).className=target.className.replace(this.config.animateClass,"").trim()},WOW.prototype.customStyle=function(box,hidden,duration,delay,iteration){return hidden&&this.cacheAnimationName(box),box.style.visibility=hidden?"hidden":"visible",duration&&this.vendorSet(box.style,{animationDuration:duration}),delay&&this.vendorSet(box.style,{animationDelay:delay}),iteration&&this.vendorSet(box.style,{animationIterationCount:iteration}),this.vendorSet(box.style,{animationName:hidden?"none":this.cachedAnimationName(box)}),box},WOW.prototype.vendors=["moz","webkit"],WOW.prototype.vendorSet=function(elem,properties){var name,results,value,vendor;for(name in results=[],properties)value=properties[name],elem[""+name]=value,results.push(function(){var j,len,ref,results1;for(results1=[],j=0,len=(ref=this.vendors).length;j<len;j++)vendor=ref[j],results1.push(elem[""+vendor+name.charAt(0).toUpperCase()+name.substr(1)]=value);return results1}.call(this));return results},WOW.prototype.vendorCSS=function(elem,property){var j,len,ref,result,style,vendor;for(result=(style=getComputedStyle(elem)).getPropertyCSSValue(property),j=0,len=(ref=this.vendors).length;j<len;j++)vendor=ref[j],result=result||style.getPropertyCSSValue("-"+vendor+"-"+property);return result},WOW.prototype.animationName=function(box){var animationName;try{animationName=this.vendorCSS(box,"animation-name").cssText}catch(error){animationName=getComputedStyle(box).getPropertyValue("animation-name")}return"none"===animationName?"":animationName},WOW.prototype.cacheAnimationName=function(box){return this.animationNameCache.set(box,this.animationName(box))},WOW.prototype.cachedAnimationName=function(box){return this.animationNameCache.get(box)},WOW.prototype.scrollHandler=function(){return this.scrolled=!0},WOW.prototype.scrollCallback=function(){var box;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var j,len,ref,results;for(results=[],j=0,len=(ref=this.boxes).length;j<len;j++)(box=ref[j])&&(this.isVisible(box)?this.show(box):results.push(box));return results}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},WOW.prototype.offsetTop=function(element){for(var top;void 0===element.offsetTop;)element=element.parentNode;for(top=element.offsetTop;element=element.offsetParent;)top+=element.offsetTop;return top},WOW.prototype.isVisible=function(box){var bottom,offset,top,viewBottom,viewTop;return offset=box.getAttribute("data-wow-offset")||this.config.offset,viewBottom=(viewTop=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset)+Math.min(this.element.clientHeight,this.util().innerHeight())-offset,bottom=(top=this.offsetTop(box))+box.clientHeight,top<=viewBottom&&bottom>=viewTop},WOW.prototype.util=function(){return null!=this._util?this._util:this._util=new Util},WOW.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},WOW}()}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var n=e.Cookies,r=e.Cookies=t();r.noConflict=function(){return e.Cookies=n,r}}())}(this,(function(){function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var t={read:function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};return function n(r,o){function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),n=r.write(n,t);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+c}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var c=n[i].split("="),u=c.slice(1).join("=");'"'===u[0]&&(u=u.slice(1,-1));try{var f=t.read(c[0]);if(o[f]=r.read(u,f),e===f)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){i(t,"",e({},n,{expires:-1}))},withAttributes:function(t){return n(this.converter,e({},this.attributes,t))},withConverter:function(t){return n(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(r)}})}(t,{path:"/"})})),
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Cropper=factory()}(this,(function(){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var IS_BROWSER="undefined"!=typeof window&&void 0!==window.document,WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=!(!IS_BROWSER||!WINDOW.document.documentElement)&&"ontouchstart"in WINDOW.document.documentElement,HAS_POINTER_EVENT=!!IS_BROWSER&&"PointerEvent"in WINDOW,CLASS_CROP="".concat("cropper","-crop"),CLASS_DISABLED="".concat("cropper","-disabled"),CLASS_HIDDEN="".concat("cropper","-hidden"),CLASS_HIDE="".concat("cropper","-hide"),CLASS_INVISIBLE="".concat("cropper","-invisible"),CLASS_MODAL="".concat("cropper","-modal"),CLASS_MOVE="".concat("cropper","-move"),DATA_ACTION="".concat("cropper","Action"),DATA_PREVIEW="".concat("cropper","Preview"),EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,DEFAULTS={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(value){return"number"==typeof value&&!isNaN(value)}var isPositiveNumber=function isPositiveNumber(value){return value>0&&value<1/0};function isUndefined(value){return void 0===value}function isObject(value){return"object"===_typeof(value)&&null!==value}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(value){if(!isObject(value))return!1;try{var _constructor=value.constructor,prototype=_constructor.prototype;return _constructor&&prototype&&hasOwnProperty.call(prototype,"isPrototypeOf")}catch(error){return!1}}function isFunction(value){return"function"==typeof value}var slice=Array.prototype.slice;function toArray(value){return Array.from?Array.from(value):slice.call(value)}function forEach(data,callback){return data&&isFunction(callback)&&(Array.isArray(data)||isNumber(data.length)?toArray(data).forEach((function(value,key){callback.call(data,value,key,data)})):isObject(data)&&Object.keys(data).forEach((function(key){callback.call(data,data[key],key,data)}))),data}var assign=Object.assign||function assign(target){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return isObject(target)&&args.length>0&&args.forEach((function(arg){isObject(arg)&&Object.keys(arg).forEach((function(key){target[key]=arg[key]}))})),target},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(value){var times=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return REGEXP_DECIMALS.test(value)?Math.round(value*times)/times:value}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(element,styles){var style=element.style;forEach(styles,(function(value,property){REGEXP_SUFFIX.test(property)&&isNumber(value)&&(value="".concat(value,"px")),style[property]=value}))}function addClass(element,value){if(value)if(isNumber(element.length))forEach(element,(function(elem){addClass(elem,value)}));else if(element.classList)element.classList.add(value);else{var className=element.className.trim();className?className.indexOf(value)<0&&(element.className="".concat(className," ").concat(value)):element.className=value}}function removeClass(element,value){value&&(isNumber(element.length)?forEach(element,(function(elem){removeClass(elem,value)})):element.classList?element.classList.remove(value):element.className.indexOf(value)>=0&&(element.className=element.className.replace(value,"")))}function toggleClass(element,value,added){value&&(isNumber(element.length)?forEach(element,(function(elem){toggleClass(elem,value,added)})):added?addClass(element,value):removeClass(element,value))}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(value){return value.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(element,name){return isObject(element[name])?element[name]:element.dataset?element.dataset[name]:element.getAttribute("data-".concat(toParamCase(name)))}function setData(element,name,data){isObject(data)?element[name]=data:element.dataset?element.dataset[name]=data:element.setAttribute("data-".concat(toParamCase(name)),data)}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var supported=!1;if(IS_BROWSER){var once=!1,listener=function listener(){},options=Object.defineProperty({},"once",{get:function get(){return supported=!0,once},set:function set(value){once=value}});WINDOW.addEventListener("test",listener,options),WINDOW.removeEventListener("test",listener,options)}return supported}();function removeListener(element,type,listener){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},handler=listener;type.trim().split(REGEXP_SPACES).forEach((function(event){if(!onceSupported){var listeners=element.listeners;listeners&&listeners[event]&&listeners[event][listener]&&(handler=listeners[event][listener],delete listeners[event][listener],0===Object.keys(listeners[event]).length&&delete listeners[event],0===Object.keys(listeners).length&&delete element.listeners)}element.removeEventListener(event,handler,options)}))}function addListener(element,type,listener){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_handler=listener;type.trim().split(REGEXP_SPACES).forEach((function(event){if(options.once&&!onceSupported){var _element$listeners=element.listeners,listeners=void 0===_element$listeners?{}:_element$listeners;_handler=function handler(){delete listeners[event][listener],element.removeEventListener(event,_handler,options);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];listener.apply(element,args)},listeners[event]||(listeners[event]={}),listeners[event][listener]&&element.removeEventListener(event,listeners[event][listener],options),listeners[event][listener]=_handler,element.listeners=listeners}element.addEventListener(event,_handler,options)}))}function dispatchEvent(element,type,data){var event;return isFunction(Event)&&isFunction(CustomEvent)?event=new CustomEvent(type,{detail:data,bubbles:!0,cancelable:!0}):(event=document.createEvent("CustomEvent")).initCustomEvent(type,!0,!0,data),element.dispatchEvent(event)}function getOffset(element){var box=element.getBoundingClientRect();return{left:box.left+(window.pageXOffset-document.documentElement.clientLeft),top:box.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(url){var parts=url.match(REGEXP_ORIGINS);return null!==parts&&(parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port)}function addTimestamp(url){var timestamp="timestamp=".concat((new Date).getTime());return url+(-1===url.indexOf("?")?"?":"&")+timestamp}function getTransforms(_ref){var rotate=_ref.rotate,scaleX=_ref.scaleX,scaleY=_ref.scaleY,translateX=_ref.translateX,translateY=_ref.translateY,values=[];isNumber(translateX)&&0!==translateX&&values.push("translateX(".concat(translateX,"px)")),isNumber(translateY)&&0!==translateY&&values.push("translateY(".concat(translateY,"px)")),isNumber(rotate)&&0!==rotate&&values.push("rotate(".concat(rotate,"deg)")),isNumber(scaleX)&&1!==scaleX&&values.push("scaleX(".concat(scaleX,")")),isNumber(scaleY)&&1!==scaleY&&values.push("scaleY(".concat(scaleY,")"));var transform=values.length?values.join(" "):"none";return{WebkitTransform:transform,msTransform:transform,transform:transform}}function getPointer(_ref2,endOnly){var pageX=_ref2.pageX,pageY=_ref2.pageY,end={endX:pageX,endY:pageY};return endOnly?end:_objectSpread2({startX:pageX,startY:pageY},end)}function getAdjustedSizes(_ref4){var aspectRatio=_ref4.aspectRatio,height=_ref4.height,width=_ref4.width,type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",isValidWidth=isPositiveNumber(width),isValidHeight=isPositiveNumber(height);if(isValidWidth&&isValidHeight){var adjustedWidth=height*aspectRatio;"contain"===type&&adjustedWidth>width||"cover"===type&&adjustedWidth<width?height=width/aspectRatio:width=height*aspectRatio}else isValidWidth?height=width/aspectRatio:isValidHeight&&(width=height*aspectRatio);return{width:width,height:height}}var fromCharCode=String.fromCharCode;var REGEXP_DATA_URL_HEAD=/^data:.*,/;function resetAndGetOrientation(arrayBuffer){var orientation,dataView=new DataView(arrayBuffer);try{var littleEndian,app1Start,ifdStart;if(255===dataView.getUint8(0)&&216===dataView.getUint8(1))for(var length=dataView.byteLength,offset=2;offset+1<length;){if(255===dataView.getUint8(offset)&&225===dataView.getUint8(offset+1)){app1Start=offset;break}offset+=1}if(app1Start){var tiffOffset=app1Start+10;if("Exif"===function getStringFromCharCode(dataView,start,length){var str="";length+=start;for(var i=start;i<length;i+=1)str+=fromCharCode(dataView.getUint8(i));return str}(dataView,app1Start+4,4)){var endianness=dataView.getUint16(tiffOffset);if(((littleEndian=18761===endianness)||19789===endianness)&&42===dataView.getUint16(tiffOffset+2,littleEndian)){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);firstIFDOffset>=8&&(ifdStart=tiffOffset+firstIFDOffset)}}}if(ifdStart){var _offset,i,_length=dataView.getUint16(ifdStart,littleEndian);for(i=0;i<_length;i+=1)if(_offset=ifdStart+12*i+2,274===dataView.getUint16(_offset,littleEndian)){_offset+=8,orientation=dataView.getUint16(_offset,littleEndian),dataView.setUint16(_offset,1,littleEndian);break}}}catch(error){orientation=1}return orientation}var render={render:function render(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function initContainer(){var element=this.element,options=this.options,container=this.container,cropper=this.cropper,minWidth=Number(options.minContainerWidth),minHeight=Number(options.minContainerHeight);addClass(cropper,CLASS_HIDDEN),removeClass(element,CLASS_HIDDEN);var containerData={width:Math.max(container.offsetWidth,minWidth>=0?minWidth:200),height:Math.max(container.offsetHeight,minHeight>=0?minHeight:100)};this.containerData=containerData,setStyle(cropper,{width:containerData.width,height:containerData.height}),addClass(element,CLASS_HIDDEN),removeClass(cropper,CLASS_HIDDEN)},initCanvas:function initCanvas(){var containerData=this.containerData,imageData=this.imageData,viewMode=this.options.viewMode,rotated=Math.abs(imageData.rotate)%180==90,naturalWidth=rotated?imageData.naturalHeight:imageData.naturalWidth,naturalHeight=rotated?imageData.naturalWidth:imageData.naturalHeight,aspectRatio=naturalWidth/naturalHeight,canvasWidth=containerData.width,canvasHeight=containerData.height;containerData.height*aspectRatio>containerData.width?3===viewMode?canvasWidth=containerData.height*aspectRatio:canvasHeight=containerData.width/aspectRatio:3===viewMode?canvasHeight=containerData.width/aspectRatio:canvasWidth=containerData.height*aspectRatio;var canvasData={aspectRatio:aspectRatio,naturalWidth:naturalWidth,naturalHeight:naturalHeight,width:canvasWidth,height:canvasHeight};this.canvasData=canvasData,this.limited=1===viewMode||2===viewMode,this.limitCanvas(!0,!0),canvasData.width=Math.min(Math.max(canvasData.width,canvasData.minWidth),canvasData.maxWidth),canvasData.height=Math.min(Math.max(canvasData.height,canvasData.minHeight),canvasData.maxHeight),canvasData.left=(containerData.width-canvasData.width)/2,canvasData.top=(containerData.height-canvasData.height)/2,canvasData.oldLeft=canvasData.left,canvasData.oldTop=canvasData.top,this.initialCanvasData=assign({},canvasData)},limitCanvas:function limitCanvas(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,viewMode=options.viewMode,aspectRatio=canvasData.aspectRatio,cropped=this.cropped&&cropBoxData;if(sizeLimited){var minCanvasWidth=Number(options.minCanvasWidth)||0,minCanvasHeight=Number(options.minCanvasHeight)||0;viewMode>1?(minCanvasWidth=Math.max(minCanvasWidth,containerData.width),minCanvasHeight=Math.max(minCanvasHeight,containerData.height),3===viewMode&&(minCanvasHeight*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio)):viewMode>0&&(minCanvasWidth?minCanvasWidth=Math.max(minCanvasWidth,cropped?cropBoxData.width:0):minCanvasHeight?minCanvasHeight=Math.max(minCanvasHeight,cropped?cropBoxData.height:0):cropped&&(minCanvasWidth=cropBoxData.width,(minCanvasHeight=cropBoxData.height)*aspectRatio>minCanvasWidth?minCanvasWidth=minCanvasHeight*aspectRatio:minCanvasHeight=minCanvasWidth/aspectRatio));var _getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minCanvasWidth,height:minCanvasHeight});minCanvasWidth=_getAdjustedSizes.width,minCanvasHeight=_getAdjustedSizes.height,canvasData.minWidth=minCanvasWidth,canvasData.minHeight=minCanvasHeight,canvasData.maxWidth=1/0,canvasData.maxHeight=1/0}if(positionLimited)if(viewMode>(cropped?0:1)){var newCanvasLeft=containerData.width-canvasData.width,newCanvasTop=containerData.height-canvasData.height;canvasData.minLeft=Math.min(0,newCanvasLeft),canvasData.minTop=Math.min(0,newCanvasTop),canvasData.maxLeft=Math.max(0,newCanvasLeft),canvasData.maxTop=Math.max(0,newCanvasTop),cropped&&this.limited&&(canvasData.minLeft=Math.min(cropBoxData.left,cropBoxData.left+(cropBoxData.width-canvasData.width)),canvasData.minTop=Math.min(cropBoxData.top,cropBoxData.top+(cropBoxData.height-canvasData.height)),canvasData.maxLeft=cropBoxData.left,canvasData.maxTop=cropBoxData.top,2===viewMode&&(canvasData.width>=containerData.width&&(canvasData.minLeft=Math.min(0,newCanvasLeft),canvasData.maxLeft=Math.max(0,newCanvasLeft)),canvasData.height>=containerData.height&&(canvasData.minTop=Math.min(0,newCanvasTop),canvasData.maxTop=Math.max(0,newCanvasTop))))}else canvasData.minLeft=-canvasData.width,canvasData.minTop=-canvasData.height,canvasData.maxLeft=containerData.width,canvasData.maxTop=containerData.height},renderCanvas:function renderCanvas(changed,transformed){var canvasData=this.canvasData,imageData=this.imageData;if(transformed){var _getRotatedSizes=function getRotatedSizes(_ref5){var width=_ref5.width,height=_ref5.height,degree=_ref5.degree;if(90==(degree=Math.abs(degree)%180))return{width:height,height:width};var arc=degree%90*Math.PI/180,sinArc=Math.sin(arc),cosArc=Math.cos(arc),newWidth=width*cosArc+height*sinArc,newHeight=width*sinArc+height*cosArc;return degree>90?{width:newHeight,height:newWidth}:{width:newWidth,height:newHeight}}({width:imageData.naturalWidth*Math.abs(imageData.scaleX||1),height:imageData.naturalHeight*Math.abs(imageData.scaleY||1),degree:imageData.rotate||0}),naturalWidth=_getRotatedSizes.width,naturalHeight=_getRotatedSizes.height,width=canvasData.width*(naturalWidth/canvasData.naturalWidth),height=canvasData.height*(naturalHeight/canvasData.naturalHeight);canvasData.left-=(width-canvasData.width)/2,canvasData.top-=(height-canvasData.height)/2,canvasData.width=width,canvasData.height=height,canvasData.aspectRatio=naturalWidth/naturalHeight,canvasData.naturalWidth=naturalWidth,canvasData.naturalHeight=naturalHeight,this.limitCanvas(!0,!1)}(canvasData.width>canvasData.maxWidth||canvasData.width<canvasData.minWidth)&&(canvasData.left=canvasData.oldLeft),(canvasData.height>canvasData.maxHeight||canvasData.height<canvasData.minHeight)&&(canvasData.top=canvasData.oldTop),canvasData.width=Math.min(Math.max(canvasData.width,canvasData.minWidth),canvasData.maxWidth),canvasData.height=Math.min(Math.max(canvasData.height,canvasData.minHeight),canvasData.maxHeight),this.limitCanvas(!1,!0),canvasData.left=Math.min(Math.max(canvasData.left,canvasData.minLeft),canvasData.maxLeft),canvasData.top=Math.min(Math.max(canvasData.top,canvasData.minTop),canvasData.maxTop),canvasData.oldLeft=canvasData.left,canvasData.oldTop=canvasData.top,setStyle(this.canvas,assign({width:canvasData.width,height:canvasData.height},getTransforms({translateX:canvasData.left,translateY:canvasData.top}))),this.renderImage(changed),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function renderImage(changed){var canvasData=this.canvasData,imageData=this.imageData,width=imageData.naturalWidth*(canvasData.width/canvasData.naturalWidth),height=imageData.naturalHeight*(canvasData.height/canvasData.naturalHeight);assign(imageData,{width:width,height:height,left:(canvasData.width-width)/2,top:(canvasData.height-height)/2}),setStyle(this.image,assign({width:imageData.width,height:imageData.height},getTransforms(assign({translateX:imageData.left,translateY:imageData.top},imageData)))),changed&&this.output()},initCropBox:function initCropBox(){var options=this.options,canvasData=this.canvasData,aspectRatio=options.aspectRatio||options.initialAspectRatio,autoCropArea=Number(options.autoCropArea)||.8,cropBoxData={width:canvasData.width,height:canvasData.height};aspectRatio&&(canvasData.height*aspectRatio>canvasData.width?cropBoxData.height=cropBoxData.width/aspectRatio:cropBoxData.width=cropBoxData.height*aspectRatio),this.cropBoxData=cropBoxData,this.limitCropBox(!0,!0),cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth),cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight),cropBoxData.width=Math.max(cropBoxData.minWidth,cropBoxData.width*autoCropArea),cropBoxData.height=Math.max(cropBoxData.minHeight,cropBoxData.height*autoCropArea),cropBoxData.left=canvasData.left+(canvasData.width-cropBoxData.width)/2,cropBoxData.top=canvasData.top+(canvasData.height-cropBoxData.height)/2,cropBoxData.oldLeft=cropBoxData.left,cropBoxData.oldTop=cropBoxData.top,this.initialCropBoxData=assign({},cropBoxData)},limitCropBox:function limitCropBox(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,limited=this.limited,aspectRatio=options.aspectRatio;if(sizeLimited){var minCropBoxWidth=Number(options.minCropBoxWidth)||0,minCropBoxHeight=Number(options.minCropBoxHeight)||0,maxCropBoxWidth=limited?Math.min(containerData.width,canvasData.width,canvasData.width+canvasData.left,containerData.width-canvasData.left):containerData.width,maxCropBoxHeight=limited?Math.min(containerData.height,canvasData.height,canvasData.height+canvasData.top,containerData.height-canvasData.top):containerData.height;minCropBoxWidth=Math.min(minCropBoxWidth,containerData.width),minCropBoxHeight=Math.min(minCropBoxHeight,containerData.height),aspectRatio&&(minCropBoxWidth&&minCropBoxHeight?minCropBoxHeight*aspectRatio>minCropBoxWidth?minCropBoxHeight=minCropBoxWidth/aspectRatio:minCropBoxWidth=minCropBoxHeight*aspectRatio:minCropBoxWidth?minCropBoxHeight=minCropBoxWidth/aspectRatio:minCropBoxHeight&&(minCropBoxWidth=minCropBoxHeight*aspectRatio),maxCropBoxHeight*aspectRatio>maxCropBoxWidth?maxCropBoxHeight=maxCropBoxWidth/aspectRatio:maxCropBoxWidth=maxCropBoxHeight*aspectRatio),cropBoxData.minWidth=Math.min(minCropBoxWidth,maxCropBoxWidth),cropBoxData.minHeight=Math.min(minCropBoxHeight,maxCropBoxHeight),cropBoxData.maxWidth=maxCropBoxWidth,cropBoxData.maxHeight=maxCropBoxHeight}positionLimited&&(limited?(cropBoxData.minLeft=Math.max(0,canvasData.left),cropBoxData.minTop=Math.max(0,canvasData.top),cropBoxData.maxLeft=Math.min(containerData.width,canvasData.left+canvasData.width)-cropBoxData.width,cropBoxData.maxTop=Math.min(containerData.height,canvasData.top+canvasData.height)-cropBoxData.height):(cropBoxData.minLeft=0,cropBoxData.minTop=0,cropBoxData.maxLeft=containerData.width-cropBoxData.width,cropBoxData.maxTop=containerData.height-cropBoxData.height))},renderCropBox:function renderCropBox(){var options=this.options,containerData=this.containerData,cropBoxData=this.cropBoxData;(cropBoxData.width>cropBoxData.maxWidth||cropBoxData.width<cropBoxData.minWidth)&&(cropBoxData.left=cropBoxData.oldLeft),(cropBoxData.height>cropBoxData.maxHeight||cropBoxData.height<cropBoxData.minHeight)&&(cropBoxData.top=cropBoxData.oldTop),cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth),cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight),this.limitCropBox(!1,!0),cropBoxData.left=Math.min(Math.max(cropBoxData.left,cropBoxData.minLeft),cropBoxData.maxLeft),cropBoxData.top=Math.min(Math.max(cropBoxData.top,cropBoxData.minTop),cropBoxData.maxTop),cropBoxData.oldLeft=cropBoxData.left,cropBoxData.oldTop=cropBoxData.top,options.movable&&options.cropBoxMovable&&setData(this.face,DATA_ACTION,cropBoxData.width>=containerData.width&&cropBoxData.height>=containerData.height?"move":"all"),setStyle(this.cropBox,assign({width:cropBoxData.width,height:cropBoxData.height},getTransforms({translateX:cropBoxData.left,translateY:cropBoxData.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function output(){this.preview(),dispatchEvent(this.element,"crop",this.getData())}},preview={initPreview:function initPreview(){var element=this.element,crossOrigin=this.crossOrigin,preview=this.options.preview,url=crossOrigin?this.crossOriginUrl:this.url,alt=element.alt||"The image to preview",image=document.createElement("img");if(crossOrigin&&(image.crossOrigin=crossOrigin),image.src=url,image.alt=alt,this.viewBox.appendChild(image),this.viewBoxImage=image,preview){var previews=preview;"string"==typeof preview?previews=element.ownerDocument.querySelectorAll(preview):preview.querySelector&&(previews=[preview]),this.previews=previews,forEach(previews,(function(el){var img=document.createElement("img");setData(el,DATA_PREVIEW,{width:el.offsetWidth,height:el.offsetHeight,html:el.innerHTML}),crossOrigin&&(img.crossOrigin=crossOrigin),img.src=url,img.alt=alt,img.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',el.innerHTML="",el.appendChild(img)}))}},resetPreview:function resetPreview(){forEach(this.previews,(function(element){var data=getData(element,DATA_PREVIEW);setStyle(element,{width:data.width,height:data.height}),element.innerHTML=data.html,function removeData(element,name){if(isObject(element[name]))try{delete element[name]}catch(error){element[name]=void 0}else if(element.dataset)try{delete element.dataset[name]}catch(error){element.dataset[name]=void 0}else element.removeAttribute("data-".concat(toParamCase(name)))}(element,DATA_PREVIEW)}))},preview:function preview(){var imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,cropBoxWidth=cropBoxData.width,cropBoxHeight=cropBoxData.height,width=imageData.width,height=imageData.height,left=cropBoxData.left-canvasData.left-imageData.left,top=cropBoxData.top-canvasData.top-imageData.top;this.cropped&&!this.disabled&&(setStyle(this.viewBoxImage,assign({width:width,height:height},getTransforms(assign({translateX:-left,translateY:-top},imageData)))),forEach(this.previews,(function(element){var data=getData(element,DATA_PREVIEW),originalWidth=data.width,originalHeight=data.height,newWidth=originalWidth,newHeight=originalHeight,ratio=1;cropBoxWidth&&(newHeight=cropBoxHeight*(ratio=originalWidth/cropBoxWidth)),cropBoxHeight&&newHeight>originalHeight&&(newWidth=cropBoxWidth*(ratio=originalHeight/cropBoxHeight),newHeight=originalHeight),setStyle(element,{width:newWidth,height:newHeight}),setStyle(element.getElementsByTagName("img")[0],assign({width:width*ratio,height:height*ratio},getTransforms(assign({translateX:-left*ratio,translateY:-top*ratio},imageData))))})))}},events={bind:function bind(){var element=this.element,options=this.options,cropper=this.cropper;isFunction(options.cropstart)&&addListener(element,"cropstart",options.cropstart),isFunction(options.cropmove)&&addListener(element,"cropmove",options.cropmove),isFunction(options.cropend)&&addListener(element,"cropend",options.cropend),isFunction(options.crop)&&addListener(element,"crop",options.crop),isFunction(options.zoom)&&addListener(element,"zoom",options.zoom),addListener(cropper,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),options.zoomable&&options.zoomOnWheel&&addListener(cropper,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),options.toggleDragModeOnDblclick&&addListener(cropper,"dblclick",this.onDblclick=this.dblclick.bind(this)),addListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),options.responsive&&addListener(window,"resize",this.onResize=this.resize.bind(this))},unbind:function unbind(){var element=this.element,options=this.options,cropper=this.cropper;isFunction(options.cropstart)&&removeListener(element,"cropstart",options.cropstart),isFunction(options.cropmove)&&removeListener(element,"cropmove",options.cropmove),isFunction(options.cropend)&&removeListener(element,"cropend",options.cropend),isFunction(options.crop)&&removeListener(element,"crop",options.crop),isFunction(options.zoom)&&removeListener(element,"zoom",options.zoom),removeListener(cropper,EVENT_POINTER_DOWN,this.onCropStart),options.zoomable&&options.zoomOnWheel&&removeListener(cropper,"wheel",this.onWheel,{passive:!1,capture:!0}),options.toggleDragModeOnDblclick&&removeListener(cropper,"dblclick",this.onDblclick),removeListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),options.responsive&&removeListener(window,"resize",this.onResize)}},handlers={resize:function resize(){if(!this.disabled){var canvasData,cropBoxData,options=this.options,container=this.container,containerData=this.containerData,ratioX=container.offsetWidth/containerData.width,ratioY=container.offsetHeight/containerData.height,ratio=Math.abs(ratioX-1)>Math.abs(ratioY-1)?ratioX:ratioY;if(1!==ratio)options.restore&&(canvasData=this.getCanvasData(),cropBoxData=this.getCropBoxData()),this.render(),options.restore&&(this.setCanvasData(forEach(canvasData,(function(n,i){canvasData[i]=n*ratio}))),this.setCropBoxData(forEach(cropBoxData,(function(n,i){cropBoxData[i]=n*ratio}))))}},dblclick:function dblclick(){this.disabled||"none"===this.options.dragMode||this.setDragMode(function hasClass(element,value){return element.classList?element.classList.contains(value):element.className.indexOf(value)>-1}(this.dragBox,CLASS_CROP)?"move":"crop")},wheel:function wheel(event){var _this=this,ratio=Number(this.options.wheelZoomRatio)||.1,delta=1;this.disabled||(event.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){_this.wheeling=!1}),50),event.deltaY?delta=event.deltaY>0?1:-1:event.wheelDelta?delta=-event.wheelDelta/120:event.detail&&(delta=event.detail>0?1:-1),this.zoom(-delta*ratio,event)))},cropStart:function cropStart(event){var buttons=event.buttons,button=event.button;if(!(this.disabled||("mousedown"===event.type||"pointerdown"===event.type&&"mouse"===event.pointerType)&&(isNumber(buttons)&&1!==buttons||isNumber(button)&&0!==button||event.ctrlKey))){var action,options=this.options,pointers=this.pointers;event.changedTouches?forEach(event.changedTouches,(function(touch){pointers[touch.identifier]=getPointer(touch)})):pointers[event.pointerId||0]=getPointer(event),action=Object.keys(pointers).length>1&&options.zoomable&&options.zoomOnTouch?"zoom":getData(event.target,DATA_ACTION),REGEXP_ACTIONS.test(action)&&!1!==dispatchEvent(this.element,"cropstart",{originalEvent:event,action:action})&&(event.preventDefault(),this.action=action,this.cropping=!1,"crop"===action&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function cropMove(event){var action=this.action;if(!this.disabled&&action){var pointers=this.pointers;event.preventDefault(),!1!==dispatchEvent(this.element,"cropmove",{originalEvent:event,action:action})&&(event.changedTouches?forEach(event.changedTouches,(function(touch){assign(pointers[touch.identifier]||{},getPointer(touch,!0))})):assign(pointers[event.pointerId||0]||{},getPointer(event,!0)),this.change(event))}},cropEnd:function cropEnd(event){if(!this.disabled){var action=this.action,pointers=this.pointers;event.changedTouches?forEach(event.changedTouches,(function(touch){delete pointers[touch.identifier]})):delete pointers[event.pointerId||0],action&&(event.preventDefault(),Object.keys(pointers).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,"cropend",{originalEvent:event,action:action}))}}},change={change:function change(event){var offset,options=this.options,canvasData=this.canvasData,containerData=this.containerData,cropBoxData=this.cropBoxData,pointers=this.pointers,action=this.action,aspectRatio=options.aspectRatio,left=cropBoxData.left,top=cropBoxData.top,width=cropBoxData.width,height=cropBoxData.height,right=left+width,bottom=top+height,minLeft=0,minTop=0,maxWidth=containerData.width,maxHeight=containerData.height,renderable=!0;!aspectRatio&&event.shiftKey&&(aspectRatio=width&&height?width/height:1),this.limited&&(minLeft=cropBoxData.minLeft,minTop=cropBoxData.minTop,maxWidth=minLeft+Math.min(containerData.width,canvasData.width,canvasData.left+canvasData.width),maxHeight=minTop+Math.min(containerData.height,canvasData.height,canvasData.top+canvasData.height));var pointer=pointers[Object.keys(pointers)[0]],range={x:pointer.endX-pointer.startX,y:pointer.endY-pointer.startY},check=function check(side){switch(side){case"e":right+range.x>maxWidth&&(range.x=maxWidth-right);break;case"w":left+range.x<minLeft&&(range.x=minLeft-left);break;case"n":top+range.y<minTop&&(range.y=minTop-top);break;case"s":bottom+range.y>maxHeight&&(range.y=maxHeight-bottom)}};switch(action){case"all":left+=range.x,top+=range.y;break;case"e":if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}check("e"),(width+=range.x)<0&&(action="w",left-=width=-width),aspectRatio&&(height=width/aspectRatio,top+=(cropBoxData.height-height)/2);break;case"n":if(range.y<=0&&(top<=minTop||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}check("n"),height-=range.y,top+=range.y,height<0&&(action="s",top-=height=-height),aspectRatio&&(width=height*aspectRatio,left+=(cropBoxData.width-width)/2);break;case"w":if(range.x<=0&&(left<=minLeft||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=!1;break}check("w"),width-=range.x,left+=range.x,width<0&&(action="e",left-=width=-width),aspectRatio&&(height=width/aspectRatio,top+=(cropBoxData.height-height)/2);break;case"s":if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=!1;break}check("s"),(height+=range.y)<0&&(action="n",top-=height=-height),aspectRatio&&(width=height*aspectRatio,left+=(cropBoxData.width-width)/2);break;case"ne":if(aspectRatio){if(range.y<=0&&(top<=minTop||right>=maxWidth)){renderable=!1;break}check("n"),height-=range.y,top+=range.y,width=height*aspectRatio}else check("n"),check("e"),range.x>=0?right<maxWidth?width+=range.x:range.y<=0&&top<=minTop&&(renderable=!1):width+=range.x,range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(action="sw",top-=height=-height,left-=width=-width):width<0?(action="nw",left-=width=-width):height<0&&(action="se",top-=height=-height);break;case"nw":if(aspectRatio){if(range.y<=0&&(top<=minTop||left<=minLeft)){renderable=!1;break}check("n"),height-=range.y,top+=range.y,width=height*aspectRatio,left+=cropBoxData.width-width}else check("n"),check("w"),range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y<=0&&top<=minTop&&(renderable=!1):(width-=range.x,left+=range.x),range.y<=0?top>minTop&&(height-=range.y,top+=range.y):(height-=range.y,top+=range.y);width<0&&height<0?(action="se",top-=height=-height,left-=width=-width):width<0?(action="ne",left-=width=-width):height<0&&(action="sw",top-=height=-height);break;case"sw":if(aspectRatio){if(range.x<=0&&(left<=minLeft||bottom>=maxHeight)){renderable=!1;break}check("w"),width-=range.x,left+=range.x,height=width/aspectRatio}else check("s"),check("w"),range.x<=0?left>minLeft?(width-=range.x,left+=range.x):range.y>=0&&bottom>=maxHeight&&(renderable=!1):(width-=range.x,left+=range.x),range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(action="ne",top-=height=-height,left-=width=-width):width<0?(action="se",left-=width=-width):height<0&&(action="nw",top-=height=-height);break;case"se":if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=!1;break}check("e"),height=(width+=range.x)/aspectRatio}else check("s"),check("e"),range.x>=0?right<maxWidth?width+=range.x:range.y>=0&&bottom>=maxHeight&&(renderable=!1):width+=range.x,range.y>=0?bottom<maxHeight&&(height+=range.y):height+=range.y;width<0&&height<0?(action="nw",top-=height=-height,left-=width=-width):width<0?(action="sw",left-=width=-width):height<0&&(action="ne",top-=height=-height);break;case"move":this.move(range.x,range.y),renderable=!1;break;case"zoom":this.zoom(function getMaxZoomRatio(pointers){var pointers2=_objectSpread2({},pointers),maxRatio=0;return forEach(pointers,(function(pointer,pointerId){delete pointers2[pointerId],forEach(pointers2,(function(pointer2){var x1=Math.abs(pointer.startX-pointer2.startX),y1=Math.abs(pointer.startY-pointer2.startY),x2=Math.abs(pointer.endX-pointer2.endX),y2=Math.abs(pointer.endY-pointer2.endY),z1=Math.sqrt(x1*x1+y1*y1),ratio=(Math.sqrt(x2*x2+y2*y2)-z1)/z1;Math.abs(ratio)>Math.abs(maxRatio)&&(maxRatio=ratio)}))})),maxRatio}(pointers),event),renderable=!1;break;case"crop":if(!range.x||!range.y){renderable=!1;break}offset=getOffset(this.cropper),left=pointer.startX-offset.left,top=pointer.startY-offset.top,width=cropBoxData.minWidth,height=cropBoxData.minHeight,range.x>0?action=range.y>0?"se":"ne":range.x<0&&(left-=width,action=range.y>0?"sw":"nw"),range.y<0&&(top-=height),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}renderable&&(cropBoxData.width=width,cropBoxData.height=height,cropBoxData.left=left,cropBoxData.top=top,this.action=action,this.renderCropBox()),forEach(pointers,(function(p){p.startX=p.endX,p.startY=p.endY}))}},methods={crop:function crop(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function reset(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function clear(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function replace(url){var hasSameSize=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&url&&(this.isImg&&(this.element.src=url),hasSameSize?(this.url=url,this.image.src=url,this.ready&&(this.viewBoxImage.src=url,forEach(this.previews,(function(element){element.getElementsByTagName("img")[0].src=url})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(url))),this},enable:function enable(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function disable(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function destroy(){var element=this.element;return element.cropper?(element.cropper=void 0,this.isImg&&this.replaced&&(element.src=this.originalUrl),this.uncreate(),this):this},move:function move(offsetX){var offsetY=arguments.length>1&&void 0!==arguments[1]?arguments[1]:offsetX,_this$canvasData=this.canvasData,left=_this$canvasData.left,top=_this$canvasData.top;return this.moveTo(isUndefined(offsetX)?offsetX:left+Number(offsetX),isUndefined(offsetY)?offsetY:top+Number(offsetY))},moveTo:function moveTo(x){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,canvasData=this.canvasData,changed=!1;return x=Number(x),y=Number(y),this.ready&&!this.disabled&&this.options.movable&&(isNumber(x)&&(canvasData.left=x,changed=!0),isNumber(y)&&(canvasData.top=y,changed=!0),changed&&this.renderCanvas(!0)),this},zoom:function zoom(ratio,_originalEvent){var canvasData=this.canvasData;return ratio=(ratio=Number(ratio))<0?1/(1-ratio):1+ratio,this.zoomTo(canvasData.width*ratio/canvasData.naturalWidth,null,_originalEvent)},zoomTo:function zoomTo(ratio,pivot,_originalEvent){var options=this.options,canvasData=this.canvasData,width=canvasData.width,height=canvasData.height,naturalWidth=canvasData.naturalWidth,naturalHeight=canvasData.naturalHeight;if((ratio=Number(ratio))>=0&&this.ready&&!this.disabled&&options.zoomable){var newWidth=naturalWidth*ratio,newHeight=naturalHeight*ratio;if(!1===dispatchEvent(this.element,"zoom",{ratio:ratio,oldRatio:width/naturalWidth,originalEvent:_originalEvent}))return this;if(_originalEvent){var pointers=this.pointers,offset=getOffset(this.cropper),center=pointers&&Object.keys(pointers).length?function getPointersCenter(pointers){var pageX=0,pageY=0,count=0;return forEach(pointers,(function(_ref3){var startX=_ref3.startX,startY=_ref3.startY;pageX+=startX,pageY+=startY,count+=1})),{pageX:pageX/=count,pageY:pageY/=count}}(pointers):{pageX:_originalEvent.pageX,pageY:_originalEvent.pageY};canvasData.left-=(newWidth-width)*((center.pageX-offset.left-canvasData.left)/width),canvasData.top-=(newHeight-height)*((center.pageY-offset.top-canvasData.top)/height)}else isPlainObject(pivot)&&isNumber(pivot.x)&&isNumber(pivot.y)?(canvasData.left-=(newWidth-width)*((pivot.x-canvasData.left)/width),canvasData.top-=(newHeight-height)*((pivot.y-canvasData.top)/height)):(canvasData.left-=(newWidth-width)/2,canvasData.top-=(newHeight-height)/2);canvasData.width=newWidth,canvasData.height=newHeight,this.renderCanvas(!0)}return this},rotate:function rotate(degree){return this.rotateTo((this.imageData.rotate||0)+Number(degree))},rotateTo:function rotateTo(degree){return isNumber(degree=Number(degree))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=degree%360,this.renderCanvas(!0,!0)),this},scaleX:function scaleX(_scaleX){var scaleY=this.imageData.scaleY;return this.scale(_scaleX,isNumber(scaleY)?scaleY:1)},scaleY:function scaleY(_scaleY){var scaleX=this.imageData.scaleX;return this.scale(isNumber(scaleX)?scaleX:1,_scaleY)},scale:function scale(scaleX){var scaleY=arguments.length>1&&void 0!==arguments[1]?arguments[1]:scaleX,imageData=this.imageData,transformed=!1;return scaleX=Number(scaleX),scaleY=Number(scaleY),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(scaleX)&&(imageData.scaleX=scaleX,transformed=!0),isNumber(scaleY)&&(imageData.scaleY=scaleY,transformed=!0),transformed&&this.renderCanvas(!0,!0)),this},getData:function getData(){var data,rounded=arguments.length>0&&void 0!==arguments[0]&&arguments[0],options=this.options,imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData;if(this.ready&&this.cropped){data={x:cropBoxData.left-canvasData.left,y:cropBoxData.top-canvasData.top,width:cropBoxData.width,height:cropBoxData.height};var ratio=imageData.width/imageData.naturalWidth;if(forEach(data,(function(n,i){data[i]=n/ratio})),rounded){var bottom=Math.round(data.y+data.height),right=Math.round(data.x+data.width);data.x=Math.round(data.x),data.y=Math.round(data.y),data.width=right-data.x,data.height=bottom-data.y}}else data={x:0,y:0,width:0,height:0};return options.rotatable&&(data.rotate=imageData.rotate||0),options.scalable&&(data.scaleX=imageData.scaleX||1,data.scaleY=imageData.scaleY||1),data},setData:function setData(data){var options=this.options,imageData=this.imageData,canvasData=this.canvasData,cropBoxData={};if(this.ready&&!this.disabled&&isPlainObject(data)){var transformed=!1;options.rotatable&&isNumber(data.rotate)&&data.rotate!==imageData.rotate&&(imageData.rotate=data.rotate,transformed=!0),options.scalable&&(isNumber(data.scaleX)&&data.scaleX!==imageData.scaleX&&(imageData.scaleX=data.scaleX,transformed=!0),isNumber(data.scaleY)&&data.scaleY!==imageData.scaleY&&(imageData.scaleY=data.scaleY,transformed=!0)),transformed&&this.renderCanvas(!0,!0);var ratio=imageData.width/imageData.naturalWidth;isNumber(data.x)&&(cropBoxData.left=data.x*ratio+canvasData.left),isNumber(data.y)&&(cropBoxData.top=data.y*ratio+canvasData.top),isNumber(data.width)&&(cropBoxData.width=data.width*ratio),isNumber(data.height)&&(cropBoxData.height=data.height*ratio),this.setCropBoxData(cropBoxData)}return this},getContainerData:function getContainerData(){return this.ready?assign({},this.containerData):{}},getImageData:function getImageData(){return this.sized?assign({},this.imageData):{}},getCanvasData:function getCanvasData(){var canvasData=this.canvasData,data={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){data[n]=canvasData[n]})),data},setCanvasData:function setCanvasData(data){var canvasData=this.canvasData,aspectRatio=canvasData.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(data)&&(isNumber(data.left)&&(canvasData.left=data.left),isNumber(data.top)&&(canvasData.top=data.top),isNumber(data.width)?(canvasData.width=data.width,canvasData.height=data.width/aspectRatio):isNumber(data.height)&&(canvasData.height=data.height,canvasData.width=data.height*aspectRatio),this.renderCanvas(!0)),this},getCropBoxData:function getCropBoxData(){var data,cropBoxData=this.cropBoxData;return this.ready&&this.cropped&&(data={left:cropBoxData.left,top:cropBoxData.top,width:cropBoxData.width,height:cropBoxData.height}),data||{}},setCropBoxData:function setCropBoxData(data){var widthChanged,heightChanged,cropBoxData=this.cropBoxData,aspectRatio=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(data)&&(isNumber(data.left)&&(cropBoxData.left=data.left),isNumber(data.top)&&(cropBoxData.top=data.top),isNumber(data.width)&&data.width!==cropBoxData.width&&(widthChanged=!0,cropBoxData.width=data.width),isNumber(data.height)&&data.height!==cropBoxData.height&&(heightChanged=!0,cropBoxData.height=data.height),aspectRatio&&(widthChanged?cropBoxData.height=cropBoxData.width/aspectRatio:heightChanged&&(cropBoxData.width=cropBoxData.height*aspectRatio)),this.renderCropBox()),this},getCroppedCanvas:function getCroppedCanvas(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var canvasData=this.canvasData,source=function getSourceCanvas(image,_ref6,_ref7,_ref8){var imageAspectRatio=_ref6.aspectRatio,imageNaturalWidth=_ref6.naturalWidth,imageNaturalHeight=_ref6.naturalHeight,_ref6$rotate=_ref6.rotate,rotate=void 0===_ref6$rotate?0:_ref6$rotate,_ref6$scaleX=_ref6.scaleX,scaleX=void 0===_ref6$scaleX?1:_ref6$scaleX,_ref6$scaleY=_ref6.scaleY,scaleY=void 0===_ref6$scaleY?1:_ref6$scaleY,aspectRatio=_ref7.aspectRatio,naturalWidth=_ref7.naturalWidth,naturalHeight=_ref7.naturalHeight,_ref8$fillColor=_ref8.fillColor,fillColor=void 0===_ref8$fillColor?"transparent":_ref8$fillColor,_ref8$imageSmoothingE=_ref8.imageSmoothingEnabled,imageSmoothingEnabled=void 0===_ref8$imageSmoothingE||_ref8$imageSmoothingE,_ref8$imageSmoothingQ=_ref8.imageSmoothingQuality,imageSmoothingQuality=void 0===_ref8$imageSmoothingQ?"low":_ref8$imageSmoothingQ,_ref8$maxWidth=_ref8.maxWidth,maxWidth=void 0===_ref8$maxWidth?1/0:_ref8$maxWidth,_ref8$maxHeight=_ref8.maxHeight,maxHeight=void 0===_ref8$maxHeight?1/0:_ref8$maxHeight,_ref8$minWidth=_ref8.minWidth,minWidth=void 0===_ref8$minWidth?0:_ref8$minWidth,_ref8$minHeight=_ref8.minHeight,minHeight=void 0===_ref8$minHeight?0:_ref8$minHeight,canvas=document.createElement("canvas"),context=canvas.getContext("2d"),maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:maxWidth,height:maxHeight}),minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minWidth,height:minHeight},"cover"),width=Math.min(maxSizes.width,Math.max(minSizes.width,naturalWidth)),height=Math.min(maxSizes.height,Math.max(minSizes.height,naturalHeight)),destMaxSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:maxWidth,height:maxHeight}),destMinSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:minWidth,height:minHeight},"cover"),destWidth=Math.min(destMaxSizes.width,Math.max(destMinSizes.width,imageNaturalWidth)),destHeight=Math.min(destMaxSizes.height,Math.max(destMinSizes.height,imageNaturalHeight)),params=[-destWidth/2,-destHeight/2,destWidth,destHeight];return canvas.width=normalizeDecimalNumber(width),canvas.height=normalizeDecimalNumber(height),context.fillStyle=fillColor,context.fillRect(0,0,width,height),context.save(),context.translate(width/2,height/2),context.rotate(rotate*Math.PI/180),context.scale(scaleX,scaleY),context.imageSmoothingEnabled=imageSmoothingEnabled,context.imageSmoothingQuality=imageSmoothingQuality,context.drawImage.apply(context,[image].concat(_toConsumableArray(params.map((function(param){return Math.floor(normalizeDecimalNumber(param))}))))),context.restore(),canvas}(this.image,this.imageData,canvasData,options);if(!this.cropped)return source;var _this$getData=this.getData(),initialX=_this$getData.x,initialY=_this$getData.y,initialWidth=_this$getData.width,initialHeight=_this$getData.height,ratio=source.width/Math.floor(canvasData.naturalWidth);1!==ratio&&(initialX*=ratio,initialY*=ratio,initialWidth*=ratio,initialHeight*=ratio);var aspectRatio=initialWidth/initialHeight,maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.maxWidth||1/0,height:options.maxHeight||1/0}),minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.minWidth||0,height:options.minHeight||0},"cover"),_getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.width||(1!==ratio?source.width:initialWidth),height:options.height||(1!==ratio?source.height:initialHeight)}),width=_getAdjustedSizes.width,height=_getAdjustedSizes.height;width=Math.min(maxSizes.width,Math.max(minSizes.width,width)),height=Math.min(maxSizes.height,Math.max(minSizes.height,height));var canvas=document.createElement("canvas"),context=canvas.getContext("2d");canvas.width=normalizeDecimalNumber(width),canvas.height=normalizeDecimalNumber(height),context.fillStyle=options.fillColor||"transparent",context.fillRect(0,0,width,height);var _options$imageSmoothi=options.imageSmoothingEnabled,imageSmoothingEnabled=void 0===_options$imageSmoothi||_options$imageSmoothi,imageSmoothingQuality=options.imageSmoothingQuality;context.imageSmoothingEnabled=imageSmoothingEnabled,imageSmoothingQuality&&(context.imageSmoothingQuality=imageSmoothingQuality);var srcWidth,srcHeight,dstX,dstY,dstWidth,dstHeight,sourceWidth=source.width,sourceHeight=source.height,srcX=initialX,srcY=initialY;srcX<=-initialWidth||srcX>sourceWidth?(srcX=0,srcWidth=0,dstX=0,dstWidth=0):srcX<=0?(dstX=-srcX,srcX=0,dstWidth=srcWidth=Math.min(sourceWidth,initialWidth+srcX)):srcX<=sourceWidth&&(dstX=0,dstWidth=srcWidth=Math.min(initialWidth,sourceWidth-srcX)),srcWidth<=0||srcY<=-initialHeight||srcY>sourceHeight?(srcY=0,srcHeight=0,dstY=0,dstHeight=0):srcY<=0?(dstY=-srcY,srcY=0,dstHeight=srcHeight=Math.min(sourceHeight,initialHeight+srcY)):srcY<=sourceHeight&&(dstY=0,dstHeight=srcHeight=Math.min(initialHeight,sourceHeight-srcY));var params=[srcX,srcY,srcWidth,srcHeight];if(dstWidth>0&&dstHeight>0){var scale=width/initialWidth;params.push(dstX*scale,dstY*scale,dstWidth*scale,dstHeight*scale)}return context.drawImage.apply(context,[source].concat(_toConsumableArray(params.map((function(param){return Math.floor(normalizeDecimalNumber(param))}))))),canvas},setAspectRatio:function setAspectRatio(aspectRatio){var options=this.options;return this.disabled||isUndefined(aspectRatio)||(options.aspectRatio=Math.max(0,aspectRatio)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function setDragMode(mode){var options=this.options,dragBox=this.dragBox,face=this.face;if(this.ready&&!this.disabled){var croppable="crop"===mode,movable=options.movable&&"move"===mode;mode=croppable||movable?mode:"none",options.dragMode=mode,setData(dragBox,DATA_ACTION,mode),toggleClass(dragBox,CLASS_CROP,croppable),toggleClass(dragBox,CLASS_MOVE,movable),options.cropBoxMovable||(setData(face,DATA_ACTION,mode),toggleClass(face,CLASS_CROP,croppable),toggleClass(face,CLASS_MOVE,movable))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function Cropper(element){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Cropper),!element||!REGEXP_TAG_NAME.test(element.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=element,this.options=assign({},DEFAULTS,isPlainObject(options)&&options),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Cropper,[{key:"init",value:function init(){var url,element=this.element,tagName=element.tagName.toLowerCase();if(!element.cropper){if(element.cropper=this,"img"===tagName){if(this.isImg=!0,url=element.getAttribute("src")||"",this.originalUrl=url,!url)return;url=element.src}else"canvas"===tagName&&window.HTMLCanvasElement&&(url=element.toDataURL());this.load(url)}}},{key:"load",value:function load(url){var _this=this;if(url){this.url=url,this.imageData={};var element=this.element,options=this.options;if(options.rotatable||options.scalable||(options.checkOrientation=!1),options.checkOrientation&&window.ArrayBuffer)if(REGEXP_DATA_URL.test(url))REGEXP_DATA_URL_JPEG.test(url)?this.read(function dataURLToArrayBuffer(dataURL){var base64=dataURL.replace(REGEXP_DATA_URL_HEAD,""),binary=atob(base64),arrayBuffer=new ArrayBuffer(binary.length),uint8=new Uint8Array(arrayBuffer);return forEach(uint8,(function(value,i){uint8[i]=binary.charCodeAt(i)})),arrayBuffer}(url)):this.clone();else{var xhr=new XMLHttpRequest,clone=this.clone.bind(this);this.reloading=!0,this.xhr=xhr,xhr.onabort=clone,xhr.onerror=clone,xhr.ontimeout=clone,xhr.onprogress=function(){"image/jpeg"!==xhr.getResponseHeader("content-type")&&xhr.abort()},xhr.onload=function(){_this.read(xhr.response)},xhr.onloadend=function(){_this.reloading=!1,_this.xhr=null},options.checkCrossOrigin&&isCrossOriginURL(url)&&element.crossOrigin&&(url=addTimestamp(url)),xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.withCredentials="use-credentials"===element.crossOrigin,xhr.send()}else this.clone()}}},{key:"read",value:function read(arrayBuffer){var options=this.options,imageData=this.imageData,orientation=resetAndGetOrientation(arrayBuffer),rotate=0,scaleX=1,scaleY=1;if(orientation>1){this.url=function arrayBufferToDataURL(arrayBuffer,mimeType){for(var chunks=[],uint8=new Uint8Array(arrayBuffer);uint8.length>0;)chunks.push(fromCharCode.apply(null,toArray(uint8.subarray(0,8192)))),uint8=uint8.subarray(8192);return"data:".concat(mimeType,";base64,").concat(btoa(chunks.join("")))}(arrayBuffer,"image/jpeg");var _parseOrientation=function parseOrientation(orientation){var rotate=0,scaleX=1,scaleY=1;switch(orientation){case 2:scaleX=-1;break;case 3:rotate=-180;break;case 4:scaleY=-1;break;case 5:rotate=90,scaleY=-1;break;case 6:rotate=90;break;case 7:rotate=90,scaleX=-1;break;case 8:rotate=-90}return{rotate:rotate,scaleX:scaleX,scaleY:scaleY}}(orientation);rotate=_parseOrientation.rotate,scaleX=_parseOrientation.scaleX,scaleY=_parseOrientation.scaleY}options.rotatable&&(imageData.rotate=rotate),options.scalable&&(imageData.scaleX=scaleX,imageData.scaleY=scaleY),this.clone()}},{key:"clone",value:function clone(){var element=this.element,url=this.url,crossOrigin=element.crossOrigin,crossOriginUrl=url;this.options.checkCrossOrigin&&isCrossOriginURL(url)&&(crossOrigin||(crossOrigin="anonymous"),crossOriginUrl=addTimestamp(url)),this.crossOrigin=crossOrigin,this.crossOriginUrl=crossOriginUrl;var image=document.createElement("img");crossOrigin&&(image.crossOrigin=crossOrigin),image.src=crossOriginUrl||url,image.alt=element.alt||"The image to crop",this.image=image,image.onload=this.start.bind(this),image.onerror=this.stop.bind(this),addClass(image,CLASS_HIDE),element.parentNode.insertBefore(image,element.nextSibling)}},{key:"start",value:function start(){var _this2=this,image=this.image;image.onload=null,image.onerror=null,this.sizing=!0;var isIOSWebKit=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),done=function done(naturalWidth,naturalHeight){assign(_this2.imageData,{naturalWidth:naturalWidth,naturalHeight:naturalHeight,aspectRatio:naturalWidth/naturalHeight}),_this2.initialImageData=assign({},_this2.imageData),_this2.sizing=!1,_this2.sized=!0,_this2.build()};if(!image.naturalWidth||isIOSWebKit){var sizingImage=document.createElement("img"),body=document.body||document.documentElement;this.sizingImage=sizingImage,sizingImage.onload=function(){done(sizingImage.width,sizingImage.height),isIOSWebKit||body.removeChild(sizingImage)},sizingImage.src=image.src,isIOSWebKit||(sizingImage.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",body.appendChild(sizingImage))}else done(image.naturalWidth,image.naturalHeight)}},{key:"stop",value:function stop(){var image=this.image;image.onload=null,image.onerror=null,image.parentNode.removeChild(image),this.image=null}},{key:"build",value:function build(){if(this.sized&&!this.ready){var element=this.element,options=this.options,image=this.image,container=element.parentNode,template=document.createElement("div");template.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var cropper=template.querySelector(".".concat("cropper","-container")),canvas=cropper.querySelector(".".concat("cropper","-canvas")),dragBox=cropper.querySelector(".".concat("cropper","-drag-box")),cropBox=cropper.querySelector(".".concat("cropper","-crop-box")),face=cropBox.querySelector(".".concat("cropper","-face"));this.container=container,this.cropper=cropper,this.canvas=canvas,this.dragBox=dragBox,this.cropBox=cropBox,this.viewBox=cropper.querySelector(".".concat("cropper","-view-box")),this.face=face,canvas.appendChild(image),addClass(element,CLASS_HIDDEN),container.insertBefore(cropper,element.nextSibling),this.isImg||removeClass(image,CLASS_HIDE),this.initPreview(),this.bind(),options.initialAspectRatio=Math.max(0,options.initialAspectRatio)||NaN,options.aspectRatio=Math.max(0,options.aspectRatio)||NaN,options.viewMode=Math.max(0,Math.min(3,Math.round(options.viewMode)))||0,addClass(cropBox,CLASS_HIDDEN),options.guides||addClass(cropBox.getElementsByClassName("".concat("cropper","-dashed")),CLASS_HIDDEN),options.center||addClass(cropBox.getElementsByClassName("".concat("cropper","-center")),CLASS_HIDDEN),options.background&&addClass(cropper,"".concat("cropper","-bg")),options.highlight||addClass(face,CLASS_INVISIBLE),options.cropBoxMovable&&(addClass(face,CLASS_MOVE),setData(face,DATA_ACTION,"all")),options.cropBoxResizable||(addClass(cropBox.getElementsByClassName("".concat("cropper","-line")),CLASS_HIDDEN),addClass(cropBox.getElementsByClassName("".concat("cropper","-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(options.dragMode),options.autoCrop&&this.crop(),this.setData(options.data),isFunction(options.ready)&&addListener(element,"ready",options.ready,{once:!0}),dispatchEvent(element,"ready")}}},{key:"unbuild",value:function unbuild(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN))}},{key:"uncreate",value:function uncreate(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function noConflict(){return window.Cropper=AnotherCropper,Cropper}},{key:"setDefaults",value:function setDefaults(options){assign(DEFAULTS,isPlainObject(options)&&options)}}]),Cropper}();return assign(Cropper.prototype,render,preview,events,handlers,change,methods),Cropper})),$.fn.ddrAnimInput=function(settings){var ops=$.extend({placeholder:"Не задано",display:"inline-block",index:"70%",left:10,top:20,color:"#a2a2a2",colorFocused:"#555",transition:"0.2",conditions:[],wrapCls:""},settings),thisInput=this,id="ddrAnimInput"+random(0,999),placeholder=ops.placeholder||$(thisInput).attr("placeholder"),inpHeight=$(thisInput).outerHeight(),inpHeightFocused=inpHeight/(100/(parseInt(ops.index)-parseInt(ops.top))),fontSize=parseInt($(thisInput).css("font-size")),fontSizeFocused=fontSize/(100/parseInt(ops.index));$(thisInput).attr("placeholder",""),$(thisInput).wrap('<div class="animinpit'+(ops.wrapCls?" "+ops.wrapCls:"")+'" id="'+id+'"></div>'),$("#"+id).css({position:"relative",display:ops.display}),$("#"+id).append('<span class="animinpit__placeholder">'+placeholder+"</span>"),$("#"+id).find(".animinpit__placeholder").css({position:"absolute",left:0,top:0,"pointer-events":"none",height:inpHeight+"px","line-height":inpHeight+"px",left:ops.left+"px",color:ops.color,transition:"all "+ops.transition+"s"}),$(thisInput).on("focus",(function(){$("#"+id).find(".animinpit__placeholder").css({height:inpHeightFocused+"px","line-height":inpHeightFocused+"px","font-size":fontSizeFocused+"px",top:-inpHeightFocused+"px",left:0,color:ops.colorFocused})})),$(thisInput).on("blur",(function(){""!=$(thisInput).val()&&-1===$.inArray($(thisInput).val(),ops.conditions)||($(thisInput).val(""),$("#"+id).find(".animinpit__placeholder").css({height:inpHeight+"px","line-height":inpHeight+"px","font-size":fontSize+"px",top:0,left:ops.left+"px",color:ops.color}))}))},$.fn.ddrAuth=function(o){var s=$.extend({onOpen:!1,onAuth:!1,onReg:!1,onReset:!1,width:400,winCls:!1,confirmAccount:"[confirmaccount]",logout:"[logout]",logoutCallback:!1,lang:{auth:"Авторизация",resetPass:"Сбросить пароль",reg:"Регистрация",setReg:"Зарегистрироваться",resetingPass:"Сброс пароля",login:"Войти",regText:"На указанный Вами E-mail отправлено письмо со ссылкой на подтверждение аккаунта!",resetText:"Ссылка на подтверждение сброса пароля была выслана на Вашу почту",error:"Ошибка!",alreadyAuth:"Вы уже авторизованы!",invalidOrExistantEmail:"Ошибка! неверный или несуществующий email",invalidEmail:"Ошибка! Неверный пароль",tryOver:"Попытки входа исчерпаны!",accountBanned:"Ваш аккаунт заблокирован!",close:"Закрыть",alreadyReg:"Ошибка! данный email уже зарегистрирован",errorAddingAccount:"Ошибка добавления аккаунта!",errorConfirmRegMessage:'<p class="info">Ошибка отправки письма с подтверждением регистрации!</p> <p class="info">Пожалуйста, подтвердите регистрацию в личном кабинете, разделе "личные данные"!</p>',errorNoDataToEmail:"Ошибка! Нетданных для отправки письма",errorSendingEmail:"Ошибка отправления письма!",logoutQuestion:"Вы действительно хотите выйти?",logout:"Выйти",cancel:"Отмена",systemError:"Системная ошибка!",confirmAccount:"Подтверждение аккаунта",confirmAccountSuccess:"Аккаунт успешно подтвержден!",errorNoConfirmCode:"Ошибка, не передан код подтверждения аккаунта!",errorConfirmLinkNoAddUp:"Ошибка, ссылка на подтверждения аккаунта не сходится!",passResetSuccess:"Пароль успешно сброшен!",errorNoRecoverCode:"Ошибка, не передан код восстановления пароля!",errorResetPassNoAddUp:"Ошибка, ссылка на сброс пароля не сходится!",authSuccess:"Вы успешно авторизовались!"}},o);function getRegData(thisSel){return!(!s.onReg||"function"!=typeof s.onReg)&&s.onReg(thisSel)}$(this).on(tapEvent,(function(){var thisSel=this;ddrPopUp({title:s.lang.auth+"|3",width:s.width,buttons:[{id:"reset",title:s.lang.resetPass,type:"link"},{id:"reg",title:s.lang.reg},{id:"auth",title:s.lang.login}],close:!1,closeByButton:!1,contentToCenter:!1,topClose:!0,winClass:s.winCls},(function(accountWin){accountWin.setData("accounts/auth_form",(function(){s.onOpen&&"function"==typeof s.onOpen&&s.onOpen(accountWin)})),$("#auth").on(tapEvent,(function(){$("#authForm").formSubmit({url:"accounts/auth",beforeSend:function(){accountWin.wait()},success:function(code){1==code?s.onAuth&&"function"==typeof s.onAuth?s.onAuth(thisSel):pageReload():0==code?notify(s.lang.error,"error"):-1==code?notify(s.lang.alreadyAuth,"error"):-2==code?$("#authForm").find('[name="email"]').errorLabel(s.lang.invalidOrExistantEmail):-3==code?$("#authForm").find('[name="password"]').errorLabel(s.lang.invalidEmail):-4==code?($("#authForm").find('[name="password"]').errorLabel(s.lang.invalidEmail),notify(s.lang.tryOver,"info")):-5==code&&(accountWin.setData('<p class="error">'+s.lang.accountBanned+"</p>",!1),accountWin.setButtons(!1,s.lang.close))},complete:function(){accountWin.wait(!1)}})})),$("#reg").on(tapEvent,(function(){var email=$("#authForm").find('[name="email"]').val(),rg=getRegData(thisSel);accountWin.setData("accounts/reg_form",{email:email},(function(){s.onOpen&&s.onOpen(accountWin)})),accountWin.setButtons([{id:"setReg",title:s.lang.setReg}]),accountWin.setTitle(s.lang.reg+"|3"),$("#setReg").on(tapEvent,(function(){$("#regForm").formSubmit({url:"accounts/reg",fields:{redirect:!(!rg||!rg.confirmRedirect)&&rg.confirmRedirect},before:function(){accountWin.wait()},success:function(code){1==code?(rg&&rg.callback&&"function"==typeof rg.callback&&rg.callback(),rg&&rg.regRedirect?location.href=rg.regRedirect:pageReload()):0==code?notify(s.lang.error,"error"):-1==code?$("#regForm").find('[name="email"]').errorLabel(s.lang.alreadyReg):-2==code?notify(s.lang.errorAddingAccount,"error"):-5==code&&accountWin.setData(s.lang.errorConfirmRegMessage,!1)},complete:function(){accountWin.wait(!1)}})}))})),$("#reset").on(tapEvent,(function(){var email=$("#authForm").find('[name="email"]').val();accountWin.setData("accounts/reset_form",{email:email}),accountWin.setButtons([{id:"setReset",title:s.lang.resetPass}]),accountWin.setTitle(s.lang.resetingPass+"|3"),$("#setReset").on(tapEvent,(function(){$("#resetForm").formSubmit({url:"accounts/reset",beforeSend:function(){accountWin.wait()},success:function(code){1==code?(accountWin.setData('<p class="info">'+s.lang.resetText+"</p>",!1),accountWin.removeButtons(),s.onReset&&"function"==typeof s.onReset&&s.onReset(thisSel)):0==code?notify(s.lang.error,"error"):-1==code?$("#regForm").find('[name="email"]').errorLabel(s.lang.alreadyReg):-2==code?notify(s.lang.errorNoDataToEmail,"error"):-3==code&&notify(s.lang.errorSendingEmail,"error")},complete:function(){accountWin.wait(!1)}})}))}))}))})),$(s.logout).on(tapEvent,(function(){ddrPopUp({title:"Выход|5",html:'<p class="info">'+s.lang.logoutQuestion+"</p>",width:400,buttons:[{id:"logout",title:s.lang.logout}],close:s.lang.cancel},(function(logoutWin){$("#logout").on(tapEvent,(function(){logoutWin.wait(),$.ajax({url:"/accounts/logout",method:"POST",dataType:"json",success:function(code){1==code?(s.logoutCallback&&"function"==typeof s.logoutCallback&&s.logoutCallback(),pageReload()):0==code&&notify(s.lang.error,"error")},error:function(e){notify(s.lang.systemError,"error"),showError(e)},complete:function(){logoutWin.wait(!1)}})}))}))})),$("body").on(tapEvent,s.confirmAccount,(function(){var rg=getRegData(),params=rg&&rg.regRedirect?{redirect:rg.regRedirect}:{};$.post("/accounts/set_email_to_confirm",params,(function(){ddrPopUp({title:s.lang.confirmAccount+"|5",width:500,html:'<p class="info">'+s.lang.regText+"</p>",close:s.lang.close,contentToCenter:!0},(function(ddrwin){}))}))})),1==($("#confirmWaitReg").val()||null)&&ddrPopUp({title:s.lang.confirmAccount+"|5",width:500,html:'<p class="info">'+s.lang.regText+"</p>",buttons:!1,disabledButtons:!1,closeByButton:!1,close:s.lang.close,contentToCenter:!0,topClose:!0,addClass:!1},(function(ddrwin){}));var confirmReg=$("#confirmReg").val()||null;1==confirmReg?notify(s.lang.confirmAccountSuccess,"success",10):0==confirmReg?notify(s.lang.errorNoConfirmCode,"error",10):(-1==confirmReg||-2==confirmReg)&&notify(s.lang.errorConfirmLinkNoAddUp,"error",10);var confirmReset=$("#confirmReset").val()||null;1==confirmReset?notify(s.lang.passResetSuccess,"success",10):0==confirmReset?notify(s.lang.errorNoRecoverCode,"error",10):(-1==confirmReset||-2==confirmReset)&&notify(s.lang.errorResetPassNoAddUp,"error",10),($("#confirmLogin").val()||null)&&notify(s.lang.authSuccess,"success",10)},$.fn.ddrCarousel=function(o){if("destroy"==o)return $(this).slick("unslick"),!1;var params,resizeTOut,visibleTOut,slidesToShow,selector=this,responsive=[],s=$.extend({arrowLeft:!1,arrowRight:!1,autoplay:!1,speed:3e3,loop:!1,pauseOnHover:!0,fade:!1,dotsSelector:!1,response:!1,accessBrPoints:!1,onInit:!1,beforeChange:!1,unitHeight:!1},o);function initArrows(){var allSlides=$(selector).find(".slick-slide").length;$(selector).find(".slick-slide.slick-active").length<allSlides?($(s.arrowLeft).addClass("visible"),$(s.arrowRight).addClass("visible")):($(s.arrowLeft).removeClass("visible"),$(s.arrowRight).removeClass("visible"))}if(s.response&&(slidesToShow=s.response[0],s.response.splice(0,1),$.each(s.response,(function(k,item){var i=item.split(":"),bpVal=$.isNumeric(i[0])?parseInt(i[0]):breakpoints[i[0]];responsive.push({breakpoint:bpVal,settings:{slidesToShow:parseInt(i[1])}})}))),$(selector).on("init",(function(slick){s.arrowLeft&&s.arrowRight&&initArrows(),"function"==typeof s.onInit&&s.onInit(slick)})),$(selector).on("setPosition",(function(){clearTimeout(visibleTOut),visibleTOut=setTimeout((function(){$(selector).hasClass("visible")||$(selector).addClass("visible")}),200),clearTimeout(resizeTOut),resizeTOut=setTimeout((function(){initArrows()}),50)})),params={infinite:s.loop,dots:!1,autoplay:s.autoplay,autoplaySpeed:s.speed,pauseOnHover:s.pauseOnHover,fade:s.fade,speed:200,draggable:!0,arrows:!1,mobileFirst:!0,slidesToScroll:1,slidesToShow:slidesToShow||1,responsive:responsive},s.loop||$(s.arrowLeft).addClass("disabled"),$(s.arrowLeft).on(tapEvent,(function(){$(selector).slick("slickPrev")})),$(s.arrowRight).on(tapEvent,(function(){$(selector).slick("slickNext")})),s.dotsSelector){for(var dotsItemClass=$(s.dotsSelector).attr("dots"),allSlides=$(selector).find(".slick-slide").length,i=($(selector).find(".slick-slide.slick-active").length,0);i<allSlides;i++)$(s.dotsSelector).append('<div class="'+dotsItemClass+(0==i?" active":"")+'"></div>');function _setDots(){var visibleSlides=$(selector).find(".slick-slide.slick-active").length,hideDots=visibleSlides-1;if(allSlides==visibleSlides)$(s.dotsSelector).css("display","none");else{$(s.dotsSelector).css("display","block"),$(s.dotsSelector).children().css("display","inline-block");for(var i=allSlides;i>0;i--)hideDots>0&&($(s.dotsSelector).children().eq(i-1).css("display","none"),hideDots--)}}$(s.dotsSelector).children("*").on(tapEvent,(function(){var thisIndex=$(this).index();$(selector).slick("slickGoTo",thisIndex)})),_setDots(),$(selector).on("setPosition",(function(){_setDots()}))}function _setBlockMaxHeight(cancel){if(null!=cancel&&!1===cancel)$(selector).find(".slick-track").children().css("min-height",0);else{var maxBlockHeight=0;$(selector).find(".slick-track").children().each((function(){var thisH=$(this).outerHeight();thisH>maxBlockHeight&&(maxBlockHeight=thisH)})),$(selector).find(".slick-track").children().css("min-height",maxBlockHeight)}}var firstInit=!0;if(s.unitHeight&&$(selector).on("setPosition",(function(){1==s.unitHeight||"number"==typeof s.unitHeight&&$(window).width()>=s.unitHeight?firstInit?setTimeout((function(){_setBlockMaxHeight(),firstInit=!1}),200):_setBlockMaxHeight():"number"==typeof s.unitHeight&&$(window).width()<s.unitHeight&&_setBlockMaxHeight(!1)})),$(selector).on("beforeChange",(function(event,slick,currentSlide,nextSlide){s.loop||(nextSlide==$(selector).find(".slick-slide").length-$(selector).find(".slick-slide.slick-active").length?$(s.arrowRight).addClass("disabled"):$(s.arrowRight).removeClass("disabled"),0==nextSlide?$(s.arrowLeft).addClass("disabled"):$(s.arrowLeft).removeClass("disabled")),s.dotsSelector&&($(s.dotsSelector).children("*").removeClass("active"),$(s.dotsSelector).children("*").eq(nextSlide).addClass("active")),"function"==typeof s.beforeChange&&s.beforeChange(currentSlide,nextSlide)})),s.accessBrPoints){var winW,edRTOut,initStat=!1,firstInitSlick=!0;function _enableDisable(){initStat=!1,winW=$(window).width(),$.each(s.accessBrPoints,(function(from,to){if(winW>=from&&winW<to)return initStat=!0,!0})),initStat&&!$(selector).hasClass("slick-initialized")?$(selector).slick(params):firstInitSlick||initStat||!$(selector).hasClass("slick-initialized")?!initStat&&firstInitSlick&&$(selector).addClass("visible"):$(selector).slick("unslick"),firstInitSlick=!1}_enableDisable(),$(window).resize((function(){clearTimeout(edRTOut),edRTOut=setTimeout((function(){_enableDisable()}),50)}))}else $(selector).slick(params)},$.fn.ddrChooseFile=function(){var reader,files,isMultiple,a=arguments,params="object"==typeof a[0]?a[0]:{},callback="function"==typeof a[0]?a[0]:void 0!==a[1]&&"function"==typeof a[1]&&a[1],thisInp=this,cbIters=0,complete=!1,data=[];p=$.extend({sync:!1},params),$(thisInp).on("change",(function(e){return isMultiple=tapEventInfo(e,{attribute:"multiple"}),"file"==e.currentTarget.type&&(!!(files=thisInp[0].files)&&void $.each(files,(function(k,file){(reader=new FileReader).onload=function(e){var type=e.target.result.split("/")[0].substr(5,e.target.result.split("/")[0].length),ext=file.name.split(".");p.sync?(data.push({name:file.name,ext:ext[ext.length-1],type:type,size:file.size,src:e.target.result}),files.length==++cbIters&&(data=isMultiple?data:data[0],callback&&"function"==typeof callback&&callback(data))):(complete=files.length==++cbIters,callback({name:file.name,ext:ext[ext.length-1],type:type,size:file.size,src:e.target.result},complete))},reader.readAsDataURL(file)})))}))},$.fn.ddrCRUD=function(settings,callback){if(0==this.length)return console.warn("ddrCRUD ошибка! Селектор: не найден!"),!1;var thisItemSelector,thisItemTag,thisItemClass,selector=this,obj={},ops=$.extend({addSelector:!1,autoAdd:!1,sortField:"sort",emptyList:'<p class="empty">Нет данных</p>',errorFields:!1,functions:!1,data:{getList:{},add:{},save:{},update:{},remove:{}},confirms:{getList:!1,add:!1,save:!1,update:!1,remove:!1},removeConfirm:!1,listDirection:"bottom",popup:!1},settings),functions="/"!=(functions="/"!=ops.functions.substr(-1)?ops.functions+"/":ops.functions).substr(0,1)?"/"+functions:functions,countCols=$(ops.emptyList).find("td").attr("colspan")||!1,waitHtml="";countCols&&(waitHtml+="<tr>",waitHtml+='<td colspan="'+countCols+'" class="center">',waitHtml+='<i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>',waitHtml+="</td>",waitHtml+="</tr>"),$(selector).html(waitHtml),getAjaxHtml(functions+"get",ops.data.getList,(function(html,getListStat){function addRow(){getAjaxHtml(functions+"add",ops.data.add,(function(html,stat){getListStat?"bottom"==ops.listDirection?(stat?$(selector).append(html):$(selector).append(ops.emptyList),$(selector).children().last().find("[save]").setAttrib("disabled"),"function"==typeof ops.confirms.add&&ops.confirms.add($(selector).children().last())):"top"==ops.listDirection&&(stat?$(selector).prepend(html):$(selector).prepend(ops.emptyList),$(selector).children().first().find("[save]").setAttrib("disabled"),"function"==typeof ops.confirms.add&&ops.confirms.add($(selector).children().first())):($(selector).children().first().remove(),thisItemSelector=$(html)[0],thisItemTag=thisItemSelector&&thisItemSelector.localName,thisItemClass="",stat?$(selector).html(html):$(selector).html(ops.emptyList),getListStat=!0,$(selector).children().first().find("[save]").setAttrib("disabled"),"function"==typeof ops.confirms.add&&ops.confirms.add($(selector).children().first()))}))}getListStat?$(selector).html(html):$(selector).html(ops.emptyList),function _getListActions(){setBaseScripts(),"function"==typeof ops.confirms.getList&&ops.confirms.getList()}(),$(selector).find("[update]").setAttrib("disabled"),getListStat&&(thisItemSelector=$(selector).children()[0],thisItemTag=thisItemSelector.localName,thisItemClass=""),$(selector).changeInputs((function(item,data){$(item).closest(thisItemTag+thisItemClass).find("[update]:disabled, [save]:disabled").removeAttrib("disabled")})),$(ops.addSelector).on(tapEvent,(function(){addRow()})),ops.autoAdd&&addRow(),$(selector).on(tapEvent,"[save]",(function(){var thisItemSelector=$(this).closest(thisItemTag+thisItemClass),thisItemSort=$(thisItemSelector).index(),fields={},fieldsToItem={};$(thisItemSelector).formSubmit({returnFields:function(f){$(thisItemSelector).find("input[name], textarea[name], select[name]").each((function(e){var name=$(this).attr("name"),val=-1!=["checkbox","radio"].indexOf(this.type)?$(this).is(":checked")?1:0:$(this).val(),text="select-one"==this.type?$(this).val():-1!=["checkbox","radio"].indexOf(this.type)?$(this).is(":checked")?1:0:$(this).val();fields[name]=val,fieldsToItem[name]=text})),ops.sortField&&(fields[ops.sortField]=thisItemSort,fieldsToItem[ops.sortField]=thisItemSort),getAjaxHtml(functions+"save",$.extend(ops.data.save,{fields:fields,fields_to_item:fieldsToItem}),(function(html,saveStat){saveStat?($(thisItemSelector).replaceWith((function(){return html.replace(/(update="\d+")/,"$1 disabled")})),notify("Запись успешно сохранена!"),$(thisItemSelector).find(".changed").removeClass("changed"),"function"==typeof ops.confirms.save&&ops.confirms.save(thisItemSelector,fieldsToItem)):notify("Не удалось сохранить запись!","error")}))},formError:function(errData){"function"==typeof ops.errorFields&&ops.errorFields(thisItemSelector,errData)}})})),$(selector).on(tapEvent,"[update]",(function(){var thisItem=this,thisId=$(thisItem).attr("update"),thisItemSelector=$(this).closest(thisItemTag+thisItemClass),fields=($(thisItemSelector).index(),{});$(thisItemSelector).formSubmit({returnFields:function(f){$.each(f,(function(k,i){fields[i.name]=i.value})),$.post(functions+"update",$.extend(ops.data.update,{id:thisId,fields:fields}),(function(response){response?(notify("Запись успешно обновлена!"),$(thisItem).setAttrib("disabled"),$(thisItemSelector).find(".changed").removeClass("changed"),"function"==typeof ops.confirms.update&&ops.confirms.update(thisItemSelector,fields)):notify("Не удалось сохранить запись!","error")}),"json").fail((function(e){notify("Системная ошибка!","error"),showError(e)}))},formError:function(errData){"function"==typeof ops.errorFields&&ops.errorFields(thisItemSelector,errData)}})})),$(selector).on(tapEvent,"[remove]",(function(){var thisId=$(this).attr("remove"),thisItem=$(this).closest(thisItemTag+thisItemClass);if(!thisId)return $(thisItem).remove(),notify("Запись удалена!"),0==$(selector).find(thisItemTag+thisItemClass).length&&($(selector).html(ops.emptyList),getListStat=!1),!0;function removeRow(){$.post(functions+"remove",$.extend(ops.data.remove,{id:thisId}),(function(response){response?("function"==typeof ops.confirms.remove&&ops.confirms.remove(thisItem),$(thisItem).remove(),notify("Запись удалена!"),0==$(selector).find(thisItemTag+thisItemClass).length&&($(selector).html(ops.emptyList),getListStat=!1)):notify("Ошибка удаления!","error")}),"json").fail((function(e){notify("Системная ошибка!","error"),showError(e)}))}ops.removeConfirm?ops.popup?ops.popup.dialog("<p>Вы действительно хотите удалить запись?</p>","Удалить","Отмена",(function(){ops.popup.wait(),removeRow(),ops.popup.wait(!1),ops.popup.dialog(!1)})):ddrPopUp({title:"Удалить запись|4",width:400,html:'<p class="center red strong">Вы действительно хотите удалить запись?</p>',buttons:[{id:"removeConfY",title:"Да"}],close:"Нет"},(function(removeConfYWin){$("#removeConfY").on(tapEvent,(function(){removeConfYWin.wait(),removeRow(),removeConfYWin.close()}))})):removeRow()})),obj.reset=function(){getAjaxHtml(functions+"get",ops.data.getList,(function(html,getListStat){getListStat?$(selector).html(html):$(selector).html(ops.emptyList),$(selector).find("[update]").setAttrib("disabled")}))},obj.search=function(field,search,place){getAjaxHtml(functions+"get",$.extend(ops.data.getList,{field:field,search:search,place:place}),(function(html,getListStat){getListStat?$(selector).html(html):$(selector).html(ops.emptyList),$(selector).find("[update]").setAttrib("disabled")}))},obj.where=function(where){getAjaxHtml(functions+"get",$.extend(ops.data.getList,{where:where}),(function(html,getListStat){getListStat?$(selector).html(html):$(selector).html(ops.emptyList),$(selector).find("[update]").setAttrib("disabled")}))}}),(function(){"function"==typeof callback&&callback(obj)}))},ddrDatePicker=function(startSelector,endSelector,range,destroy,callback){if(0!=$(startSelector).length){$(startSelector).prop("disabled",!1).attr("readonly",""),destroy&&$(startSelector).datepicker("destroy").attr("date","").val(""),null!=endSelector&&($(endSelector).prop("disabled",!0).attr("readonly",""),destroy&&$(endSelector).datepicker("destroy").attr("date","").val(""));var lang=$.cookie("language")||"ru",monthNamesShort={ru:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],en:["january","february","march","april","may","june","july","august","september","october","november","december"]},monthNames={ru:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],en:["january","february","march","april","may","june","july","august","september","october","november","december"]},dayNamesMin={ru:["вс","пн","вт","ср","чт","пт","сб"],en:["sun","mon","tue","wed","thu","fry","sat"]};$(startSelector).datepicker({dateFormat:"d M yy г.",yearRange:null!=endSelector?"1970:"+(new Date).getFullYear():"1970:+100",numberOfMonths:1,changeMonth:!0,changeYear:!0,monthNamesShort:monthNamesShort[lang],monthNames:monthNames[lang],dayNamesMin:dayNamesMin[lang],firstDay:1,minDate:new Date(2010,0,1,0,0,0),maxDate:null==endSelector?null:0,onSelect:function(stringDate,dateObj){var rangeDay=rangeMonth=rangeYaer=0,selectedDay=parseInt(dateObj.selectedDay),selectedMonth=parseInt(dateObj.selectedMonth),selectedYear=parseInt(dateObj.selectedYear),formDay="0"+selectedDay,formMonth="0"+(selectedMonth+1);if($(startSelector).attr("date",selectedYear+"-"+formMonth.substr(-2)+"-"+formDay.substr(-2)),callback&&"function"==typeof callback&&callback(dateObj),null!=endSelector){$(endSelector).prop("disabled",!1);var rng=null==range?["m",1]:range.split(":");"d"==rng[0]&&(rangeDay=parseInt(rng[1])),"m"==rng[0]&&(rangeMonth=parseInt(rng[1])),"y"==rng[0]&&(rangeYaer=parseInt(rng[1])),$(endSelector).datepicker("destroy").attr("date","").val("");var unixCurrentTime=(new Date).getTime(),unixMaxTime=new Date(selectedYear+rangeYaer,selectedMonth+rangeMonth,selectedDay+rangeDay,0,0,0).getTime();if(unixCurrentTime>unixMaxTime)var maxDate=new Date(selectedYear+rangeYaer,selectedMonth+rangeMonth,selectedDay+rangeDay,0,0,0);else if(unixCurrentTime<unixMaxTime)maxDate=0;$(endSelector).datepicker({dateFormat:"d M yy г.",yearRange:"1970:"+(new Date).getFullYear(),numberOfMonths:1,changeMonth:!0,changeYear:!0,monthNamesShort:monthNamesShort[lang],monthNames:monthNames[lang],dayNamesMin:dayNamesMin[lang],firstDay:1,minDate:new Date(selectedYear,selectedMonth,selectedDay+1,0,0,0),maxDate:maxDate,onSelect:function(stringDate,dateObj){var selectedDay=parseInt(dateObj.selectedDay),selectedMonth=parseInt(dateObj.selectedMonth),selectedYear=parseInt(dateObj.selectedYear),formDay="0"+selectedDay,formMonth="0"+(selectedMonth+1);$(endSelector).attr("date",selectedYear+"-"+formMonth.substr(-2)+"-"+formDay.substr(-2)),callback&&"function"==typeof callback&&callback(dateObj)}})}}})}else console.log("datePicker Ошибка! Неверно выбраны селекторы!")},getTimeFromSeconds=function(sec,temp){var weeks=days=hours=minutes=seconds=0;if(sec>=604800&&(weeks=Math.floor(sec/604800),sec%=604800),sec>=86400&&(days=Math.floor(sec/86400),sec%=86400),sec>=3600&&(hours=Math.floor(sec/3600),sec%=3600),sec>=60&&(minutes=Math.floor(sec/60)),seconds=sec%60,temp){var strTime="";return weeks&&(strTime+=weeks+" нед. "),days&&(strTime+=days+" дн. "),hours&&(strTime+=hours+" ч. "),minutes&&(strTime+=minutes+" мин. "),seconds&&(strTime+=seconds+" сек."),strTime}return{w:weeks,d:days,h:hours,m:minutes,s:seconds}},getDateFromUnix=function(unixTime,returnTime,monthFormat){var lang=$.cookie("language")||"ru",monthNames={ru:[["января","янв"],["февраля","фев"],["марта","мар"],["апреля","апр"],["мая","мая"],["июня","июн"],["июля","июл"],["августа","авг"],["сентября","сен"],["октября","окт"],["ноября","ноя"],["декабря","дек"]],en:[["january","jan"],["february","feb"],["march","mar"],["april","apr"],["may","may"],["june","jun"],["july","jul"],["august","aug"],["september","sep"],["october","oct"],["november","nov"],["december","dec"]]},date=(monthFormat=monthFormat||0,new Date(unixTime*(unixTime.toString().length>=13?1:1e3))),year=month=day=hours=minutes=seconds=0;return year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),hours="0"+date.getHours(),minutes="0"+date.getMinutes(),seconds="0"+date.getSeconds(),null==returnTime||1==returnTime?day+" "+monthNames[lang][month][monthFormat]+" "+year+" г. в "+hours.substr(-2)+":"+minutes.substr(-2):returnTime?void 0:day+" "+monthNames[lang][month][monthFormat]+" "+year+" г."},encodeTimePoint=function(point){var decodeData=point.split(":");if(-1!=["y","m","d","h","i","s"].indexOf(decodeData[0])){var res,poriodName=decodeData[0],periodCount=decodeData[1],lang=$.cookie("language")||"en",yN={ru:["год","года","лет"],en:["years","years","years"]},mN={ru:["месяц","месяца","месяцев"],en:["months","months","months"]},dN={ru:["день","дня","дней"],en:["days","days","days"]},hN={ru:["час","часа","часов"],en:["hours","hours","hours"]},iN={ru:["минута","минуты","минут"],en:["minutes","minutes","minutes"]},sN={ru:["секунда","секунды","секунд"],en:["seconds","seconds","seconds"]},perNames={y:{0:yN[lang][2],1:yN[lang][0],2:yN[lang][1],3:yN[lang][1],4:yN[lang][1],5:yN[lang][2],6:yN[lang][2],7:yN[lang][2],8:yN[lang][2],9:yN[lang][2],11:yN[lang][2],12:yN[lang][2],13:yN[lang][2],14:yN[lang][2]},m:{0:mN[lang][2],1:mN[lang][0],2:mN[lang][1],3:mN[lang][1],4:mN[lang][1],5:mN[lang][2],6:mN[lang][2],7:mN[lang][2],8:mN[lang][2],9:mN[lang][2],11:mN[lang][2],12:mN[lang][2],13:mN[lang][2],14:mN[lang][2]},d:{0:dN[lang][2],1:dN[lang][0],2:dN[lang][1],3:dN[lang][1],4:dN[lang][1],5:dN[lang][2],6:dN[lang][2],7:dN[lang][2],8:dN[lang][2],9:dN[lang][2],11:dN[lang][2],12:dN[lang][2],13:dN[lang][2],14:dN[lang][2]},h:{0:hN[lang][2],1:hN[lang][0],2:hN[lang][1],3:hN[lang][1],4:hN[lang][1],5:hN[lang][2],6:hN[lang][2],7:hN[lang][2],8:hN[lang][2],9:hN[lang][2],11:hN[lang][2],12:hN[lang][2],13:hN[lang][2],14:hN[lang][2]},i:{0:iN[lang][2],1:iN[lang][0],2:iN[lang][1],3:iN[lang][1],4:iN[lang][1],5:iN[lang][2],6:iN[lang][2],7:iN[lang][2],8:iN[lang][2],9:iN[lang][2],11:iN[lang][2],12:iN[lang][2],13:iN[lang][2],14:iN[lang][2]},s:{0:sN[lang][2],1:sN[lang][0],2:sN[lang][1],3:sN[lang][1],4:sN[lang][1],5:sN[lang][2],6:sN[lang][2],7:sN[lang][2],8:sN[lang][2],9:sN[lang][2],11:sN[lang][2],12:sN[lang][2],13:sN[lang][2],14:sN[lang][2]}};poriodName=(decodeData=point.split(":"))[0];return res=(periodCount=decodeData[1]).length>1?null!=perNames[poriodName][periodCount]?perNames[poriodName][periodCount]:null!=perNames[poriodName][periodCount.substr(-2)]?perNames[poriodName][periodCount.substr(-2)]:perNames[poriodName][periodCount.substr(-1)]:perNames[poriodName][periodCount.substr(-1)],[periodCount,res]}console.log("encodeTimePoint неверные данные")},ddrDragFiles=function(settings){var filesInput,o=$.extend({dropZone:!1,emptyDropHtml:"",fileTempHtml:'<i class="ddrdragfiles__loading fa fa-spinner fa-spin"></i>',dropItemHtml:"",itemsGridCls:"dcol-2 dcol-sm-3 dcol-md-4 dcol-lg-5 dcol-xl-7",alreadyFiles:!1,alreadyFilesParams:{},deleteAlready:!1,disabled:!1,accessTypes:!1,maxFileSize:2,nameLimit:!1,lang:"ru",onInit:!1,onDragHover:!1,onDragLeave:!1,onDrop:!1,onLoadItem:!1,onIsset:!1,filesData:!1},settings),filesBlock=o.filesBlock||"#filesBlock",allFiles={},alreadyFiles=[],issetAlreadyFiles=!1,alreadyFilesNames=[];if(firstDrop=!0,clearedDrop=!1,fileHtml='<div class="ddrdragfiles__file '+o.itemsGridCls+'"><div class="ddrdragfiles__fileblock">'+o.fileTempHtml+"</div></div>",emptyDropHtml='<div class="ddrdragfiles__empty">'+o.emptyDropHtml+"</div>",language={ru:{browserEror:"Ваш браузер не поддерживает супер современные технологии! Поэтому установите нормальный браузер. к примеру, Хром!",deleteFile:"Удалить файл",cannot:"Так нельзя!",fileFormat:"Формат файла «",fileSize:"Размер файла «",notLoad:"» не подходит для загрузки!",moreMaxSize:"» превышает максимально разрешенный в ",notFitAndSise:"» не подходит для загрузки и превышает максимально разрешенный размер в ",mb:"мб!"},en:{browserEror:"Your browser doesn`t support super modern technologies! So install a normal browser. for example, Chrome!",deleteFile:"Delete the file",cannot:"You can`t do that!",fileFormat:"File format «",fileSize:"File size «",notLoad:"» not suitable for downloading!",moreMaxSize:"» exceeds the maximum allowed in ",notFitAndSise:"» not suitable for loading and exceeds the maximum allowed size in ",mb:"mb!"}},void 0===window.FileReader?($(o.dropZone).text(language[o.lang].browserEror),$(o.dropZone).addClass("error")):($(o.dropZone).addClass("ddrdragfiles__dropzone"),$(o.dropZone).append('<div class="drow dgutter-5 dgutter-sm-10 dgutter-ml-15 ddrdragfiles__files" id="'+filesBlock.slice(1)+'"></div>'),filesInput="filesInput"+o.dropZone.slice(1),$(o.dropZone).after('<input type="file" class="ddrdragfiles__finput" id="'+filesInput+'" multiple />'),$(o.dropZone).attr("for",filesInput)),!1!==o.alreadyFiles){if("object"==typeof o.alreadyFiles&&o.alreadyFiles.length)getAlReadyFiles(o.alreadyFiles);else if("string"==typeof o.alreadyFiles){var url="/"!=o.alreadyFiles.substr(0,1)&&"http://"!=o.alreadyFiles.substr(0,7)&&"https://"!=o.alreadyFiles.substr(0,7)?"/"+o.alreadyFiles:o.alreadyFiles;$.post(url,o.alreadyFilesParams,(function(dataFiles){getAlReadyFiles(dataFiles)}),"json")}}else $(o.dropZone).addClass("ddrdragfiles__dropzone_empty"),$(o.dropZone).append(emptyDropHtml),null!=o.onInit&&"function"==typeof o.onInit&&o.onInit();function getAlReadyFiles(dataFiles){var fLength=dataFiles.length||Object.keys(dataFiles).length;if(dataFiles&&fLength){$.each(dataFiles,(function(k,file){var alreadyFileHtml="";alreadyFileHtml+='<div class="ddrdragfiles__file ddrdragfiles__file_already '+o.itemsGridCls+'">',alreadyFileHtml+='<div class="ddrdragfiles__fileblock'+(file.checked?" ddrdragfiles__fileblock_checked":"")+'" fileid="'+file.id+'" style="background-image: url(\'/public/images/compare/thumbs/'+file.filename+"')\">",o.disabled||(alreadyFileHtml+='<i class="ddrdragfiles__remove fa fa-trash" removealireadyfile="'+file.id+'" title="'+language[o.lang].deleteFile+'"></i>'),alreadyFileHtml+='<span class="ddrdragfiles__filename" contenteditable>'+getFileName(file.name)+"</span>",alreadyFileHtml+="</div>",alreadyFileHtml+="</div>",$(filesBlock).append(alreadyFileHtml),alreadyFilesNames.push(file.name)}));var dzHtml=$(o.dropZone).html(),dzId=o.dropZone;$(o.dropZone).replaceWith('<label class="ddrdragfiles__dropzone ddrdragfiles__dropzone_has">'+dzHtml+"</label>"),o.disabled||$(filesBlock).append('<div class="'+o.itemsGridCls+'" id="'+dzId.slice(1)+'"><label class="ddrdragfiles__dropitem" for="'+filesInput+'">'+o.dropItemHtml+"</label></div>"),o.dropZone=dzId,disableDrop(),alreadyFiles=dataFiles,issetAlreadyFiles=!0,null!=o.onInit&&"function"==typeof o.onInit&&o.onInit()}else $(o.dropZone).addClass("ddrdragfiles__dropzone_empty"),$(o.dropZone).append(emptyDropHtml)}function disableDrop(){$(".ddrdragfiles__dropzone").disableDrop(["ddrdragfiles__dropitem"],(function(elem){$(elem).hasClass("ddrdragfiles__dropzone")&&notify(language[o.lang].cannot,"error")}))}function getFiles(event){var files,reader,counter,iter,lastIter,filesToServer=[],countImages=$(filesBlock).children("div.ddrdragfiles__file:not(.ddrdragfiles__file_already)").length,gettingFiles=!1;if($(o.dropZone).removeClass("ddrdragfiles__dropzone_error"),null!=event.originalEvent.dataTransfer?files=event.originalEvent.dataTransfer.files:null!=event.dataTransfer?files=event.dataTransfer.files:null!=event.currentTarget.files?files=event.currentTarget.files:$(o.dropZone).addClass("ddrdragfiles__dropzone_error"),o.accessTypes){var fArray,fBuffer=[];fArray=Array.from(files),$.each(fArray,(function(k,file){var stat=!0;!1===hasIn(o.accessTypes,file.type)&&file.size>1048576*o.maxFileSize&&(notify(language[o.lang].fileFormat+file.name+language[o.lang].notFitAndSise+o.maxFileSize+language[o.lang].mb,"error",15),stat=!1),stat&&!1===hasIn(o.accessTypes,file.type)&&(notify(language[o.lang].fileFormat+file.name+language[o.lang].notLoad,"error",15),stat=!1),stat&&file.size>1048576*o.maxFileSize&&(notify(language[o.lang].fileSize+file.name+language[o.lang].moreMaxSize+o.maxFileSize+"мб!","error",15),stat=!1),stat&&fBuffer.push(file)})),files=fBuffer}counter=files.length,lastIter=(lastIter=Object.keys(allFiles)).length?parseInt(lastIter[lastIter.length-1]):0;var choosedFiles=[],minusCounter=0,issetFiles=[],filesIndexes=[];Object.values(allFiles).map((function(file,index){choosedFiles.push(file.name+"_"+file.size)}));for(var i=0;i<counter;i++)!1!==hasIn(o.accessTypes,files[i].type)&&(gettingFiles=!0,-1==choosedFiles.indexOf(files[i].name+"_"+files[i].size)&&-1==alreadyFilesNames.indexOf(getFileName(files[i].name))?(firstDrop&&!issetAlreadyFiles||clearedDrop?($(filesBlock).append(fileHtml),$(".ddrdragfiles__empty").remove()):$(o.dropZone).before(fileHtml),filesIndexes.push(i)):(issetFiles.push(files[i]),minusCounter++));counter-=minusCounter,issetFiles.length&&null!=o.onIsset&&"function"==typeof o.onIsset&&o.onIsset(issetFiles);var fIterator=0;if(function loadfile(){if(0==counter)return null!=o.done&&"function"==typeof o.done&&o.done(allFiles),document.getElementById(filesInput).value="",!1;iter=filesIndexes.length-counter;var globCount=lastIter+iter+1;!1===hasIn(o.accessTypes,files[filesIndexes[fIterator]].type)?(counter--,fIterator++,loadfile()):new Compressor(files[filesIndexes[fIterator]],{quality:.6,mimeType:files[filesIndexes[fIterator]].type,maxWidth:160,maxHeight:160,drew:function(){},beforeDraw:function(){},success:function(result){(reader=new FileReader).onload=function(re){var thisFile=$(filesBlock).children("div.ddrdragfiles__file:not(.ddrdragfiles__file_already)").eq(countImages+iter),replaceFilehtml='<div class="ddrdragfiles__file '+o.itemsGridCls+'">';replaceFilehtml+='<div class="ddrdragfiles__fileblock" style="background-image: url(\''+re.target.result+"')\">",replaceFilehtml+='<i class="ddrdragfiles__remove fa fa-trash" removeloadedfile="'+globCount+'" title="'+language[o.lang].deleteFile+'"></i>',replaceFilehtml+='<span class="ddrdragfiles__filename" contenteditable>'+getFileName(files[filesIndexes[fIterator]].name,1,o.nameLimit)+"</span>",replaceFilehtml+="</div>",replaceFilehtml+="</div>",$(thisFile).replaceWith(replaceFilehtml),null!=o.onLoadItem&&"function"==typeof o.onLoadItem&&o.onLoadItem(files[filesIndexes[fIterator]],countImages+iter,globCount),counter--,fIterator++,loadfile()},allFiles[globCount]=files[filesIndexes[fIterator]],filesToServer=Object.values(allFiles),reader.readAsDataURL(result),reader.onloadend=function(){null!=o.filesData&&"function"==typeof o.filesData&&o.filesData(filesToServer)}},error:function(err){console.log(err.message)}})}(),gettingFiles&&(firstDrop&&!issetAlreadyFiles||clearedDrop)){var dzHtml=$(o.dropZone).html(),dzId=o.dropZone;$(o.dropZone).replaceWith('<label class="ddrdragfiles__dropzone ddrdragfiles__dropzone_has">'+dzHtml+"</label>"),$(filesBlock).append('<div class="'+o.itemsGridCls+'" id="'+dzId.slice(1)+'"><label class="ddrdragfiles__dropitem" for="'+filesInput+'">'+o.dropItemHtml+"</label></div>"),o.dropZone=dzId,firstDrop=!1,clearedDrop=!1,disableDrop()}null!=o.onDrop&&"function"==typeof o.onDrop&&o.onDrop(o.dropZone,countImages,lastIter,files)}function clearDrop(){$(".ddrdragfiles__dropzone").replaceWith('<label id="'+o.dropZone.slice(1)+'" class="ddrdragfiles__dropzone ddrdragfiles__dropzone_empty" for="'+filesInput+'"><div id="'+filesBlock.slice(1)+'" class="drow dgutter-5 dgutter-sm-10 dgutter-ml-15 ddrdragfiles__files"></div>'+emptyDropHtml+"</label>"),firstDrop=!0,clearedDrop=!0}return $("body").off("dragover",o.dropZone).on("dragover",o.dropZone,(function(e){return null!=o.onDragHover&&"function"==typeof o.onDragHover&&o.onDragHover(e),$(this).children("label").length?$(this).children("label").addClass("ddrdragfiles__dropitem_hover"):$(this).addClass("ddrdragfiles__dropzone_hover"),!1})),$("body").off("dragleave",o.dropZone).on("dragleave",o.dropZone,(function(e){return null!=o.onDragLeave&&"function"==typeof o.onDragLeave&&o.onDragLeave(e),$(this).children("label").length?$(this).children("label").removeClass("ddrdragfiles__dropitem_hover"):$(this).removeClass("ddrdragfiles__dropzone_hover"),!1})),o.disabled?$(".ddrdragfiles__dropzone").disableDrop():($("body").off("change","#"+filesInput).on("change","#"+filesInput,(function(e){e.preventDefault(),$(".ddrdragfiles__dropzone").addClass("ddrdragfiles__dropzone_drop"),$(this).removeClass("ddrdragfiles__dropzone_hover"),getFiles(e)})),$("body").off("drop",o.dropZone).on("drop",o.dropZone,(function(e){e.preventDefault(),e.stopPropagation(),$(".ddrdragfiles__dropzone_error").removeClass("ddrdragfiles__dropzone_error"),$(".ddrdragfiles__dropzone").addClass("ddrdragfiles__dropzone_drop"),$(this).removeClass("ddrdragfiles__dropzone_hover"),getFiles(e)})),$("body").off(tapEvent,o.dropZone).on(tapEvent,o.dropZone,(function(e){$(".ddrdragfiles__dropzone_error").removeClass("ddrdragfiles__dropzone_error")}))),$("body").on(tapEvent,"[removeloadedfile]",(function(e){e.preventDefault();var thisIndex=$(this).attr("removeloadedfile");$(this).closest(".ddrdragfiles__file").remove(),delete allFiles[thisIndex],filesToServer=Object.values(allFiles),0==filesToServer.length&&(document.getElementById(filesInput).value=""),0==$(filesBlock).children("div.ddrdragfiles__file").length&&clearDrop(),null!=o.filesData&&"function"==typeof o.filesData&&o.filesData(filesToServer)})),$("body").on(tapEvent,"[removealireadyfile]",(function(e){e.preventDefault();var thisId=$(this).attr("removealireadyfile");$(this).closest(".ddrdragfiles__file_already").remove();for(var i=0;i<alreadyFilesNames.length;i++)alreadyFiles[i].id==thisId&&alreadyFilesNames.splice(i,1);0==$(filesBlock).children("div.ddrdragfiles__file").length&&(console.log("clearDrop"),clearDrop()),null!=o.deleteAlready&&"function"==typeof o.deleteAlready&&o.deleteAlready(thisId)})),{clear:function(){allFiles={},alreadyFiles=[],issetAlreadyFiles=!1,alreadyFilesNames=[],firstDrop=!0,clearedDrop=!0,clearDrop(),console.log("function clear")}}},$.fn.ddrFloatingBlock=function(space){let setParams,scrTop,startScrSpace,scrPos,scrSpace,rsTOut,sp=space||0,block=this,blockWidth=0,parentWidth=0,blockHeight=0,blockPos=0,winWidth=0,winHeight=0;(setParams=function(){blockWidth=$(block).width(),blockHeight=$(block).outerHeight(),blockPos=$(block).offset().top,parentWidth=$(block).parent().width(),winWidth=$(window).width(),winHeight=$(window).height(),startScrSpace=-(blockHeight-winHeight+sp),scrPos=$(window).scrollTop(),scrSpace=-(blockHeight-winHeight+sp)})(),$(window).resize((function(){clearTimeout(rsTOut),rsTOut=setTimeout((function(){setParams()}),100)})),$(block).css("top",scrSpace),$(window).scroll((function(){if(scrTop=$(window).scrollTop(),scrPos<scrTop){let shift=scrSpace+(scrPos-scrTop);scrSpace=shift>startScrSpace?shift:startScrSpace,$(block).css("top",scrSpace)}else{let shift=scrSpace+(scrPos-scrTop);scrSpace=shift<sp?shift:sp,$(block).css("top",scrSpace)}scrPos=scrTop}))},$.fn.formSubmit=function(settings){if(null==this||0==$(this).length)return!1;var form=new FormData,url=!!settings.url&&("/"!=settings.url.substr(0,1)?"/"+settings.url:settings.url),errorFields=[],fieldsData=[],lang=$.cookie("language")||"ru",language={ru:{mat:"ОЙ-ёй! нельзя так! Мы же культурные!",noEmptyFile:"Ошибка! Файл не может быть пустым!",noEmptyField:"Ошибка! Поле не может быть пустым!",error:"Ошибка!",errorValue:"Ошибка! Данное значение недопустимо!",errorLength:"Ошибка! Допускаются длина",symbols:"символов!",errorOnlyNums:"Ошибка! Допускаются только цифры",errorDiapason:"Ошибка! Допускаются диапазон",errorDisabledSymbols:"Ошибка! Запрещенные символы в строке!",errorEmail:"Ошибка! Email указан некорректно",errorPhone:"Ошибка! Телефон указан некорректно",errorSeo:"Ошибка! SEO URL указан некорректно! Допускаются",errorUrl:"Ошибка! URL указан некорректно!",errorSystem:"Системная ошибка отправки данных!"},en:{mat:"Uh-Oh! You can`t do this! We are polite!",noEmptyFile:"Error! File cannot be empty!",noEmptyField:"Error! This field cannot be empty!",error:"Error!",errorValue:"Error! This value is not allowed!",errorLength:"Error! Allowed length",symbols:"symbols!",errorOnlyNums:"Error! Only numbers are allowed",errorDiapason:"Error! Allowed range",errorDisabledSymbols:"Error! Forbidden characters in a string!",errorEmail:"Error! Email is specified incorrectly",errorPhone:"Error! The Phone number is specified incorrectly",errorSeo:"Error! SEO URL is specified incorrectly! Allow",errorUrl:"Error! URL is specified incorrectly!",errorSystem:"System error in sending data!"}};if($(this).find("input[name], textarea[name], select[name], [contenteditable][name]").not('input[type="button"]').each((function(){if(settings.ignore)if("string"==typeof settings.ignore){if($(this).is(settings.ignore))return!0}else if(Array.isArray(settings.ignore)&&$(this).is(settings.ignore.join(",")))return!0;var f=this,isFile=$(f).closest(".file").length>0,n=$(f).attr("name")||!1,t=$(f).attr("type")||(null!=$(f)[0].type?$(f)[0].type.replace("select-one","select"):!!$(f).hasAttr("contenteditable")&&"contenteditable"),r=null!=$(f).attr("rules")&&$(f).attr("rules").split("|"),v="file"==t?$(f).prop("files").length?$(f).prop("files"):null:-1!=["checkbox","radio"].indexOf(t)?$(f).is(":checked")?"radio"==t?$(f).val():1:"radio"==t?null:0:"contenteditable"==t?getContenteditable($(f))||null:("hidden"==t?$(f).prop("value")||null:$(f).val())||null;if(null==n||!1===n)return!0;if(isInt(v)&&(v=parseInt(v)),isFloat(v)&&(v=parseFloat(v)),-1!=["file","radio"].indexOf(t)&&null==v)return!0;if(settings.ignoreNames)if("string"==typeof settings.ignoreNames){if(settings.ignoreNames==n)return!0}else if(Array.isArray(settings.ignoreNames)&&-1!=settings.ignoreNames.indexOf(n))return!0;r&&$.each(r,(function(k,r){var errStat=!0,ri=r.split(":"),rule=ri[0];if(params=null!=ri[1]&&ri[1].split(","),text=ri[2]||!1,errStat&&null!=v&&"string"==typeof v&&containsMat(v)&&(errorFields.push({field:f,error:text||language[lang].mat}),errStat=!1),errStat&&null==v&&"empty"==rule&&(errorFields.push({field:f,error:text||(isFile?language[lang].noEmptyFile:language[lang].noEmptyField)}),errStat=!1),errStat&&null!=v&&"reg"==rule){var regExp=new RegExp(params[0],params[1]);1!=/<\?php|<\?|<script|\$\(/gi.test(v)&&0!=regExp.test(v)||(errorFields.push({field:f,error:text||language[lang].error}),errStat=!1)}if(errStat&&null!=v&&"not"==rule&&(1!=/<\?php|<\?|<script|\$\(/gi.test(v)&&-1==params.indexOf(v)||(errorFields.push({field:f,error:text||language[lang].errorValue}),errStat=!1)),errStat&&null!=v&&"length"==rule&&(params[0]&&v.toString().length<params[0]||params[1]&&v.toString().length>params[1])){var at=params[0]?"от "+params[0]+" ":"",to=params[1]?"до "+params[1]+" ":"";errorFields.push({field:f,error:text||language[lang].errorLength+" "+at+to+language[lang].symbols}),errStat=!1}if(errStat&&null!=v&&"num"==rule&&(0==/^(\d)+$/g.test(v)&&(errorFields.push({field:f,error:text||language[lang].errorOnlyNums}),errStat=!1),errStat&&params&&null!=params[0]&&v<params[0]||null!=params[1]&&v>params[1])){at=params[0]?" от "+params[0]:"",to=params[1]?" до "+params[1]:"";errorFields.push({field:f,error:text||language[lang].errorDiapason+at+to+"!"}),errStat=!1}errStat&&null!=v&&"string"==rule&&1==/<\?php|<\?|<script|\$\(/gi.test(v)&&(errorFields.push({field:f,error:text||language[lang].errorDisabledSymbols}),errStat=!1),errStat&&null!=v&&"eng"==rule&&(1!=/<\?php|<\?|<script|\$\(/gi.test(v)&&0!=/^[^а-яё]+$/giu.test(v)||(errorFields.push({field:f,error:text||language[lang].errorDisabledSymbols}),errStat=!1)),errStat&&null!=v&&"rus"==rule&&(1!=/<\?php|<\?|<script|\$\(/gi.test(v)&&0!=/^[^a-z]+$/giu.test(v)||(errorFields.push({field:f,error:text||language[lang].errorDisabledSymbols}),errStat=!1)),errStat&&null!=v&&"email"==rule&&0==/^[0-9a-zA-Z_.-]+@[a-z0-9_.-]+.[a-z]{2,10}$/gi.test(v)&&(errorFields.push({field:f,error:text||language[lang].errorEmail}),errStat=!1),errStat&&null!=v&&"phone"==rule&&0==/^\+\d{1,3} \(\d{3}\) \d{3}(-|\s)?\d{2}(-|\s)?\d{2}$/g.test(v)&&(errorFields.push({field:f,error:text||language[lang].errorPhone}),errStat=!1),errStat&&null!=v&&"seourl"==rule&&(1!=/<\?php|<\?|<script|\$\(/gi.test(v)&&0!=/^[a-z0-9_-]+$/g.test(v)||(errorFields.push({field:f,error:text||language[lang].errorSeo+": a-z0-9_-"}),errStat=!1)),!errStat||null==v||"url"!=rule&&"link"!=rule||0==/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/g.test(v)&&(errorFields.push({field:f,error:text||language[lang].errorUrl}),errStat=!1)})),/\b_/.test(n)?console.log("deleted "+n):fieldsData.push({field:f,type:t,name:n,value:v})})),errorFields.length>0)return settings.formError&&"function"==typeof settings.formError&&settings.formError(errorFields),$.each(errorFields,(function(k,item){if("hidden"==$(item.field).attr("type"))return!0;$(item.field).errorLabel(item.error)})),!0;if((!url||settings.returnFields)&&(settings.returnFields&&"function"==typeof settings.returnFields&&settings.returnFields(fieldsData),!url))return!0;if($.each(fieldsData,(function(k,i){i.field;var type=i.type,name=i.name,value=i.value;if("file"==type){var files=value;files.length>0?files.length>1?$.each(files,(function(k,file){form.append(name+"[]",file)})):form.append(name,files[0]):form.append(name,null)}else"checkbox"==type||"radio"==type?form.append(name,value):form.append(name,value||"")})),settings.fields&&$.each(settings.fields,(function(field,value){var v="object"==typeof value?JSON.stringify(value):value;form.append(field,v)})),settings.files){var field=settings.files.field,files=settings.files.files;0==Array.isArray(files)&&(files=Object.values(files)),files.map((function(file,index){form.append(field+"["+index+"]",file)}))}$.ajax({type:settings.type||"POST",url:url,dataType:settings.dataType||"json",data:form,cache:!1,contentType:!1,processData:!1,beforeSend:function(){settings.before&&"function"==typeof settings.before&&settings.before()},success:function(r){settings.success&&"function"==typeof settings.success&&settings.success(r,Object.fromEntries(form.entries()))},error:function(e,status){notify(language[lang].errorSystem,"error"),showError(e),settings.error&&"function"==typeof settings.error&&settings.error(status)},complete:function(){settings.complete&&"function"==typeof settings.complete&&settings.complete()}})},$.fn.imgLoaded=function(func){var i=new Image,imageSrc=$(this).attr("src");i.onload=function(){"function"==typeof func&&func()},i.src=imageSrc},$(document).ready((function(){var scrollTOut,snapper=new Snap({element:document.getElementById("mobileNavBlock"),dragger:document.getElementById("mobileNavButton"),tapToClose:!1,addBodyClasses:!1,hyperextensible:!1,maxPosition:290,minPosition:0,disable:"right",flickThreshold:10});$("#mobileNavButton").on("click",(function(e){e.preventDefault(),snapper.open("left")})),snapper.on("open",(function(){$(".mobilenavwrap").stop().fadeIn(100),disableScroll()})),snapper.on("end",(function(){snapper.on("animated",(function(){$("#mobileNavBlock").position().left<=-260&&$(".mobilenavwrap").stop().fadeOut(50,(function(){enableScroll()}))}))})),$(".mobilenavwrap, #mobileNavButtonClose, [data-scroll-nav]").on("click",(function(){clearTimeout(scrollTOut),snapper.close(),scrollTOut=setTimeout((function(){enableScroll(),$(".mobilenavwrap").stop().fadeOut(50)}),100)}))})),$.fn.ddrPagination=function(options){let container=this,ops=$.extend({pItems:"pagination",pRows:"paginationrule",itemsAround:!1,storageId:"ddrPagination"+random(0,999),activeClass:!1,hiddenClass:!1,onClickDisabled:"disabled",onChangePage:!1},options),allCount=$(container).find("["+ops.pItems+"]").length,ia=getCurrentBreakPoint(ops.itemsAround),gt=ia-1+0+(ia+1-0>0?ia+1-0:0),lt=0-(2*ia+1+(0-allCount>-ia?0-allCount:-ia));return 0<allCount-ia&&$(container).find("["+ops.pItems+"]:gt("+gt+")").addClass(ops.hiddenClass),0>ia+1&&$(container).find("["+ops.pItems+"]:lt("+lt+")").addClass(ops.hiddenClass),$(container).not("[disabled]").on(tapEvent,"["+ops.pItems+"]:not(."+ops.activeClass+")",(function(){$(container).setAttrib("disabled");let index=$(this).index()-1,page=($("["+ops.pItems+"]."+ops.activeClass),$(this).attr(ops.pItems)),gt=index+(ia-1)+(ia+1-index>0?ia+1-index:0),lt=index-(2*ia+1+(index-allCount>-ia?index-allCount:-ia));localStorage.setItem(ops.storageId,$(this).index()-2),$("["+ops.pItems+"]."+ops.activeClass).removeClass(ops.activeClass),$(this).addClass(ops.activeClass),$(container).find("["+ops.pItems+"]."+ops.hiddenClass).removeClass(ops.hiddenClass),index<allCount-ia&&$(container).find("["+ops.pItems+"]:gt("+gt+")").addClass(ops.hiddenClass),index>ia+1&&$(container).find("["+ops.pItems+"]:lt("+lt+")").addClass(ops.hiddenClass),0==page?($("["+ops.pRows+'="prev"]').setAttrib("disabled"),$("["+ops.pRows+'="start"]').setAttrib("disabled")):($("["+ops.pRows+'="prev"][disabled]').removeAttrib("disabled"),$("["+ops.pRows+'="start"][disabled]').removeAttrib("disabled")),$(this).next().attr(ops.pItems)?($("["+ops.pRows+'="next"][disabled]').removeAttrib("disabled"),$("["+ops.pRows+'="end"][disabled]').removeAttrib("disabled")):($("["+ops.pRows+'="next"]').setAttrib("disabled"),$("["+ops.pRows+'="end"]').setAttrib("disabled")),ops.onChangePage(page,(function(){$(container).removeAttrib("disabled")}))})),$(container).not("[disabled]").on(tapEvent,"["+ops.pRows+"]",(function(){$(container).setAttrib("disabled");let dir=$(this).attr(ops.pRows),activeItem=$(container).find("["+ops.pItems+"]."+ops.activeClass).attr(ops.pItems),nextIndex="prev"==dir?parseInt(activeItem)-1:"next"==dir?parseInt(activeItem)+1:"start"==dir?0:"end"==dir?allCount-1:0;nextItem=$(container).find("["+ops.pItems+'="'+nextIndex+'"]'),page=$(nextItem).attr(ops.pItems),index=$(nextItem).index()-1,gt=index+(ia-1)+(ia+1-index>0?ia+1-index:0),lt=index-(2*ia+1+(index-allCount>-ia?index-allCount:-ia)),localStorage.setItem(ops.storageId,nextIndex),$(container).find("["+ops.pItems+"]."+ops.activeClass).removeClass(ops.activeClass),$(nextItem).addClass(ops.activeClass),$(container).find("["+ops.pItems+"]."+ops.hiddenClass).removeClass(ops.hiddenClass),index<allCount-ia&&$(container).find("["+ops.pItems+"]:gt("+gt+")").addClass(ops.hiddenClass),index>ia+1&&$(container).find("["+ops.pItems+"]:lt("+lt+")").addClass(ops.hiddenClass),"prev"!=dir&&"start"!=dir||0!=$(nextItem).attr(ops.pItems)?($("["+ops.pRows+'="prev"][disabled]').removeAttrib("disabled"),$("["+ops.pRows+'="start"][disabled]').removeAttrib("disabled")):($("["+ops.pRows+'="prev"]').setAttrib("disabled"),$("["+ops.pRows+'="start"]').setAttrib("disabled")),"next"!=dir&&"end"!=dir||$(nextItem).next().attr(ops.pItems)?($("["+ops.pRows+'="next"][disabled]').removeAttrib("disabled"),$("["+ops.pRows+'="end"][disabled]').removeAttrib("disabled")):($("["+ops.pRows+'="next"]').setAttrib("disabled"),$("["+ops.pRows+'="end"]').setAttrib("disabled")),ops.onChangePage(page,(function(){$(container).removeAttrib("disabled")}))})),{getIndex:function(){return localStorage.getItem(ops.storageId)}}},ddrPhonecodes=function(){var codesData={rus:{code:7,flag:"russia",title:"Россия"},ukr:{code:380,flag:"ukraine",title:"Украина"},kaz:{code:7,flag:"kazakhstan",title:"Казахстан"},bel:{code:375,flag:"belarus",title:"Белоруссия"},uzb:{code:998,flag:"uzbekistan",title:"Узбекистан"},azr:{code:994,flag:"azerbaijan",title:"Азербайджан"},arm:{code:374,flag:"armenia",title:"Армения"},kyr:{code:996,flag:"kyrgyzstan",title:"Киргизия"},mol:{code:373,flag:"moldova",title:"Молдавия"},taj:{code:992,flag:"tajikistan",title:"Таджикистан"}},codesMap={};$.each(codesData,(function(code,item){codesMap[item.code]=code})),$("body").find("[multicode]:not(.multicoded)").each((function(){var thisBlock,thisInput=this,thisDefaultCode=$(thisInput).attr("multicode")||"rus",thisValue=$(thisInput).val(),html="";if(!$(thisInput).is(":visible"))return!0;if($(thisInput).addClass("multicoded"),$(thisInput).parent(".field").length>0?$(thisInput).parent(".field").addClass("multicode"):$(thisInput).wrap('<div class="multicode"></div>'),thisBlock=$(thisInput).closest(".multicode"),thisValue){var code=thisValue.split(" ")[0].substr(1)||7;thisDefaultCode=7==code&&/\+7 \([7]/.test(thisValue)?"kaz":7==code&&0==/\+7 \([7]/.test(thisValue)?"rus":codesMap[code]||"rus"}else thisDefaultCode="rus";html+='<div touch="opened" class="multicode__choose">',html+='<div class="icon"><img src="'+location.origin+"/public/images/flags/"+codesData[thisDefaultCode].flag+'.png" title="'+codesData[thisDefaultCode].title+'" /></div>',html+='<i class="fa fa-chevron-down"></i>',html+="</div>",html+='<ul class="multicode__list">',$.each(codesData,(function(code,item){html+='<li data-icon="'+item.flag+'.png" data-code="'+item.code+'" data-title="'+item.title+'"><div class="icon"><img src="'+location.origin+"/public/images/flags/"+item.flag+'.png" title="'+item.title+'" /></div><span>'+item.title+"</span></li>"})),html+="</ul>",$(thisBlock).append(html),$(thisBlock).find(".multicode__list").css("top",$(thisBlock).outerHeight()+2+"px"),$(thisInput).mask("+"+codesData[thisDefaultCode].code+" (^^^) ^^^-^^-^^",{autoclear:!1}).attr({placeholder:"+"+codesData[thisDefaultCode].code+" (___) ___-__-__"}),$(thisBlock).find(".multicode__list li").on(tapEvent,(function(){var thisIcon=$(this).data("icon"),thisCode=$(this).data("code"),thisTitle=$(this).data("title");$(thisInput).removeClass("error"),$(thisBlock).find(".multicode__choose img").attr("src",location.origin+"/public/images/flags/"+thisIcon).attr("title",thisTitle),$(thisInput).mask("+"+thisCode+" (^^^) ^^^-^^-^^",{autoclear:!1}).attr({placeholder:"+"+("^"==thisCode?"_":thisCode)+" (___) ___-__-__"}),$(thisInput).val("").focus(),$(thisBlock).removeClass("opened").addClass("changed")}))}))},ddrPopUp=function(settings,callback){return new DdrPopUp(settings,callback)},$.fn.ddrPopUp=function(settings,callback){$(this).on(tapEvent,(function(){return new DdrPopUp(settings,callback)}))},$(document).ready((function(){var getPoints,scrollTop,resizeTimeOut,scrollNavHash,scrollHash,points=[];if(0==$("body").find("[data-scroll-block]").length||0==$("body").find("[data-scroll-nav]").length)return!1;function setCurrentBlock(blockName){$("[data-scroll-nav]").removeClass("active"),$("[data-scroll-nav = "+blockName+"]").addClass("active"),scrollNavHash=$("[data-scroll-nav = "+blockName+"]").data("scroll-hash"),location.hash!=(scrollHash=""!=scrollNavHash&&"#"!=scrollNavHash?"#"+scrollNavHash:"")&&history.replaceState({},"scrollNavHash",location.origin+location.pathname+location.search+scrollHash)}getPoints=function(){var blockPos;points=[],$("body").find("[data-scroll-block]").each((function(){blockPos=null!=$("[data-scroll-nav="+$(this).data("scroll-block")+"]").data("scroll-pos")?parseInt($("[data-scroll-nav="+$(this).data("scroll-block")+"]").data("scroll-pos")):0,points.push({block:$(this).data("scroll-block"),pos:$(this).offset().top+blockPos})}))},$(window).on("scrollstart resize",(function(e){clearTimeout(resizeTimeOut),"resize"==e.type?resizeTimeOut=setTimeout((function(){getPoints()}),200):getPoints()})),setTimeout((function(){getPoints(),scrollTop=$(window).scrollTop()+100,$.each(points,(function(k,item){k+1<points.length&&scrollTop>=item.pos&&scrollTop<points[k+1].pos?setCurrentBlock(item.block):k+1==points.length&&scrollTop>=points[points.length-1].pos&&setCurrentBlock(points[points.length-1].block)}))}),100),$(window).on("scrollstop",{latency:100},(function(){scrollTop=$(window).scrollTop()+100,$.each(points,(function(k,item){k+1<points.length&&scrollTop>=item.pos&&scrollTop<points[k+1].pos?setCurrentBlock(item.block):k+1==points.length&&scrollTop>=points[points.length-1].pos&&setCurrentBlock(points[points.length-1].block)}))}));$("body").find("[data-scroll-nav]").on("tap",(function(e){e.preventDefault();!function scrollTo(blockName,animSpeed){var offsTop=$("[data-scroll-block="+blockName+"]").offset().top;$("body").off("mousewheel"),$("body").on("mousewheel",(function(){$("html, body").stop()})),offsTop!=$(window).scrollTop()?$("html, body").stop().animate({scrollTop:offsTop},animSpeed,"easeInOutQuart",(function(){$("body").off("mousewheel")})):$("body").off("mousewheel")}($(this).data("scroll-nav"),600)}))})),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}((function($){var dispatch=$.event.dispatch||$.event.handle,special=$.event.special,uid1="D"+ +new Date,uid2="D"+(+new Date+1);special.scrollstart={setup:function(data){var timer,_data=$.extend({latency:special.scrollstop.latency},data),handler=function(evt){var _args=arguments;timer?clearTimeout(timer):(evt.type="scrollstart",dispatch.apply(this,_args)),timer=setTimeout((function(){timer=null}),_data.latency)};$(this).bind("scroll",handler).data(uid1,handler)},teardown:function(){$(this).unbind("scroll",$(this).data(uid1))}},special.scrollstop={latency:250,setup:function(data){var timer,_data=$.extend({latency:special.scrollstop.latency},data),handler=function(evt){var _self=this,_args=arguments;timer&&clearTimeout(timer),timer=setTimeout((function(){timer=null,evt.type="scrollstop",dispatch.apply(_self,_args)}),_data.latency)};$(this).bind("scroll",handler).data(uid2,handler)},teardown:function(){$(this).unbind("scroll",$(this).data(uid2))}}})),ddrScrollEnd=function(callback,timeout){ddrScrEnd(!0,callback,timeout)},$.fn.ddrScrollEnd=function(callback,timeout){ddrScrEnd(this,callback,timeout)},$.fn.ddrScrollTable=function(scrollStep,scrollSpeed,enableMouseScroll,fixElement,ignore){var block=this,fixElem=$(block).find(fixElement||"thead");scrollStep=scrollStep||50,scrollSpeed=scrollSpeed||100;if(!$(block).length||!$(fixElem).length)return!1;null!=enableMouseScroll&&1==enableMouseScroll&&$(block).mousewheel((function(e){e.preventDefault(),$(this).stop(!1,!0).animate({scrollLeft:$(this).scrollLeft()+scrollStep*-e.deltaY},scrollSpeed)})),$(block).scroll((function(e){var scrTop=$(this).scrollTop();$(fixElem).css("transform","translateY("+scrTop+"px)")})),$(block).mousedown((function(e){var mousemoveStat=!0;(ignore&&$(this).find(ignore+":hover").length>0||$(this).find("input:hover").length>0)&&(mousemoveStat=!1),$(block).children().css("cursor","e-resize");var startX=this.scrollLeft+e.pageX;$(block).mousemove((function(e){mousemoveStat&&(this.scrollLeft=startX-e.pageX)}))})),$(window).mouseup((function(){$(block).children().css("cursor","default"),$(block).off("mousemove")}))},$.fn.ddrScrollX=function(scrollStep,scrollSpeed,enableMouseScroll){var block=this;scrollStep=scrollStep||50,scrollSpeed=scrollSpeed||100;null!=enableMouseScroll&&1==enableMouseScroll&&$(block).mousewheel((function(e){e.preventDefault(),$(this).stop(!1,!0).animate({scrollLeft:$(this).scrollLeft()+scrollStep*-e.deltaY},scrollSpeed)})),$(block).mousedown((function(e){$(block).children().css("cursor","e-resize");var startX=this.scrollLeft+e.pageX;$(block).mousemove((function(e){return this.scrollLeft=startX-e.pageX,!1}))})),$(window).mouseup((function(){$(block).children().css("cursor","default"),$(block).off("mousemove")}))},ddrSort=function(selector){var sortType,sortAttr=$(selector).attr("ddrsort"),sortGroup=$(selector).attr("ddrsortgroup"),sortOrder=$(selector).attr("ddrorder"),sortSelectors=$("body").find("[ddrsort-"+sortAttr+"]"),sortBlock=$("[ddrsort-"+sortAttr+"]").parent();null!=sortGroup?($("body").find('[ddrsortgroup="'+sortGroup+'"].ddrsortactive').removeClass("ddrsortactive"),$("body").find('[ddrsortgroup="'+sortGroup+'"][ddrorder]').removeAttrib("ddrorder")):($("body").find("[ddrsort]").removeClass("ddrsortactive"),$("body").find("[ddrsort]").removeAttrib("ddrorder")),$(selector).addClass("ddrsortactive"),null==sortOrder?(sortType="desc",$(selector).setAttrib("ddrorder","asc")):(sortType=sortOrder,$(selector).setAttrib("ddrorder","desc"==sortOrder?"asc":"desc")),sortSelectors.sort((function(a,b){var item1=$(a).attr("ddrsort-"+sortAttr),item2=$(b).attr("ddrsort-"+sortAttr);if(!isInt(item1)&&!isFloat(item1)||!isInt(item2)&&!isFloat(item2)){var rx=/([^\d]+|\d+)/gi;if("desc"==sortType)var str1split=item2.match(rx),str2split=item1.match(rx);else if("asc"==sortType)str1split=item1.match(rx),str2split=item2.match(rx);for(var i=0,l=Math.min(str1split.length,str2split.length);i<l;i++){var s1=str1split[i],s2=str2split[i];if(s1!==s2)return isNaN(+s1)||isNaN(+s2)?s1>s2?1:-1:+s1-s2}return 0}if(item1=parseInt(item1),item2=parseInt(item2),"desc"==sortType){if(item1<item2)return 1;if(item1==item2)return 0;if(item1>item2)return-1}else if("asc"==sortType){if(item1<item2)return-1;if(item1==item2)return 0;if(item1>item2)return 1}})),$(sortBlock).html(""),$.each(sortSelectors,(function(k,item){$(sortBlock).append(item)}))},ddrTabs=function(tabTitlesAttr,tabsContentAttr,callback){$("body").off(tapEvent,"["+tabTitlesAttr+"]").on(tapEvent,"["+tabTitlesAttr+"]",(function(){var tabId=$(this).attr(tabTitlesAttr),thisBlock=$("["+tabsContentAttr+'="'+tabId+'"]'),allBlocks=$("["+tabsContentAttr+"]"),tabsTitles=$(this).siblings();0==$(this).hasClass("active")&&0==$(thisBlock).hasClass("visible")&&($(tabsTitles).filter(".active").removeClass("active"),$(this).addClass("active"),$(allBlocks).filter(".visible").removeClass("visible"),$(thisBlock).addClass("visible"),callback&&"function"==typeof callback&&callback(this,thisBlock))}))},$.fn.ddrUnitHeight=function(setHeightItem,minHeight){var maxHeight=minHeight||0,items=$(this).find(setHeightItem);$(this).ready((function(){$(items).each((function(){var thisHeight=$(this).height();thisHeight>maxHeight&&(maxHeight=thisHeight)})),$(items).height(maxHeight)}))}
/**
 * simplemde v1.11.2
 * Copyright Next Step Webs, Inc.
 * @link https://github.com/NextStepWebs/simplemde-markdown-editor
 * @license MIT
 */,function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SimpleMDE=e()}}((function(){return function t(e,n,r){function i(a,l){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){var n=e[a][1][t];return i(n||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function o(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function a(e,t,n){for(var r,i=[],a=t;n>a;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}n.toByteArray=function i(e){var t,n,r,i,o,a,l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[l-2]?2:"="===e[l-1]?1:0,a=new u(3*l/4-o),r=o>0?l-4:l;var s=0;for(t=0,n=0;r>t;t+=4,n+=3)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=255&i;return 2===o?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[s++]=255&i):1===o&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=255&i),a},n.fromByteArray=function l(e){for(var t,n=e.length,r=n%3,i="",o=[],l=16383,c=0,u=n-r;u>c;c+=l)o.push(a(e,c,c+l>u?u:c+l));return 1===r?(t=e[n-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),o.push(i),o.join("")};var s=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array;!function r(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;64>t;++t)s[t]=e[t],c[e.charCodeAt(t)]=t;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63}()},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){(function(t){function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function d(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=h(e,t),e}(e,t,n,r):"string"==typeof t?function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);return e=o(e,r),e.write(t,n),e}(e,t,n):function p(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function K(e){return e!=e}(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&J(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number')}function u(e,t){if(s(t),e=o(e,0>t?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function h(e,t){var n=0|m(t.length);e=o(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((t>>>=0)>=(n>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return E(this,t,n);case"binary":return O(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function x(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,n/=2}for(var s=-1,c=0;a>n+c;c++)if(i(e,n+c)===i(t,-1===s?0:c-s)){if(-1===s&&(s=c),c-s+1===l)return(n+s)*o}else-1!==s&&(c-=c-s),s=-1;return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var l=parseInt(t.substr(2*a,2),16);if(isNaN(l))return a;e[n+a]=l}return a}function k(e,t,n,r){return V(q(t,e.length-n),e,n,r)}function S(e,t,n,r){return V(function G(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return S(e,t,n,r)}function L(e,t,n,r){return V($(t),e,n,r)}function T(e,t,n,r){return V(function Y(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var s,c,u,f,o=e[i],a=null,l=o>239?4:o>223?3:o>191?2:1;if(n>=i+l)switch(l){case 1:128>o&&(a=o);break;case 2:128==(192&(s=e[i+1]))&&((f=(31&o)<<6|63&s)>127&&(a=f));break;case 3:s=e[i+1],c=e[i+2],128==(192&s)&&128==(192&c)&&((f=(15&o)<<12|(63&s)<<6|63&c)>2047&&(55296>f||f>57343)&&(a=f));break;case 4:s=e[i+1],c=e[i+2],u=e[i+3],128==(192&s)&&128==(192&c)&&128==(192&u)&&((f=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&u)>65535&&1114112>f&&(a=f))}null===a?(a=65533,l=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=l}return function A(e){var t=e.length;if(Q>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Q));return n}(r)}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=U(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||o>t)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function H(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function W(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function _(e,t,n,r,i){return i||B(e,0,n,4),Z.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return i||B(e,0,n,8),Z.write(e,t,n,r,52,8),n+8}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;r>a;a++){if((n=e.charCodeAt(a))>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return X.toByteArray(function z(e){if((e=function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(ee,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var X=e("base64-js"),Z=e("ieee754"),J=e("isarray");n.Buffer=a,n.SlowBuffer=function g(e){return+e!=e&&(e=0),a.alloc(+e)},n.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function r(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return l(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return function c(e,t,n,r){return s(t),0>=t?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},a.allocUnsafe=function(e){return u(null,e)},a.allocUnsafeSlow=function(e){return u(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return r>n?-1:n>r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;n++){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)x(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):y.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),0>t||n>e.length||0>r||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),l=(n>>>=0)-(t>>>=0),s=Math.min(o,l),c=this.slice(r,i),u=e.slice(t,n),f=0;s>f;++f)if(c[f]!==u[f]){o=c[f],l=u[f];break}return l>o?-1:o>l?1:0},a.prototype.indexOf=function(e,t,n){if("string"==typeof t?(n=t,t=0):t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:b(this,e,t,n);if("number"==typeof e)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):b(this,[e],t,n);throw new TypeError("val must be string, number or Buffer")},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return S(this,e,t,n);case"binary":return C(this,e,t,n);case"base64":return L(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;a.prototype.slice=function(e,t){var r,n=this.length;if(0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),e>t&&(t=e),a.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;i>o;o++)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),Z.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),Z.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),Z.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),Z.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):W(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):W(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,l=0;for(this[t]=255&e;++o<n&&(a*=256);)0>e&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=(e/a|0)-l&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,l=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)0>e&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=(e/a|0)-l&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):W(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):W(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>o||!a.TYPED_ARRAY_SUPPORT)for(i=0;o>i;i++)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(t>=n)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;n>o;o++)this[o]=e;else{var l=a.isBuffer(e)?e:q(new a(e,r).toString()),s=l.length;for(o=0;n-t>o;o++)this[o+t]=l[o%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:15,isarray:16}],4:[function(e,t,n){function r(e){return"function"!=typeof(e=e||{}).codeMirrorInstance||"function"!=typeof e.codeMirrorInstance.defineMode?void console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`"):(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),void e.codeMirrorInstance.defineMode("spell-checker",(function(t){if(!r.aff_loading){r.aff_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),n.onload=function(){4===n.readyState&&200===n.status&&(r.aff_data=n.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i("en_US",r.aff_data,r.dic_data,{platform:"any"})))},n.send(null)}if(!r.dic_loading){r.dic_loading=!0;var o=new XMLHttpRequest;o.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),o.onload=function(){4===o.readyState&&200===o.status&&(r.dic_data=o.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i("en_US",r.aff_data,r.dic_data,{platform:"any"})))},o.send(null)}var a='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',l={token:function(e){var t=e.peek(),n="";if(a.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!a.includes(t);)n+=t,e.next();return r.typo&&!r.typo.check(n)?"spell-error":null}},s=e.codeMirrorInstance.getMode(t,t.backdrop||"text/plain");return e.codeMirrorInstance.overlayMode(s,l,!0)})))}var i=e("typo-js");r.num_loaded=0,r.aff_loading=!1,r.dic_loading=!1,r.aff_data="",r.dic_data="",r.typo,t.exports=r},{"typo-js":18}],5:[function(t,n,r){var i;i=function(e){e.defineOption("fullScreen",!1,(function(r,i,o){o==e.Init&&(o=!1),!o!=!i&&(i?function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}(r):function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}(r))}))},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(t,n,r){var i;i=function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.className="CodeMirror-placeholder";var r=e.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function r(e){o(e)&&n(e)}function i(e){var r=e.getWrapperElement(),i=o(e);r.className=r.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(e):t(e)}function o(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(n,o,a){var l=a&&a!=e.Init;if(o&&!l)n.on("blur",r),n.on("change",i),n.on("swapDoc",i),i(n);else if(!o&&l){n.off("blur",r),n.off("change",i),n.off("swapDoc",i),t(n);var s=n.getWrapperElement();s.className=s.className.replace(" CodeMirror-empty","")}o&&!n.hasFocus()&&r(n)}))},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(t,n,r){var i;i=function(e){var t=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,r=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(i){if(i.getOption("disableInput"))return e.Pass;for(var o=i.listSelections(),a=[],l=0;l<o.length;l++){var s=o[l].head,c=i.getStateAfter(s.line),u=!1!==c.list,f=0!==c.quote,h=i.getLine(s.line),d=t.exec(h);if(!o[l].empty()||!u&&!f||!d)return void i.execCommand("newlineAndIndent");if(n.test(h))i.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),a[l]="\n";else{var p=d[1],m=d[5],g=r.test(d[2])||d[2].indexOf(">")>=0?d[2]:parseInt(d[3],10)+1+d[4];a[l]="\n"+p+g+m}}i.replaceSelections(a)}},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(t,n,r){var i;i=function(e){e.overlayMode=function(t,n,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(n,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,i){return(e!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<e.start)&&(i.streamSeen=e,i.basePos=i.overlayPos=e.start),e.start==i.basePos&&(i.baseCur=t.token(e,i.base),i.basePos=e.pos),e.start==i.overlayPos&&(e.pos=e.start,i.overlayCur=n.token(e,i.overlay),i.overlayPos=e.pos),e.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||r&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),n.blankLine&&n.blankLine(e.overlay)}}}},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(t,n,r){var i;i=function(e){function t(e){e.operation((function(){!function a(e){if(!e.somethingSelected())return i(e);if(e.listSelections().length>1)return o(e);var t=e.getCursor("start"),n=e.getCursor("end"),a=e.state.markedSelection;if(!a.length)return r(e,t,n);var s=a[0].find(),u=a[a.length-1].find();if(!s||!u||n.line-t.line<l||c(t,u.to)>=0||c(n,s.from)<=0)return o(e);for(;c(t,s.from)>0;)a.shift().clear(),s=a[0].find();for(c(t,s.from)<0&&(s.to.line-t.line<l?(a.shift().clear(),r(e,t,s.to,0)):r(e,t,s.from,0));c(n,u.to)<0;)a.pop().clear(),u=a[a.length-1].find();c(n,u.to)>0&&(n.line-u.from.line<l?(a.pop().clear(),r(e,u.from,n)):r(e,u.to,n))}(e)}))}function n(e){e.state.markedSelection.length&&e.operation((function(){i(e)}))}function r(e,t,n,r){if(0!=c(t,n))for(var i=e.state.markedSelection,o=e.state.markedSelectionStyle,a=t.line;;){var u=a==t.line?t:s(a,0),f=a+l,h=f>=n.line,d=h?n:s(f,0),p=e.markText(u,d,{className:o});if(null==r?i.push(p):i.splice(r++,0,p),h)break;a=f}}function i(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function o(e){i(e);for(var t=e.listSelections(),n=0;n<t.length;n++)r(e,t[n].from(),t[n].to())}e.defineOption("styleSelectedText",!1,(function(r,a,l){var s=l&&l!=e.Init;a&&!s?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof a?a:"CodeMirror-selectedtext",o(r),r.on("cursorActivity",t),r.on("change",n)):!a&&s&&(r.off("cursorActivity",t),r.off("change",n),i(r),r.state.markedSelection=r.state.markedSelectionStyle=null)}));var l=8,s=e.Pos,c=e.cmpPos},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(t,n,r){!function(t){"object"==typeof r&&"object"==typeof n?n.exports=t():(this||window).CodeMirror=t()}((function(){function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r?Wi(r):{},Wi(ea,r,!1),d(r);var i=r.value;"string"==typeof i&&(i=new Ca(i,r.mode,null,r.lineSeparator)),this.doc=i;var o=new e.inputStyles[r.inputStyle](this),a=this.display=new t(n,i,o);a.wrapper.CodeMirror=this,c(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Ao&&a.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ei,keySeq:null,specialChars:null};var s=this;for(var u in xo&&11>bo&&setTimeout((function(){s.display.input.reset(!0)}),20),function jt(e){function t(){i.activeTouch&&(o=setTimeout((function(){i.activeTouch=null}),1e3),(a=i.activeTouch).end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var i=e.display;Ea(i.scroller,"mousedown",Et(e,$t)),Ea(i.scroller,"dblclick",xo&&11>bo?Et(e,(function(t){if(!Ti(e,t)){var n=Yt(e,t);if(n&&!Jt(e,t)&&!Gt(e.display,t)){Ma(t);var r=e.findWordAt(n);be(e.doc,r.anchor,r.head)}}})):function(t){Ti(e,t)||Ma(t)}),Do||Ea(i.scroller,"contextmenu",(function(t){xn(e,t)}));var o,a={end:0};Ea(i.scroller,"touchstart",(function(t){if(!Ti(e,t)&&!n(t)){clearTimeout(o);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}})),Ea(i.scroller,"touchmove",(function(){i.activeTouch&&(i.activeTouch.moved=!0)})),Ea(i.scroller,"touchend",(function(n){var o=i.activeTouch;if(o&&!Gt(i,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var a,l=e.coordsChar(i.activeTouch,"page");a=!o.prev||r(o,o.prev)?new fe(l,l):!o.prev.prev||r(o,o.prev.prev)?e.findWordAt(l):new fe(Bo(l.line,0),me(e.doc,Bo(l.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),Ma(n)}t()})),Ea(i.scroller,"touchcancel",t),Ea(i.scroller,"scroll",(function(){i.scroller.clientHeight&&(rn(e,i.scroller.scrollTop),on(e,i.scroller.scrollLeft,!0),Pa(e,"scroll",e))})),Ea(i.scroller,"mousewheel",(function(t){an(e,t)})),Ea(i.scroller,"DOMMouseScroll",(function(t){an(e,t)})),Ea(i.wrapper,"scroll",(function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0})),i.dragFunctions={enter:function(t){Ti(e,t)||Aa(t)},over:function(t){Ti(e,t)||(function tn(e,t){var n=Yt(e,t);if(n){var r=document.createDocumentFragment();He(e,n,r),e.display.dragCursor||(e.display.dragCursor=ji("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),qi(e.display.dragCursor,r)}}(e,t),Aa(t))},start:function(t){!function en(e,t){if(xo&&(!e.state.draggingText||+new Date-$o<100))return void Aa(t);if(!Ti(e,t)&&!Gt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Lo)){var n=ji("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Co&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Co&&n.parentNode.removeChild(n)}}(e,t)},drop:Et(e,Qt),leave:function(t){Ti(e,t)||nn(e)}};var l=i.input.getField();Ea(l,"keyup",(function(t){pn.call(e,t)})),Ea(l,"keydown",Et(e,hn)),Ea(l,"keypress",Et(e,mn)),Ea(l,"focus",Bi(vn,e)),Ea(l,"blur",Bi(yn,e))}(this),function Ki(){Qa||(function Xi(){var e;Ea(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Vi(qt)}),100))})),Ea(window,"blur",(function(){Vi(yn)}))}(),Qa=!0)}(),bt(this),this.curOp.forceUpdate=!0,Xr(this,i),r.autofocus&&!Ao||s.hasFocus()?setTimeout(Bi(vn,this),20):yn(this),ta)ta.hasOwnProperty(u)&&ta[u](this,r[u],na);k(this),r.finishInit&&r.finishInit(this);for(var f=0;f<aa.length;++f)aa[f](this);kt(this),wo&&r.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function t(e,t,n){var r=this;this.input=n,r.scrollbarFiller=ji("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=ji("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=ji("div",null,"CodeMirror-code"),r.selectionDiv=ji("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=ji("div",null,"CodeMirror-cursors"),r.measure=ji("div",null,"CodeMirror-measure"),r.lineMeasure=ji("div",null,"CodeMirror-measure"),r.lineSpace=ji("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=ji("div",[ji("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=ji("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=ji("div",null,null,"position: absolute; height: "+Da+"px; width: 1px;"),r.gutters=ji("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=ji("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=ji("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),xo&&8>bo&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),wo||go&&Ao||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.frontier=e.doc.first,_e(e,100),e.state.modeGen++,e.curOp&&Dt(e)}function o(e){var t=yt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/xt(e.display)-3);return function(i){if(kr(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter((function(e){var t=n(e);t!=e.height&&ei(e,t)}))}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),lt(e)}function s(e){c(e),Dt(e),setTimeout((function(){w(e)}),20)}function c(e){var t=e.display.gutters,n=e.options.gutters;Ui(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(ji("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function f(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=mr(r);){r=(i=t.find(0,!0)).from.line,n+=i.from.ch-i.to.ch}for(r=e;t=gr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,n+=(r=i.to.line).text.length-i.to.ch}return n}function h(e){var t=e.display,n=e.doc;t.maxLine=Zr(n,n.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=f(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}function d(e){var t=Pi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ye(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function m(e,t,n){this.cm=n;var r=this.vert=ji("div",[ji("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=ji("div",[ji("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Ea(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),Ea(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,xo&&8>bo&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Za(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Ea(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?on(t,e):rn(t,e)}),t),t.display.scrollbars.addClass&&Ja(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=p(e));var n=e.display.barWidth,r=e.display.barHeight;x(e,t);for(var i=0;4>i&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&O(e),x(e,p(e)),n=e.display.barWidth,r=e.display.barHeight}function x(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function b(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Ue(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=ni(t,r),a=ni(t,i);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;o>l?(o=l,a=ni(t,ri(Zr(t,l))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=a&&(o=ni(t,ri(Zr(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function w(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=C(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function k(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=S(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ji("div",[ji("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",u(e),!0}return!1}function S(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function C(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function L(e,t,n){var r=e.display;this.viewport=t,this.visible=b(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=$e(e),this.force=n,this.dims=P(e),this.events=[]}function M(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Wt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==zt(e))return!1;k(e)&&(Wt(e),t.dims=P(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Wo&&(o=br(e.doc,o),a=wr(e.doc,a));var l=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function Ft(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Rt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Rt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Bt(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Rt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Bt(e,n)))),r.viewTo=n})(e,o,a),n.viewOffset=ri(Zr(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var s=zt(e);if(!l&&0==s&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Gi();return s>4&&(n.lineDiv.style.display="none"),function R(e,t,n){function r(t){var n=t.nextSibling;return wo&&Eo&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,l=a.firstChild,s=i.view,c=i.viewFrom,u=0;u<s.length;u++){var f=s[u];if(f.hidden);else if(f.node&&f.node.parentNode==a){for(;l!=f.node;)l=r(l);var h=o&&null!=t&&c>=t&&f.lineNumber;f.changes&&(Pi(f.changes,"gutter")>-1&&(h=!1),D(e,f,c,n)),h&&(Ui(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(S(e.options,c)))),l=f.node.nextSibling}else{var d=U(e,f,c,n);a.insertBefore(d,l)}c+=f.size}for(;l;)l=r(l)}(e,n.updateLineNumbers,t.dims),s>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Gi()!=c&&c.offsetHeight&&c.focus(),Ui(n.cursorDiv),Ui(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,l&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,_e(e,400)),n.updateLineNumbers=null,!0}function N(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=$e(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+qe(e.display)-Ve(e),n.top)}),t.visible=b(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&M(e,t);r=!1){O(e);var i=p(e);Re(e),y(e,i),E(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function A(e,t){var n=new L(e,t);if(M(e,n)){O(e),N(e,n);var r=p(e);Re(e),y(e,r),E(e,r),n.finish()}}function E(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ye(e)+"px"}function O(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(xo&&8>bo){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var l=o.node.getBoundingClientRect();i=l.bottom-l.top}var s=o.line.height-i;if(2>i&&(i=yt(t)),(s>.001||-.001>s)&&(ei(o.line,i),I(o.line),o.rest))for(var c=0;c<o.rest.length;c++)I(o.rest[c])}}}function I(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function P(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:C(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function D(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?_(e,t):"gutter"==o?z(e,t,n,r):"class"==o?F(t):"widget"==o&&j(e,t,r)}t.changes=null}function H(e){return e.node==e.text&&(e.node=ji("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),xo&&8>bo&&(e.node.style.zIndex=2)),e.node}function B(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Br(e,t)}function _(e,t){var n=t.text.className,r=B(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,F(t)):n&&(t.text.className=n)}function F(e){(function W(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=H(e);e.background=n.insertBefore(ji("div",null,t),n.firstChild)}})(e),e.line.wrapClass?H(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function z(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=H(t);t.gutterBackground=ji("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){i=H(t);var a=t.gutter=ji("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),i.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(ji("div",S(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var s=e.options.gutters[l],c=o.hasOwnProperty(s)&&o[s];c&&a.appendChild(ji("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[s]+"px; width: "+r.gutterWidth[s]+"px"))}}}function j(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild;i;i=r){var r=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}q(e,t,n)}function U(e,t,n,r){var i=B(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),F(t),z(e,t,n,r),q(e,t,r),t.node}function q(e,t,n){if(G(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)G(e,t.rest[r],t,n,!1)}function G(e,t,n,r,i){if(t.widgets)for(var o=H(n),a=0,l=t.widgets;a<l.length;++a){var s=l[a],c=ji("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Y(s,c,n,r),e.display.input.setUneditable(c),i&&s.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),Ci(s,"redraw")}}function Y(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function $(e){return Bo(e.line,e.ch)}function V(e,t){return _o(e,t)<0?t:e}function K(e,t){return _o(e,t)<0?e:t}function X(e){e.state.focused||(e.display.input.focus(),vn(e))}function Z(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=e.state.pasteIncoming||"paste"==i,l=o.splitLines(t),s=null;if(a&&r.ranges.length>1)if(Fo&&Fo.text.join("\n")==t){if(r.ranges.length%Fo.text.length==0){s=[];for(var c=0;c<Fo.text.length;c++)s.push(o.splitLines(Fo.text[c]))}}else l.length==r.ranges.length&&(s=Ri(l,(function(e){return[e]})));for(c=r.ranges.length-1;c>=0;c--){var u=r.ranges[c],f=u.from(),h=u.to();u.empty()&&(n&&n>0?f=Bo(f.line,f.ch-n):e.state.overwrite&&!a?h=Bo(h.line,Math.min(Zr(o,h.line).text.length,h.ch+Ii(l).length)):Fo&&Fo.lineWise&&Fo.text.join("\n")==t&&(f=h=Bo(f.line,0)));var d=e.curOp.updateInput,p={from:f,to:h,text:s?s[c%s.length]:l,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};Tn(e.doc,p),Ci(e,"inputRead",e,p)}t&&!a&&Q(e,t),Bn(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n?(e.preventDefault(),t.isReadOnly()||t.options.disableInput||At(t,(function(){Z(t,n,0,null,"paste")})),!0):void 0}function Q(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){a=Fn(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Zr(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Fn(e,i.head.line,"smart"));a&&Ci(e,"electricInput",e,i.head.line)}}}function ee(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:Bo(i,0),head:Bo(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ne(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ei,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function re(){var e=ji("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=ji("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return wo?e.style.width="1000px":e.setAttribute("wrap","off"),No&&(e.style.border="1px solid black"),te(e),t}function ie(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ei,this.gracePeriod=!1}function oe(e,t){var n=Qe(e,t.line);if(!n||n.hidden)return null;var r=Zr(e.doc,t.line),i=Xe(n,r,t.line),o=ii(r),a="left";o&&(a=co(o,t.ch)%2?"right":"left");var s=nt(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function ae(e,t){return t&&(e.bad=!0),e}function le(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return ae(e.clipPos(Bo(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return se(o,t,n)}}function se(e,t,n){function r(t,n,r){for(var i=-1;i<(u?u.length:0);i++)for(var o=0>i?c.map:u[i],a=0;a<o.length;a+=3){var l=o[a+2];if(l==t||l==n){var s=ti(0>i?e.line:e.rest[i]),f=o[a]+r;return(0>r||l!=t)&&(f=o[a+(r?1:0)]),Bo(s,f)}}}var i=e.text.firstChild,o=!1;if(!t||!Va(i,t))return ae(Bo(ti(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?Ii(e.rest):e.line;return ae(Bo(ti(a),a.text.length),o)}var l=3==t.nodeType?t:null,s=t;for(l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,n&&(n=l.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var c=e.measure,u=c.maps,f=r(l,s,n);if(f)return ae(f,o);for(var h=s.nextSibling,d=l?l.nodeValue.length-n:0;h;h=h.nextSibling){if(f=r(h,h.firstChild,0))return ae(Bo(f.line,f.ch-d),o);d+=h.textContent.length}var p=s.previousSibling;for(d=n;p;p=p.previousSibling){if(f=r(p,p.firstChild,-1))return ae(Bo(f.line,f.ch+d),o);d+=h.textContent.length}}function ue(e,t){this.ranges=e,this.primIndex=t}function fe(e,t){this.anchor=e,this.head=t}function he(e,t){var n=e[t];e.sort((function(e,t){return _o(e.from(),t.from())})),t=Pi(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(_o(o.to(),i.from())>=0){var a=K(o.from(),i.from()),l=V(o.to(),i.to()),s=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new fe(s?l:a,s?a:l))}}return new ue(e,t)}function de(e,t){return new ue([new fe(e,t||e)],0)}function pe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return Bo(e.first,0);var n=e.first+e.size-1;return t.line>n?Bo(n,Zr(e,n).text.length):function ge(e,t){var n=e.ch;return null==n||n>t?Bo(e.line,t):0>n?Bo(e.line,0):e}(t,Zr(e,t.line).text.length)}function ve(e,t){return t>=e.first&&t<e.first+e.size}function ye(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=me(e,t[r]);return n}function xe(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=_o(n,i)<0;o!=_o(r,i)<0?(i=n,n=r):o!=_o(n,r)<0&&(n=r)}return new fe(i,n)}return new fe(r||n,n)}function be(e,t,n,r){Te(e,new ue([xe(e,e.sel.primary(),t,n)],0),r)}function we(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=xe(e,e.sel.ranges[i],t[i],null);Te(e,he(r,e.sel.primIndex),n)}function ke(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Te(e,he(i,e.sel.primIndex),r)}function Se(e,t,n,r){Te(e,de(t,n),r)}function Le(e,t,n){var r=e.history.done,i=Ii(r);i&&i.ranges?(r[r.length-1]=t,Me(e,t,n)):Te(e,t,n)}function Te(e,t,n){Me(e,t,n),function fi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function ui(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Ii(i.done),t))?i.done[i.done.length-1]=t:hi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&li(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Me(e,t,n){(Ni(e,"beforeSelectionChange")||e.cm&&Ni(e.cm,"beforeSelectionChange"))&&(t=function Ce(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new fe(me(e,t[n].anchor),me(e,t[n].head))},origin:n&&n.origin};return Pa(e,"beforeSelectionChange",e,r),e.cm&&Pa(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?he(r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(_o(t.primary().head,e.sel.primary().head)<0?-1:1);Ne(e,Ee(e,t,r,!0)),n&&!1===n.scroll||!e.cm||Bn(e.cm)}function Ne(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Mi(e.cm)),Ci(e,"cursorActivity",e))}function Ae(e){Ne(e,Ee(e,e.sel,null,!1))}function Ee(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Ie(e,a.anchor,l&&l.anchor,n,r),c=Ie(e,a.head,l&&l.head,n,r);(i||s!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new fe(s,c))}return i?he(i,t.primIndex):t}function Oe(e,t,n,r,i){var o=Zr(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(i&&(Pa(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var c,u=s.find(0>r?1:-1);if((0>r?s.inclusiveRight:s.inclusiveLeft)&&(u=Pe(e,u,-r,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=_o(u,n))&&(0>r?0>c:c>0))return Oe(e,u,t,r,i)}var f=s.find(0>r?-1:1);return(0>r?s.inclusiveLeft:s.inclusiveRight)&&(f=Pe(e,f,r,f.line==t.line?o:null)),f?Oe(e,f,t,r,i):null}}return t}function Ie(e,t,n,r,i){var o=r||1,a=Oe(e,t,n,o,i)||!i&&Oe(e,t,n,o,!0)||Oe(e,t,n,-o,i)||!i&&Oe(e,t,n,-o,!0);return a||(e.cantEdit=!0,Bo(e.first,0))}function Pe(e,t,n,r){return 0>n&&0==t.ch?t.line>e.first?me(e,Bo(t.line-1)):null:n>0&&t.ch==(r||Zr(e,t.line)).text.length?t.line<e.first+e.size-1?Bo(t.line+1,0):null:new Bo(t.line,t.ch+n)}function Re(e){e.display.input.showSelection(e.display.input.prepareSelection())}function De(e,t){for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(!1!==t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&He(e,l.head,i),s||We(e,l,o)}}return r}function He(e,t,n){var r=dt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(ji("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(ji("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function We(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),l.appendChild(ji("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return ht(e,Bo(t,n),"div",f,r)}var l,s,f=Zr(a,t),h=f.text.length;return function eo(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}(ii(f),n||0,null==i?h:i,(function(e,t,a){var f,d,p,m=o(e,"left");if(e==t)f=m,d=p=m.left;else{if(f=o(t-1,"right"),"rtl"==a){var g=m;m=f,f=g}d=m.left,p=f.right}null==n&&0==e&&(d=c),f.top-m.top>3&&(r(d,m.top,null,m.bottom),d=c,m.bottom<f.top&&r(d,m.bottom,null,f.top)),null==i&&t==h&&(p=u),(!l||m.top<l.top||m.top==l.top&&m.left<l.left)&&(l=m),(!s||f.bottom>s.bottom||f.bottom==s.bottom&&f.right>s.right)&&(s=f),c+1>d&&(d=c),r(d,f.top,p-d,f.bottom)})),{start:l,end:s}}var o=e.display,a=e.doc,l=document.createDocumentFragment(),s=Ge(e.display),c=s.left,u=Math.max(o.sizerWidth,$e(e)-o.sizer.offsetLeft)-s.right,f=t.from(),h=t.to();if(f.line==h.line)i(f.line,f.ch,h.ch);else{var d=Zr(a,f.line),p=Zr(a,h.line),m=yr(d)==yr(p),g=i(f.line,f.ch,m?d.text.length+1:null).end,v=i(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(l)}function Be(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function _e(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Bi(Fe,e))}function Fe(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=sa(t.mode,je(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,l=o.text.length>e.options.maxHighlightLength,s=Rr(e,o,l?sa(t.mode,r):r,!0);o.styles=s.styles;var c=o.styleClasses,u=s.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!f&&h<a.length;++h)f=a[h]!=o.styles[h];f&&i.push(t.frontier),o.stateAfter=l?r:sa(t.mode,r)}else o.text.length<=e.options.maxHighlightLength&&Hr(e,o.text,r),o.stateAfter=t.frontier%5==0?sa(t.mode,r):null;return++t.frontier,+new Date>n?(_e(e,e.options.workDelay),!0):void 0})),i.length&&At(e,(function(){for(var t=0;t<i.length;t++)Ht(e,i[t],"text")}))}}function je(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=function ze(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>a;--l){if(l<=o.first)return o.first;var s=Zr(o,l-1);if(s.stateAfter&&(!n||l<=o.frontier))return l;var c=Fa(s.text,null,e.options.tabSize);(null==i||r>c)&&(i=l-1,r=c)}return i}(e,t,n),a=o>r.first&&Zr(r,o-1).stateAfter;return a=a?sa(r.mode,a):ca(r.mode),r.iter(o,t,(function(n){Hr(e,n.text,a);var l=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=l?sa(r.mode,a):null,++o})),n&&(r.frontier=o),a}function Ue(e){return e.lineSpace.offsetTop}function qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ge(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=qi(e.measure,ji("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Ye(e){return Da-e.display.nativeBarWidth}function $e(e){return e.display.scroller.clientWidth-Ye(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ye(e)-e.display.barHeight}function Xe(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(r=0;r<e.rest.length;r++)if(ti(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Je(e,t,n,r){return tt(e,et(e,t),n,r)}function Qe(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Bt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function et(e,t){var n=ti(t),r=Qe(e,n);r&&!r.text?r=null:r&&r.changes&&(D(e,r,n,P(e)),e.curOp.forceUpdate=!0),r||(r=function Ze(e,t){var n=ti(t=yr(t)),r=e.display.externalMeasured=new Pt(e.doc,t,n);r.lineN=n;var i=r.built=Br(e,r);return r.text=i.pre,qi(e.display.lineMeasure,i.pre),r}(e,t));var i=Xe(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function tt(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function Ke(e,t,n){var r=e.options.lineWrapping,i=r&&$e(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];Math.abs(s.bottom-c.bottom)>2&&o.push((s.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),o=function rt(e,t,n,r){var i,o=nt(t.map,n,r),a=o.node,l=o.start,s=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;4>u;u++){for(;l&&zi(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&zi(t.line.text.charAt(o.coverStart+s));)++s;if(xo&&9>bo&&0==l&&s==o.coverEnd-o.coverStart)i=a.parentNode.getBoundingClientRect();else if(xo&&e.options.lineWrapping){i=(f=qa(a,l,s).getClientRects()).length?f["right"==r?f.length-1:0]:qo}else i=qa(a,l,s).getBoundingClientRect()||qo;if(i.left||i.right||0==l)break;s=l,l-=1,c="right"}xo&&11>bo&&(i=function it(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Qi(e){if(null!=il)return il;var t=qi(e,ji("span","x")),n=t.getBoundingClientRect(),r=qa(t,0,1).getBoundingClientRect();return il=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var f;l>0&&(c=r="right"),i=e.options.lineWrapping&&(f=a.getClientRects()).length>1?f["right"==r?f.length-1:0]:a.getBoundingClientRect()}if(xo&&9>bo&&!l&&(!i||!i.left&&!i.right)){var h=a.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+xt(e.display),top:h.top,bottom:h.bottom}:qo}var d=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(d+p)/2,g=t.view.measure.heights;for(u=0;u<g.length-1&&!(m<g[u]);u++);var v=u?g[u-1]:0,y=g[u],x={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:v,bottom:y};return i.left||i.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=d,x.rbottom=p),x}(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function nt(e,t,n){for(var r,i,o,a,l=0;l<e.length;l+=3){var s=e[l],c=e[l+1];if(s>t?(i=0,o=1,a="left"):c>t?o=(i=t-s)+1:(l==e.length-3||t==c&&e[l+3]>t)&&(i=(o=c-s)-1,t>=c&&(a="right")),null!=i){if(r=e[l+2],s==c&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)r=e[2+(l-=3)],a="left";if("right"==n&&i==c-s)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)r=e[(l+=3)+2],a="right";break}}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:c}}function ot(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function at(e){e.display.externalMeasure=null,Ui(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ot(e.display.view[t])}function lt(e){at(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function st(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ct(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ut(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Lr(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=ri(t);if("local"==r?a+=Ue(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:ct());var s=l.left+("window"==r?0:st());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function ft(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=st(),i-=ct();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function ht(e,t,n,r,i){return r||(r=Zr(e.doc,t.line)),ut(e,r,Je(e,r,t.ch,i),n)}function dt(e,t,n,r,i,o){function a(t,a){var l=tt(e,i,t,a?"right":"left",o);return a?l.left=l.right:l.right=l.left,ut(e,r,l,n)}function l(e,t){var n=s[t],r=n.level%2;return e==to(n)&&t&&n.level<s[t-1].level?(e=no(n=s[--t])-(n.level%2?0:1),r=!0):e==no(n)&&t<s.length-1&&n.level<s[t+1].level&&(e=to(n=s[++t])-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||Zr(e.doc,t.line),i||(i=et(e,r));var s=ii(r),c=t.ch;if(!s)return a(c);var f=l(c,co(s,c));return null!=al&&(f.other=l(c,al)),f}function pt(e,t){var n=0;t=me(e.doc,t);e.options.lineWrapping||(n=xt(e.display)*t.ch);var r=Zr(e.doc,t.line),i=ri(r)+Ue(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function mt(e,t,n,r){var i=Bo(e,t);return i.xRel=r,n&&(i.outside=!0),i}function gt(e,t,n){var r=e.doc;if(0>(n+=e.display.viewOffset))return mt(r.first,0,!0,-1);var i=ni(r,n),o=r.first+r.size-1;if(i>o)return mt(r.first+r.size-1,Zr(r,o).text.length,!0,1);0>t&&(t=0);for(var a=Zr(r,i);;){var l=vt(e,a,i,t,n),s=gr(a),c=s&&s.find(0,!0);if(!s||!(l.ch>c.from.ch||l.ch==c.from.ch&&l.xRel>0))return l;i=ti(a=c.to.line)}}function vt(e,t,n,r,i){function o(r){var i=dt(e,Bo(n,r),"line",t,c);return l=!0,a>i.bottom?i.left-s:a<i.top?i.left+s:(l=!1,i.left)}var a=i-ri(t),l=!1,s=2*e.display.wrapper.clientWidth,c=et(e,t),u=ii(t),f=t.text.length,h=ro(t),d=io(t),p=o(h),m=l,g=o(d),v=l;if(r>g)return mt(n,d,v,1);for(;;){if(u?d==h||d==fo(t,h,1):1>=d-h){for(var y=p>r||g-r>=r-p?h:d,x=r-(y==h?p:g);zi(t.text.charAt(y));)++y;return mt(n,y,y==h?m:v,-1>x?-1:x>1?1:0)}var w=Math.ceil(f/2),k=h+w;if(u){k=h;for(var S=0;w>S;++S)k=fo(t,k,1)}var C=o(k);C>r?(d=k,g=C,(v=l)&&(g+=1e3),f=w):(h=k,p=C,m=l,f-=w)}}function yt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==zo){zo=ji("pre");for(var t=0;49>t;++t)zo.appendChild(document.createTextNode("x")),zo.appendChild(ji("br"));zo.appendChild(document.createTextNode("x"))}qi(e.measure,zo);var n=zo.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Ui(e.measure),n||1}function xt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ji("span","xxxxxxxxxx"),n=ji("pre",[t]);qi(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Yo},Go?Go.ops.push(e.curOp):e.curOp.ownsGroup=Go={ops:[e.curOp],delayedCallbacks:[]}}function kt(e){var n=e.curOp.ownsGroup;if(n)try{!function wt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{Go=null;for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;!function St(e){for(var t=e.ops,n=0;n<t.length;n++)Ct(t[n]);for(n=0;n<t.length;n++)Lt(t[n]);for(n=0;n<t.length;n++)Tt(t[n]);for(n=0;n<t.length;n++)Mt(t[n]);for(n=0;n<t.length;n++)Nt(t[n])}(n)}}function Ct(e){var t=e.cm,n=t.display;(function T(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ye(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ye(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new L(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Lt(e){e.updatedDisplay=e.mustUpdate&&M(e.cm,e.update)}function Tt(e){var t=e.cm,n=t.display;e.updatedDisplay&&O(t),e.barMeasure=p(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Je(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ye(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-$e(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection(e.focus))}function Mt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&on(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==Gi()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.updatedDisplay&&E(t,e.barMeasure),e.selectionChanged&&Be(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&X(e.cm)}function Nt(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&N(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,w(t)),e.scrollToPos){var i=function Rn(e,t,n,r){null==r&&(r=0);for(var i=0;5>i;i++){var o=!1,a=dt(e,t),l=n&&n!=t?dt(e,n):a,s=Hn(e,Math.min(a.left,l.left),Math.min(a.top,l.top)-r,Math.max(a.left,l.left),Math.max(a.bottom,l.bottom)+r),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=s.scrollTop&&(rn(e,s.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=s.scrollLeft&&(on(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return a}(t,me(r,e.scrollToPos.from),me(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function Pn(e,t){if(!Ti(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Mo){var o=ji("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-Ue(e.display))+"px; height: "+(t.bottom-t.top+Ye(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||Pa(o[l],"hide");if(a)for(l=0;l<a.length;++l)a[l].lines.length&&Pa(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Pa(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function At(e,t){if(e.curOp)return t();bt(e);try{return t()}finally{kt(e)}}function Et(e,t){return function(){if(e.curOp)return t.apply(e,arguments);bt(e);try{return t.apply(e,arguments)}finally{kt(e)}}}function Ot(e){return function(){if(this.curOp)return e.apply(this,arguments);bt(this);try{return e.apply(this,arguments)}finally{kt(this)}}}function It(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);bt(t);try{return e.apply(this,arguments)}finally{kt(t)}}}function Pt(e,t,n){this.line=t,this.rest=function xr(e){for(var t,n;t=gr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?ti(Ii(this.rest))-n+1:1,this.node=this.text=null,this.hidden=kr(e,t)}function Rt(e,t,n){for(var r,i=[],o=t;n>o;o=r){var a=new Pt(e.doc,Zr(e.doc,o),o);r=o+a.size,i.push(a)}return i}function Dt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Wo&&br(e.doc,t)<i.viewTo&&Wt(e);else if(n<=i.viewFrom)Wo&&wr(e.doc,n+r)>i.viewFrom?Wt(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Wt(e);else if(t<=i.viewFrom){(o=_t(e,n,n+r,1))?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Wt(e)}else if(n>=i.viewTo){var o;(o=_t(e,t,t,-1))?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Wt(e)}else{var a=_t(e,t,t,-1),l=_t(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(Rt(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):Wt(e)}var s=i.externalMeasured;s&&(n<s.lineN?s.lineN+=r:t<s.lineN+s.size&&(i.externalMeasured=null))}function Ht(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[Bt(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==Pi(a,n)&&a.push(n)}}}function Wt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Bt(e,t){if(t>=e.display.viewTo)return null;if(0>(t-=e.display.viewFrom))return null;for(var n=e.display.view,r=0;r<n.length;r++)if(0>(t-=n[r].size))return r}function _t(e,t,n,r){var i,o=Bt(e,t),a=e.display.view;if(!Wo||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=0,s=e.display.viewFrom;o>l;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;br(e.doc,n)!=n;){if(o==(0>r?0:a.length-1))return null;n+=r*a[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function zt(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function qt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Gt(e,t){for(var n=wi(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Yt(e,t,n,r){var i=e.display;if(!n&&"true"==wi(t).getAttribute("cm-not-content"))return null;var o,a,l=i.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,c=gt(e,o,a);if(r&&1==c.xRel&&(s=Zr(e.doc,c.line).text).length==c.ch){var u=Fa(s,s.length,e.options.tabSize)-s.length;c=Bo(c.line,Math.max(0,Math.round((o-Ge(e.display).left)/xt(e.display))-u))}return c}function $t(e){var t=this,n=t.display;if(!(Ti(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.shift=e.shiftKey,Gt(n,e))return void(wo||(n.scroller.draggable=!1,setTimeout((function(){n.scroller.draggable=!0}),100)));if(!Jt(t,e)){var r=Yt(t,e);switch(window.focus(),ki(e)){case 1:t.state.selectingText?t.state.selectingText(e):r?function Vt(e,t,n){xo?setTimeout(Bi(X,e),0):e.curOp.focus=Gi();var r,i=+new Date;Uo&&Uo.time>i-400&&0==_o(Uo.pos,n)?r="triple":jo&&jo.time>i-400&&0==_o(jo.pos,n)?(r="double",Uo={time:i,pos:n}):(r="single",jo={time:i,pos:n});var o,a=e.doc.sel,l=Eo?t.metaKey:t.ctrlKey;e.options.dragDrop&&el&&!e.isReadOnly()&&"single"==r&&(o=a.contains(n))>-1&&(_o((o=a.ranges[o]).from(),n)<0||n.xRel>0)&&(_o(o.to(),n)>0||n.xRel<0)?function Kt(e,t,n,r){var i=e.display,o=+new Date,a=Et(e,(function(l){wo&&(i.scroller.draggable=!1),e.state.draggingText=!1,Ia(document,"mouseup",a),Ia(i.scroller,"drop",a),Math.abs(t.clientX-l.clientX)+Math.abs(t.clientY-l.clientY)<10&&(Ma(l),!r&&+new Date-200<o&&be(e.doc,n),wo||xo&&9==bo?setTimeout((function(){document.body.focus(),i.input.focus()}),20):i.input.focus())}));wo&&(i.scroller.draggable=!0),e.state.draggingText=a,i.scroller.dragDrop&&i.scroller.dragDrop(),Ea(document,"mouseup",a),Ea(i.scroller,"drop",a)}(e,t,n,l):function Xt(e,t,n,r,i){function o(t){if(0!=_o(g,t))if(g=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=Fa(Zr(c,n.line).text,n.ch,o),l=Fa(Zr(c,t.line).text,t.ch,o),s=Math.min(a,l),d=Math.max(a,l),p=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));m>=p;p++){var v=Zr(c,p).text,y=za(v,s,o);s==d?i.push(new fe(Bo(p,y),Bo(p,y))):v.length>y&&i.push(new fe(Bo(p,y),Bo(p,za(v,d,o))))}i.length||i.push(new fe(n,n)),Te(c,he(h.ranges.slice(0,f).concat(i),f),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x=u,b=x.anchor,w=t;if("single"!=r){if("double"==r)var k=e.findWordAt(t);else k=new fe(Bo(t.line,0),me(c,Bo(t.line+1,0)));_o(k.anchor,b)>0?(w=k.head,b=K(x.from(),k.anchor)):(w=k.anchor,b=V(x.to(),k.head))}(i=h.ranges.slice(0))[f]=new fe(me(c,b),w),Te(c,he(i,f),Ba)}}function a(t){var n=++y,i=Yt(e,t,!0,"rect"==r);if(i)if(0!=_o(i,g)){e.curOp.focus=Gi(),o(i);var l=b(s,c);(i.line>=l.to||i.line<l.from)&&setTimeout(Et(e,(function(){y==n&&a(t)})),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(Et(e,(function(){y==n&&(s.scroller.scrollTop+=u,a(t))})),50)}}function l(t){e.state.selectingText=!1,y=1/0,Ma(t),s.input.focus(),Ia(document,"mousemove",x),Ia(document,"mouseup",w),c.history.lastSelOrigin=null}var s=e.display,c=e.doc;Ma(t);var u,f,h=c.sel,d=h.ranges;if(i&&!t.shiftKey?(f=c.sel.contains(n),u=f>-1?d[f]:new fe(n,n)):(u=c.sel.primary(),f=c.sel.primIndex),Oo?t.shiftKey&&t.metaKey:t.altKey)r="rect",i||(u=new fe(n,n)),n=Yt(e,t,!0,!0),f=-1;else if("double"==r){var p=e.findWordAt(n);u=e.display.shift||c.extend?xe(c,u,p.anchor,p.head):p}else if("triple"==r){var m=new fe(Bo(n.line,0),me(c,Bo(n.line+1,0)));u=e.display.shift||c.extend?xe(c,u,m.anchor,m.head):m}else u=xe(c,u,n);i?-1==f?(f=d.length,Te(c,he(d.concat([u]),f),{scroll:!1,origin:"*mouse"})):d.length>1&&d[f].empty()&&"single"==r&&!t.shiftKey?(Te(c,he(d.slice(0,f).concat(d.slice(f+1)),0),{scroll:!1,origin:"*mouse"}),h=c.sel):ke(c,f,u,Ba):(f=0,Te(c,new ue([u],0),Ba),h=c.sel);var g=n,v=s.wrapper.getBoundingClientRect(),y=0,x=Et(e,(function(e){ki(e)?a(e):l(e)})),w=Et(e,l);e.state.selectingText=w,Ea(document,"mousemove",x),Ea(document,"mouseup",w)}(e,t,n,r,l)}(t,e,r):wi(e)==n.scroller&&Ma(e);break;case 2:wo&&(t.state.lastMiddleDown=+new Date),r&&be(t.doc,r),setTimeout((function(){n.input.focus()}),20),Ma(e);break;case 3:Do?xn(t,e):function gn(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yn(e))}),100)}(t)}}}}function Zt(e,t,n,r){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ma(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!Ni(e,n))return bi(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=a.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=i){var u=ni(e.doc,o),f=e.options.gutters[s];return Pa(e,n,e,u,f,t),bi(t)}}}function Jt(e,t){return Zt(e,t,"gutterClick",!0)}function Qt(e){var t=this;if(nn(t),!Ti(t,e)&&!Gt(t.display,e)){Ma(e),xo&&($o=+new Date);var n=Yt(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=Pi(t.options.allowDropFileTypes,e.type)){var l=new FileReader;l.onload=Et(t,(function(){var e=l.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++a==i){var s={from:n=me(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Tn(t.doc,s),Le(t.doc,de(n,Qo(s)))}})),l.readAsText(e)}},s=0;i>s;++s)l(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){t.display.input.focus()}),20);try{if(o=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!(Eo?e.altKey:e.ctrlKey))var c=t.listSelections();if(Me(t.doc,de(n,n)),c)for(s=0;s<c.length;++s)In(t.doc,"",c[s].anchor,c[s].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function nn(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function rn(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,go||A(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),go&&A(e),_e(e,100))}function on(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,w(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function an(e,t){var n=Xo(t),r=n.x,i=n.y,o=e.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(r&&l||i&&s){if(i&&Eo&&wo)e:for(var c=t.target,u=o.view;c!=a;c=c.parentNode)for(var f=0;f<u.length;f++)if(u[f].node==c){e.display.currentWheelTarget=c;break e}if(r&&!go&&!Co&&null!=Ko)return i&&s&&rn(e,Math.max(0,Math.min(a.scrollTop+i*Ko,a.scrollHeight-a.clientHeight))),on(e,Math.max(0,Math.min(a.scrollLeft+r*Ko,a.scrollWidth-a.clientWidth))),(!i||i&&s)&&Ma(t),void(o.wheelStartX=null);if(i&&null!=Ko){var h=i*Ko,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;0>h?d=Math.max(0,d+h-50):p=Math.min(e.doc.height,p+h+50),A(e,{top:d,bottom:p})}20>Vo&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout((function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Ko=(Ko*Vo+n)/(Vo+1),++Vo)}}),200)):(o.wheelDX+=r,o.wheelDY+=i))}}function ln(e,t,n){if("string"==typeof t&&!(t=ua[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ha}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function cn(e,t,n,r){var i=e.state.keySeq;if(i){if(da(t))return"handled";Zo.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),t=i+" "+t}var o=function sn(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=ha(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&ha(t,e.options.extraKeys,n,e)||ha(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Ci(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(Ma(n),Be(e)),i&&!o&&/\'$/.test(t)?(Ma(n),!0):!!o}function un(e,t){var n=pa(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?cn(e,"Shift-"+n,t,(function(t){return ln(e,t,!0)}))||cn(e,n,t,(function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?ln(e,t):void 0})):cn(e,n,t,(function(t){return ln(e,t)})))}function hn(e){var t=this;if(t.curOp.focus=Gi(),!Ti(t,e)){xo&&11>bo&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=un(t,e);Co&&(Jo=r?n:null,!r&&88==n&&!rl&&(Eo?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function dn(e){function t(e){18!=e.keyCode&&e.altKey||(Za(n,"CodeMirror-crosshair"),Ia(document,"keyup",t),Ia(document,"mouseover",t))}var n=e.display.lineDiv;Ja(n,"CodeMirror-crosshair"),Ea(document,"keyup",t),Ea(document,"mouseover",t)}(t)}}function pn(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ti(this,e)}function mn(e){var t=this;if(!(Gt(t.display,e)||Ti(t,e)||e.ctrlKey&&!e.altKey||Eo&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Co&&n==Jo)return Jo=null,void Ma(e);if(!Co||e.which&&!(e.which<10)||!un(t,e))(function fn(e,t,n){return cn(e,"'"+n+"'",t,(function(t){return ln(e,t,!0)}))})(t,e,String.fromCharCode(null==r?n:r))||t.display.input.onKeyPress(e)}}function vn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Pa(e,"focus",e),e.state.focused=!0,Ja(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),wo&&setTimeout((function(){e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Be(e))}function yn(e){e.state.delayingBlurEvent||(e.state.focused&&(Pa(e,"blur",e),e.state.focused=!1,Za(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function xn(e,t){Gt(e.display,t)||function bn(e,t){return!!Ni(e,"gutterContextMenu")&&Zt(e,t,"gutterContextMenu",!1)}(e,t)||Ti(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function wn(e,t){if(_o(e,t.from)<0)return e;if(_o(e,t.to)<=0)return Qo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Qo(t).ch-t.to.ch),Bo(n,r)}function kn(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new fe(wn(i.anchor,t),wn(i.head,t)))}return he(n,e.sel.primIndex)}function Sn(e,t,n){return e.line==t.line?Bo(n.line,e.ch-t.ch+n.ch):Bo(n.line+(e.line-t.line),e.ch)}function Ln(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=me(e,t)),n&&(this.to=me(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Pa(e,"beforeChange",e,r),e.cm&&Pa(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Tn(e,t,n){if(e.cm){if(!e.cm.curOp)return Et(e.cm,Tn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange"))||(t=Ln(e,t,!0))){var r=Ho&&!n&&function sr(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Pi(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],l=a.find(0),s=0;s<i.length;++s){var c=i[s];if(!(_o(c.to,l.from)<0||_o(c.from,l.to)>0)){var u=[s,1],f=_o(c.from,l.from),h=_o(c.to,l.to);(0>f||!a.inclusiveLeft&&!f)&&u.push({from:c.from,to:l.from}),(h>0||!a.inclusiveRight&&!h)&&u.push({from:l.to,to:c.to}),i.splice.apply(i,u),s+=u.length-1}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Mn(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Mn(e,t)}}function Mn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=_o(t.from,t.to)){var n=kn(e,t);ci(e,t,n,e.cm?e.cm.curOp.id:NaN),En(e,t,n,or(e,t));var r=[];Kr(e,(function(e,n){n||-1!=Pi(r,e.history)||(xi(e.history,t),r.push(e.history)),En(e,t,null,or(e,t))}))}}function Nn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,l="undo"==t?i.undone:i.done,s=0;s<a.length&&(r=a[s],n?!r.ranges||r.equals(e.sel):r.ranges);s++);if(s!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;(r=a.pop()).ranges;){if(hi(r,l),n&&!r.equals(e.sel))return void Te(e,r,{clearRedo:!1});o=r}var c=[];hi(o,l),l.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;var u=Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange");for(s=r.changes.length-1;s>=0;--s){var f=r.changes[s];if(f.origin=t,u&&!Ln(e,f,!1))return void(a.length=0);c.push(ai(e,f));var h=s?kn(e,f):Ii(a);En(e,f,h,lr(e,f)),!s&&e.cm&&e.cm.scrollIntoView({from:f.from,to:Qo(f)});var d=[];Kr(e,(function(e,t){t||-1!=Pi(d,e.history)||(xi(e.history,f),d.push(e.history)),En(e,f,null,lr(e,f))}))}}}}function An(e,t){if(0!=t&&(e.first+=t,e.sel=new ue(Ri(e.sel.ranges,(function(e){return new fe(Bo(e.anchor.line+t,e.anchor.ch),Bo(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Dt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Ht(e.cm,r,"gutter")}}function En(e,t,n,r){if(e.cm&&!e.cm.curOp)return Et(e.cm,En)(e,t,n,r);if(t.to.line<e.first)An(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);An(e,i),t={from:Bo(e.first,0),to:Bo(t.to.line+i,t.to.ch),text:[Ii(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Bo(o,Zr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Jr(e,t.from,t.to),n||(n=kn(e,t)),e.cm?On(e.cm,t,r):Yr(e,t,r),Me(e,n,Wa)}}function On(e,t,n){var r=e.doc,i=e.display,a=t.from,l=t.to,s=!1,c=a.line;e.options.lineWrapping||(c=ti(yr(Zr(r,a.line))),r.iter(c,l.line+1,(function(e){return e==i.maxLine?(s=!0,!0):void 0}))),r.sel.contains(t.from,t.to)>-1&&Mi(e),Yr(r,t,n,o(e)),e.options.lineWrapping||(r.iter(c,a.line+t.text.length,(function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),_e(e,400);var u=t.text.length-(l.line-a.line)-1;t.full?Dt(e):a.line!=l.line||1!=t.text.length||Gr(e.doc,t)?Dt(e,a.line,l.line+1,u):Ht(e,a.line,"text");var h=Ni(e,"changes"),d=Ni(e,"change");if(d||h){var p={from:a,to:l,text:t.text,removed:t.removed,origin:t.origin};d&&Ci(e,"change",e,p),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function In(e,t,n,r,i){if(r||(r=n),_o(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=e.splitLines(t)),Tn(e,{from:n,to:r,text:t,origin:i})}function Hn(e,t,n,r,i){var o=e.display,a=yt(e.display);0>n&&(n=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,s=Ve(e),c={};i-n>s&&(i=n+s);var u=e.doc.height+qe(o),f=a>n,h=i>u-a;if(l>n)c.scrollTop=f?0:n;else if(i>l+s){var d=Math.min(n,(h?u:i)-s);d!=l&&(c.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=$e(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=r-t>m;return g&&(r=t+m),10>t?c.scrollLeft=0:p>t?c.scrollLeft=Math.max(0,t-(g?0:10)):r>m+p-3&&(c.scrollLeft=r+(g?0:10)-m),c}function Wn(e,t,n){null==t&&null==n||_n(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Bn(e){_n(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?Bo(t.line,t.ch-1):t,r=Bo(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function _n(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=pt(e,t.from),r=pt(e,t.to),i=Hn(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Fn(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=je(e,t):n="prev");var a=e.options.tabSize,l=Zr(o,t),s=Fa(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,u=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==n&&((c=o.mode.indent(i,l.text.slice(u.length),l.text))==Ha||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?Fa(Zr(o,t-1).text,null,a):0:"add"==n?c=s+e.options.indentUnit:"subtract"==n?c=s-e.options.indentUnit:"number"==typeof n&&(c=s+n),c=Math.max(0,c);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)h+=a,f+="\t";if(c>h&&(f+=Oi(c-h)),f!=u)return In(o,f,Bo(t,0),Bo(t,u.length),"+input"),l.stateAfter=null,!0;for(d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<u.length){ke(o,d,new fe(h=Bo(t,u.length),h));break}}}function zn(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Zr(e,pe(e,t)):i=ti(t),null==i?null:(r(o,i)&&e.cm&&Ht(e.cm,i,n),o)}function jn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&_o(o.from,Ii(r).to)<=0;){var a=r.pop();if(_o(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}At(e,(function(){for(var t=r.length-1;t>=0;t--)In(e.doc,"",r[t].from,r[t].to,"+delete");Bn(e)}))}function Un(e,t,n,r,i){function o(){var t=l+n;return!(t<e.first||t>=e.first+e.size)&&(l=t,u=Zr(e,t))}function a(e){var t=(i?fo:ho)(u,s,n,!0);if(null==t){if(e||!o())return!1;s=i?(0>n?io:ro)(u):0>n?u.text.length:0}else s=t;return!0}var l=t.line,s=t.ch,c=n,u=Zr(e,l);if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var f=null,h="group"==r,d=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(0>n)||a(!p);p=!1){var m=u.text.charAt(s)||"\n",g=_i(m,d)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||p||g||(g="s"),f&&f!=g){0>n&&(n=1,a());break}if(g&&(f=g),n>0&&!a(!p))break}var v=Ie(e,Bo(l,s),t,c,!0);return _o(t,v)||(v.hitSide=!0),v}function qn(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(l-(0>n?1.5:.5)*yt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var s=gt(e,a,i);if(!s.outside)break;if(0>n?0>=i:i>=o.height){s.hitSide=!0;break}i+=5*n}return s}function Gn(t,n,r,i){e.defaults[t]=n,r&&(ta[t]=i?function(e,t,n){n!=na&&r(e,t,n)}:r)}function Yn(e){for(var t,n,r,i,o=e.split(/-(?!$)/),a=(e=o[o.length-1],0);a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function $n(e){return"string"==typeof e?fa[e]:e}function Vn(e,t,n,r,i){if(r&&r.shared)return function Kn(e,t,n,r,i){r=Wi(r),r.shared=!1;var o=[Vn(e,t,n,r,i)],a=o[0],l=r.widgetNode;return Kr(e,(function(e){l&&(r.widgetNode=l.cloneNode(!0)),o.push(Vn(e,me(e,t),me(e,n),r,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=Ii(o)})),new ya(o,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Et(e.cm,Vn)(e,t,n,r,i);var o=new va(e,i),a=_o(t,n);if(r&&Wi(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ji("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(vr(e,t.line,t,n,o)||t.line!=n.line&&vr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Wo=!0}o.addToHistory&&ci(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,s=t.line,c=e.cm;if(e.iter(s,n.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&yr(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=t.line&&ei(e,0),function nr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Qn(o,s==t.line?t.ch:null,s==n.line?n.ch:null)),++s})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){kr(e,t)&&ei(t,0)})),o.clearOnEnter&&Ea(o,"beforeCursorEnter",(function(){o.clear()})),o.readOnly&&(Ho=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ga,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)Dt(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Ht(c,u,"text");o.atomic&&Ae(c.doc),Ci(c,"markerAdded",c,o)}return o}function Xn(e){return e.findMarks(Bo(e.first,0),e.clipPos(Bo(e.lastLine())),(function(e){return e.parent}))}function Jn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Kr(n.primary.doc,(function(e){r.push(e)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==Pi(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function Qn(e,t,n){this.marker=e,this.from=t,this.to=n}function er(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function tr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function or(e,t){if(t.full)return null;var n=ve(e,t.from.line)&&Zr(e,t.from.line).markedSpans,r=ve(e,t.to.line)&&Zr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==_o(t.from,t.to),l=function rr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Qn(a,o.from,s?null:o.to))}}return r}(n,i,a),s=function ir(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Qn(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,u=Ii(t.text).length+(c?i:0);if(l)for(var f=0;f<l.length;++f){if(null==(h=l[f]).to)(d=er(s,h.marker))?c&&(h.to=null==d.to?null:d.to+u):h.to=i}if(s)for(f=0;f<s.length;++f){var h,d;if(null!=(h=s[f]).to&&(h.to+=u),null==h.from)(d=er(l,h.marker))||(h.from=u,c&&(l||(l=[])).push(h));else h.from+=u,c&&(l||(l=[])).push(h)}l&&(l=ar(l)),s&&s!=l&&(s=ar(s));var p=[l];if(!c){var m,g=t.text.length-2;if(g>0&&l)for(f=0;f<l.length;++f)null==l[f].to&&(m||(m=[])).push(new Qn(l[f].marker,null,null));for(f=0;g>f;++f)p.push(m);p.push(s)}return p}function ar(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function lr(e,t){var n=function mi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(pi(n[r]));return i}(e,t),r=or(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(n[i]=a)}return n}function cr(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ur(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function fr(e){return e.inclusiveLeft?-1:0}function hr(e){return e.inclusiveRight?1:0}function dr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=_o(r.from,i.from)||fr(e)-fr(t);if(o)return-o;var a=_o(r.to,i.to)||hr(e)-hr(t);return a||t.id-e.id}function pr(e,t){var n,r=Wo&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||dr(n,i.marker)<0)&&(n=i.marker);return n}function mr(e){return pr(e,!0)}function gr(e){return pr(e,!1)}function vr(e,t,n,r,i){var o=Zr(e,t),a=Wo&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),u=_o(c.from,n)||fr(s.marker)-fr(i),f=_o(c.to,r)||hr(s.marker)-hr(i);if(!(u>=0&&0>=f||0>=u&&f>=0)&&(0>=u&&(s.marker.inclusiveRight&&i.inclusiveLeft?_o(c.to,n)>=0:_o(c.to,n)>0)||u>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?_o(c.from,r)<=0:_o(c.from,r)<0)))return!0}}}function yr(e){for(var t;t=mr(e);)e=t.find(-1,!0).line;return e}function br(e,t){var n=Zr(e,t),r=yr(n);return n==r?t:ti(r)}function wr(e,t){if(t>e.lastLine())return t;var n,r=Zr(e,t);if(!kr(e,r))return t;for(;n=gr(r);)r=n.find(1,!0).line;return ti(r)+1}function kr(e,t){var n=Wo&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Sr(e,t,r))return!0}}function Sr(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return Sr(e,r.line,er(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Sr(e,t,i))return!0}function Cr(e,t,n){ri(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Wn(e,null,n)}function Lr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Va(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),qi(t.display.measure,ji("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Nr(e){e.parent=null,cr(e)}function Ar(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Er(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Or(t,n,r,i){for(var o=0;10>o;o++){i&&(i[0]=e.innerMode(t,r).mode);var a=t.token(n,r);if(n.pos>n.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function Ir(e,t,n,r){function i(e){return{start:f.start,end:f.pos,string:f.current(),type:o||null,state:e?sa(a.mode,u):u}}var o,a=e.doc,l=a.mode;t=me(a,t);var s,c=Zr(a,t.line),u=je(e,t.line,n),f=new ma(c.text,e.options.tabSize);for(r&&(s=[]);(r||f.pos<t.ch)&&!f.eol();)f.start=f.pos,o=Or(l,f,u),r&&s.push(i(!0));return r?s:i()}function Pr(e,t,n,r,i,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,c=0,u=null,f=new ma(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Ar(Er(n,r),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(l=!1,a&&Hr(e,t,r,f.pos),f.pos=t.length,s=null):s=Ar(Or(n,f,r,h),o),h){var d=h[0].name;d&&(s="m-"+(s?d+" "+s:d))}if(!l||u!=s){for(;c<f.start;)i(c=Math.min(f.start,c+5e4),u);u=s}f.start=f.pos}for(;c<f.pos;){var p=Math.min(f.pos,c+5e4);i(p,u),c=p}}function Rr(e,t,n,r){var i=[e.state.modeGen],o={};Pr(e,t.text,e.doc.mode,n,(function(e,t){i.push(e,t)}),o,r);for(var a=0;a<e.state.overlays.length;++a){var l=e.state.overlays[a],s=1,c=0;Pr(e,t.text,l.mode,!0,(function(e,t){for(var n=s;e>c;){var r=i[s];r>e&&i.splice(s,1,e,i[s+1],r),s+=2,c=Math.min(e,r)}if(t)if(l.opaque)i.splice(n,s-n,e,"cm-overlay "+t),s=n+2;else for(;s>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}}),o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Dr(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=je(e,ti(t)),i=Rr(e,t,t.text.length>e.options.maxHighlightLength?sa(e.doc.mode,r):r);t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Hr(e,t,n,r){var i=e.doc.mode,o=new ma(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&Er(i,n);!o.eol();)Or(i,o,n),o.start=o.pos}function Wr(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?ka:wa;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Br(e,t){var n=ji("span",null,null,wo?"padding-right: .1px":null),r={pre:ji("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(xo||wo)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=Fr,Ji(e.display.measure)&&(o=ii(a))&&(r.addToken=jr(r.addToken,o)),r.map=[],qr(a,r,Dr(e,a,t!=e.display.externalMeasured&&ti(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=$i(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=$i(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Zi(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(wo){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Pa(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=$i(r.pre.className,r.textClass||"")),r}function Fr(e,t,n,r,i,o,a){if(t){var l=e.splitSpaces?t.replace(/ {3,}/g,zr):t,s=e.cm.state.specialChars,c=!1;if(s.test(t))for(var u=document.createDocumentFragment(),f=0;;){s.lastIndex=f;var h=s.exec(t),d=h?h.index-f:t.length-f;if(d){var p=document.createTextNode(l.slice(f,f+d));xo&&9>bo?u.appendChild(ji("span",[p])):u.appendChild(p),e.map.push(e.pos,e.pos+d,p),e.col+=d,e.pos+=d}if(!h)break;if(f+=d+1,"\t"==h[0]){var m=e.cm.options.tabSize,g=m-e.col%m;(p=u.appendChild(ji("span",Oi(g),"cm-tab"))).setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),e.col+=g}else if("\r"==h[0]||"\n"==h[0]){(p=u.appendChild(ji("span","\r"==h[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1}else{(p=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),xo&&9>bo?u.appendChild(ji("span",[p])):u.appendChild(p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}else{e.col+=t.length;u=document.createTextNode(l);e.map.push(e.pos,e.pos+t.length,u),xo&&9>bo&&(c=!0),e.pos+=t.length}if(n||r||i||c||a){var v=n||"";r&&(v+=r),i&&(v+=i);var y=ji("span",[u],v,a);return o&&(y.title=o),e.content.appendChild(y)}e.content.appendChild(u)}}function zr(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+" "}function jr(e,t){return function(n,r,i,o,a,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var f=0;f<t.length;f++){var h=t[f];if(h.to>c&&h.from<=c)break}if(h.to>=u)return e(n,r,i,o,a,l,s);e(n,r.slice(0,h.to-c),i,o,null,l,s),o=null,r=r.slice(h.to-c),c=h.to}}}function Ur(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t}function qr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,l,s,c,u,f,h,d=i.length,p=0,m=1,g="",v=0;;){if(v==p){s=c=u=f=l="",h=null,v=1/0;for(var y,x=[],b=0;b<r.length;++b){var w=r[b],k=w.marker;"bookmark"==k.type&&w.from==p&&k.widgetNode?x.push(k):w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&v>w.to&&(v=w.to,c=""),k.className&&(s+=" "+k.className),k.css&&(l=(l?l+";":"")+k.css),k.startStyle&&w.from==p&&(u+=" "+k.startStyle),k.endStyle&&w.to==v&&(y||(y=[])).push(k.endStyle,w.to),k.title&&!f&&(f=k.title),k.collapsed&&(!h||dr(h.marker,k)<0)&&(h=w)):w.from>p&&v>w.from&&(v=w.from)}if(y)for(b=0;b<y.length;b+=2)y[b+1]==v&&(c+=" "+y[b]);if(!h||h.from==p)for(b=0;b<x.length;++b)Ur(t,0,x[b]);if(h&&(h.from||0)==p){if(Ur(t,(null==h.to?d+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=d)break;for(var S=Math.min(d,v);;){if(g){var C=p+g.length;if(!h){var L=C>S?g.slice(0,S-p):g;t.addToken(t,L,a?a+s:s,u,p+L.length==v?c:"",f,l)}if(C>=S){g=g.slice(S-p),p=S;break}p=C,u=""}g=i.slice(o,o=n[m++]),a=Wr(n[m++],t.cm.options)}}else for(m=1;m<n.length;m+=2)t.addToken(t,i.slice(o,o=n[m]),Wr(n[m+1],t.cm.options))}function Gr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Ii(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Yr(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){(function Mr(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),cr(e),ur(e,n);var i=r?r(e):1;i!=e.height&&ei(e,i)})(e,n,i,r),Ci(e,"change",e,t)}function a(e,t){for(var n=e,o=[];t>n;++n)o.push(new ba(c[n],i(n),r));return o}var l=t.from,s=t.to,c=t.text,u=Zr(e,l.line),f=Zr(e,s.line),h=Ii(c),d=i(c.length-1),p=s.line-l.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Gr(e,t)){var m=a(0,c.length-1);o(f,f.text,d),p&&e.remove(l.line,p),m.length&&e.insert(l.line,m)}else if(u==f)if(1==c.length)o(u,u.text.slice(0,l.ch)+h+u.text.slice(s.ch),d);else{(m=a(1,c.length-1)).push(new ba(h+u.text.slice(s.ch),d,r)),o(u,u.text.slice(0,l.ch)+c[0],i(0)),e.insert(l.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,l.ch)+c[0]+f.text.slice(s.ch),i(0)),e.remove(l.line+1,p);else{o(u,u.text.slice(0,l.ch)+c[0],i(0)),o(f,h+f.text.slice(s.ch),d);m=a(1,c.length-1);p>1&&e.remove(l.line+1,p-1),e.insert(l.line+1,m)}Ci(e,"change",e,t)}function $r(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Vr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Kr(e,t,n){!function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var l=e.linked[a];if(l.doc!=i){var s=o&&l.sharedHist;n&&!s||(t(l.doc,s),r(l.doc,e,s))}}}(e,null,!0)}function Xr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,Dt(e)}function Zr(e,t){if(0>(t-=e.first)||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function Jr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i})),r}function Qr(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function ei(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function ti(e){if(null==e.parent)return null;for(var t=e.parent,n=Pi(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function ni(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(r=0;r<e.lines.length;++r){var l=e.lines[r].height;if(l>t)break;t-=l}return n+r}function ri(e){for(var t=0,n=(e=yr(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function ii(e){var t=e.order;return null==t&&(t=e.order=ll(e.text)),t}function oi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ai(e,t){var n={from:$(t.from),to:Qo(t),text:Jr(e,t.from,t.to)};return di(e,n,t.from.line,t.to.line+1),Kr(e,(function(e){di(e,n,t.from.line,t.to.line+1)}),!0),n}function li(e){for(;e.length;){if(!Ii(e).ranges)break;e.pop()}}function ci(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function si(e,t){return t?(li(e.done),Ii(e.done)):e.done.length&&!Ii(e.done).ranges?Ii(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Ii(e.done)):void 0}(i,i.lastOp==r))){var l=Ii(o.changes);0==_o(t.from,t.to)&&0==_o(t.from,l.to)?l.to=Qo(t):o.changes.push(ai(e,t))}else{var s=Ii(i.done);for(s&&s.ranges||hi(e.sel,i.done),o={changes:[ai(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,l||Pa(e,"historyAdded")}function hi(e,t){var n=Ii(t);n&&n.ranges&&n.equals(e)||t.push(e)}function di(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function pi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function gi(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?ue.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];i.push({changes:l});for(var s=0;s<a.length;++s){var c,u=a[s];if(l.push({from:u.from,to:u.to,text:u.text}),t)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&Pi(t,Number(c[1]))>-1&&(Ii(l)[f]=u[f],delete u[f])}}}return i}function vi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)vi(o.ranges[l].anchor,t,n,r),vi(o.ranges[l].head,t,n,r)}else{for(l=0;l<o.changes.length;++l){var s=o.changes[l];if(n<s.from.line)s.from=Bo(s.from.line+r,s.from.ch),s.to=Bo(s.to.line+r,s.to.ch);else if(t<=s.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function xi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yi(e.done,n,r,i),yi(e.undone,n,r,i)}function bi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function wi(e){return e.target||e.srcElement}function ki(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Eo&&e.ctrlKey&&1==t&&(t=3),t}function Si(e,t,n){var r=e._handlers&&e._handlers[t];return n?r&&r.length>0?r.slice():Oa:r||Oa}function Ci(e,t){function n(e){return function(){e.apply(null,o)}}var r=Si(e,t,!1);if(r.length){var i,o=Array.prototype.slice.call(arguments,2);Go?i=Go.delayedCallbacks:Ra?i=Ra:(i=Ra=[],setTimeout(Li,0));for(var a=0;a<r.length;++a)i.push(n(r[a]))}}function Li(){var e=Ra;Ra=null;for(var t=0;t<e.length;++t)e[t]()}function Ti(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Pa(e,n||t.type,e,t),bi(t)||t.codemirrorIgnore}function Mi(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Pi(n,t[r])&&n.push(t[r])}function Ni(e,t){return Si(e,t).length>0}function Ai(e){e.prototype.on=function(e,t){Ea(this,e,t)},e.prototype.off=function(e,t){Ia(this,e,t)}}function Ei(){this.id=null}function Oi(e){for(;ja.length<=e;)ja.push(Ii(ja)+" ");return ja[e]}function Ii(e){return e[e.length-1]}function Pi(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Ri(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Di(){}function Hi(e,t){var n;return Object.create?n=Object.create(e):(Di.prototype=e,n=new Di),t&&Wi(t,n),n}function Wi(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function Bi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function _i(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Ya(e))||t.test(e):Ya(e)}function Fi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function zi(e){return e.charCodeAt(0)>=768&&$a.test(e)}function ji(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Ui(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function qi(e,t){return Ui(e).appendChild(t)}function Gi(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Yi(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function $i(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!Yi(n[r]).test(t)&&(t+=" "+n[r]);return t}function Vi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Zi(e){if(null==Ka){var t=ji("span","​");qi(e,ji("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ka=t.offsetWidth<=1&&t.offsetHeight>2&&!(xo&&8>bo))}var n=Ka?ji("span","​"):ji("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ji(e){if(null!=Xa)return Xa;var t=qi(e,document.createTextNode("AخA")),n=qa(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var r=qa(t,1,2).getBoundingClientRect();return Xa=r.right-n.right<3}function to(e){return e.level%2?e.to:e.from}function no(e){return e.level%2?e.from:e.to}function ro(e){var t=ii(e);return t?to(t[0]):0}function io(e){var t=ii(e);return t?no(Ii(t)):e.text.length}function oo(e,t){var n=Zr(e.doc,t),r=yr(n);r!=n&&(t=ti(r));var i=ii(r),o=i?i[0].level%2?io(r):ro(r):0;return Bo(t,o)}function lo(e,t){var n=oo(e,t.line),r=Zr(e.doc,n.line),i=ii(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return Bo(n.line,a?0:o)}return n}function so(e,t,n){var r=e[0].level;return t==r||n!=r&&n>t}function co(e,t){al=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return so(e,i.level,e[n].level)?(i.from!=i.to&&(al=n),r):(i.from!=i.to&&(al=r),n);n=r}}return n}function uo(e,t,n,r){if(!r)return t+n;do{t+=n}while(t>0&&zi(e.text.charAt(t)));return t}function fo(e,t,n,r){var i=ii(e);if(!i)return ho(e,t,n,r);for(var o=co(i,t),a=i[o],l=uo(e,t,a.level%2?-n:n,r);;){if(l>a.from&&l<a.to)return l;if(l==a.from||l==a.to)return co(i,l)==o?l:n>0==(a=i[o+=n]).level%2?a.to:a.from;if(!(a=i[o+=n]))return null;l=n>0==a.level%2?uo(e,a.to,-1,r):uo(e,a.from,1,r)}}function ho(e,t,n,r){var i=t+n;if(r)for(;i>0&&zi(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var po=navigator.userAgent,mo=navigator.platform,go=/gecko\/\d/i.test(po),vo=/MSIE \d/.test(po),yo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(po),xo=vo||yo,bo=xo&&(vo?document.documentMode||6:yo[1]),wo=/WebKit\//.test(po),ko=wo&&/Qt\/\d+\.\d+/.test(po),So=/Chrome\//.test(po),Co=/Opera\//.test(po),Lo=/Apple Computer/.test(navigator.vendor),To=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(po),Mo=/PhantomJS/.test(po),No=/AppleWebKit/.test(po)&&/Mobile\/\w+/.test(po),Ao=No||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(po),Eo=No||/Mac/.test(mo),Oo=/\bCrOS\b/.test(po),Io=/win/i.test(mo),Po=Co&&po.match(/Version\/(\d*\.\d*)/);Po&&(Po=Number(Po[1])),Po&&Po>=15&&(Co=!1,wo=!0);var Ro=Eo&&(ko||Co&&(null==Po||12.11>Po)),Do=go||xo&&bo>=9,Ho=!1,Wo=!1;m.prototype=Wi({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=Eo&&!To?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ei,this.disableVert=new Ei},enableZeroWidthBar:function(e,t){e.style.pointerEvents="auto",t.set(1e3,(function n(){var r=e.getBoundingClientRect();document.elementFromPoint(r.left+1,r.bottom-1)!=e?e.style.pointerEvents="none":t.set(1e3,n)}))},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Wi({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={native:m,null:g},L.prototype.signal=function(e,t){Ni(e,t)&&this.events.push(arguments)},L.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Pa.apply(null,this.events[e])};var Bo=e.Pos=function(e,t){return this instanceof Bo?(this.line=e,void(this.ch=t)):new Bo(e,t)},_o=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Fo=null;ne.prototype=Wi({init:function(e){function t(e){if(!Ti(r,e)){if(r.somethingSelected())Fo={lineWise:!1,text:r.getSelections()},n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,o.value=Fo.text.join("\n"),Ua(o));else{if(!r.options.lineWiseCopyCut)return;var t=ee(r);Fo={lineWise:!0,text:t.text},"cut"==e.type?r.setSelections(t.ranges,null,Wa):(n.prevInput="",o.value=t.text.join("\n"),Ua(o))}"cut"==e.type&&(r.state.cutIncoming=!0)}}var n=this,r=this.cm,i=this.wrapper=re(),o=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),No&&(o.style.width="0px"),Ea(o,"input",(function(){xo&&bo>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()})),Ea(o,"paste",(function(e){Ti(r,e)||J(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())})),Ea(o,"cut",t),Ea(o,"copy",t),Ea(e.scroller,"paste",(function(t){Gt(e,t)||Ti(r,t)||(r.state.pasteIncoming=!0,n.focus())})),Ea(e.lineSpace,"selectstart",(function(t){Gt(e,t)||Ma(t)})),Ea(o,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),Ea(o,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,r=De(e);if(e.options.moveInputWithCursor){var i=dt(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},showSelection:function(e){var n=this.cm.display;qi(n.cursorDiv,e.cursors),qi(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var o=i.sel.primary(),a=(t=rl&&(o.to().line-o.from().line>100||(n=r.getSelection()).length>1e3))?"-":n||r.getSelection();this.textarea.value=a,r.state.focused&&Ua(this.textarea),xo&&bo>=9&&(this.hasSelection=a)}else e||(this.prevInput=this.textarea.value="",xo&&bo>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Ao||Gi()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},fastPoll:function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,(function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}))},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||nl(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=t.value;if(r==n&&!e.somethingSelected())return!1;if(xo&&bo>=9&&this.hasSelection===r||Eo&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=r.charCodeAt(0);if(8203!=i||n||(n="​"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var o=0,a=Math.min(n.length,r.length);a>o&&n.charCodeAt(o)==r.charCodeAt(o);)++o;var l=this;return At(e,(function(){Z(e,r.slice(o),n.length-o,null,l.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?t.value=l.prevInput="":l.prevInput=r,l.composing&&(l.composing.range.clear(),l.composing.range=e.markText(l.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){xo&&bo>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=a.selectionStart){var e=i.somethingSelected(),t="​"+(e?a.value:"");a.value="⇚",a.value=t,r.prevInput=e?"":"​",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=f,a.style.cssText=u,xo&&9>bo&&o.scrollbars.setScrollTop(o.scroller.scrollTop=s),null!=a.selectionStart){(!xo||xo&&9>bo)&&t();var e=0,n=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&"​"==r.prevInput?Et(i,ua.selectAll)(i):e++<10?o.detectingSelectAll=setTimeout(n,500):o.input.reset()};o.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,o=i.display,a=r.textarea,l=Yt(i,e),s=o.scroller.scrollTop;if(l&&!Co){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(l)&&Et(i,Te)(i.doc,de(l),Wa);var u=a.style.cssText,f=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var h=r.wrapper.getBoundingClientRect();if(a.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px; z-index: 1000; background: "+(xo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",wo)var d=window.scrollY;if(o.input.focus(),wo&&window.scrollTo(null,d),o.input.reset(),i.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),xo&&bo>=9&&t(),Do){Aa(e);var p=function(){Ia(window,"mouseup",p),setTimeout(n,20)};Ea(window,"mouseup",p)}else setTimeout(n,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Di,needsContentAttribute:!1},ne.prototype),ie.prototype=Wi({init:function(e){function t(e){if(!Ti(r,e)){if(r.somethingSelected())Fo={lineWise:!1,text:r.getSelections()},"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=ee(r);Fo={lineWise:!0,text:t.text},"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,Wa),r.replaceSelection("",null,"cut")}))}if(e.clipboardData&&!No)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Fo.text.join("\n"));else{var n=re(),i=n.firstChild;r.display.lineSpace.insertBefore(n,r.display.lineSpace.firstChild),i.value=Fo.text.join("\n");var o=document.activeElement;Ua(i),setTimeout((function(){r.display.lineSpace.removeChild(n),o.focus()}),50)}}}var n=this,r=n.cm,i=n.div=e.lineDiv;te(i),Ea(i,"paste",(function(e){Ti(r,e)||J(e,r)})),Ea(i,"compositionstart",(function(e){var t=e.data;if(n.composing={sel:r.doc.sel,data:t,startData:t},t){var i=r.doc.sel.primary(),a=r.getLine(i.head.line).indexOf(t,Math.max(0,i.head.ch-t.length));a>-1&&a<=i.head.ch&&(n.composing.sel=de(Bo(i.head.line,a),Bo(i.head.line,a+t.length)))}})),Ea(i,"compositionupdate",(function(e){n.composing.data=e.data})),Ea(i,"compositionend",(function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout((function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)}),50))})),Ea(i,"touchstart",(function(){n.forceCompositionEnd()})),Ea(i,"input",(function(){n.composing||!r.isReadOnly()&&n.pollContent()||At(n.cm,(function(){Dt(r)}))})),Ea(i,"copy",t),Ea(i,"cut",t)},prepareSelection:function(){var e=De(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=le(this.cm,e.anchorNode,e.anchorOffset),r=le(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=_o(K(n,r),t.from())||0!=_o(V(n,r),t.to())){var i=oe(this.cm,t.from()),o=oe(this.cm,t.to());if(i||o){var a=this.cm.display.view,l=e.rangeCount&&e.getRangeAt(0);if(i){if(!o){var s=a[a.length-1].measure,c=s.maps?s.maps[s.maps.length-1]:s.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else i={node:a[0].measure.map[2],offset:0};try{var u=qa(i.node,i.offset,o.offset,o.node)}catch(f){}u&&(!go&&this.cm.state.focused?(e.collapse(i.node,i.offset),u.collapsed||e.addRange(u)):(e.removeAllRanges(),e.addRange(u)),l&&null==e.anchorNode?e.addRange(l):go&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){e.cm.curOp.selectionChanged=!0}))}),20)},showMultipleSelections:function(e){qi(this.cm.display.cursorDiv,e.cursors),qi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Va(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var t=this;this.selectionInEditor()?this.pollSelection():At(this.cm,(function(){t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=le(t,e.anchorNode,e.anchorOffset),r=le(t,e.focusNode,e.focusOffset);n&&r&&At(t,(function(){Te(t.doc,de(n,r),Wa),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}},pollContent:function(){var o,e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.line<t.viewFrom||i.line>t.viewTo-1)return!1;if(r.line==t.viewFrom||0==(o=Bt(e,r.line)))var a=ti(t.view[0].line),l=t.view[0].node;else a=ti(t.view[o].line),l=t.view[o-1].node.nextSibling;var s=Bt(e,i.line);if(s==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else c=ti(t.view[s+1].line)-1,u=t.view[s+1].node.previousSibling;for(var f=e.doc.splitLines(function ce(e,t,n,r,i){function a(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(l+=n);var u,f=t.getAttribute("cm-marker");if(f){var h=e.findMarks(Bo(r,0),Bo(i+1,0),function o(e){return function(t){return t.id==e}}(+f));return void(h.length&&(u=h[0].find())&&(l+=Jr(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var d=0;d<t.childNodes.length;d++)a(t.childNodes[d]);/^(pre|div|p)$/i.test(t.nodeName)&&(s=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;s&&(l+=c,s=!1),l+=p}}for(var l="",s=!1,c=e.doc.lineSeparator();a(t),t!=n;)t=t.nextSibling;return l}(e,l,u,a,c)),h=Jr(e.doc,Bo(a,0),Bo(c,Zr(e.doc,c).text.length));f.length>1&&h.length>1;)if(Ii(f)==Ii(h))f.pop(),h.pop(),c--;else{if(f[0]!=h[0])break;f.shift(),h.shift(),a++}for(var d=0,p=0,m=f[0],g=h[0],v=Math.min(m.length,g.length);v>d&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var y=Ii(f),x=Ii(h),b=Math.min(y.length-(1==f.length?d:0),x.length-(1==h.length?d:0));b>p&&y.charCodeAt(y.length-p-1)==x.charCodeAt(x.length-p-1);)++p;f[f.length-1]=y.slice(0,y.length-p),f[0]=f[0].slice(d);var w=Bo(a,d),k=Bo(c,h.length?Ii(h).length-p:0);return f.length>1||f[0]||_o(w,k)?(In(e.doc,f,w,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Et(this.cm,Dt)(this.cm):e.data&&e.data!=e.startData&&Et(this.cm,Z)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Et(this.cm,Z)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Di,resetPosition:Di,needsContentAttribute:!0},ie.prototype),e.inputStyles={textarea:ne,contenteditable:ie},ue.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=_o(n.anchor,r.anchor)||0!=_o(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new fe($(this.ranges[t].anchor),$(this.ranges[t].head));return new ue(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(_o(t,r.from())>=0&&_o(e,r.to())<=0)return n}return-1}},fe.prototype={from:function(){return K(this.anchor,this.head)},to:function(){return V(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var zo,jo,Uo,qo={left:0,right:0,top:0,bottom:0},Go=null,Yo=0,$o=0,Vo=0,Ko=null;xo?Ko=-.53:go?Ko=15:So?Ko=-.7:Lo&&(Ko=-1/3);var Xo=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Xo(e);return t.x*=Ko,t.y*=Ko,t};var Zo=new Ei,Jo=null,Qo=e.changeEnd=function(e){return e.text?Bo(e.from.line+e.text.length-1,Ii(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];n[e]==t&&"mode"!=e||(n[e]=t,ta.hasOwnProperty(e)&&Et(this,ta[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"]($n(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Ot((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Dt(this)})),removeOverlay:Ot((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Dt(this)}})),indentLine:Ot((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ve(this.doc,e)&&Fn(this,e,t,n)})),indentSelection:Ot((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Fn(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Bn(this));else{var o=i.from(),a=i.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;n>s;++s)Fn(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&ke(this.doc,r,new fe(o,c[r].to()),Wa)}}})),getTokenAt:function(e,t){return Ir(this,e,t)},getLineTokens:function(e,t){return Ir(this,Bo(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,n=Dr(this,Zr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var l=t?t.indexOf("cm-overlay "):-1;return 0>l?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!la.hasOwnProperty(t))return n;var r=la[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(o=0;o<r._global.length;o++){var l=r._global[o];l.pred(i,this)&&-1==Pi(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(e,t){var n=this.doc;return je(this,(e=pe(n,null==e?n.first+n.size-1:e))+1,t)},cursorCoords:function(e,t){var r=this.doc.sel.primary();return dt(this,null==e?r.head:"object"==typeof e?me(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return ht(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return gt(this,(e=ft(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=ft(this,{top:e,left:0},t||"page").top,ni(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,r=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,r=!0),n=Zr(this.doc,e)}else n=e;return ut(this,n,{top:0,left:0},t||"page").top+(r?this.doc.height-ri(n):0)},defaultTextHeight:function(){return yt(this.display)},defaultCharWidth:function(){return xt(this.display)},setGutterMarker:Ot((function(e,t,n){return zn(this.doc,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Fi(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:Ot((function(e){var t=this,n=t.doc,r=n.first;n.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Ht(t,r,"gutter"),Fi(n.gutterMarkers)&&(n.gutterMarkers=null)),++r}))})),lineInfo:function(e){if("number"==typeof e){if(!ve(this.doc,e))return null;var t=e;if(!(e=Zr(this.doc,e)))return null}else{if(null==(t=ti(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display,a=(e=dt(this,me(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var s=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom),l+t.offsetWidth>c&&(l=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(l=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&function Dn(e,t,n,r,i){var o=Hn(e,t,n,r,i);null!=o.scrollTop&&rn(e,o.scrollTop),null!=o.scrollLeft&&on(e,o.scrollLeft)}(this,l,a,l+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:Ot(hn),triggerOnKeyPress:Ot(mn),triggerOnKeyUp:pn,execCommand:function(e){return ua.hasOwnProperty(e)?ua[e].call(null,this):void 0},triggerElectric:Ot((function(e){Q(this,e)})),findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=me(this.doc,e);t>o&&!(a=Un(this.doc,a,i,n,r)).hitSide;++o);return a},moveH:Ot((function(e,t){var n=this;n.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Un(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()}),_a)})),deleteH:Ot((function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):jn(this,(function(n){var i=Un(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,l=me(this.doc,e);t>a;++a){var s=dt(this,l,"div");if(null==o?o=s.left:s.left=o,(l=qn(this,s,i,n)).hitSide)break}return l},moveV:Ot((function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(a){if(o)return 0>e?a.from():a.to();var l=dt(n,a.head,"div");null!=a.goalColumn&&(l.left=a.goalColumn),i.push(l.left);var s=qn(n,l,e,t);return"page"==t&&a==r.sel.primary()&&Wn(n,null,ht(n,s,"div").top-l.top),s}),_a),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(e){var n=Zr(this.doc,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==n.length)&&r?--r:++i;for(var a=n.charAt(r),l=_i(a,o)?function(e){return _i(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!_i(e)};r>0&&l(n.charAt(r-1));)--r;for(;i<n.length&&l(n.charAt(i));)++i}return new fe(Bo(e.line,r),Bo(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ja(this.display.cursorDiv,"CodeMirror-overwrite"):Za(this.display.cursorDiv,"CodeMirror-overwrite"),Pa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Gi()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ot((function(e,t){null==e&&null==t||_n(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ye(this)-this.display.barHeight,width:e.scrollWidth-Ye(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:$e(this)}},scrollIntoView:Ot((function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Bo(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)_n(this),this.curOp.scrollToPos=e;else{var n=Hn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}})),setSize:Ot((function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&at(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ht(r,i,"widget");break}++i})),r.curOp.forceUpdate=!0,Pa(r,"refresh",this)})),operation:function(e){return At(this,e)},refresh:Ot((function(){var e=this.display.cachedTextHeight;Dt(this),this.curOp.forceUpdate=!0,lt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-yt(this.display))>.5)&&a(this),Pa(this,"refresh",this)})),swapDoc:Ot((function(e){var t=this.doc;return t.cm=null,Xr(this,e),lt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Ci(this,"swapDoc",this,t),t})),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ai(e);var ea=e.defaults={},ta=e.optionHandlers={},na=e.Init={toString:function(){return"CodeMirror.Init"}};Gn("value","",(function(e,t){e.setValue(t)}),!0),Gn("mode",null,(function(e,t){e.doc.modeOption=t,n(e)}),!0),Gn("indentUnit",2,n,!0),Gn("indentWithTabs",!1),Gn("smartIndent",!0),Gn("tabSize",4,(function(e){r(e),lt(e),Dt(e)}),!0),Gn("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(Bo(r,o))}r++}));for(var i=n.length-1;i>=0;i--)In(e.doc,t,n[i],Bo(n[i].line,n[i].ch+t.length))}})),Gn("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,(function(t,n,r){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),r!=e.Init&&t.refresh()})),Gn("specialCharPlaceholder",(function _r(e){var t=ji("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}),(function(e){e.refresh()}),!0),Gn("electricChars",!0),Gn("inputStyle",Ao?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),Gn("rtlMoveVisually",!Io),Gn("wholeLineUpdateBefore",!0),Gn("theme","default",(function(e){l(e),s(e)}),!0),Gn("keyMap","default",(function(t,n,r){var i=$n(n),o=r!=e.Init&&$n(r);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)})),Gn("extraKeys",null),Gn("lineWrapping",!1,(function i(e){e.options.lineWrapping?(Ja(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Za(e.display.wrapper,"CodeMirror-wrap"),h(e)),a(e),Dt(e),lt(e),setTimeout((function(){y(e)}),100)}),!0),Gn("gutters",[],(function(e){d(e.options),s(e)}),!0),Gn("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?C(e.display)+"px":"0",e.refresh()}),!0),Gn("coverGutterNextToScrollbar",!1,(function(e){y(e)}),!0),Gn("scrollbarStyle","native",(function(e){v(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),Gn("lineNumbers",!1,(function(e){d(e.options),s(e)}),!0),Gn("firstLineNumber",1,s,!0),Gn("lineNumberFormatter",(function(e){return e}),s,!0),Gn("showCursorWhenSelecting",!1,Re,!0),Gn("resetSelectionOnContextMenu",!0),Gn("lineWiseCopyCut",!0),Gn("readOnly",!1,(function(e,t){"nocursor"==t?(yn(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)})),Gn("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),Gn("dragDrop",!0,(function Ut(t,n,r){if(!n!=!(r&&r!=e.Init)){var o=t.display.dragFunctions,a=n?Ea:Ia;a(t.display.scroller,"dragstart",o.start),a(t.display.scroller,"dragenter",o.enter),a(t.display.scroller,"dragover",o.over),a(t.display.scroller,"dragleave",o.leave),a(t.display.scroller,"drop",o.drop)}})),Gn("allowDropFileTypes",null),Gn("cursorBlinkRate",530),Gn("cursorScrollMargin",0),Gn("cursorHeight",1,Re,!0),Gn("singleCursorHeightPerLine",!0,Re,!0),Gn("workTime",100),Gn("workDelay",100),Gn("flattenSpans",!0,r,!0),Gn("addModeClass",!1,r,!0),Gn("pollInterval",100),Gn("undoDepth",200,(function(e,t){e.doc.history.undoDepth=t})),Gn("historyEventDelay",1250),Gn("viewportMargin",10,(function(e){e.refresh()}),!0),Gn("maxHighlightLength",1e4,r,!0),Gn("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),Gn("tabindex",null,(function(e,t){e.display.input.getField().tabIndex=t||""})),Gn("autofocus",null);var ra=e.modes={},ia=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),ra[t]=n},e.defineMIME=function(e,t){ia[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ia.hasOwnProperty(t))t=ia[t];else if(t&&"string"==typeof t.name&&ia.hasOwnProperty(t.name)){var n=ia[t.name];"string"==typeof n&&(n={name:n}),(t=Hi(n,t)).name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var r=ra[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(oa.hasOwnProperty(n.name)){var o=oa[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",(function(){return{token:function(e){e.skipToEnd()}}})),e.defineMIME("text/plain","null");var oa=e.modeExtensions={};e.extendMode=function(e,t){Wi(t,oa.hasOwnProperty(e)?oa[e]:oa[e]={})},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){Ca.prototype[e]=t},e.defineOption=Gn;var aa=[];e.defineInitHook=function(e){aa.push(e)};var la=e.helpers={};e.registerHelper=function(t,n,r){la.hasOwnProperty(t)||(la[t]=e[t]={_global:[]}),la[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),la[t]._global.push({pred:r,val:i})};var sa=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},ca=e.startState=function(e,t,n){return!e.startState||e.startState(t,n)};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var ua=e.commands={selectAll:function(e){e.setSelection(Bo(e.firstLine(),0),Bo(e.lastLine()),Wa)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Wa)},killLine:function(e){jn(e,(function(t){if(t.empty()){var n=Zr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Bo(t.head.line+1,0)}:{from:t.head,to:Bo(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){jn(e,(function(t){return{from:Bo(t.from().line,0),to:me(e.doc,Bo(t.to().line+1,0))}}))},delLineLeft:function(e){jn(e,(function(e){return{from:Bo(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){jn(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){jn(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Bo(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Bo(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy((function(t){return oo(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy((function(t){return lo(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy((function(t){return function ao(e,t){for(var n,r=Zr(e.doc,t);n=gr(r);)r=n.find(1,!0).line,t=null;var i=ii(r),o=i?i[0].level%2?ro(r):io(r):r.text.length;return Bo(null==t?ti(r):t,o)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),_a)},goLineLeft:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),_a)},goLineLeftSmart:function(e){e.extendSelectionsBy((function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?lo(e,t.head):r}),_a)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=Fa(e.getLine(o.line),o.ch,r);t.push(Oi(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){At(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=Zr(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new Bo(i.line,i.ch-1)),i.ch>0)i=new Bo(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),Bo(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Zr(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),Bo(i.line-1,a.length-1),Bo(i.line,1),"+transpose")}n.push(new fe(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){At(e,(function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange(e.doc.lineSeparator(),r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0)}Bn(e)}))},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},fa=e.keyMap={};fa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},fa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},fa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},fa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},fa.default=Eo?fa.macDefault:fa.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Ri(n.split(" "),Yn),o=0;o<i.length;o++){var a,l;o==i.length-1?(l=i.join(" "),a=r):(l=i.slice(0,o+1).join(" "),a="...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[n]}for(var c in t)e[c]=t[c];return e};var ha=e.lookupKey=function(e,t,n,r){var i=(t=$n(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ha(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=ha(e,t.fallthrough[o],n,r);if(a)return a}}},da=e.isModifierKey=function(e){var t="string"==typeof e?e:ol[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},pa=e.keyName=function(e,t){if(Co&&34==e.keyCode&&e.char)return!1;var n=ol[e.keyCode],r=n;return null!=r&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(Ro?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(Ro?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if((n=n?Wi(n):{}).value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=Gi();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Ea(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var l=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=l}}catch(s){}}n.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ia(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))}},t.style.display="none";var c=e((function(e){t.parentNode.insertBefore(e,t.nextSibling)}),n);return c};var ma=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ma.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Fa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Fa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Fa(this.string,null,this.tabSize)-(this.lineStart?Fa(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ga=0,va=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ga};Ai(va),va.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&bt(e),Ni(this,"clear")){var n=this.find();n&&Ci(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=er(a.markedSpans,this);e&&!this.collapsed?Ht(e,ti(a),"text"):e&&(null!=l.to&&(i=ti(a)),null!=l.from&&(r=ti(a))),a.markedSpans=tr(a.markedSpans,l),null==l.from&&this.collapsed&&!kr(this.doc,a)&&e&&ei(a,yt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var s=yr(this.lines[o]),c=f(s);c>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Dt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ae(e.doc)),e&&Ci(e,"markerCleared",e,this),t&&kt(e),this.parent&&this.parent.clear()}},va.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=er(o.markedSpans,this);if(null!=a.from&&(n=Bo(t?o:ti(o),a.from),-1==e))return n;if(null!=a.to&&(r=Bo(t?o:ti(o),a.to),1==e))return r}return n&&{from:n,to:r}},va.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&At(n,(function(){var r=e.line,i=ti(e.line),o=Qe(n,i);if(o&&(ot(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!kr(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var l=Lr(t)-a;l&&ei(r,r.height+l)}}))},va.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Pi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},va.prototype.detachLine=function(e){if(this.lines.splice(Pi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};ga=0;var ya=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ai(ya),ya.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ci(this,"clear")}},ya.prototype.find=function(e,t){return this.primary.find(e,t)};var xa=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};Ai(xa),xa.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=ti(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Lr(this);ei(n,Math.max(0,n.height-o)),e&&At(e,(function(){Cr(e,n,-o),Ht(e,r,"widget")}))}},xa.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=Lr(this)-e;r&&(ei(n,n.height+r),t&&At(t,(function(){t.curOp.forceUpdate=!0,Cr(t,n,r)})))};var ba=e.Line=function(e,t,n){this.text=e,ur(this,t),this.height=n?n(this):1};Ai(ba),ba.prototype.lineNo=function(){return ti(this)};var wa={},ka={};$r.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,Nr(i),Ci(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},Vr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof $r))){var l=[];this.collapse(l),this.children=[new $r(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,l=a;l<i.lines.length;){var s=new $r(i.lines.slice(l,l+=25));i.height-=s.height,this.children.splice(++r,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Vr(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var r=Pi(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Vr(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var Sa=0,Ca=e.Doc=function(e,t,n,r){if(!(this instanceof Ca))return new Ca(e,t,n,r);null==n&&(n=0),Vr.call(this,[new $r([new ba("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Bo(n,0);this.sel=de(i),this.history=new oi(null),this.id=++Sa,this.modeOption=t,this.lineSep=r,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Yr(this,{from:i,to:i,text:e}),Te(this,de(i),Wa)};Ca.prototype=Hi(Vr.prototype,{constructor:Ca,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Qr(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:It((function(e){var t=Bo(this.first,0),n=this.first+this.size-1;Tn(this,{from:t,to:Bo(n,Zr(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Te(this,de(t))})),replaceRange:function(e,t,n,r){In(this,e,t=me(this,t),n=n?me(this,n):t,r)},getRange:function(e,t,n){var r=Jr(this,me(this,e),me(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ve(this,e)?Zr(this,e):void 0},getLineNumber:function(e){return ti(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Zr(this,e)),yr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var n=this.sel.primary();return null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||!1===e?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:It((function(e,t,n){Se(this,me(this,"number"==typeof e?Bo(e,t||0):e),null,n)})),setSelection:It((function(e,t,n){Se(this,me(this,e),me(this,t||e),n)})),extendSelection:It((function(e,t,n){be(this,me(this,e),t&&me(this,t),n)})),extendSelections:It((function(e,t){we(this,ye(this,e),t)})),extendSelectionsBy:It((function(e,t){we(this,ye(this,Ri(this.sel.ranges,e)),t)})),setSelections:It((function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new fe(me(this,e[r].anchor),me(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Te(this,he(i,t),n)}})),addSelection:It((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new fe(me(this,e),me(this,t||e))),Te(this,he(r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Jr(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Jr(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:It((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}var l=t&&"end"!=t&&function Cn(e,t,n){for(var r=[],i=Bo(e.first,0),o=i,a=0;a<t.length;a++){var l=t[a],s=Sn(l.from,i,o),c=Sn(Qo(l),i,o);if(i=l.to,o=c,"around"==n){var u=e.sel.ranges[a],f=_o(u.head,u.anchor)<0;r[a]=new fe(f?c:s,f?s:c)}else r[a]=new fe(s,s)}return new ue(r,e.sel.primIndex)}(this,r,t);for(o=r.length-1;o>=0;o--)Tn(this,r[o]);l?Le(this,l):this.cm&&Bn(this.cm)})),undo:It((function(){Nn(this,"undo")})),redo:It((function(){Nn(this,"redo")})),undoSelection:It((function(){Nn(this,"undo",!0)})),redoSelection:It((function(){Nn(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:gi(this.history.done),undone:gi(this.history.undone)}},setHistory:function(e){var t=this.history=new oi(this.history.maxGeneration);t.done=gi(e.done.slice(0),null,!0),t.undone=gi(e.undone.slice(0),null,!0)},addLineClass:It((function(e,t,n){return zn(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(Yi(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:It((function(e,t,n){return zn(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(Yi(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:It((function(e,t,n){return function Tr(e,t,n,r){var i=new xa(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),zn(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!kr(e,t)){var r=ri(t)<e.scrollTop;ei(t,t.height+Lr(i)),r&&Wn(o,null,i.height),o.curOp.forceUpdate=!0}return!0})),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Vn(this,me(this,e),me(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Vn(this,e=me(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Zr(this,(e=me(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=me(this,e),t=me(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];null!=s.to&&i==e.line&&e.ch>=s.to||null==s.from&&i!=e.line||null!=s.from&&i==t.line&&s.from>=t.ch||n&&!n(s.marker)||r.push(s.marker.parent||s.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;return o>e?(t=e,!0):(e-=o,void++n)})),me(this,Bo(n,t))},indexFromPos:function(e){var t=(e=me(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ca(Qr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Ca(Qr(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(_o(o,a)){var l=Vn(e,o,a,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}(r,Xn(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Jn(Xn(this));break}}if(t.history==this.history){var i=[t.id];Kr(t,(function(e){i.push(e.id)}),!0),t.history=new oi(null),t.history.done=gi(this.history.done,i),t.history.undone=gi(this.history.undone,i)}},iterLinkedDocs:function(e){Kr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):tl(e)},lineSeparator:function(){return this.lineSep||"\n"}}),Ca.prototype.eachLine=Ca.prototype.iter;var La="iter insert remove copy getEditor constructor".split(" ");for(var Ta in Ca.prototype)Ca.prototype.hasOwnProperty(Ta)&&Pi(La,Ta)<0&&(e.prototype[Ta]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ca.prototype[Ta]));Ai(Ca);var Ma=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Na=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Aa=e.e_stop=function(e){Ma(e),Na(e)},Ea=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});(r[t]||(r[t]=[])).push(n)}},Oa=[],Ia=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var r=Si(e,t,!1),i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}},Pa=e.signal=function(e,t){var n=Si(e,t,!0);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Ra=null,Da=30,Ha=e.Pass={toString:function(){return"CodeMirror.Pass"}},Wa={scroll:!1},Ba={origin:"*mouse"},_a={origin:"+move"};Ei.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Fa=e.countColumn=function(e,t,n,r,i){null==t&&(-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length));for(var o=r||0,a=i||0;;){var l=e.indexOf("\t",o);if(0>l||l>=t)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}},za=e.findColumn=function(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}},ja=[""],Ua=function(e){e.select()};No?Ua=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:xo&&(Ua=function(e){try{e.select()}catch(t){}});var qa,Ga=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ya=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ga.test(e))},$a=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;qa=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var Va=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};xo&&11>bo&&(Gi=function(){try{return document.activeElement}catch(e){return document.body}});var Ka,Xa,Za=e.rmClass=function(e,t){var n=e.className,r=Yi(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}},Ja=e.addClass=function(e,t){var n=e.className;Yi(t).test(n)||(e.className+=(n?" ":"")+t)},Qa=!1,el=function(){if(xo&&9>bo)return!1;var e=ji("div");return"draggable"in e||"dragDrop"in e}(),tl=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},nl=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},rl=function(){var e=ji("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),il=null,ol=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;10>e;e++)ol[e+48]=ol[e+96]=String(e);for(e=65;90>=e;e++)ol[e]=String.fromCharCode(e);for(e=1;12>=e;e++)ol[e+111]=ol[e+63235]="F"+e}();var al,ll=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,l=/[Lb1n]/,s=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var u=n.length,f=[],h=0;u>h;++h)f.push(r=e(n.charCodeAt(h)));h=0;for(var d=c;u>h;++h){"m"==(r=f[h])?f[h]=d:d=r}h=0;for(var p=c;u>h;++h){"1"==(r=f[h])&&"r"==p?f[h]="n":a.test(r)&&(p=r,"r"==r&&(f[h]="R"))}for(h=1,d=f[0];u-1>h;++h){"+"==(r=f[h])&&"1"==d&&"1"==f[h+1]?f[h]="1":","!=r||d!=f[h+1]||"1"!=d&&"n"!=d||(f[h]=d),d=r}for(h=0;u>h;++h){if(","==(r=f[h]))f[h]="N";else if("%"==r){for(var m=h+1;u>m&&"%"==f[m];++m);for(var g=h&&"!"==f[h-1]||u>m&&"1"==f[m]?"1":"N",v=h;m>v;++v)f[v]=g;h=m-1}}for(h=0,p=c;u>h;++h){var r=f[h];"L"==p&&"1"==r?f[h]="L":a.test(r)&&(p=r)}for(h=0;u>h;++h)if(o.test(f[h])){for(m=h+1;u>m&&o.test(f[m]);++m);var y="L"==(h?f[h-1]:c),x="L"==(u>m?f[m]:c);for(g=y||x?"L":"R",v=h;m>v;++v)f[v]=g;h=m-1}var b,w=[];for(h=0;u>h;)if(l.test(f[h])){var k=h;for(++h;u>h&&l.test(f[h]);++h);w.push(new t(0,k,h))}else{var S=h,C=w.length;for(++h;u>h&&"L"!=f[h];++h);for(v=S;h>v;)if(s.test(f[v])){v>S&&w.splice(C,0,new t(1,S,v));var L=v;for(++v;h>v&&s.test(f[v]);++v);w.splice(C,0,new t(2,L,v)),S=v}else++v;h>S&&w.splice(C,0,new t(1,S,h))}return 1==w[0].level&&(b=n.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift(new t(0,0,b[0].length))),1==Ii(w).level&&(b=n.match(/\s+$/))&&(Ii(w).to-=b[0].length,w.push(new t(0,u-b[0].length,u))),2==w[0].level&&w.unshift(new t(1,w[0].to,w[0].to)),w[0].level!=Ii(w).level&&w.push(new t(w[0].level,u,u)),w}}();return e.version="5.15.2",e}))},{}],11:[function(t,n,r){var i;i=function(e){var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;e.defineMode("gfm",(function(n,r){var o=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if("`"===e.peek()){e.next();var i=e.pos;e.eatWhile("`");var a=1+e.pos-i;return n.code?a===o&&(n.code=!1):(o=a,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==r.gitHubSpice)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,"link"):(e.next(),null)},blankLine:function i(e){return e.code=!1,null}},l={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var s in r)l[s]=r[s];return l.name="markdown",e.overlayMode(e.getMode(n,l),a)}),"markdown"),e.defineMIME("text/x-gfm","gfm")},"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror"),t("../markdown/markdown"),t("../../addon/mode/overlay")):i(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(t,n,r){var i;i=function(e){e.defineMode("markdown",(function(t,n){function r(n){if(e.findModeByName){var r=e.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=e.getMode(t,n);return"null"==i.name?null:i}function i(e,t,n){return t.f=t.inline=n,n(e,t)}function a(e){return!e||!/\S/.test(e.string)}function l(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,k&&e.f==c&&(e.f=p,e.block=s),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function s(t,o){var l=t.sol(),s=!1!==o.list,c=o.indentedCode;o.indentedCode=!1,s&&(o.indentationDiff>=0?(o.indentationDiff<4&&(o.indentation-=o.indentationDiff),o.list=null):o.indentation>0?o.list=null:o.list=!1);var f=null;if(o.indentationDiff>=4)return t.skipToEnd(),c||a(o.prevLine)?(o.indentation-=4,o.indentedCode=!0,S.code):null;if(t.eatSpace())return null;if((f=t.match(A))&&f[1].length<=6)return o.header=f[1].length,n.highlightFormatting&&(o.formatting="header"),o.f=o.inline,h(o);if(!(a(o.prevLine)||o.quote||s||c)&&(f=t.match(E)))return o.header="="==f[0].charAt(0)?1:2,n.highlightFormatting&&(o.formatting="header"),o.f=o.inline,h(o);if(t.eat(">"))return o.quote=l?1:o.quote+1,n.highlightFormatting&&(o.formatting="quote"),t.eatSpace(),h(o);if("["===t.peek())return i(t,o,y);if(t.match(L,!0))return o.hr=!0,S.hr;if((a(o.prevLine)||s)&&(t.match(T,!1)||t.match(M,!1))){var d=null;for(t.match(T,!0)?d="ul":(t.match(M,!0),d="ol"),o.indentation=t.column()+t.current().length,o.list=!0;o.listStack&&t.column()<o.listStack[o.listStack.length-1];)o.listStack.pop();return o.listStack.push(o.indentation),n.taskLists&&t.match(N,!1)&&(o.taskList=!0),o.f=o.inline,n.highlightFormatting&&(o.formatting=["list","list-"+d]),h(o)}return n.fencedCodeBlocks&&(f=t.match(I,!0))?(o.fencedChars=f[1],o.localMode=r(f[2]),o.localMode&&(o.localState=e.startState(o.localMode)),o.f=o.block=u,n.highlightFormatting&&(o.formatting="code-block"),o.code=-1,h(o)):i(t,o,o.inline)}function c(t,n){var r=w.token(t,n.htmlState);if(!k){var i=e.innerMode(w,n.htmlState);("xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=p,n.block=s,n.htmlState=null)}return r}function u(e,t){return t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=f,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),S.code)}function f(e,t){e.match(t.fencedChars),t.block=s,t.f=p,t.fencedChars=null,n.highlightFormatting&&(t.formatting="code-block"),t.code=1;var r=h(t);return t.code=0,r}function h(e){var t=[];if(e.formatting){t.push(S.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(S.formatting+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(S.formatting+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(S.formatting+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(S.linkHref,"url"):(e.strong&&t.push(S.strong),e.em&&t.push(S.em),e.strikethrough&&t.push(S.strikethrough),e.linkText&&t.push(S.linkText),e.code&&t.push(S.code)),e.header&&t.push(S.header,S.header+"-"+e.header),e.quote&&(t.push(S.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(S.quote+"-"+e.quote):t.push(S.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var i=(e.listStack.length-1)%3;i?1===i?t.push(S.list2):t.push(S.list3):t.push(S.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function d(e,t){return e.match(O,!0)?h(t):void 0}function p(t,r){var i=r.text(t,r);if(void 0!==i)return i;if(r.list)return r.list=null,h(r);if(r.taskList)return"x"!==t.match(N,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,h(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),h(r);var l=t.sol(),s=t.next();if(r.linkTitle){r.linkTitle=!1;var u=s;"("===s&&(u=")");var f="^\\s*(?:[^"+(u=(u+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(t.match(new RegExp(f),!0))return S.linkHref}if("`"===s){var d=r.formatting;n.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var p=t.current().length;if(0==r.code)return r.code=p,h(r);if(p==r.code){var v=h(r);return r.code=0,v}return r.formatting=d,h(r)}if(r.code)return h(r);if("\\"===s&&(t.next(),n.highlightFormatting)){var y=h(r),x=S.formatting+"-escape";return y?y+" "+x:x}if("!"===s&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=g,S.image;if("["===s&&t.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),h(r);if("]"===s&&r.linkText&&t.match(/\(.*?\)| ?\[.*?\]/,!1)){n.highlightFormatting&&(r.formatting="link");var y=h(r);return r.linkText=!1,r.inline=r.f=g,y}if("<"===s&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=m,n.highlightFormatting&&(r.formatting="link"),(y=h(r))?y+=" ":y="",y+S.linkInline;if("<"===s&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=m,n.highlightFormatting&&(r.formatting="link"),(y=h(r))?y+=" ":y="",y+S.linkEmail;if("<"===s&&t.match(/^(!--|\w)/,!1)){var b=t.string.indexOf(">",t.pos);if(-1!=b){var k=t.string.substring(t.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(k)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(w),function o(e,t,n){return t.f=t.block=n,n(e,t)}(t,r,c)}if("<"===s&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var C=!1;if(!n.underscoresBreakWords&&"_"===s&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var L=t.pos-2;if(L>=0){var T=t.string.charAt(L);"_"!==T&&T.match(/(\w)/,!1)&&(C=!0)}}if("*"===s||"_"===s&&!C)if(l&&" "===t.peek());else{if(r.strong===s&&t.eat(s))return n.highlightFormatting&&(r.formatting="strong"),v=h(r),r.strong=!1,v;if(!r.strong&&t.eat(s))return r.strong=s,n.highlightFormatting&&(r.formatting="strong"),h(r);if(r.em===s)return n.highlightFormatting&&(r.formatting="em"),v=h(r),r.em=!1,v;if(!r.em)return r.em=s,n.highlightFormatting&&(r.formatting="em"),h(r)}else if(" "===s&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return h(r);t.backUp(1)}if(n.strikethrough)if("~"===s&&t.eatWhile(s)){if(r.strikethrough)return n.highlightFormatting&&(r.formatting="strikethrough"),v=h(r),r.strikethrough=!1,v;if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),h(r)}else if(" "===s&&t.match(/^~~/,!0)){if(" "===t.peek())return h(r);t.backUp(2)}return" "===s&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),h(r)}function m(e,t){if(">"===e.next()){t.f=t.inline=p,n.highlightFormatting&&(t.formatting="link");var i=h(t);return i?i+=" ":i="",i+S.linkInline}return e.match(/^[^>]+/,!0),S.linkInline}function g(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=function v(e){return function(t,r){if(t.next()===e){r.f=r.inline=p,n.highlightFormatting&&(r.formatting="link-string");var o=h(r);return r.linkHref=!1,o}return t.match(P[e]),r.linkHref=!0,h(r)}}("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,h(t)):"error"}function y(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=x,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,h(t)):i(e,t,p)}function x(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=b,n.highlightFormatting&&(t.formatting="link");var r=h(t);return t.linkText=!1,r}return e.match(/^([^\]\\]|\\.)+/,!0),S.linkText}function b(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=p,S.linkHref+" url")}var w=e.getMode(t,"text/html"),k="null"==w.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var S={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var C in S)S.hasOwnProperty(C)&&n.tokenTypeOverrides[C]&&(S[C]=n.tokenTypeOverrides[C]);var L=/^([*\-_])(?:\s*\1){2,}\s*$/,T=/^[*\-+]\s+/,M=/^[0-9]+([.)])\s+/,N=/^\[(x| )\](?=\s)/,A=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,E=/^ *(?:\={1,}|-{1,})\s*$/,O=/^[^#!\[\]*_\\<>` "'(~]+/,I=new RegExp("^("+(!0===n.fencedCodeBlocks?"~~~+|```+":n.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),P={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},R={startState:function(){return{f:s,prevLine:null,thisLine:null,block:s,htmlState:null,indentation:0,inline:p,text:d,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(w,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var n=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n){if(l(t),!n)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentationDiff=Math.min(r-t.indentation,4),t.indentation=t.indentation+t.indentationDiff,r>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==c?{state:e.htmlState,mode:w}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:R}},blankLine:l,getType:h,fold:"markdown"};return R}),"xml"),e.defineMIME("text/x-markdown","markdown")},"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):i(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(t,n,r){var i;i=function(e){e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==t)return r}},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var i=t.lastIndexOf("."),o=i>-1&&t.substring(i+1,t.length);return o?e.findModeByExtension(o):void 0},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==t)return r}}},i("object"==typeof r&&"object"==typeof n?t("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(t,n,r){var i;i=function(e){var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",(function(r,i){function o(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(s("atom","]]>")):null:e.match("--")?n(s("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(c(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=s("meta","?>"),"meta"):(T=e.eat("/")?"closeTag":"openTag",t.tokenize=a,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function a(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=o,T=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return T="equals",null;if("<"==n){t.tokenize=o,t.state=d,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=function l(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=a;break}return"string"};return t.isInAttribute=!0,t}(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=o;break}n.next()}return e}}function c(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=c(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=o;break}return n.tokenize=c(e-1),n.tokenize(t,n)}}return"meta"}}function u(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(S.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function f(e){e.context&&(e.context=e.context.prev)}function h(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!S.contextGrabbers.hasOwnProperty(n)||!S.contextGrabbers[n].hasOwnProperty(t))return;f(e)}}function d(e,t,n){return"openTag"==e?(n.tagStart=t.column(),p):"closeTag"==e?m:d}function p(e,t,n){return"word"==e?(n.tagName=t.current(),M="tag",y):(M="error",p)}function m(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&S.implicitlyClosed.hasOwnProperty(n.context.tagName)&&f(n),n.context&&n.context.tagName==r||!1===S.matchClosing?(M="tag",g):(M="tag error",v)}return M="error",v}function g(e,t,n){return"endTag"!=e?(M="error",g):(f(n),d)}function v(e,t,n){return M="error",g(e,0,n)}function y(e,t,n){if("word"==e)return M="attribute",x;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||S.autoSelfClosers.hasOwnProperty(r)?h(n,r):(h(n,r),n.context=new u(n,r,i==n.indented)),d}return M="error",y}function x(e,t,n){return"equals"==e?b:(S.allowMissing||(M="error"),y(e,0,n))}function b(e,t,n){return"string"==e?w:"word"==e&&S.allowUnquoted?(M="string",y):(M="error",y(e,0,n))}function w(e,t,n){return"string"==e?w:y(e,0,n)}var T,M,k=r.indentUnit,S={},C=i.htmlMode?t:n;for(var L in C)S[L]=C[L];for(var L in i)S[L]=i[L];return o.isInText=!0,{startState:function(e){var t={tokenize:o,state:d,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;T=null;var n=t.tokenize(e,t);return(n||T)&&"comment"!=n&&(M=null,t.state=t.state(T||n,e,t),M&&(n="error"==M?n+" error":M)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+k;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=a&&t.tokenize!=o)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==S.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+k*(S.multilineTagIndentFactor||1);if(S.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var l=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(l&&l[1])for(;i;){if(i.tagName==l[2]){i=i.prev;break}if(!S.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(l)for(;i;){var s=S.contextGrabbers[i.tagName];if(!s||!s.hasOwnProperty(l[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+k:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:S.htmlMode?"html":"xml",helperType:S.htmlMode?"html":"xml",skipAttribute:function(e){e.state==b&&(e.state=y)}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})},i("object"==typeof r&&"object"==typeof n?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,l=8*i-r-1,s=(1<<l)-1,c=s>>1,u=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-u)-1,d>>=-u,u+=l;u>0;o=256*o+e[t+f],f+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+f],f+=h,u-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,l,s,c=8*o-i-1,u=(1<<c)-1,f=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=u?(l=0,a=u):a+f>=1?(l=(t*s-1)*Math.pow(2,i),a+=f):(l=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&l,d+=p,l/=256,i-=8);for(a=a<<i|l,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*m}},{}],16:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],17:[function(t,n,r){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function i(e,t){if(this.options=t||h.defaults,this.links=e,this.rules=p.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=p.breaks:this.rules=p.gfm:this.options.pedantic&&(this.rules=p.pedantic)}function o(e){this.options=e||{}}function a(e){this.tokens=[],this.token=null,this.options=e||h.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options}function l(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function f(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function h(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null);var i,o,s=(n=f({},h.defaults,n||{})).highlight,c=0;try{i=t.lex(e,n)}catch(u){return r(u)}o=i.length;var d=function(e){if(e)return n.highlight=s,r(e);var t;try{t=a.parse(i,n)}catch(o){e=o}return n.highlight=s,e?r(e):r(null,t)};if(!s||s.length<3)return d();if(delete n.highlight,!o)return d();for(;c<i.length;c++)!function(e){"code"!==e.type?--o||d():s(e.text,e.lang,(function(t,n){return t?d(t):null==n||n===e.text?--o||d():(e.text=n,e.escaped=!0,void(--o||d()))}))}(i[c])}else try{return n&&(n=f({},h.defaults,n)),a.parse(t.lex(e,n),n)}catch(u){if(u.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+l(u.message+"",!0)+"</pre>";throw u}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};d.item=c(d.item,"gm")(/bull/g,d.bullet)(),d.list=c(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=c(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=c(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=c(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=f({},d),d.gfm=f({},d.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),d.gfm.paragraph=c(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=f({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=d,t.lex=function(e,n){return new t(n).lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){var r,i,o,a,l,s,c,u,f;for(e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]||""});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},u=0;u<s.align.length;u++)/^ *-+: *$/.test(s.align[u])?s.align[u]="right":/^ *:-+: *$/.test(s.align[u])?s.align[u]="center":/^ *:-+ *$/.test(s.align[u])?s.align[u]="left":s.align[u]=null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].split(/ *\| */);this.tokens.push(s)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),a=o[2],this.tokens.push({type:"list_start",ordered:a.length>1}),r=!1,f=(o=o[0].match(this.rules.item)).length,u=0;f>u;u++)c=(s=o[u]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(c-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&u!==f-1&&(a===(l=d.bullet.exec(o[u+1])[0])||a.length>1&&l.length>1||(e=o.slice(u+1).join("\n")+e,u=f-1)),i=r||/\n\n(?!\s*$)/.test(s),u!==f-1&&(r="\n"===s.charAt(s.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(s,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===o[1]||"script"===o[1]||"style"===o[1]),text:o[0]});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),s={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<s.align.length;u++)/^ *-+: *$/.test(s.align[u])?s.align[u]="right":/^ *:-+: *$/.test(s.align[u])?s.align[u]="center":/^ *:-+ *$/.test(s.align[u])?s.align[u]="left":s.align[u]=null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var p={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};p.link=c(p.link)("inside",p._inside)("href",p._href)(),p.reflink=c(p.reflink)("inside",p._inside)(),p.normal=f({},p),p.pedantic=f({},p.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),p.gfm=f({},p.normal,{escape:c(p.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:c(p.text)("]|","~]|")("|","|https?://|")()}),p.breaks=f({},p.gfm,{br:c(p.br)("{2,}","*")(),text:c(p.gfm.text)("{2,}","*")()}),i.rules=p,i.output=function(e,t,n){return new i(t,n).output(e)},i.prototype.output=function(e){for(var t,n,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):r=n=l(i[1]),o+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):l(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){o+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,o+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(l(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(l(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),r=n=l(i[1]),o+=this.renderer.link(r,null,n);return o},i.prototype.outputLink=function(e,t){var n=l(t.href),r=t.title?l(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,l(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},o.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+l(t,!0)+'">'+(n?e:l(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:l(e,!0))+"\n</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(function s(e){return e.replace(/&([#\w]+);/g,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+">"+n+"</a>"},o.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")},o.prototype.text=function(e){return e},a.parse=function(e,t,n){return new a(t,n).parse(e)},a.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop()},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,o="",a="";for(n="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});a+=this.renderer.tablerow(n)}return this.renderer.table(o,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var l=this.token.ordered;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,l);case"list_item_start":for(a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(a);case"loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return this.renderer.listitem(a);case"html":var s=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},u.exec=u,h.options=h.setOptions=function(e){return f(h.defaults,e),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new o,xhtml:!1},h.Parser=a,h.parser=a.parse,h.Renderer=o,h.Lexer=t,h.lexer=t.lex,h.InlineLexer=i,h.inlineLexer=i.output,h.parse=h,void 0!==n&&"object"==typeof r?n.exports=h:this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){(function(n,r){var i=function(e,t,n,i){if(i=i||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=i.flags||{},e){if(this.dictionary=e,"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension)t||(t=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".aff"))),n||(n=this._readFile(chrome.extension.getURL("lib/typo/dictionaries/"+e+"/"+e+".dic")));else{if(i.dictionaryPath)var o=i.dictionaryPath;else if(void 0!==r)o=r+"/dictionaries";else o="./dictionaries";t||(t=this._readFile(o+"/"+e+"/"+e+".aff")),n||(n=this._readFile(o+"/"+e+"/"+e+".dic"))}this.rules=this._parseAFF(t),this.compoundRuleCodes={};for(var a=0,l=this.compoundRules.length;l>a;a++)for(var s=this.compoundRules[a],c=0,u=s.length;u>c;c++)this.compoundRuleCodes[s[c]]=[];for(var a in"ONLYINCOMPOUND"in this.flags&&(this.compoundRuleCodes[this.flags.ONLYINCOMPOUND]=[]),this.dictionaryTable=this._parseDIC(n),this.compoundRuleCodes)0==this.compoundRuleCodes[a].length&&delete this.compoundRuleCodes[a];for(a=0,l=this.compoundRules.length;l>a;a++){var f=this.compoundRules[a],h="";for(c=0,u=f.length;u>c;c++){var d=f[c];h+=d in this.compoundRuleCodes?"("+this.compoundRuleCodes[d].join("|")+")":d}this.compoundRules[a]=new RegExp(h,"i")}}return this};i.prototype={load:function(e){for(var t in e)this[t]=e[t];return this},_readFile:function(t,r){if(r||(r="utf8"),"undefined"!=typeof XMLHttpRequest){var i=new XMLHttpRequest;return i.open("GET",t,!1),i.overrideMimeType&&i.overrideMimeType("text/plain; charset="+r),i.send(null),i.responseText}if(void 0!==e){var o=e("fs");try{if(o.existsSync(t)){var a=o.statSync(t),l=o.openSync(t,"r"),s=new n(a.size);return o.readSync(l,s,0,s.length,null),s.toString(r,0,s.length)}console.log("Path "+t+" does not exist.")}catch(c){return console.log(c),""}}},_parseAFF:function(e){for(var t={},n=(e=this._removeAffixComments(e)).split("\n"),r=0,i=n.length;i>r;r++){var a=(o=n[r]).split(/\s+/),l=a[0];if("PFX"==l||"SFX"==l){for(var s=a[1],c=a[2],f=[],h=r+1,d=r+1+(u=parseInt(a[3],10));d>h;h++){var m=(p=(o=n[h]).split(/\s+/))[2],g=p[3].split("/"),v=g[0];"0"===v&&(v="");var y=this.parseRuleCodes(g[1]),x=p[4],b={};b.add=v,y.length>0&&(b.continuationClasses=y),"."!==x&&(b.match="SFX"===l?new RegExp(x+"$"):new RegExp("^"+x)),"0"!=m&&(b.remove="SFX"===l?new RegExp(m+"$"):m),f.push(b)}t[s]={type:l,combineable:"Y"==c,entries:f},r+=u}else if("COMPOUNDRULE"===l){var u;for(h=r+1,d=r+1+(u=parseInt(a[1],10));d>h;h++){var o,p=(o=n[h]).split(/\s+/);this.compoundRules.push(p[1])}r+=u}else if("REP"===l){3===(p=o.split(/\s+/)).length&&this.replacementTable.push([p[1],p[2]])}else this.flags[l]=a[1]}return t},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){function t(e,t){e in r&&"object"==typeof r[e]||(r[e]=[]),r[e].push(t)}for(var n=(e=this._removeDicComments(e)).split("\n"),r={},i=1,o=n.length;o>i;i++){var l=n[i].split("/",2),s=l[0];if(l.length>1){var c=this.parseRuleCodes(l[1]);"NEEDAFFIX"in this.flags&&-1!=c.indexOf(this.flags.NEEDAFFIX)||t(s,c);for(var u=0,f=c.length;f>u;u++){var h=c[u],d=this.rules[h];if(d)for(var p=this._applyRule(s,d),m=0,g=p.length;g>m;m++){var v=p[m];if(t(v,[]),d.combineable)for(var y=u+1;f>y;y++){var x=c[y],b=this.rules[x];if(b&&b.combineable&&d.type!=b.type)for(var w=this._applyRule(v,b),k=0,S=w.length;S>k;k++){t(w[k],[])}}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(s)}}else t(s.trim(),[])}return r},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;r>n;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?textCode.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,o=n.length;o>i;i++){var a=n[i];if(!a.match||e.match(a.match)){var l=e;if(a.remove&&(l=l.replace(a.remove,"")),"SFX"===t.type?l+=a.add:l=a.add+l,r.push(l),"continuationClasses"in a)for(var s=0,c=a.continuationClasses.length;c>s;s++){var u=this.rules[a.continuationClasses[s]];u&&(r=r.concat(this._applyRule(l,u)))}}}return r},check:function(e){var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var r=t.toLowerCase();if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){var t=this.dictionaryTable[e];if(void 0===t){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(var n=0,r=this.compoundRules.length;r>n;n++)if(e.match(this.compoundRules[n]))return!0;return!1}if("object"==typeof t){for(n=0,r=t.length;r>n;n++)if(!this.hasFlag(e,"ONLYINCOMPOUND",t[n]))return!0;return!1}},hasFlag:function(e,t,n){if(t in this.flags){if(void 0===n)n=Array.prototype.concat.apply([],this.dictionaryTable[e]);if(n&&-1!==n.indexOf(this.flags[t]))return!0}return!1},alphabet:"",suggest:function(e,t){function n(e){for(var t=[],n=0,r=e.length;r>n;n++){for(var i=e[n],o=[],a=0,l=i.length+1;l>a;a++)o.push([i.substring(0,a),i.substring(a,i.length)]);var s=[];for(a=0,l=o.length;l>a;a++){(u=o[a])[1]&&s.push(u[0]+u[1].substring(1))}var f=[];for(a=0,l=o.length;l>a;a++){(u=o[a])[1].length>1&&f.push(u[0]+u[1][1]+u[1][0]+u[1].substring(2))}var h=[];for(a=0,l=o.length;l>a;a++){if((u=o[a])[1])for(var d=0,p=c.alphabet.length;p>d;d++)h.push(u[0]+c.alphabet[d]+u[1].substring(1))}for(a=0,l=o.length;l>a;a++){var u;if((u=o[a])[1])for(d=0,p=c.alphabet.length;p>d;d++)h.push(u[0]+c.alphabet[d]+u[1])}t=(t=(t=(t=t.concat(s)).concat(f)).concat(h)).concat([])}return t}function r(e){for(var t=[],n=0;n<e.length;n++)c.check(e[n])&&t.push(e[n]);return t}if(t||(t=5),this.check(e))return[];for(var o=0,a=this.replacementTable.length;a>o;o++){var l=this.replacementTable[o];if(-1!==e.indexOf(l[0])){var s=e.replace(l[0],l[1]);if(this.check(s))return[s]}}var c=this;return c.alphabet="abcdefghijklmnopqrstuvwxyz",function i(e){for(var o=n([e]),a=n(o),l=r(o).concat(r(a)),s={},u=0,f=l.length;f>u;u++)l[u]in s?s[l[u]]+=1:s[l[u]]=1;var h=[];for(var u in s)h.push([u,s[u]]);h.sort((function i(e,t){return e[1]<t[1]?-1:1})).reverse();var d=[];for(u=0,f=Math.min(t,h.length);f>u;u++)c.hasFlag(h[u][0],"NOSUGGEST")||d.push(h[u][0]);return d}(e)}},void 0!==t&&(t.exports=i)}).call(this,e("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],19:[function(e,t,n){var r=e("codemirror");r.commands.tabAndIndentMarkdownList=function(e){var n=e.listSelections()[0].head;if(!1!==e.getStateAfter(n.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var o=Array(e.options.tabSize+1).join(" ");e.replaceSelection(o)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var n=e.listSelections()[0].head;if(!1!==e.getStateAfter(n.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var o=Array(e.options.tabSize+1).join(" ");e.replaceSelection(o)}}},{codemirror:10}],20:[function(e,t,n){function r(e){return U?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function i(e,t,n){e=e||{};var r=document.createElement("a");return t=null==t||t,e.title&&t&&(r.title=a(e.title,e.action,n),U&&(r.title=r.title.replace("Ctrl","⌘"),r.title=r.title.replace("Alt","⌥"))),r.tabIndex=-1,r.className=e.className,r}function o(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function a(e,t,n){var i,o=e;return t&&(n[i=Y(t)]&&(o+=" ("+r(n[i])+")")),o}function l(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,i,o=n.type.split(" "),a={},l=0;l<o.length;l++)"strong"===(r=o[l])?a.bold=!0:"variable-2"===r?(i=e.getLine(t.line),/^\s*\d+\.\s/.test(i)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===r?a.quote=!0:"em"===r?a.italic=!0:"quote"===r?a.quote=!0:"strikethrough"===r?a.strikethrough=!0:"comment"===r?a.code=!0:"link"===r?a.link=!0:"tag"===r?a.image=!0:r.match(/^header(\-[1-6])?$/)&&(a[r.replace("header","heading")]=!0);return a}function s(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(V=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=V;var n=t.getWrapperElement();/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen";var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active";var i=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(i.className)&&N(e)}function c(e){P(e,"bold",e.options.blockStyles.bold)}function u(e){P(e,"italic",e.options.blockStyles.italic)}function f(e){P(e,"strikethrough","~~")}function h(e){function t(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function n(e){return e.state.base.base||e.state.base}function r(e,r,i,o,a){i=i||e.getLineHandle(r),o=o||e.getTokenAt({line:r,ch:1}),a=a||!!i.text&&e.getTokenAt({line:r,ch:i.text.length-1});var l=o.type?o.type.split(" "):[];return a&&n(a).indentedCode?"indented":-1!==l.indexOf("comment")&&(n(o).fencedChars||n(a).fencedChars||t(i)?"fenced":"single")}var o,a,l,s=e.options.blockStyles.code,c=e.codemirror,u=c.getCursor("start"),f=c.getCursor("end"),h=c.getTokenAt({line:u.line,ch:u.ch||1}),d=c.getLineHandle(u.line),p=r(c,u.line,d,h);if("single"===p){var m=d.text.slice(0,u.ch).replace("`",""),g=d.text.slice(u.ch).replace("`","");c.replaceRange(m+g,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),u.ch--,u!==f&&f.ch--,c.setSelection(u,f),c.focus()}else if("fenced"===p)if(u.line!==f.line||u.ch!==f.ch){for(o=u.line;o>=0&&!t(d=c.getLineHandle(o));o--);var v,y,x,b,k=n(c.getTokenAt({line:o,ch:1})).fencedChars;t(c.getLineHandle(u.line))?(v="",y=u.line):t(c.getLineHandle(u.line-1))?(v="",y=u.line-1):(v=k+"\n",y=u.line),t(c.getLineHandle(f.line))?(x="",b=f.line,0===f.ch&&(b+=1)):0!==f.ch&&t(c.getLineHandle(f.line+1))?(x="",b=f.line+1):(x=k+"\n",b=f.line+1),0===f.ch&&(b-=1),c.operation((function(){c.replaceRange(x,{line:b,ch:0},{line:b+(x?0:1),ch:0}),c.replaceRange(v,{line:y,ch:0},{line:y+(v?0:1),ch:0})})),c.setSelection({line:y+(v?1:0),ch:0},{line:b+(v?1:-1),ch:0}),c.focus()}else{var S=u.line;if(t(c.getLineHandle(u.line))&&("fenced"===r(c,u.line+1)?(o=u.line,S=u.line+1):(a=u.line,S=u.line-1)),void 0===o)for(o=S;o>=0&&!t(d=c.getLineHandle(o));o--);if(void 0===a)for(l=c.lineCount(),a=S;l>a&&!t(d=c.getLineHandle(a));a++);c.operation((function(){c.replaceRange("",{line:o,ch:0},{line:o+1,ch:0}),c.replaceRange("",{line:a-1,ch:0},{line:a,ch:0})})),c.focus()}else if("indented"===p){if(u.line!==f.line||u.ch!==f.ch)o=u.line,a=f.line,0===f.ch&&a--;else{for(o=u.line;o>=0;o--)if(!(d=c.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==r(c,o,d)){o+=1;break}for(l=c.lineCount(),a=u.line;l>a;a++)if(!(d=c.getLineHandle(a)).text.match(/^\s*$/)&&"indented"!==r(c,a,d)){a-=1;break}}var C=c.getLineHandle(a+1),L=C&&c.getTokenAt({line:a+1,ch:C.text.length-1});L&&n(L).indentedCode&&c.replaceRange("\n",{line:a+1,ch:0});for(var M=o;a>=M;M++)c.indentLine(M,"subtract");c.focus()}else{var N=u.line===f.line&&u.ch===f.ch&&0===u.ch,A=u.line!==f.line;N||A?function i(e,t,n,r){var i=t.line+1,o=n.line+1,a=t.line!==n.line,l=r+"\n",s="\n"+r;a&&o++,a&&0===n.ch&&(s=r+"\n",o--),E(e,!1,[l,s]),e.setSelection({line:i,ch:0},{line:o,ch:0})}(c,u,f,s):E(c,!1,["`","`"])}}function d(e){I(e.codemirror,"quote")}function p(e){O(e.codemirror,"smaller")}function m(e){O(e.codemirror,"bigger")}function g(e){O(e.codemirror,void 0,1)}function v(e){O(e.codemirror,void 0,2)}function y(e){O(e.codemirror,void 0,3)}function x(e){I(e.codemirror,"unordered-list")}function b(e){I(e.codemirror,"ordered-list")}function w(e){!function R(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,n=e.getCursor("start"),r=e.getCursor("end"),i=n.line;i<=r.line;i++)t=(t=e.getLine(i)).replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:i,ch:0},{line:i,ch:99999999999999})}(e.codemirror)}function k(e){var t=e.codemirror,n=l(t),r=e.options,i="http://";return!(r.promptURLs&&(i=prompt(r.promptTexts.link),!i))&&void E(t,n.link,r.insertTexts.link,i)}function S(e){var t=e.codemirror,n=l(t),r=e.options,i="http://";return!(r.promptURLs&&(i=prompt(r.promptTexts.image),!i))&&void E(t,n.image,r.insertTexts.image,i)}function C(e){var t=e.codemirror,n=l(t),r=e.options;E(t,n.table,r.insertTexts.table)}function L(e){var t=e.codemirror,n=l(t),r=e.options;E(t,n.image,r.insertTexts.horizontalRule)}function T(e){var t=e.codemirror;t.undo(),t.focus()}function M(e){var t=e.codemirror;t.redo(),t.focus()}function N(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,i=e.toolbarElements["side-by-side"],o=!1;/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){t.getOption("fullScreen")||s(e),r.className+=" editor-preview-active-side"}),1),i.className+=" active",n.className+=" CodeMirror-sided",o=!0);var a=n.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,c=n.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),c.className=c.className.replace(/\s*disabled-for-preview*/g,"")}t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){r.innerHTML=e.options.previewRender(e.value(),r)}),o?(r.innerHTML=e.options.previewRender(e.value(),r),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function A(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,i=!!e.options.toolbar&&e.toolbarElements.preview,o=n.lastChild;o&&/editor-preview/.test(o.className)||((o=document.createElement("div")).className="editor-preview",n.appendChild(o)),/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),i&&(i.className=i.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){o.className+=" editor-preview-active"}),1),i&&(i.className+=" active",r.className+=" disabled-for-preview")),o.innerHTML=e.options.previewRender(e.value(),o);var a=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(a.className)&&N(e)}function E(e,t,n,r){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var i,o=n[0],a=n[1],l=e.getCursor("start"),s=e.getCursor("end");r&&(a=a.replace("#url#",r)),t?(o=(i=e.getLine(l.line)).slice(0,l.ch),a=i.slice(l.ch),e.replaceRange(o+a,{line:l.line,ch:0})):(i=e.getSelection(),e.replaceSelection(o+i+a),l.ch+=o.length,l!==s&&(s.ch+=o.length)),e.setSelection(l,s),e.focus()}}function O(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r=e.getCursor("start"),i=e.getCursor("end"),o=r.line;o<=i.line;o++)!function(r){var i=e.getLine(r),o=i.search(/[^#]/);i=void 0!==t?0>=o?"bigger"==t?"###### "+i:"# "+i:6==o&&"smaller"==t?i.substr(7):1==o&&"bigger"==t?i.substr(2):"bigger"==t?i.substr(1):"#"+i:1==n?0>=o?"# "+i:o==n?i.substr(o+1):"# "+i.substr(o+1):2==n?0>=o?"## "+i:o==n?i.substr(o+1):"## "+i.substr(o+1):0>=o?"### "+i:o==n?i.substr(o+1):"### "+i.substr(o+1),e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(o);e.focus()}}function I(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=l(e),r=e.getCursor("start"),i=e.getCursor("end"),o={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},a={quote:"> ","unordered-list":"* ","ordered-list":"1. "},s=r.line;s<=i.line;s++)!function(r){var i=e.getLine(r);i=n[t]?i.replace(o[t],"$1"):a[t]+i,e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(s);e.focus()}}function P(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r=void 0===r?n:r;var i,o=e.codemirror,a=l(o),s=n,c=r,u=o.getCursor("start"),f=o.getCursor("end");a[t]?(s=(i=o.getLine(u.line)).slice(0,u.ch),c=i.slice(u.ch),"bold"==t?(s=s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),c=c.replace(/(\*\*|__)/,"")):"italic"==t?(s=s.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),c=c.replace(/(\*|_)/,"")):"strikethrough"==t&&(s=s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),c=c.replace(/(\*\*|~~)/,"")),o.replaceRange(s+c,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(u.ch-=2,u!==f&&(f.ch-=2)):"italic"==t&&(u.ch-=1,u!==f&&(f.ch-=1))):(i=o.getSelection(),"bold"==t?i=(i=i.split("**").join("")).split("__").join(""):"italic"==t?i=(i=i.split("*").join("")).split("_").join(""):"strikethrough"==t&&(i=i.split("~~").join("")),o.replaceSelection(s+i+c),u.ch+=n.length,f.ch=u.ch+i.length),o.setSelection(u,f),o.focus()}}function D(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=D(e[n]||{},t[n]):e[n]=t[n]);return e}function H(e){for(var t=1;t<arguments.length;t++)e=D(e,arguments[t]);return e}function W(e){var n=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),r=0;if(null===n)return r;for(var i=0;i<n.length;i++)r+=n[i].charCodeAt(0)>=19968?n[i].length:1;return r}function B(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(t=!1);if(t){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===e.toolbar)for(var o in e.toolbar=[],K)K.hasOwnProperty(o)&&(-1!=o.indexOf("separator-")&&e.toolbar.push("|"),(!0===K[o].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(o))&&e.toolbar.push(o));e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=H({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=H({},X,e.insertTexts||{}),e.promptTexts=Z,e.blockStyles=H({},J,e.blockStyles||{}),e.shortcuts=H({},G,e.shortcuts||{}),null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function _(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}var F=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var z=e("codemirror-spell-checker"),j=e("marked"),U=/Mac/.test(navigator.platform),q={toggleBold:c,toggleItalic:u,drawLink:k,toggleHeadingSmaller:p,toggleHeadingBigger:m,drawImage:S,toggleBlockquote:d,toggleOrderedList:b,toggleUnorderedList:x,toggleCodeBlock:h,togglePreview:A,toggleStrikethrough:f,toggleHeading1:g,toggleHeading2:v,toggleHeading3:y,cleanBlock:w,drawTable:C,drawHorizontalRule:L,undo:T,redo:M,toggleSideBySide:N,toggleFullScreen:s},G={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},Y=function(e){for(var t in q)if(q[t]===e)return t;return null},$=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},V="",K={bold:{name:"bold",action:c,className:"fa fa-bold",title:"Жирный",default:!0},italic:{name:"italic",action:u,className:"fa fa-italic",title:"Наклонный",default:!0},strikethrough:{name:"strikethrough",action:f,className:"fa fa-strikethrough",title:"Зачеркнутый"},heading:{name:"heading",action:p,className:"fa fa-header",title:"Заголовок",default:!0},"heading-smaller":{name:"heading-smaller",action:p,className:"fa fa-header fa-header-x fa-header-smaller",title:"Меньший заголовок"},"heading-bigger":{name:"heading-bigger",action:m,className:"fa fa-header fa-header-x fa-header-bigger",title:"Больший заголовок"},"heading-1":{name:"heading-1",action:g,className:"fa fa-header fa-header-x fa-header-1",title:"Большой заголовок"},"heading-2":{name:"heading-2",action:v,className:"fa fa-header fa-header-x fa-header-2",title:"Средний заголовок"},"heading-3":{name:"heading-3",action:y,className:"fa fa-header fa-header-x fa-header-3",title:"Маленький заголовок"},"separator-1":{name:"separator-1"},code:{name:"code",action:h,className:"fa fa-code",title:"Код"},quote:{name:"quote",action:d,className:"fa fa-quote-left",title:"Цитата",default:!0},"unordered-list":{name:"unordered-list",action:x,className:"fa fa-list-ul",title:"Общий список",default:!0},"ordered-list":{name:"ordered-list",action:b,className:"fa fa-list-ol",title:"Нумерованный список",default:!0},"clean-block":{name:"clean-block",action:w,className:"fa fa-eraser fa-clean-block",title:"Чистый блок"},"separator-2":{name:"separator-2"},link:{name:"link",action:k,className:"fa fa-link",title:"Добавить ссылку",default:!0},image:{name:"image",action:S,className:"fa fa-picture-o",title:"Вставить картинку",default:!0},table:{name:"table",action:C,className:"fa fa-table",title:"Вставить таблицу"},"horizontal-rule":{name:"horizontal-rule",action:L,className:"fa fa-minus",title:"Вставить горизонтальную линию"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:A,className:"fa fa-eye no-disable",title:"Переключить вид",default:!0},"side-by-side":{name:"side-by-side",action:N,className:"fa fa-columns no-disable no-mobile",title:"Переключить бок о бок",default:!0},fullscreen:{name:"fullscreen",action:s,className:"fa fa-arrows-alt no-disable no-mobile",title:"Переключить на полный экран",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Руководство по Markdown",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:T,className:"fa fa-undo no-disable",title:"Отменить"},redo:{name:"redo",action:M,className:"fa fa-repeat no-disable",title:"Повторить"}},X={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},Z={link:"URL for the link:",image:"URL of the image:"},J={bold:"**",code:"```",italic:"*"};B.prototype.markdown=function(e){if(j){var t={};return this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting&&window.hljs&&(t.highlight=function(e){return window.hljs.highlightAuto(e).value}),j.setOptions(t),j(e)}},B.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var a,l,t=this.options,n=this,i={};for(var o in t.shortcuts)null!==t.shortcuts[o]&&null!==q[o]&&function(e){i[r(t.shortcuts[e])]=function(){q[e](n)}}(o);if(i.Enter="newlineAndIndentContinueMarkdownList",i.Tab="tabAndIndentMarkdownList",i["Shift-Tab"]="shiftTabAndUnindentMarkdownList",i.Esc=function(e){e.getOption("fullScreen")&&s(n)},document.addEventListener("keydown",(function(e){27==(e=e||window.event).keyCode&&n.codemirror.getOption("fullScreen")&&s(n)}),!1),!1!==t.spellChecker?(a="spell-checker",(l=t.parsingConfig).name="gfm",l.gitHubSpice=!1,z({codeMirrorInstance:F})):((a=t.parsingConfig).name="gfm",a.gitHubSpice=!1),this.codemirror=F.fromTextArea(e,{mode:a,backdrop:l,theme:"paper",tabSize:null!=t.tabSize?t.tabSize:2,indentUnit:null!=t.tabSize?t.tabSize:2,indentWithTabs:!1!==t.indentWithTabs,lineNumbers:!1,autofocus:!0===t.autofocus,extraKeys:i,lineWrapping:!1!==t.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:t.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null==t.styleSelectedText||t.styleSelectedText}),!0===t.forceSync){var c=this.codemirror;c.on("change",(function(){c.save()}))}this.gui={},!1!==t.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==t.status&&(this.gui.statusbar=this.createStatusbar()),null!=t.autosave&&!0===t.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var u=this.codemirror;setTimeout(function(){u.refresh()}.bind(u),0)}},B.prototype.autosave=function(){if(_()){var e=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",(function(){localStorage.removeItem("smde_"+e.options.autosave.uniqueId)})),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&null!=t&&""!=t){var n=new Date,r=n.getHours(),i=n.getMinutes(),o="am",a=r;a>=12&&(a=r-12,o="pm"),0==a&&(a=12),i=10>i?"0"+i:i,t.innerHTML="Autosaved: "+a+":"+i+" "+o}this.autosaveTimeoutId=setTimeout((function(){e.autosave()}),this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},B.prototype.clearAutosavedValue=function(){if(_()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},B.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;n&&/editor-preview-side/.test(n.className)||((n=document.createElement("div")).className="editor-preview-side",t.parentNode.insertBefore(n,t.nextSibling));var r=!1,i=!1;return e.on("scroll",(function(e){if(r)r=!1;else{i=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,o=parseFloat(e.getScrollInfo().top)/t,a=(n.scrollHeight-n.clientHeight)*o;n.scrollTop=a}})),n.onscroll=function(){if(i)i=!1;else{r=!0;var t=n.scrollHeight-n.clientHeight,o=parseFloat(n.scrollTop)/t,a=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*o;e.scrollTo(0,a)}},n},B.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)null!=K[e[t]]&&(e[t]=K[e[t]]);var n=document.createElement("div");n.className="editor-toolbar";var r=this,a={};for(r.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==r.options.toolbarGuideIcon)&&!(r.options.hideIcons&&-1!=r.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&$())){if("|"===e[t]){for(var s=!1,c=t+1;c<e.length;c++)"|"===e[c]||r.options.hideIcons&&-1!=r.options.hideIcons.indexOf(e[c].name)||(s=!0);if(!s)continue}!function(e){var t;t="|"===e?o():i(e,r.options.toolbarTips,r.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(r)}:"string"==typeof e.action&&(t.href=e.action,t.target="_blank")),a[e.name||e]=t,n.appendChild(t)}(e[t])}r.toolbarElements=a;var u=this.codemirror;u.on("cursorActivity",(function(){var e=l(u);for(var t in a)!function(t){var n=a[t];e[t]?n.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(n.className=n.className.replace(/\s*active\s*/g,""))}(t)}));var f=u.getWrapperElement();return f.parentNode.insertBefore(n,f),n}},B.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var r,i,o,a=[];for(r=0;r<e.length;r++)if(i=void 0,o=void 0,"object"==typeof e[r])a.push({className:e[r].className,defaultValue:e[r].defaultValue,onUpdate:e[r].onUpdate});else{var l=e[r];"words"===l?(o=function(e){e.innerHTML=W(n.getValue())},i=function(e){e.innerHTML=W(n.getValue())}):"lines"===l?(o=function(e){e.innerHTML=n.lineCount()},i=function(e){e.innerHTML=n.lineCount()}):"cursor"===l?(o=function(e){e.innerHTML="0:0"},i=function(e){var t=n.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===l&&(o=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),a.push({className:l,defaultValue:o,onUpdate:i})}var s=document.createElement("div");for(s.className="editor-statusbar",r=0;r<a.length;r++){var c=a[r],u=document.createElement("span");u.className=c.className,"function"==typeof c.defaultValue&&c.defaultValue(u),"function"==typeof c.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(u,c)),s.appendChild(u)}var f=this.codemirror.getWrapperElement();return f.parentNode.insertBefore(s,f.nextSibling),s}},B.prototype.value=function(e){return void 0===e?this.codemirror.getValue():(this.codemirror.getDoc().setValue(e),this)},B.toggleBold=c,B.toggleItalic=u,B.toggleStrikethrough=f,B.toggleBlockquote=d,B.toggleHeadingSmaller=p,B.toggleHeadingBigger=m,B.toggleHeading1=g,B.toggleHeading2=v,B.toggleHeading3=y,B.toggleCodeBlock=h,B.toggleUnorderedList=x,B.toggleOrderedList=b,B.cleanBlock=w,B.drawLink=k,B.drawImage=S,B.drawTable=C,B.drawHorizontalRule=L,B.undo=T,B.redo=M,B.togglePreview=A,B.toggleSideBySide=N,B.toggleFullScreen=s,B.prototype.toggleBold=function(){c(this)},B.prototype.toggleItalic=function(){u(this)},B.prototype.toggleStrikethrough=function(){f(this)},B.prototype.toggleBlockquote=function(){d(this)},B.prototype.toggleHeadingSmaller=function(){p(this)},B.prototype.toggleHeadingBigger=function(){m(this)},B.prototype.toggleHeading1=function(){g(this)},B.prototype.toggleHeading2=function(){v(this)},B.prototype.toggleHeading3=function(){y(this)},B.prototype.toggleCodeBlock=function(){h(this)},B.prototype.toggleUnorderedList=function(){x(this)},B.prototype.toggleOrderedList=function(){b(this)},B.prototype.cleanBlock=function(){w(this)},B.prototype.drawLink=function(){k(this)},B.prototype.drawImage=function(){S(this)},B.prototype.drawTable=function(){C(this)},B.prototype.drawHorizontalRule=function(){L(this)},B.prototype.undo=function(){T(this)},B.prototype.redo=function(){M(this)},B.prototype.togglePreview=function(){A(this)},B.prototype.toggleSideBySide=function(){N(this)},B.prototype.toggleFullScreen=function(){s(this)},B.prototype.isPreviewActive=function(){var n=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(n.className)},B.prototype.isSideBySideActive=function(){var n=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(n.className)},B.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},B.prototype.getState=function(){return l(this.codemirror)},B.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=B},{"./codemirror/tablist":19,codemirror:10,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:17}]},{},[20])(20)})),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}((function(D){function n(t,i,e){var n,o,r;"string"==typeof e&&(e={className:e}),this.options=(n=f,o=D.isPlainObject(e)?e:{},(r=function(){}).prototype=n,D.extend(!0,new r,o)),this.loadHTML(),this.wrapper=D(A.html),this.options.clickToHide&&this.wrapper.addClass(l+"-hidable"),this.wrapper.data(l,this),this.arrow=this.wrapper.find("."+l+"-arrow"),this.container=this.wrapper.find("."+l+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=m(t),this.elem.data(l,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(i)}var k=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1},s="notify",l=s+"js",a=s+"!blank",B={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},H=["l","c","r"],Q=["t","m","b"],R=["t","b","l","r"],U={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},h={},A={name:"core",html:'<div class="'+l+'-wrapper">\n\t<div class="'+l+'-arrow"></div>\n\t<div class="'+l+'-container"></div>\n</div>',css:"."+l+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+l+"-corner ."+l+"-wrapper,\n."+l+"-corner ."+l+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+l+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+l+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+l+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+l+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},c={"border-radius":["-webkit-","-moz-"]},t=function(t,e){if(!t)throw"Missing Style name";if(!e)throw"Missing Style definition";if(!e.html)throw"Missing Style HTML";var i=h[t];i&&i.cssElem&&(window.console&&console.warn(s+": overwriting style '"+t+"'"),h[t].cssElem.remove()),e.name=t,h[t]=e;var o="";e.classes&&D.each(e.classes,(function(t,i){return o+="."+l+"-"+e.name+"-"+t+" {\n",D.each(i,(function(e,n){return c[e]&&D.each(c[e],(function(t,i){return o+="\t"+i+e+": "+n+";\n"})),o+="\t"+e+": "+n+";\n"})),o+="}\n"})),e.css&&(o+="/* styles for "+e.name+" */\n"+e.css),o&&(e.cssElem=d(o),e.cssElem.attr("id","notify-"+e.name));var n={},r=D(e.html);p("html",r,n),p("text",r,n),e.fields=n},d=function(i){var e;(e=g("style")).attr("type","text/css"),D("head").append(e);try{e.html(i)}catch(t){e[0].styleSheet.cssText=i}return e},p=function(i,t,e){var n;return"html"!==i&&(i="text"),u(t,"["+(n="data-notify-"+i)+"]").each((function(){var t;(t=D(this).attr(n))||(t=a),e[t]=i}))},u=function(t,i){return t.is(i)?t:t.find(i)},f={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},g=function(t){return D("<"+t+"></"+t+">")},w={},m=function(e){return e.is("[type=radio]")&&(e=e.parents("form:first").find("[type=radio]").filter((function(t,i){return D(i).attr("name")===e.attr("name")})).first()),e},X=function(t,i,e){var n;if("string"==typeof e)e=parseInt(e,10);else if("number"!=typeof e)return;if(!isNaN(e))return void 0!==t[n=B[U[i.charAt(0)]]]&&(i=B[n.charAt(0)],e=-e),void 0===t[i]?t[i]=e:t[i]+=e,null},z=function(t,i,e){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return e/2-i/2;if("r"===t||"b"===t)return e-i;throw"Invalid alignment"};n.prototype.loadHTML=function(){var t;t=this.getStyle(),this.userContainer=D(t.html),this.userFields=t.fields},n.prototype.show=function(t,i){var e,n,o,r,s,a;if(n=function(){if(!t&&!a.elem&&a.destroy(),i)return i()},s=0<(a=this).container.parent().parents(":hidden").length,o=this.container.add(this.arrow),e=[],s&&t)r="show";else if(s&&!t)r="hide";else if(!s&&t)r=this.options.showAnimation,e.push(this.options.showDuration);else{if(s||t)return n();r=this.options.hideAnimation,e.push(this.options.hideDuration)}return e.push(n),o[r].apply(o,e)},n.prototype.setGlobalPosition=function(){var t=this.getPosition(),i=t[0],e=t[1],n=B[i],o=B[e],r=i+"|"+e,s=w[r];if(!s||!document.body.contains(s[0])){s=w[r]=g("div");var a={};a[n]=0,"middle"===o?a.top="45%":"center"===o?a.left="45%":a[o]=0,s.css(a).addClass(l+"-corner"),D("body").append(s)}return s.prepend(this.wrapper)},n.prototype.setElementPosition=function(){var t,i,e,n,o,r,s,a,l,h,A,c,d,p,u,f,g,w,m,y,b,v,C,E,x,S,F,M;for(C=(S=this.getPosition())[0],v=S[1],S[2],A=this.elem.position(),a=this.elem.outerHeight(),c=this.elem.outerWidth(),l=this.elem.innerHeight(),h=this.elem.innerWidth(),M=this.wrapper.position(),o=this.container.height(),r=this.container.width(),w=B[C],(s={})[b=B[y=U[C]]]="b"===C?a:"r"===C?c:0,X(s,"top",A.top-M.top),X(s,"left",A.left-M.left),p=0,f=(F=["top","left"]).length;p<f;p++)E=F[p],(m=parseInt(this.elem.css("margin-"+E),10))&&X(s,E,m);if(d=Math.max(0,this.options.gap-(this.options.arrowShow?e:0)),X(s,b,d),this.options.arrowShow){for(e=this.options.arrowSize,i=D.extend({},s),t=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",u=0,g=R.length;u<g;u++)x=B[E=R[u]],E!==y&&(n=x===w?t:"transparent",i["border-"+x]=e+"px solid "+n);X(s,B[y],e),0<=k.call(R,v)&&X(i,B[v],2*e)}else this.arrow.hide();if(0<=k.call(Q,C)?(X(s,"left",z(v,r,c)),i&&X(i,"left",z(v,e,h))):0<=k.call(H,C)&&(X(s,"top",z(v,o,a)),i&&X(i,"top",z(v,e,l))),this.container.is(":visible")&&(s.display="block"),this.container.removeAttr("style").css(s),i)return this.arrow.removeAttr("style").css(i)},n.prototype.getPosition=function(){var t,i,e,n,o,r,s,l,h;if(l=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),h=[],D.each(l.split(/\W+/),(function(t,i){var e;if(e=i.toLowerCase().charAt(0),B[e])return h.push(e)})),0===(t=h).length&&(t[0]="b"),i=t[0],k.call(R,i)<0)throw"Must be one of ["+R+"]";return(1===t.length||(e=t[0],0<=k.call(Q,e)&&(n=t[1],k.call(H,n)<0))||(o=t[0],0<=k.call(H,o)&&(r=t[1],k.call(Q,r)<0)))&&(t[1]=(s=t[0],0<=k.call(H,s)?"m":"l")),2===t.length&&(t[2]=t[1]),t},n.prototype.getStyle=function(t){var i;if(t||(t=this.options.style),t||(t="default"),!(i=h[t]))throw"Missing style: "+t;return i},n.prototype.updateClasses=function(){var t,i;return t=["base"],D.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),i=this.getStyle(),t=D.map(t,(function(t){return l+"-"+i.name+"-"+t})).join(" "),this.userContainer.attr("class",t)},n.prototype.run=function(t,i){var e,n,o,r,s;if(D.isPlainObject(i)?D.extend(this.options,i):"string"===D.type(i)&&(this.options.className=i),!this.container||t){if(this.container||t){for(o in n={},D.isPlainObject(t)?n=t:n[a]=t,n)e=n[o],(r=this.userFields[o])&&("text"===r&&this.options.breakNewLines&&(e=e.replace(/\n/g,"<br/>")),s=o===a?"":"="+o,u(this.userContainer,"[data-notify-"+r+s+"]").html(e));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},n.prototype.destroy=function(){this.wrapper.data(l,null),this.wrapper.remove()},D[s]=function(t,i,e){return t&&t.nodeName||t.jquery?D(t)[s](i,e):(e=i,new n(null,i=t,e)),t},D.fn[s]=function(i,e){return D(this).each((function(){var t=m(D(this)).data(l);t&&t.destroy(),new n(D(this),i,e)})),this},D.extend(D[s],{defaults:function(t){return D.extend(f,t)},addStyle:t,removeStyle:function(t){if(!t)throw"Missing Style name";h[t]&&delete h[t]},pluginOptions:f,getStyle:function(t){return h[t]},insertCSS:d}),t("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),D((function(){d(A.css).attr("id","core-notify"),D(document).on("click","."+l+"-hidable",(function(t){D(this).trigger("notify-hide")})),D(document).on("notify-hide","."+l+"-wrapper",(function(t){var i=D(this).data(l);i&&i.show(!1)}))}))})),notify=function(message,className,timeOut){className=className||"success",icon="fa fa-info","success"==className?icon="fa fa-check-circle":"error"==className?icon="fa fa-exclamation-triangle":"info"==className&&(icon="fa fa-info-circle"),$.notify.addStyle("ddr",{html:'<div><i class="'+icon+'"></i><span data-notify-text/></div>'}),$.notify(message,{clickToHide:!0,autoHide:!0,autoHideDelay:timeOut?1e3*timeOut:5e3,arrowShow:!1,arrowSize:15,position:"top right",style:"ddr",className:className,showAnimation:"fadeIn",showDuration:300,hideAnimation:"fadeOut",hideDuration:200,gap:40})};