jQuery(document).ready(function(s){var t,i;function n(){s("body").find("[markdown]:visible:not(.activated)").each(function(t,i){s(i).addClass("activated");let n=new SimpleMDE({element:i,autofocus:!1,forceSync:!0,spellChecker:!1,toolbar:["bold","italic","heading-1","heading-2","heading-3","strikethrough","|","unordered-list","ordered-list","|","link","image","table","horizontal-rule","|","quote","|","preview","side-by-side","fullscreen"]});n.codemirror.on("change",function(){s(i).text(n.value())})})}s("nav.main_nav").on("mouseenter",function(){clearTimeout(t)}),s("nav.main_nav, #openNav").on("mouseleave",function(){t=setTimeout(function(){0==s("#openNav").is(":hover")&&(s("i[touch]").prop("aria-expanded","false"),s(".header__item.opened").removeClass("opened"))},300)}),s("nav.main_nav li").on(tapEvent,function(){var t;0==s(this).hasClass("active")&&(t=s(this).data("block"),s("nav.main_nav").find("li").removeClass("active"),s(this).addClass("active"),location.hash="#"+t,s(window).one("hashchange",function(){renderSection()}),s("i[touch]").prop("aria-expanded","false"),s(".header__item.opened").removeClass("opened"))}),renderSection=function(){s("#sectionWait").addClass("visible");var t={},i=!1,n=location.hash.substr(1,location.hash.length).split("."),e=n[0];2==arguments.length?(t=arguments[0]||{},i="function"==typeof arguments[1]&&arguments[1]):1==arguments.length&&(t="object"==typeof arguments[0]?arguments[0]:{},i="function"==typeof arguments[0]&&arguments[0]),s.post("/admin/get_sections_data",{section:e,params:t},function(t){s("#section").html(t),(null!=n[1]?(s("#"+e).find(".tabstitles:not(.sub) li").removeClass("active"),s("#"+e).find(".tabstitles:not(.sub) li#"+n[1]).addClass("active"),s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find("[tabid]").removeClass("visible"),s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find('[tabid="'+n[1]+'"]')):(s("#"+e).find(".tabstitles:not(.sub) li:first").addClass("active"),s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find("[tabid]:first"))).addClass("visible"),null!=n[2]?0<s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").length&&s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").each(function(){(0<s(this).children("li#"+n[2]).length?(s(this).children("li").removeClass("active"),s(this).children("li#"+n[2]).addClass("active"),s(this).siblings(".tabscontent").find("[tabid]").removeClass("visible"),s(this).siblings(".tabscontent").find('[tabid="'+n[2]+'"]')):(s(this).children("li:first").addClass("active"),s(this).siblings(".tabscontent").find("[tabid]:first"))).addClass("visible")}):0<s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").length&&s("#"+e).find(".tabstitles:not(.sub)").siblings(".tabscontent").find(".tabstitles.sub").each(function(){s(this).children("li").removeClass("active"),s(this).children("li:first").addClass("active"),s(this).siblings(".tabscontent").find("[tabid]").removeClass("visible"),s(this).siblings(".tabscontent").find("[tabid]:first").addClass("visible")}),setBaseScripts(),1==getArgs("shownames")&&s("body").find("input, textarea, select").each(function(t,i){var n=s(this).attr("name")||"",e={setting_:"","][":".","[":".","]":""},n=n.replace(/setting_|\]\[|\[|\]/gi,t=>e[t]);s(this).after("<code showinputname>"+n+"</code>"),s("[showinputname]").css({position:"absolute",bottom:"-18px",right:"0","font-size":"12px","background-color":"#f6ff93",padding:"1px 4px"})}),s("#sectionWait").removeClass("visible"),s(document).trigger("rendersection"),i&&i()},"html").fail(function(t){notify("Системная ошибка!","error"),showError(t)})},0==s(".auth_form").length&&(""==location.hash?(location.hash="#settings",s(window).one("hashchange",function(){renderSection()}),s('li[data-block="settings"]').addClass("active")):(i=location.hash.substr(1,location.hash.length).split(".")[0],s('li[data-block="'+i+'"]').addClass("active"),renderSection())),s(document).on("rendersection",function(){n(),s(document).on("tabsChange",function(){n()})}),s("#goToSite").on("click",function(){var t=location.protocol+"//"+location.host+location.pathname;window.open(t.substr(0,t.length-6))}),s("#adminLogout").on(tapEvent,function(){location="admin/logout"})});